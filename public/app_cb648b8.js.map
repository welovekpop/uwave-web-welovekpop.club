{"version":3,"sources":["webpack:///./utils/timed.js","webpack:///./components/SongTitle/index.js","webpack:///./components/List/ListItem.js","webpack:///./reducers/theme.js","webpack:///./reducers/errors.js","webpack:///./reducers/config.js","webpack:///./reducers/auth.js","webpack:///./store/request.js","webpack:///./selectors/searchSelectors.js","webpack:///./components/MediaList/index.js","webpack:///./actions/RequestActionCreators.js","webpack:///./selectors/importSelectors.js","webpack:///./components/Chat/Markup/Bold.js","webpack:///./components/Chat/Markup/Code.js","webpack:///./components/Chat/Markup/Italic.js","webpack:///./components/Chat/Markup/StrikeThrough.js","webpack:///./components/Chat/Markup/Mention.js","webpack:///./components/Chat/Markup/GroupMention.js","webpack:///./components/Chat/Markup/Link.js","webpack:///./components/Chat/Markup/Emoji.js","webpack:///./components/Chat/Markup/compile.js","webpack:///./components/UserCard/UserCard.js","webpack:///./components/RoleColor/index.js","webpack:///./components/MediaList/MediaLoadingIndicator.js","webpack:///./utils/playMentionSound.js","webpack:///./actions/ChatActionCreators.js","webpack:///./utils/ChatCommands.js","webpack:///./components/Form/Group.js","webpack:///./selectors/boothSelectors.js","webpack:///./utils/isDraggingNearTopOfRow.js","webpack:///./components/MediaList/Actions/Action.js","webpack:///./components/MediaList/LoadingRow.js","webpack:///./components/MediaList/BaseMediaList.js","webpack:///./components/MediaList/Actions/AddToPlaylist.js","webpack:///./components/Dialogs/PromptDialog/index.js","webpack:///./components/MediaList/MediaThumbnail.js","webpack:///./components/MediaList/Row.js","webpack:///./utils/formatJoinDate.js","webpack:///./actions/PlaylistActionCreators.js","webpack:///./components/DialogCloseAnimation/index.js","webpack:///./components/UserRole/index.js","webpack:///./components/UserCard/UserRoles.js","webpack:///./components/MediaList/Actions.js","webpack:///./selectors/playlistSelectors.js","webpack:///./selectors/settingSelectors.js","webpack:///./components/Form/TextField.js","webpack:///./selectors/waitlistSelectors.js","webpack:///../assets/img/soundcloud.png","webpack:///../assets/img/soundcloud-inline.png","webpack:///./actions/DialogActionCreators.js","webpack:///../assets/img/youtube.png","webpack:///./selectors/configSelectors.js","webpack:///./components/Form/Button.js","webpack:///./components/Form/index.js","webpack:///../assets/img/logo-square.png","webpack:///../assets/audio/mention.mp3","webpack:///./polyfills.js","webpack:///./components/Responsive/index.js","webpack:///./actions/TickerActionCreators.js","webpack:///./components/ClockProvider/index.js","webpack:///./actions/OverlayActionCreators.js","webpack:///./selectors/serverSelectors.js","webpack:///./selectors/voteSelectors.js","webpack:///./selectors/roomHistorySelectors.js","webpack:///./actions/BoothActionCreators.js","webpack:///./actions/ModerationActionCreators.js","webpack:///./actions/WaitlistActionCreators.js","webpack:///./actions/VoteActionCreators.js","webpack:///./_wlk/selectors.js","webpack:///./components/FooterBar/Eta.js","webpack:///./components/FooterBar/NextMedia.js","webpack:///./components/FooterBar/UserInfo.js","webpack:///./components/FooterBar/SkipReasonsList.js","webpack:///./components/FooterBar/SkipButton.js","webpack:///./components/FooterBar/WaitlistButton.js","webpack:///./components/FooterBar/Responses/Button.js","webpack:///./components/FooterBar/Responses/Favorite.js","webpack:///./components/FooterBar/Responses/Upvote.js","webpack:///./components/FooterBar/Responses/Downvote.js","webpack:///./components/FooterBar/Responses/Bar.js","webpack:///./_wlk/RandomizePlaylistsNotice.js","webpack:///./components/FooterBar/index.js","webpack:///./containers/FooterBar.js","webpack:///./actions/SettingsActionCreators.js","webpack:///./actions/PlaybackActionCreators.js","webpack:///./components/HeaderBar/AppTitle.js","webpack:///./utils/transformStyle.js","webpack:///./components/HeaderBar/Progress.js","webpack:///./components/HeaderBar/CurrentMedia.js","webpack:///./components/HeaderBar/Volume.js","webpack:///./components/HeaderBar/HistoryButton.js","webpack:///./components/HeaderBar/CurrentDJ.js","webpack:///./components/HeaderBar/index.js","webpack:///./containers/HeaderBar.js","webpack:///./components/Video/VideoBackdrop.js","webpack:///./components/Video/VideoProgressBar.js","webpack:///./components/Video/VideoSizeButton.js","webpack:///./components/Video/VideoToolbar.js","webpack:///./components/Video/VideoMouseMoveCapture.js","webpack:///./components/Player/index.js","webpack:///./components/Video/index.js","webpack:///./containers/Video.js","webpack:///./components/App/Overlays.js","webpack:///./components/Overlay/index.js","webpack:///./components/LazyOverlay/index.js","webpack:///./containers/PlaylistManager.js","webpack:///./containers/RoomHistory.js","webpack:///./actions/UserActionCreators.js","webpack:///./utils/Session.js","webpack:///./_wlk/startTutorial.js","webpack:///./actions/LoginActionCreators.js","webpack:///./containers/SettingsManager.js","webpack:///./components/AdminProxy/index.js","webpack:///./components/ServerList/index.js","webpack:///./components/About/index.js","webpack:///./containers/About.js","webpack:///./components/ConnectionIndicator/OfflineIcon.js","webpack:///./components/ConnectionIndicator/index.js","webpack:///./actions/PanelSelectActionCreators.js","webpack:///./components/Chat/DeleteButton.js","webpack:///./components/Chat/MessageTimestamp.js","webpack:///./components/Chat/Message.js","webpack:///./components/Chat/Motd.js","webpack:///./components/Chat/ScrollDownNotice.js","webpack:///./components/Chat/LogMessage.js","webpack:///./components/Chat/NotificationMessages/UserNotificationMessage.js","webpack:///./components/Chat/NotificationMessages/JoinMessage.js","webpack:///./components/Chat/NotificationMessages/LeaveMessage.js","webpack:///./components/Chat/NotificationMessages/NameChangedMessage.js","webpack:///./components/Chat/NotificationMessages/SkipMessage.js","webpack:///./components/Chat/NotificationMessages/RoleUpdateMessage.js","webpack:///./components/Chat/specialMessages.js","webpack:///./components/Chat/ChatMessages.js","webpack:///./containers/ChatMessages.js","webpack:///./components/Chat/Input/SuggestionsList.js","webpack:///./components/Chat/Input/Suggestion.js","webpack:///./components/Chat/Input/EmojiSuggestion.js","webpack:///./components/Chat/Input/GroupSuggestion.js","webpack:///./components/Chat/Input/UserSuggestion.js","webpack:///./components/Chat/Input/index.js","webpack:///./containers/ChatInput.js","webpack:///./components/Chat/index.js","webpack:///./components/RoomUserList/Votes.js","webpack:///./components/RoomUserList/Row.js","webpack:///./components/RoomUserList/GuestsRow.js","webpack:///./components/RoomUserList/index.js","webpack:///./containers/RoomUserList.js","webpack:///./components/WaitList/Position.js","webpack:///./components/WaitList/ModRowBase.js","webpack:///./components/WaitList/ModRow.js","webpack:///./components/WaitList/SimpleRow.js","webpack:///./components/WaitList/index.js","webpack:///./containers/WaitList.js","webpack:///./components/SidePanels/PanelContainer.js","webpack:///./components/SidePanels/index.js","webpack:///./containers/SidePanels.js","webpack:///./components/Dialogs/EditMediaDialog/index.js","webpack:///./containers/EditMediaDialog.js","webpack:///./components/Dialogs/LoginDialog/SocialLogin.js","webpack:///./components/Dialogs/LoginDialog/Separator.js","webpack:///./components/Dialogs/LoginDialog/LoginForm.js","webpack:///./components/ReCaptcha/ReCaptcha.js","webpack:///./components/ReCaptcha/index.js","webpack:///./components/Dialogs/LoginDialog/RegisterForm.js","webpack:///./components/Dialogs/LoginDialog/ResetPasswordForm.js","webpack:///./components/Dialogs/LoginDialog/index.js","webpack:///./containers/LoginDialog.js","webpack:///./components/Video/Player.js","webpack:///./components/Dialogs/PreviewMediaDialog/index.js","webpack:///./containers/PreviewMediaDialog.js","webpack:///./components/Dialogs/index.js","webpack:///./selectors/addToPlaylistMenuSelectors.js","webpack:///./components/AddToPlaylistMenu/PlaylistsMenu.js","webpack:///./components/AddToPlaylistMenu/index.js","webpack:///./containers/AddToPlaylistMenu.js","webpack:///./components/MediaList/MediaDragPreview.js","webpack:///./containers/DragLayer.js","webpack:///./components/App/index.js","webpack:///./mobile/containers/PlaylistManager.js","webpack:///./mobile/containers/RoomHistory.js","webpack:///./mobile/constants/ActionTypes.js","webpack:///./mobile/actions/DrawerActionCreators.js","webpack:///./mobile/components/Video/VoteButtons.js","webpack:///./mobile/components/Video/index.js","webpack:///./mobile/containers/Video.js","webpack:///./mobile/containers/LoginButtons.js","webpack:///./mobile/containers/Chat.js","webpack:///./mobile/selectors/drawerSelectors.js","webpack:///./mobile/actions/OverlayActionCreators.js","webpack:///./mobile/components/DrawerMenu/index.js","webpack:///./mobile/containers/DrawerMenu.js","webpack:///./mobile/selectors/userSelectors.js","webpack:///./mobile/components/UsersDrawer/UserRow.js","webpack:///./mobile/components/UsersDrawer/WaitlistPosition.js","webpack:///./mobile/components/UsersDrawer/UserList.js","webpack:///./mobile/components/UsersDrawer/index.js","webpack:///./mobile/containers/UsersDrawer.js","webpack:///./mobile/components/MainView/VideoDisabledMessage.js","webpack:///./mobile/components/MainView/index.js","webpack:///./mobile/containers/MainView.js","webpack:///./mobile/containers/About.js","webpack:///./mobile/containers/ServerList.js","webpack:///./mobile/components/App/Overlays.js","webpack:///./mobile/components/App/index.js","webpack:///./components/FatalError/index.js","webpack:///./containers/App.js","webpack:///./utils/createGenerateClassName.js","webpack:///./store/persistSettings.js","webpack:///./_wlk/constants.js","webpack:///./store/socket.js","webpack:///./reducers/activeOverlay.js","webpack:///./reducers/addToPlaylistMenu.js","webpack:///./reducers/booth.js","webpack:///./reducers/chat.js","webpack:///./reducers/chat/notifications.js","webpack:///./reducers/dialogs.js","webpack:///./reducers/imports.js","webpack:///./reducers/mediaSearch.js","webpack:///./reducers/playlists.js","webpack:///./reducers/roomHistory.js","webpack:///./reducers/selectedPanel.js","webpack:///./reducers/server.js","webpack:///./reducers/settings.js","webpack:///./reducers/time.js","webpack:///./reducers/users.js","webpack:///./reducers/votes.js","webpack:///./reducers/waitlist.js","webpack:///./_wlk/reducer.js","webpack:///./mobile/reducers/mobile.js","webpack:///./reducers/createSourcesReducer.js","webpack:///./components/PlaylistManager/Import/ImportPanelHeader.js","webpack:///./components/PlaylistManager/Import/ImportSourceBlock.js","webpack:///./api.js","webpack:///./utils/preloadDesktop.js","webpack:///./utils/commands/bans.js","webpack:///./utils/commands/chat.js","webpack:///./utils/commands/help.js","webpack:///./utils/commands/mutes.js","webpack:///./utils/commands/playback.js","webpack:///./utils/commands/staff.js","webpack:///./utils/commands/users.js","webpack:///./utils/commands/waitlist.js","webpack:///./Uwave.js","webpack:///./store/configureStore.js","webpack:///./sources/youtube/PlayerEmbed.js","webpack:///./sources/youtube/Player.js","webpack:///./sources/youtube/constants.js","webpack:///./sources/youtube/actions.js","webpack:///./sources/youtube/ImportForm.js","webpack:///./sources/youtube/LoadingPanel.js","webpack:///./sources/youtube/PlaylistRow.js","webpack:///./sources/youtube/ChannelPanel.js","webpack:///./sources/youtube/PlaylistPanel.js","webpack:///./sources/youtube/ImportPanel.js","webpack:///./sources/youtube/reducer.js","webpack:///./sources/soundcloud/SongInfo.js","webpack:///./sources/soundcloud/Player.js","webpack:///./sources/soundcloud/PreviewPlayer.js","webpack:///./sources/soundcloud/PlayerWrapper.js","webpack:///./_wlk/icons/Facebook.js","webpack:///./_wlk/icons/YouTube.js","webpack:///./_wlk/icons/Instagram.js","webpack:///./_wlk/icons/Github.js","webpack:///./_wlk/icons/Twitter.js","webpack:///./_wlk/icons/Slack.js","webpack:///./_wlk/SocialMediaLink.js","webpack:///./_wlk/AboutPage.js","webpack:///./app.js","webpack:///./sources/youtube/index.js","webpack:///./sources/soundcloud/index.js","webpack:///./constants/actionTypes/auth.js","webpack:///./constants/actionTypes/booth.js","webpack:///./constants/actionTypes/chat.js","webpack:///./constants/actionTypes/dialogs.js","webpack:///./constants/actionTypes/errors.js","webpack:///./constants/actionTypes/imports.js","webpack:///./constants/actionTypes/moderation.js","webpack:///./constants/actionTypes/overlay.js","webpack:///./constants/actionTypes/panel.js","webpack:///./constants/actionTypes/playlists.js","webpack:///./constants/actionTypes/request.js","webpack:///./constants/actionTypes/search.js","webpack:///./constants/actionTypes/settings.js","webpack:///./constants/actionTypes/time.js","webpack:///./constants/actionTypes/users.js","webpack:///./constants/actionTypes/votes.js","webpack:///./constants/actionTypes/waitlist.js","webpack:///./constants/LoadingStates.js","webpack:///./components/Avatar/index.js","webpack:///./components/Username/index.js","webpack:///./selectors/chatSelectors.js","webpack:///./components/Overlay/Header/Close.js","webpack:///./components/Overlay/Header/index.js","webpack:///./constants/DDItemTypes.js","webpack:///./components/UserCard/index.js","webpack:///./utils/userCardable.js","webpack:///./components/Overlay/Content.js","webpack:///./utils/injectMediaSources.js","webpack:///./selectors/dialogSelectors.js","webpack:///./utils/mergeIncludedModels.js","webpack:///./selectors/timeSelectors.js","webpack:///./selectors/userSelectors.js","webpack:///./utils/groupMentions.js","webpack:///./utils/chatMentions.js","webpack:///./actions/ErrorActionCreators.js","webpack:///./selectors/errorSelectors.js","webpack:///./components/ErrorArea/index.js","webpack:///./containers/ErrorArea.js","webpack:///./theme.js","webpack:///./locale.js"],"names":["__webpack_exports__","Component","Timed","_React$Component","_temp","_this","_len","arguments","length","args","Array","_key","call","apply","this","concat","state","currentTime","getCurrentTime","tick","setState","_babel_runtime_helpers_builtin_assertThisInitialized__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_builtin_inheritsLoose__WEBPACK_IMPORTED_MODULE_2___default","_proto","prototype","componentDidMount","context","timerCallbacks","add","componentWillUnmount","remove","Object","_selectors_timeSelectors__WEBPACK_IMPORTED_MODULE_6__","store","getState","render","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","_babel_runtime_helpers_builtin_extends__WEBPACK_IMPORTED_MODULE_0___default","props","displayName","recompose_wrapDisplayName__WEBPACK_IMPORTED_MODULE_5___default","contextTypes","prop_types__WEBPACK_IMPORTED_MODULE_4___default","object","isRequired","shape","func","_babel_runtime_helpers_builtin_jsx__WEBPACK_IMPORTED_MODULE_0___default","className","SongTitle","_ref","artist","title","_ref$size","size","classnames__WEBPACK_IMPORTED_MODULE_1___default","_ref2","propTypes","recompose_pure__WEBPACK_IMPORTED_MODULE_4___default","jsx_default","ChevronRight","List_ListItem_ListItem","children","selected","objectWithoutProperties_default","react_default","ListItem_ListItem","extends_default","button","classnames_default","List_ListItem","reduce","action","_theme__WEBPACK_IMPORTED_MODULE_0__","type","payload","error","message","slice","initialState","_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_1__","roles","strategies","token","user","isError","authStrategies","_id","makeUrl","path","params","uri","keys","indexOf","qs_stringify__WEBPACK_IMPORTED_MODULE_2___default","rejectNonOK","response","status","json","then","res","Error","errors","object_assign__WEBPACK_IMPORTED_MODULE_1___default","map","err","join","defaultOptions","apiUrl","middleware","middlewareOptions","dispatch","next","_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_3__","opts","_selectors_configSelectors__WEBPACK_IMPORTED_MODULE_5__","_selectors_userSelectors__WEBPACK_IMPORTED_MODULE_6__","_action$payload","method","url","qs","data","_action$meta","meta","onStart","onComplete","onError","completedMeta","id","requestUrl","requestOptions","headers","Accept","Content-Type","credentials","Authorization","body","JSON","stringify","fetch","responseValue","_actions_RequestActionCreators__WEBPACK_IMPORTED_MODULE_4__","catch","baseSearchSelector","mediaSearch","searchSourceTypeSelector","reselect__WEBPACK_IMPORTED_MODULE_0__","search","sourceType","searchQuerySelector","query","searchLoadingStateSelector","loadingState","searchResultsCombinedSelector","results","searchResultsSelector","searchResultsCountSelector","showSearchResultsSelector","showResults","MediaList","recompose_defaultProps__WEBPACK_IMPORTED_MODULE_0___default","listComponent","rowComponent","_Row__WEBPACK_IMPORTED_MODULE_2__","_BaseMediaList__WEBPACK_IMPORTED_MODULE_1__","requestID","request","_opts","requestOpts","_babel_runtime_helpers_builtin_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1___default","_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_2__","requestComplete","requestCompleteError","get","post","put","del","baseSelector","imports","selectedSourceTypeSelector","showImportPanelSelector","showPanel","Bold_Bold","Markup_Bold","Code_Code","Markup_Code","Italic_Italic","Markup_Italic","StrikeThrough_StrikeThrough","Markup_StrikeThrough","Mention_Mention","username","Markup_Mention","GroupMention_GroupMention","group","Markup_GroupMention","Link_Link","href","target","rel","shorten_url_default","Markup_Link","shortcode","name","Emoji_Emoji","filename","image","Tooltip","placement","data-emoji","src","alt","Markup_Emoji","compile","tree","_opts$availableEmoji","availableEmoji","_opts$emojiImages","emojiImages","node","i","mention","users","text","content","UserCard","_material_ui_core_Card_Card__WEBPACK_IMPORTED_MODULE_4__","_material_ui_core_CardHeader__WEBPACK_IMPORTED_MODULE_5__","subheader","_UserRoles__WEBPACK_IMPORTED_MODULE_9__","avatar","_Avatar__WEBPACK_IMPORTED_MODULE_8__","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_7__","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_3__","_utils_formatJoinDate__WEBPACK_IMPORTED_MODULE_10__","createdAt","_material_ui_core_CardActions__WEBPACK_IMPORTED_MODULE_6__","enhance","recompose_compose__WEBPACK_IMPORTED_MODULE_5___default","react_redux__WEBPACK_IMPORTED_MODULE_2__","reselect__WEBPACK_IMPORTED_MODULE_3__","colors","_selectors_configSelectors__WEBPACK_IMPORTED_MODULE_8__","recompose_mapProps__WEBPACK_IMPORTED_MODULE_7___default","role","style","color","array_find__WEBPACK_IMPORTED_MODULE_4___default","r","default","component","RoleColor","recompose_componentFromProp__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_4__","MediaLoadingIndicator","mentionSound","window","Audio","logIdx","Date","now","log","ActionTypes","sendChat","sender","userSelectors","hasRole","mute","chatSelectors","ms_default","expiresAt","long","parseOpts","parsed","es","chatMentions","prepareMessage","mentions","inputMessage","_splitargs","splitargs_default","command","result","ChatCommands","receive","settings","settingSelectors","currentUser","find_default","userID","senderHasRole","isMuted","isMention","play","flash_document_title_default","flashDocumentTitle","removeMessage","removeMessagesByUser","removeAllMessages","muteUser","moderatorID","timeSelectors","expireIn","expirationTimer","setTimeout","expireMute","unmuteUser","muteTimeouts","clearTimeout","setMotd","RequestActionCreators","motd","_ref3","debug","debug__WEBPACK_IMPORTED_MODULE_1___default","commands","getCommands","register","description","guard","canExecute","execute","_commands$name","allowed","findUser","lname","toLowerCase","array_find__WEBPACK_IMPORTED_MODULE_0___default","o","FormGroup","classnames__WEBPACK_IMPORTED_MODULE_2___default","booth","historyIDSelector","historyID","mediaSelector","media","startTimeSelector","startTime","mediaDurationSelector","end","start","endTimeSelector","duration","timeElapsedSelector","_timeSelectors__WEBPACK_IMPORTED_MODULE_3__","Math","max","timeRemainingSelector","elapsed","mediaProgressSelector","min","djSelector","_userSelectors__WEBPACK_IMPORTED_MODULE_4__","djID","isCurrentDJSelector","dj","me","canSkipSelector","isCurrentDJ","playbackMutedSelector","_settingSelectors__WEBPACK_IMPORTED_MODULE_2__","_dialogSelectors__WEBPACK_IMPORTED_MODULE_1__","isPreviewMediaDialogOpen","playbackVolumeSelector","volume","mobilePlaybackVolumeSelector","isDraggingNearTopOfRow","monitor","componentRect","react_dom__WEBPACK_IMPORTED_MODULE_0__","getBoundingClientRect","getClientOffset","y","top","ceil","height","Action","onAction","attrs","react__WEBPACK_IMPORTED_MODULE_2___default","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_4__","onClick","LoadingRow_LoadingRow","_ref$selected","_ref4","_ref5","MediaList_LoadingRow","BaseMediaList_BaseMediaList","selection","immutable_default","renderList","items","ref","renderRow","index","makeActions","rowProps","isSelectedIndex","isAlternate","key","e","selectItem","onOpenPreviewMediaDialog","componentWillReceiveProps","nextProps","getIndices","mediaChanged","some","item","preventDefault","shiftKey","selectRange","ctrlKey","selectToggle","select","_this$props","onRequestPage","list","react_list_default","itemsRenderer","itemRenderer","forceUpdateOnMediaChange","forceUpdateOnSelectionChange","LazyList","pageSize","defaultProps","BaseMediaList_ref","_material_ui_icons_Add__WEBPACK_IMPORTED_MODULE_5__","AddToPlaylist","onAdd","_babel_runtime_helpers_builtin_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2___default","_Action__WEBPACK_IMPORTED_MODULE_6__","_babel_runtime_helpers_builtin_extends__WEBPACK_IMPORTED_MODULE_1___default","event","pos","x","left","handleAdd","_babel_runtime_helpers_builtin_jsx__WEBPACK_IMPORTED_MODULE_1___default","_material_ui_core_CircularProgress__WEBPACK_IMPORTED_MODULE_11__","PromptDialog","busy","value","lodash_uniqueId__WEBPACK_IMPORTED_MODULE_12___default","handleSubmit","promise","onSubmit","input","onDone","handleClose","onCancel","handleInputChange","refInput","icon","inputType","placeholder","submitLabel","bodyClassName","contentClassName","titleClassName","_this$state","react__WEBPACK_IMPORTED_MODULE_6___default","_material_ui_core_Dialog__WEBPACK_IMPORTED_MODULE_8__","fullWidth","classes","paper","classnames__WEBPACK_IMPORTED_MODULE_5___default","onClose","aria-labelledby","_material_ui_core_DialogTitle__WEBPACK_IMPORTED_MODULE_9__","_material_ui_core_DialogContent__WEBPACK_IMPORTED_MODULE_10__","_Form__WEBPACK_IMPORTED_MODULE_13__","_Form_Group__WEBPACK_IMPORTED_MODULE_14__","_Form_TextField__WEBPACK_IMPORTED_MODULE_15__","autoFocus","onChange","_Form_Button__WEBPACK_IMPORTED_MODULE_16__","disabled","open","MediaThumbnail_MediaThumbnail","MediaList_MediaThumbnail","mediaSource","beginDrag","inSelection","lib","DDItemTypes","connect","connectDragSource","dragSource","connectDragPreview","dragPreview","Row_Row","handleKeyPress","code","handleDoubleClick","react_dnd_html5_backend_lib","selectedClass","loadingClass","loading","onDoubleClick","onKeyPress","thumbnail","format_duration_default","Actions","formatters","date","year","month","day","time","hour","minute","all","formatJoinDate","only","format","toLocaleString","MEDIA_PAGE_SIZE","setPlaylists","playlists","flattenPlaylistItem","loadPlaylistStart","playlistID","page","_ref$sneaky","sneaky","loadPlaylistComplete","pagination","loadPlaylist","_RequestActionCreators__WEBPACK_IMPORTED_MODULE_3__","limit","_utils_mergeIncludedModels__WEBPACK_IMPORTED_MODULE_5__","offset","total","filterPlaylistItemsStart","filter","filterPlaylistItemsComplete","loadFilteredPlaylistItems","_selectors_playlistSelectors__WEBPACK_IMPORTED_MODULE_4__","filterPlaylistItems","loadAll","loadFiltered","selectPlaylist","playlistCycled","cyclePlaylist","playlist","activePlaylist","selectedPlaylist","every","Boolean","shouldLoadAfterCycle","activatePlaylistStart","activatePlaylistComplete","activatePlaylist","loadPlaylistsStart","loadPlaylistsComplete","loadPlaylists","createPlaylistStart","tempId","createPlaylistComplete","createPlaylist","shared","isFirstPlaylist","renamePlaylist","deselectPlaylist","selectedID","activeID","deletePlaylistStart","deletePlaylistComplete","cannotDeleteActivePlaylist","deletePlaylist","addMediaMenu","position","closeAddMediaMenu","addMediaStart","location","addMediaComplete","newSize","insert","afterID","appendedMedia","minimizePlaylistItem","sourceID","addMedia","after","playlistSize","editMedia","_DialogActionCreators__WEBPACK_IMPORTED_MODULE_2__","updateMediaStart","mediaID","updateMediaComplete","updateMedia","removeMediaStart","medias","removeMediaComplete","removedMedia","removeMedia","itemIDs","moveMediaStart","moveMediaComplete","moveMedia","before","l","at","resolveMoveOptions","shufflePlaylistStart","shufflePlaylistComplete","shufflePlaylist","shuffleOperation","loadOperation","DialogCloseAnimation","timeout","_this2","cloneElement","delay","react_i18next__WEBPACK_IMPORTED_MODULE_3__","UserRole","t","roleName","_RoleColor__WEBPACK_IMPORTED_MODULE_5__","defaultValue","upper_case_first__WEBPACK_IMPORTED_MODULE_4___default","UserRoles","_UserRole__WEBPACK_IMPORTED_MODULE_3__","dontBubble","stopPropagation","byName","b","natural_compare__WEBPACK_IMPORTED_MODULE_2___default","playlistsSelector","reselect__WEBPACK_IMPORTED_MODULE_1__","object_values__WEBPACK_IMPORTED_MODULE_3___default","sort","playlistItemsSelector","playlistItems","activePlaylistIDSelector","activePlaylistID","activeMediaSelector","mergePlaylistItems","activePlaylistSelector","activeMedia","selectedPlaylistIDSelector","selectedPlaylistID","selectedMediaSelector","filterSelector","base","currentFilter","currentFilterSelector","playlistItemFilterSelector","filteredSelectedPlaylistItemsSelector","selectedItems","selectedPlaylistSelector","selectedMedia","nextMediaSelector","isSelectedPlaylistLoadingSelector","isFilteredSelector","settingsBaseSelector","themeSelector","reselect__WEBPACK_IMPORTED_MODULE_2__","theme","_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_3__","volumeSelector","isMutedSelector","muted","languageSelector","navigator","languages","browserLanguage","array_find__WEBPACK_IMPORTED_MODULE_1___default","lang","_locale__WEBPACK_IMPORTED_MODULE_4__","defaultLanguage","language","videoSizeSelector","videoSize","videoEnabledSelector","videoEnabled","settingsSelector","notificationSettingsSelector","notifications","TextField","classnames__WEBPACK_IMPORTED_MODULE_6___default","react__WEBPACK_IMPORTED_MODULE_7___default","waitlist","isLockedSelector","wl","locked","waitlistIDsSelector","sizeSelector","waitlistUsersSelector","_userSelectors__WEBPACK_IMPORTED_MODULE_2__","ids","djAndWaitlistUsersSelector","_boothSelectors__WEBPACK_IMPORTED_MODULE_1__","positionSelector","userInWaitlistSelector","isDJ","baseEtaSelector","eta","remaining","module","exports","__webpack_require__","p","openEditMediaDialog","_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__","closeEditMediaDialog","openPreviewMediaDialog","closePreviewMediaDialog","openLoginDialog","show","openRegisterDialog","closeLoginDialog","openResetPasswordDialog","configSelector","config","requestOptionsSelector","options","availableEmojiImagesSelector","emoji","availableEmojiNamesSelector","reCaptchaSelector","recaptcha","reCaptchaSiteKeySelector","rc","rolesSelector","roleColorsSelector","lodash_memoize__WEBPACK_IMPORTED_MODULE_1___default","admin","manager","moderator","special","Button","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_5__","variant","Form","Promise","finally","handler","p_finally_default","Mobile","withProps_default","maxWidth","react_responsive_default","Desktop","minWidth","syncTimestamps","clientTimeBefore","serverTime","clientTimeAfter","round","ClockProvider_mapDispatchToProps","createTimer","cb","last","syncing","finishedSync","intv","setInterval","abs","stopTimer","timer","clearInterval","ClockProvider_enhance","ClockProvider_ClockProvider","callbacks","s","cb1","getChildContext","forEach","childContextTypes","prop_types_default","components_ClockProvider","toggleOverlay","overlay","toggleRoomHistory","OverlayActionCreators_togglePlaylistManager","OverlayActionCreators_toggleSettings","toggleAbout","closeAll","isConnectedSelector","reselect_es","server","connected","voteSelectors_baseSelector","votes","voteSelectors_createPropSelector","prop","obj","voteSelectors_createIsSelector","voteSelectors_createCountSelector","array","favoritesSelector","upvotesSelector","downvotesSelector","currentVotesSelector","favorites","upvotes","downvotes","isFavoriteSelector","isUpvoteSelector","isDownvoteSelector","favoritesCountSelector","upvotesCountSelector","downvotesCountSelector","currentVoteStatsSelector","isFavorite","isUpvote","isDownvote","favoritesCount","upvotesCount","downvotesCount","byTimestamp","timestamp","roomHistorySelector","roomHistory","history","roomHistorySelectors_addOwnVoteProps","entry","stats","currentPlaySelector","boothSelectors","roomHistoryWithVotesSelector","current","unshift","BoothActionCreators_advance","nextBooth","previous","playedAt","PlaylistActionCreators","skipSelf","reject","loadHistoryStart","loadHistoryComplete","currentHistoryID","playHistory","mergeIncludedModels","floor","skipCurrentDJ","reason","shouldRemove","removeWaitlistUser","removeWaitlistUserStart","currentDJ","removeWaitlistUserComplete","moveWaitlistUser","moveWaitlistUserStart","moveWaitlistUserComplete","muteUserStart","muteUserComplete","unmuteUserStart","unmuteUserComplete","banUser","_ref$duration","_ref$permanent","permanent","banUserStart","updatedWaitlist","joinWaitlist","otherUser","joinedWaitlist","leaveWaitlist","leftWaitlist","putLock","lock","clear","_ref6","doUpvote","doDownvote","openFavoriteMenu","playlistSelectors","favoriteMedia","favoriteMediaStart","changes","added","favoriteMediaComplete","shouldRandomizePlaylistsSelector","wlk","shouldRandomize","Eta_Eta","currentRemaining","endTime","FooterBar_Eta","compose_default","timed","pure_default","NextMedia_NextMedia","nextMedia","userInWaitlist","userIsDJ","baseEta","mediaEndTime","mediaEl","playlistEl","etaEl","dist_es","i18nKey","FooterBar_NextMedia","UserInfo_enhance","Settings","UserInfo_UserInfo","Avatar","UserInfo_ref2","FooterBar_UserInfo","SkipReasonsList_SkipReasonsList","reasons","onSelect","List","ListItem","ListItemText","primary","label","FooterBar_SkipReasonsList","popoverPosition","marginThreshold","anchorOrigin","horizontal","vertical","transformOrigin","SkipButton_reasons","CircularProgress","SkipNext","SkipButton_SkipButton","isSkipping","isOpen","anchor","handleOpen","handleSkip","currentTarget","resolve","onSkip","SkipButton_ref","IconButton","SkipButton_ref2","Popover","anchorEl","FooterBar_SkipButton","WaitlistButton_WaitlistButton","isLocked","Lock","Button_Button","root","FooterBar_WaitlistButton","Responses_Button_Button","count","tooltip","Responses_Button","Favorite_enhance","Favorite_Favorite","onFavorite","CurrentIcon","active","es_Favorite","FavoriteBorder","handleFavorite","Responses_Favorite","Upvote_enhance","Upvote_Upvote","onUpvote","ThumbUp","Responses_Upvote","Downvote_enhance","Downvote_Downvote","onDownvote","ThumbDown","Responses_Downvote","Bar_ResponseBar","_ref$disabled","Bar","FooterBar_enhance","RandomizePlaylistsNotice_ref","FooterBar_FooterBar","handleSkipTurn","showSkip","onSkipTurn","onModSkip","handleJoinWaitlist","handleLeaveWaitlist","togglePlaylistManager","toggleSettings","_this$props2","shouldRandomizePlaylists","voteStats","isGuest","canVote","FooterBar_ref","waitlistIsLocked","toUpperCase","FooterBar_ref2","muiTheme","components_FooterBar","mapStateToProps","waitlistSelectors","containers_FooterBar","redux","DialogActionCreators","SettingsActionCreators_set","changeset","set_default","setLanguage","setVolume","unmute","nextVideoSize","large","small","toggleVideoSize","enterFullscreen","exitFullscreen","ArrowDropDown","AppTitle_AppTitle","logo_square_default","AppTitle_ref2","HeaderBar_AppTitle","transformStyle","transform","WebkitTransform","Progress_Progress","currentProgress","timeRemaining","el","assign","transitionDuration","forceReflow","HeaderBar_Progress","CurrentMedia_CurrentMedia","HeaderBar_CurrentMedia","Volume_Volume","handleVolumeChange","onVolumeChange","handleMuteClick","onUnmute","onMute","shouldComponentUpdate","VolumeIcon","VolumeUp","VolumeOff","VolumeMute","VolumeDown","Slider_default","step","History","HistoryButton_HistoryButton","aria-label","HistoryButton_ref2","HeaderBar_HistoryButton","CurrentDJ_CurrentDJ","HeaderBar_CurrentDJ","HeaderBar_HeaderBar","mediaProgress","mediaTimeRemaining","onVolumeMute","onVolumeUnmute","onToggleRoomHistory","onToggleAboutOverlay","components_HeaderBar","HeaderBar_mapStateToProps","containers_HeaderBar","getContext_default","uwave","mapProps_default","except_default","VideoBackdrop_CSSVideoBackdrop","stdDeviation","svgBlur","VideoBackdrop_SVGVideoBackdrop","viewBox","VideoBackdrop_ref3","xlinkHref","width","svgWidth","svgHeight","Video_VideoBackdrop","CSS","supports","VideoProgressBar_VideoProgressBar","seek","LinearProgress","Video_VideoProgressBar","paths","VideoSizeButton_VideoSizeButton","onToggleVideoSize","SvgIcon","d","fillRule","VideoSizeButton_mapStateToProps","Video_VideoSizeButton","FullscreenExit","Fullscreen","VideoToolbar_VideoToolbar","isFullscreen","onFullscreenEnter","onFullscreenExit","VideoToolbar_ref4","VideoToolbar_ref","VideoToolbar_ref2","renderFullscreenIcon","Video_VideoToolbar","disableCursor","cursor","enableCursor","VideoMouseMoveCapture_MouseMoveCapture","onMouseMove","VideoMouseMoveCapture","Player_enhance","injectMediaSources","Player_Player","is_equal_shallow_default","getAllMediaSources","enabled","onPlay","Player_ref","mode","sources","players","SourcePlayer","Player","player","components_Player","defaultSourceTools","Video_enhance","Video_Video","shouldShowToolbar","handleFullscreenEnter","screenfull_default","element","handleFullscreenChange","handleMouseMove","handleMouseMoveEnd","refElement","on","componentDidUpdate","prevProps","exit","getMediaSource","Video_ref","currentSource","MediaSourceTools","VideoTools","components_Video","Video_mapStateToProps","containers_Video","addTransitionEndListener","done","addEventListener","Overlays_Overlays","view","isArray","child","CSSTransition_default","mountOnEnter","unmountOnExit","classNames","addEndListener","TransitionGroup_default","App_Overlays","Overlay_Overlay","_ref$direction","direction","components_Overlay","thickness","createLazyOverlay","loader","_ref$OverlayComponent","OverlayComponent","TypeError","onCloseOverlay","LoadingOverlay","pastDelay","Fragment","Header","Content","LazyOverlay_ref3","LazyOverlay","react_loadable_lib_default","hoist_non_react_statics_default","nest_default","PlaylistManager_mapStateToProps","showImportPanel","importSelectors","showSearchResults","searchSelectors","containers_PlaylistManager","bind","RoomHistory_mapStateToProps","RoomHistory_onOpenAddMediaMenu","isSelected","selectionOrOne","containers_RoomHistory","onOpenAddMediaMenu","doChangeUsername","SESSION_KEY","startTutorial","listAll","browser_default","loadedState","socketToken","loginComplete","initState","beforeTime","setSessionToken","loginStart","login","email","password","sessionType","cookies_enabled_lib_default","localStorage","setItem","Session_set","jwt","grecaptcha","matchMedia","matches","logoutComplete","logout","removeItem","unset","resetPassword","socialLogin","service","closed","whenWindowClosed","SettingsManager_mapStateToProps","containers_SettingsManager","onSettingChange","onChangeUsername","onChangeLanguage","onLogout","AdminComponent","AdminProxy_ref","AdminProxy_AdminProxy","AdminProxy_ref3","components_AdminProxy","components_ServerList","ServerList_ref","loaded","Container","About_enhance","withState_default","hasAboutPage","About_About","setActive","AboutPanel","components_List","About_ref3","components_About","About_AboutContainer","getAboutPageComponent","hasAboutPageComponent","uw","OfflineIcon_OfflineIcon","display","OfflineIcon_ref2","ConnectionIndicator_OfflineIcon","ConnectionIndicator_enhance","ConnectionIndicator_ConnectionIndicator","isConnected","Card","CardHeader","ConnectionIndicator_ref2","components_ConnectionIndicator","selectPanel","panel","DeleteButton_DeleteButton","onDelete","Chat_DeleteButton","timeFormatOptions","MessageTimestamp_MessageTimestamp","dateTime","toISOString","toLocaleTimeString","Chat_MessageTimestamp","Message_enhance","userCardable","withHandlers_default","onDeleteClick","onUsernameClick","openUserCard","Message_Message","parsedText","inFlight","compileOptions","deletable","Message_ref2","Username","Chat_Message","Motd_Motd","Chat_Motd","ArrowDownward","ScrollDownNotice_ScrollNotice","mini","ScrollDownNotice_ref2","ScrollDownNotice","LogMessage_LogMessage","Chat_LogMessage","UserNotificationMessage_enhance","UserNotificationMessage_UserNotificationMessage","NotificationMessages_UserNotificationMessage","JoinMessage_JoinMessage","NotificationMessages_JoinMessage","LeaveMessage_LeaveMessage","NotificationMessages_LeaveMessage","NameChangedMessage_UserNameChanged","newUsername","NameChangedMessage","SkipMessage_enhance","SkipMessage_SkipMessage","hasModerator","hasReason","djName","SkipMessage_toUsername","undefined","NotificationMessages_SkipMessage","RoleUpdateMessage_RoleUpdateMessage","updateType","RoleUpdateMessage_getLangKey","upper_case_first_default","specialMessages","userJoin","userLeave","userNameChanged","skip","roleUpdate","ChatMessages_ChatMessages","isScrolledToBottom","onExternalScroll","container","scrollTop","scrollHeight","handleResize","scrollToBottom","handleScroll","handleScrollToBottom","refContainer","bus","shouldScrollToBottom","UNSAFE_componentWillReceiveProps","off","removeEventListener","lastMessage","lastElementChild","offsetHeight","renderMotd","renderMessage","msg","SpecialMessage","canDeleteMessages","onDeleteMessage","onScroll","messages","ChatMessages_mapStateToProps","ChatMessages_mapDispatchToProps","ChatActionCreators","containers_ChatMessages","index_es","SuggestionsList_SuggestionsList","Paper","Input_SuggestionsList","Suggestion_Suggestion","Input_Suggestion","EmojiSuggestion_EmojiSuggestion","ListItemAvatar","backgroundImage","Input_EmojiSuggestion","ListItemIcon","People","GroupSuggestion_GroupSuggestion","GroupSuggestion_ref2","Input_GroupSuggestion","UserSuggestion_UserSuggestion","Input_UserSuggestion","Input_renderSuggestions","getUserCompletions","completions","compare","substr","trigger","getUserText","Input_renderUser","Input_renderGroup","Input_getEmojiCompletions","sortBy_default","uniqBy_default","getEmojiText","Input_renderEmoji","Input_enhance","Input_ChatInput","focused","handleFocus","handleBlur","handleKeyDown","trim","onSend","handleUpdate","newValue","mentionableUsers","mentionableGroups","focusClass","react_abstract_autocomplete_index_es","inputProps","onFocus","onBlur","onKeyDown","onUpdate","renderSuggestions","minLength","getCompletions","getText","renderSuggestion","Input","ChatInput_mapStateToProps","isLoggedIn","ChatInput_enhance","emit","ChatInput_ChatInputContainer","ChatInput_ref3","containers_ChatInput","components_Chat","Chat_ref","Votes_Votes","upvote","downvote","favorite","Votes_ref2","Votes_ref3","Votes_ref4","RoomUserList_Votes","Row_enhance","onOpenCard","Row_RoomUserRow","RoomUserList_Row","GuestsRow_GuestsRow","guests","RoomUserList_GuestsRow","RoomUserList_RoomUserList","disablePadding","react_dom_default","findDOMNode","rowClass","components_RoomUserList","userListWithVotesSelector","RoomUserList_mapStateToProps","containers_RoomUserList","Position_Position","Avatar_Avatar","WaitList_Position","DragHandle","Close","ModRowBase_ModRowBase","isDragging","onRemoveUser","ModRowBase_ref2","ModRowBase_ref3","react_dnd_lib","endDrag","getDropResult","getItem","onMoveUser","userTarget","hover","insertAbove","drop","insertAfter","ModRow_ModRow","connectDropTarget","isOver","dropIndicator","ModRow_ref","WaitList_ModRowBase","WaitList_ModRow","dropTarget","SimpleRow_SimpleRow","WaitList_SimpleRow","WaitList_WaitList","Row","canMoveUsers","components_WaitList","WaitList_mapStateToProps","containers_WaitList","PanelContainer_PanelContainer","SidePanels_PanelContainer","SidePanels_enhance","subHeaderStyle","fontSize","tabClasses","SidePanels_SidePanels","listenerCount","waitlistSize","waitlistPosition","setTab","Tabs","indicator","Tab","SidePanels_getUsersLabel","posText","SidePanels_getWaitlistLabel","SidePanels_ref2","SidePanels_ref3","SidePanels_ref4","components_SidePanels","SidePanels_mapStateToProps","selectedPanel","containers_SidePanels","panelName","parseDuration","str","split","part","parseInt","EditMediaDialog_enhance","Headset","nativeColor","SwapHoriz","MusicNote","PlayArrow","Stop","EditMediaDialog_EditMediaDialog","uniqueId_default","labelStart","labelEnd","onEditedMedia","onCloseDialog","startSeconds","endSeconds","Number","isNaN","push","handleChangeArtist","handleChangeTitle","handleChangeStart","handleChangeEnd","handleSwapArtistTitle","_this$state2","artistInput","EditMediaDialog_ref","tabIndex","artistTitleLabel","EditMediaDialog_ref2","titleInput","EditMediaDialog_ref3","baseTabIndex","fromLabel","htmlFor","fromInput","EditMediaDialog_ref4","toLabel","toInput","EditMediaDialog_ref5","Group","Form_Button","Dialog","DialogTitle","DialogContent","Dialogs_EditMediaDialog","containers_EditMediaDialog_enhance","dialogSelectors","onUpdateMedia","EditMediaDialog_EditMediaDialogContainer","update","containers_EditMediaDialog","SocialLogin_enhance","onGoogleClick","SocialLogin_SocialLogin","react_google_button_es","LoginDialog_SocialLogin","Separator","Separator_ref","LoginForm_enhance","Email","LoginForm_LoginForm","onLogin","handleResetPassword","onOpenResetPasswordDialog","refEmail","refPassword","supportsSocialAuth","LoginForm_ref","autocomplete","LoginForm_ref2","LoginForm_ref3","LoginForm_ref4","LoginDialog_LoginForm","ReCaptcha_ReCaptcha","handleResponse","onResponse","sitekey","callback","GRECAPTCHA_API","onloadCallbackName","onloadCallbacks","ReCaptcha_onload","fn","components_ReCaptcha_ReCaptcha","load_script2_default","ReCaptcha_ref","RegisterForm_enhance","Person","RegisterForm_RegisterForm","agreed","captchaResponse","onRegister","handleCaptchaResponse","handleTosCheckbox","checked","refUsername","renderCaptcha","useReCaptcha","reCaptchaSiteKey","captchaOk","RegisterForm_ref","RegisterForm_ref2","RegisterForm_ref3","RegisterForm_ref4","FormControlLabel","control","Checkbox","privacyPolicy","RegisterForm_ref5","LoginDialog_RegisterForm","ResetPasswordForm_enhance","ResetPasswordForm_ResetPasswordForm","onResetPassword","ResetPasswordForm_ref","ResetPasswordForm_ref2","LoginDialog_ResetPasswordForm","LoginDialog_enhance","withMobileDialog","LoginDialog_LoginDialog","form","fullScreen","LoginDialog_ref","Dialogs_LoginDialog","containers_LoginDialog","Player_PreviewPlayer","_ref$seek","_getMediaSource","Video_Player","TITLE","PreviewMediaDialog_PreviewMediaDialog","BackdropProps","disableEnforceFocus","getTitle","Dialogs_PreviewMediaDialog","containers_PreviewMediaDialog","components_Dialogs","Dialogs_ref","addToPlaylistMenuSelectors_baseSelector","addToPlaylistMenu","isOpenSelector","menu","typeSelector","dataSelector","addToPlaylistMenuSelectors_isFavoriteSelector","PlaylistsMenu_enhance","Add","Check","PlaylistsMenu_PlaylistsMenu","handleSelect","pl","onCreatePlaylist","anchorPosition","anchorReference","MenuList","MenuItem","PlaylistsMenu_ref","PlaylistsMenu_ref2","disableTypography","Typography","noWrap","String","AddToPlaylistMenu_PlaylistsMenu","AddToPlaylistMenu_enhance","AddToPlaylistMenu_AddToPlaylistMenu","creating","playlistName","AddToPlaylistMenu_ref","components_AddToPlaylistMenu","AddToPlaylistMenu_mapStateToProps","AddToPlaylistMenu_AddToPlaylistMenuContainer","onAddMedia","onFavoriteMedia","AddToPlaylistMenu_ref2","containers_AddToPlaylistMenu","es_List","MediaDragPreview_MediaDragPreview","currentOffset","object_assign_default","MediaDragPreview_ref2","MediaList_MediaDragPreview","DragLayer_enhance","getItemType","DragLayer_DragLayerContainer","renderPreview","DragLayer","ErrorArea","App_App","activeOverlay","App_ref2","App_ref3","transitionName","App_ref4","App_ref5","App_ref6","App_ref7","App_ref8","components_App","react_dnd_html5_backend_lib_default","toClass_default","containers_PlaylistManager_mapStateToProps","mobile_containers_PlaylistManager","containers_RoomHistory_mapStateToProps","containers_RoomHistory_onOpenAddMediaMenu","RoomHistory_selectionOrOne","mobile_containers_RoomHistory","SET_DRAWER_OPEN","TOGGLE_DRAWER_OPEN","SET_USERS_DRAWER_OPEN","setDrawer","val","openDrawer","setUsersDrawer","openUsersDrawer","VoteButtons_VoteButtons","VoteButtons_ref2","VoteButtons_ref3","Video_VoteButtons","components_Video_Video","enableOverlay","showVoteButtons","handleClick","handlePlay","getDerivedStateFromProps","prevState","mobile_components_Video","containers_Video_mapStateToProps","containers_Video_mapDispatchToProps","mobile_containers_Video","LoginButtons_enhance","buttonStyle","textTransform","LoginButtons_LoginButtons","justifyContent","containers_LoginButtons","Chat_mapStateToProps","Chat_ChatContainer","Chat_ref2","Chat_ref3","Chat_ref4","containers_Chat","drawerSelectors_baseSelector","mobile","drawerIsOpenSelector","drawer","usersDrawerIsOpenSelector","usersDrawer","openPlaylist","toggleServerList","DrawerMenu_enhance","onShowAbout","onDrawerClose","onShowServerList","onShowSettings","Divider","DrawerMenu_DrawerMenu","onShowPlaylist","Drawer","DrawerMenu_ref2","ListSubheader","DrawerMenu_ref3","components_DrawerMenu","DrawerMenu_mapStateToProps","containers_DrawerMenu","listenersSelector","waiting","UserRow_UserRow","UsersDrawer_UserRow","WaitlistPosition_WaitlistPosition","UsersDrawer_WaitlistPosition","JoinWaitlistButton","marginLeft","marginBottom","UserList_UserList","isLockedWaitlist","userIsLoggedIn","onJoinWaitlist","UserList_ref2","margin","UserList_ref3","UsersDrawer_UserList","UsersDrawer_classes","UsersDrawer_UsersDrawer","onLeaveWaitlist","components_UsersDrawer","UsersDrawer_mapStateToProps","UsersDrawer_mapDispatchToProps","containers_UsersDrawer","VideoDisabledMessage_enhance","VideoDisabledMessage_VideoDisabledMessage","onEnableVideo","MainView_VideoDisabledMessage","waitlistIconStyle","textAlign","MainView_enhance","onOpenRoomHistory","onOpenDrawer","onOpenWaitlist","Menu","MainView_MainView","AppBar","Toolbar","MainView_ref2","MainView_ref3","MainView_ref4","MainView_ref5","MainView_ref6","components_MainView","MainView_mapStateToProps","containers_MainView","onTabChange","containers_About_enhance","containers_About_AboutContainer","About","containers_About","ServerList_enhance","ServerList_ServerListContainer","ServerList_ref2","containers_ServerList","App_Overlays_Overlays","components_App_Overlays","App_enhance","App_MobileApp","dismissedWarning","onDismiss","components_App_ref2","Snackbar","components_App_ref3","components_App_ref4","components_App_ref5","components_App_ref6","mobile_components_App","CardActions","reload","FatalError_FatalError","raised","CardContent","FatalError_ref2","FatalError_ref3","FatalError_ref4","components_FatalError","SimpleProviders","App_mapStateToProps","App_mapDispatchToProps","containers_App_enhance","App_AppContainer","renderApp","mediaSources","locale","changeLanguage","componentDidCatch","info","bugsnag","notify","metaData","componentStack","MuiThemeProvider","i18n","containers_App","createGenerateClassName","counter","rule","styleSheet","componentName","attempt","store_persistSettings","reducer","parse","prevSettings","subscribe","newSettings","SHOULD_RANDOMIZE","socket_debug","actions","chatMessage","chatDelete","chatDeleteByID","chatDeleteByUser","chatMute","chatUnmute","advance","skipped","_ref7","vote","_ref8","waitlistJoin","_ref9","waitlistLeave","_ref10","waitlistUpdate","waitlistLock","_ref11","waitlistMove","_ref12","movedInWaitlist","waitlistAdd","_ref13","waitlistRemove","_ref14","waitlistClear","playlistCycle","_ref15","UserActionCreators_join","leave","nameChange","_ref16","changeUsername","acl:allow","_ref17","addUserRoles","acl:disallow","_ref18","removeUserRoles","wlk:shouldRandomize","_ref19","socket_middleware","loc","_ref20$url","protocol","hostname","port","_ref21","socket","queue","sentAuthToken","opened","sendAuthToken","tokne","send","maybeAuthenticateOnConnect","auth","_ref22","onOpen","onMessage","pack","_JSON$parse","close","keepClosed","dist_default","activeOverlay_initialState","addToPlaylistMenu_initialState","addToPlaylistMenu_reduce","booth_initialState","booth_reduce","chat_initialState","mutedUsers","chat_reduce","_extends2","inFlightMessage","removeInFlightMessage","logMessage","mutedBy","nextMessages","reduceNotifications","dialogs_initialState","previewMedia","dialogs_openDialog","closeDialog","dialogs_reduce","imports_initialState","imports_reduce","mediaSearch_initialState","LoadingStates","mediaSearch_reduce","source","playlists_initialState","deselectAll","object_map_default","processInsert","insertIdx","findindex_default","updatePlaylist","modify","updatePlaylistItems","_extends3","nextFilter","updatePlaylistAndItems","modifyPlaylist","modifyItems","setPlaylistLoading","fill","mergePlaylistPage","oldMedia","newMedia","playlists_reduce","_extends4","_assign2","index_by_default","firstActivePlaylistItem","rx","RegExp","escape_string_regexp_default","test","filterCachedPlaylistItems","newItems","_assign","newPlaylist","isMovingMedia","movedMedia","wasMoved","isRemovingMedia","isRemovedMedia","roomHistory_initialState","roomHistory_normalize","getTime","roomHistory_reduce","mostRecent","selectedPanel_initialState","selectedPanel_reduce","server_initialState","serverReducer","settings_initialState","reducers_settings","deepmerge_dist_es","clone","time_initialState","time_reduce","updateUser","reducers_users","votes_initialState","votes_reduce","waitlist_initialState","waitlist_reduce","waitlistLocked","reducer_initialState","wlkReducer","mobile_initialState","mobile_reducer","createSourcesReducer_initialState","createSourcesReducer","newState","sourceName","reduceSources","ImportPanelHeader_enhance","ImportPanelHeader_ImportPanelHeader","onClosePanel","ImportPanelHeader_ref2","Import_ImportPanelHeader","ImportSourceBlock_ImportSourceBlock","logo","Import_ImportSourceBlock","components","VideoBackdrop","ImportPanelHeader","ImportSourceBlock","FormButton","api_actions","preloadDesktop","document","readyState","on_idle_default","preload","ms","_len2","_key2","available","isFinite","allRoles","configSelectors","permissions","addUserRole","removeUserRole","posStr","Uwave_Uwave","Uwave","session","sessionToken","renderTarget","aboutPageComponent","jss","jssPreset","generateClassName","ready","resolveReady","constants_namespaceObject_0","use","plugin","sourcePlugin","sourceFactory","setAboutPageComponent","AboutPageComponent","build","rerender","nanoraf_default","raf_default","redux_thunk_es","socketUrl","currentReducers","reducers_namespaceObject_0","applyMiddleware","redux_batched_subscribe_lib","mount","replaceReducer","createUwaveStore","localePromise","setup","insertionPoint","querySelector","getComponent","JssProvider_default","renderToDOM","StrictMode","react_dom","PlayerEmbed_YouTubePlayerEmbed","handleYTPlay","handleYTPause","controllable","playVideo","refPlayer","react_youtube_es","video","autoplay","modestBranding","playbackRate","controls","showRelatedVideos","showInfo","annotations","onPause","onPlaying","Player_YouTubePlayer","modeClass","hidden","youtube_Player","PLAYLIST","CHANNEL","GET_IMPORTABLE_PLAYLIST_START","GET_IMPORTABLE_PLAYLIST_COMPLETE","GET_CHANNEL_PLAYLISTS_START","GET_CHANNEL_PLAYLISTS_COMPLETE","IMPORT_PLAYLIST_START","IMPORT_PLAYLIST_COMPLETE","getImportablePlaylist","getImportablePlaylistStart","getImportablePlaylistComplete","importPlaylist","importPlaylistStart","importPlaylistComplete","getChannelPlaylists","getChannelPlaylistsStart","channel","getChannelPlaylistsComplete","PlaylistPlay","ImportForm_YoutubeImportForm","handleImportChannel","onHideImportPanel","onShowImportPanel","handleImportPlaylist","refChannel","refPlaylist","ImportForm_ref","ImportForm_ref2","ImportForm_ref3","ImportForm_ref4","LoadingPanel_LoadingPanel","LoadingPanel_ref2","youtube_LoadingPanel","PlaylistAdd","PlaylistRow_PlaylistRow","onImport","PlaylistRow_ref2","youtube_PlaylistRow","ChannelPanel_ChannelPanel","importablePlaylists","onImportPlaylist","importingChannelTitle","PlaylistPanel_YouTubeImportPlaylistPanel","handleImportFull","importingPlaylist","importingPlaylistItems","PlaylistPanel_ref","PlaylistPanel_selectionOrOne","ImportPanel_YouTubeImportPanel","importingState","ImportPanel","youtube_reducer_initialState","importingPlaylistName","reducer_reduce","iconStyles","float","marginRight","SongInfo_SongInfo","artistUrl","trackUrl","SongInfo_ref2","SongInfo_ref3","soundcloud_SongInfo","Player_debug","soundcloud_Player_enhance","es_Error","soundcloud_inline_default","Player_SoundCloudPlayer","needsTap","handleError","audio","stop","_this3","sourceData","streamUrl","doSeek","pause","paragraph","soundcloud_Player_ref","getErrorMessage","fullTitle","permalinkUrl","Player_ref2","soundcloud_Player","PreviewPlayer_PreviewPlayer","scrolling","frameBorder","qs_stringify_default","auto_play","hide_related","buying","liking","download","sharing","show_comments","visual","soundcloud_PreviewPlayer","PlayerWrapper_PlayerWrapper","soundcloud_PlayerWrapper","Facebook","Facebook_ref","YouTube","YouTube_ref","Instagram","Instagram_ref","Github","Github_ref","Twitter","Twitter_ref","Slack","Slack_ref","SocialMediaLink_SocialMediaLink","_wlk_SocialMediaLink","app_uw","getElementById","textContent","readApplicationConfig","youtube_default","ImportForm","soundcloud_default","AboutPage_ref","innerHTML","IDLE","LOADING","LOADED","encodeURIComponent","chat","rawMotdSelector","motdSelector","u_wave_parse_chat_markup__WEBPACK_IMPORTED_MODULE_2__","allMessagesSelector","filteredMessagesSelector","_settingSelectors__WEBPACK_IMPORTED_MODULE_6__","notificationSettings","messagesSelector","markupCompilerOptionsSelector","_configSelectors__WEBPACK_IMPORTED_MODULE_4__","mutesSelector","muteTimeoutsSelector","mutes","object_map__WEBPACK_IMPORTED_MODULE_1___default","mutedUserIDsSelector","mutedUsersSelector","_userSelectors__WEBPACK_IMPORTED_MODULE_5__","mutedIDs","currentUserMuteSelector","availableGroupMentionsSelector","_utils_chatMentions__WEBPACK_IMPORTED_MODULE_3__","emojiCompletionsSelector","images","canDeleteMessagesSelector","icons","bottom","KeyboardArrowDown","KeyboardArrowUp","Close_Close","CloseIcon","Header_Close","Header_Header","MEDIA","WAITLIST_USER","UserCard_UserCardWrapper","positionDiffX","positionDiffY","shouldFit","fitInsideWindow","rect","firstChild","offsetBottom","innerHeight","Modal","invisible","components_UserCard","CardableComponent","assertThisInitialized_default","inheritsLoose_default","closeUserCard","OverlayContent","_class","_temp2","getComponentName","dialogs","merge","dialog","loginDialogSelector","_configSelectors__WEBPACK_IMPORTED_MODULE_3__","siteKey","editMediaDialogSelector","previewMediaDialogSelector","_settingSelectors__WEBPACK_IMPORTED_MODULE_4__","isPreviewMediaDialogOpenSelector","included","lodash_get__WEBPACK_IMPORTED_MODULE_0___default","model","lodash_find__WEBPACK_IMPORTED_MODULE_2___default","m","lodash_set__WEBPACK_IMPORTED_MODULE_1___default","offsetSelector","timerSelector","currentTimeSelector","authSelector","usersBaseSelector","usersSelector","authErrorSelector","currentUserIDSelector","currentUserSelector","isLoggedInSelector","tokenSelector","authStrategiesSelector","supportsSocialAuthSelector","support","superUserRoleSelector","getAllUserRoles","getSubRoles","subRoles","userListSelector","superuserRole","object_values__WEBPACK_IMPORTED_MODULE_2___default","superuser","aRoles","bRoles","natural_compare__WEBPACK_IMPORTED_MODULE_1___default","compareUsers","userCountSelector","guestCountSelector","listenerCountSelector","userHasRoleSelector","superUserRole","userRoles","hasRoleSelector","userHasRole","currentUserHasRoleSelector","createRoleCheckSelector","isModeratorSelector","isManagerSelector","everyone","djs","staff","getAvailableGroupMentions","canMention","groupMentions_namespaceObject","resolveMentions","groupSelector","hasMention","dismiss","firstErrorSelector","ErrorArea_ErrorArea","ContentProps","components_ErrorArea","palette","light","main","contrastText","background","typography","fontFamily","resources","cs","cy","de","fr","ko","nl","pt","zh","UwaveBackend","cache","getResource","read","namespace","resource","i18next__WEBPACK_IMPORTED_MODULE_0__","init","fallbackLng","defaultNS","interpolation","escapeValue","addResourceBundle","_locale_en_yaml__WEBPACK_IMPORTED_MODULE_1__","availableLanguages","createLocale","cloneInstance"],"mappings":"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","file":"app_cb648b8.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport wrapDisplayName from 'recompose/wrapDisplayName';\nimport { currentTimeSelector } from '../selectors/timeSelectors';\n\nexport default function () {\n  return (Component) => {\n    class Timed extends React.Component {\n      static displayName = wrapDisplayName(Component, 'Timed');\n\n      static contextTypes = {\n        store: PropTypes.object.isRequired,\n        timerCallbacks: PropTypes.shape({\n          add: PropTypes.func,\n          remove: PropTypes.func,\n        }).isRequired,\n      };\n\n      state = {\n        currentTime: this.getCurrentTime(),\n      };\n\n      componentDidMount() {\n        this.context.timerCallbacks.add(this.tick);\n      }\n\n      componentWillUnmount() {\n        this.context.timerCallbacks.remove(this.tick);\n      }\n\n      getCurrentTime() {\n        return currentTimeSelector(this.context.store.getState());\n      }\n\n      tick = () => {\n        this.setState({\n          currentTime: this.getCurrentTime(),\n        });\n      };\n\n      render() {\n        return (\n          <Component\n            {...this.props}\n            currentTime={this.state.currentTime}\n          />\n        );\n      }\n    }\n    return Timed;\n  };\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport pure from 'recompose/pure';\n\nconst SongTitle = ({\n  className, artist, title, size = 'large',\n}) => (\n  <div\n    className={cx('SongTitle', `SongTitle--${size}`, className)}\n    title={`${artist}  ${title}`}\n  >\n    <span className=\"SongTitle-artist\">{artist}</span>\n    <span className=\"SongTitle-separator\">  </span>\n    <span className=\"SongTitle-title\">{title}</span>\n  </div>\n);\n\nSongTitle.propTypes = {\n  className: PropTypes.string,\n  artist: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  size: PropTypes.string,\n};\n\nexport default pure(SongTitle);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport MuiListItem from '@material-ui/core/ListItem';\nimport SelectedIcon from '@material-ui/icons/ChevronRight';\n\n/**\n * A ListItem component wrapper around material-ui's ListItem,\n * with a Wave skin.\n */\n\nconst ListItem = ({\n  className,\n  children,\n  selected,\n  ...props\n}) => (\n  <MuiListItem\n    button\n    {...props}\n    className={cx(className, selected && 'is-selected')}\n  >\n    {children}\n    {selected && <SelectedIcon />}\n  </MuiListItem>\n);\n\nListItem.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node.isRequired,\n  selected: PropTypes.bool,\n};\n\nexport default ListItem;\n","import initialState from '../theme';\n\n// eslint-disable-next-line no-unused-vars\nexport default function reduce(state = initialState, action = {}) {\n  // Nothing for now!\n  return state;\n}\n","export default function reduce(state = [], action = {}) {\n  const { type, payload, error } = action;\n  if (error) {\n    // Avoid adding the same error over and over\n    if (state.length === 0 || state[state.length - 1] !== payload.message) {\n      return [...state, payload.message];\n    }\n  } else if (type === 'errors/DISMISS') {\n    return state.slice(1);\n  }\n  return state;\n}\n","import { INIT_STATE } from '../constants/ActionTypes';\n\nconst initialState = {};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case INIT_STATE:\n      if (payload.roles) {\n        return {\n          ...state,\n          roles: payload.roles,\n        };\n      }\n      return state;\n    default:\n      return state;\n  }\n}\n","import {\n  INIT_STATE,\n  AUTH_STRATEGIES,\n  RESET_PASSWORD_COMPLETE,\n  REGISTER_COMPLETE,\n  LOGIN_COMPLETE,\n  SET_TOKEN,\n  LOGOUT_COMPLETE,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  strategies: ['local'],\n  token: null,\n  user: null,\n  error: null,\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload, error: isError } = action;\n  switch (type) {\n    case INIT_STATE:\n      return {\n        ...state,\n        strategies: payload.authStrategies,\n      };\n    case AUTH_STRATEGIES:\n      return {\n        ...state,\n        strategies: payload.strategies,\n      };\n    case RESET_PASSWORD_COMPLETE:\n      return isError ? {\n        ...state,\n        token: payload.token,\n        user: null,\n        error: payload,\n      } : {\n        ...state,\n        token: payload.token,\n        user: null,\n        error: null,\n      };\n    case SET_TOKEN:\n      return {\n        ...state,\n        token: payload.token,\n        user: null,\n        error: null,\n      };\n    case LOGIN_COMPLETE:\n      return isError ? {\n        ...state,\n        token: null,\n        user: null,\n        error: payload,\n      } : {\n        ...state,\n        token: payload.token,\n        user: payload.user._id,\n        error: null,\n      };\n    case REGISTER_COMPLETE:\n      return {\n        ...state,\n        token: null,\n        user: null,\n        error: payload,\n      };\n    case LOGOUT_COMPLETE:\n      return initialState;\n    default:\n      return state;\n  }\n}\n","import assign from 'object-assign';\nimport qsStringify from 'qs-stringify';\nimport { REQUEST_START } from '../constants/ActionTypes';\nimport {\n  requestComplete,\n  requestCompleteError,\n} from '../actions/RequestActionCreators';\nimport { requestOptionsSelector } from '../selectors/configSelectors';\nimport { tokenSelector } from '../selectors/userSelectors';\n\nfunction isEmpty(object) {\n  return !object || Object.keys(object).length === 0;\n}\n\nfunction makeUrl(path, params = {}) {\n  let uri = path;\n\n  if (!isEmpty(params)) {\n    // heh\n    uri += (uri.indexOf('?') !== -1 ? '&' : '?') + qsStringify(params);\n  }\n\n  return uri;\n}\n\nfunction rejectNonOK(response) {\n  if (response.status !== 200) {\n    return response.json().then((res) => {\n      if (!('errors' in res)) {\n        throw new Error('An unknown error occurred.');\n      }\n      const { errors } = res;\n      const error = assign(new Error(errors.map(err => err.title).join(', ')), {\n        response,\n        errors,\n      });\n      throw error;\n    });\n  }\n  return response;\n}\n\nconst defaultOptions = {\n  apiUrl: '/api',\n};\n\nexport default function middleware(middlewareOptions = {}) {\n  return ({ dispatch, getState }) => next => (action) => {\n    if (action.type !== REQUEST_START) {\n      return next(action);\n    }\n\n    const opts = {\n      ...defaultOptions,\n      ...middlewareOptions,\n      ...requestOptionsSelector(getState()),\n    };\n\n    const token = tokenSelector(getState());\n    const {\n      method,\n      url,\n      qs,\n      data,\n    } = action.payload;\n    const {\n      id,\n      onStart,\n      onComplete,\n      onError,\n    } = action.meta;\n\n    const completedMeta = {\n      id,\n      method,\n      url,\n      qs,\n      data,\n    };\n\n    const requestUrl = makeUrl(opts.apiUrl + url, qs);\n\n    const requestOptions = {\n      method,\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n      credentials: 'same-origin',\n    };\n\n    if (token && token !== 'cookie') {\n      requestOptions.headers.Authorization = `JWT ${token}`;\n    }\n\n    if (method !== 'get') {\n      requestOptions.body = JSON.stringify(data);\n    }\n\n    if (onStart) {\n      dispatch(onStart());\n    }\n\n    return fetch(requestUrl, requestOptions)\n      .then(rejectNonOK)\n      .then(res => res.json())\n      .then((res) => {\n        let responseValue = res;\n        if (onComplete) {\n          responseValue = dispatch(onComplete(responseValue));\n        }\n        dispatch(requestComplete(res, completedMeta));\n        return responseValue;\n      })\n      .catch((error) => {\n        if (onError) {\n          dispatch(onError(error));\n        }\n        dispatch(requestCompleteError(error, completedMeta));\n        throw error;\n      });\n  };\n}\n","import { createSelector } from 'reselect';\n\nconst baseSearchSelector = state => state.mediaSearch;\n\nexport const searchSourceTypeSelector = createSelector(\n  baseSearchSelector,\n  search => search.sourceType,\n);\n\nexport const searchQuerySelector = createSelector(\n  baseSearchSelector,\n  search => search.query,\n);\n\nexport const searchLoadingStateSelector = createSelector(\n  baseSearchSelector,\n  search => search.loadingState,\n);\n\nconst searchResultsCombinedSelector = createSelector(\n  baseSearchSelector,\n  search => search.results,\n);\n\nexport const searchResultsSelector = createSelector(\n  searchResultsCombinedSelector,\n  searchSourceTypeSelector,\n  (results, sourceType) => results[sourceType],\n);\n\nexport const searchResultsCountSelector = createSelector(\n  searchResultsSelector,\n  results => (results ? results.length : 0),\n);\n\nexport const showSearchResultsSelector = createSelector(\n  baseSearchSelector,\n  search => !!search.showResults,\n);\n","import defaultProps from 'recompose/defaultProps';\nimport Base from './BaseMediaList';\nimport Row from './Row';\n\nconst MediaList = defaultProps({\n  listComponent: 'div',\n  rowComponent: Row,\n})(Base);\n\nexport default MediaList;\n","import {\n  REQUEST_START,\n  REQUEST_COMPLETE,\n} from '../constants/ActionTypes';\n\nlet requestID = 0;\nfunction request(method, url, opts = {}) {\n  const {\n    onStart,\n    onComplete,\n    onError,\n    ...requestOpts\n  } = opts;\n\n  requestID += 1;\n\n  return {\n    type: REQUEST_START,\n    payload: {\n      ...requestOpts,\n      method,\n      url,\n    },\n    meta: {\n      onStart,\n      onComplete,\n      onError,\n      id: requestID,\n    },\n  };\n}\n\nexport function requestComplete(response, meta) {\n  return {\n    type: REQUEST_COMPLETE,\n    payload: response,\n    meta,\n  };\n}\n\nexport function requestCompleteError(error, meta) {\n  return {\n    type: REQUEST_COMPLETE,\n    error: true,\n    payload: error,\n    meta,\n  };\n}\n\nexport const get = (url, opts) =>\n  request('get', url, opts);\n\nexport const post = (url, data, opts = {}) =>\n  request('post', url, { data, ...opts });\n\nexport const put = (url, data, opts = {}) =>\n  request('put', url, { data, ...opts });\n\nexport const del = (url, data, opts = {}) =>\n  request('delete', url, { data, ...opts });\n","import { createSelector } from 'reselect';\n\nconst baseSelector = state => state.imports;\n\nexport const selectedSourceTypeSelector = createSelector(\n  baseSelector,\n  imports => imports.sourceType,\n);\n\nexport const showImportPanelSelector = createSelector(\n  baseSelector,\n  imports => imports.showPanel,\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Bold = ({ children, ...props }) => <b {...props}>{children}</b>;\n\nBold.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Bold;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Code = ({ children, ...props }) => <code {...props}>{children}</code>;\n\nCode.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Code;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Italic = ({ children, ...props }) => <i {...props}>{children}</i>;\n\nItalic.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Italic;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst StrikeThrough = ({ children, ...props }) => <s {...props}>{children}</s>;\n\nStrikeThrough.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default StrikeThrough;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Mention = ({ className, user, ...props }) => (\n  <span className={cx('ChatMention', className)} {...props}>\n    @{user.username}\n  </span>\n);\n\nMention.propTypes = {\n  className: PropTypes.string,\n  user: PropTypes.shape({\n    username: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default Mention;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst GroupMention = ({ className, group }) => (\n  <span className={cx('ChatMention', `ChatMention--${group}`, className)}>\n    @{group}\n  </span>\n);\n\nGroupMention.propTypes = {\n  className: PropTypes.string,\n  group: PropTypes.string.isRequired,\n};\n\nexport default GroupMention;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport shortenUrl from 'shorten-url';\n\nconst Link = ({ children, href, ...props }) => (\n  <a\n    href={href}\n    title={href}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    {...props}\n  >\n    {shortenUrl(children, 60)}\n  </a>\n);\n\nLink.propTypes = {\n  children: PropTypes.string.isRequired,\n  href: PropTypes.string.isRequired,\n};\n\nexport default Link;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst shortcode = name =>\n  `:${name}:`;\nconst url = filename =>\n  `/assets/emoji/${filename}`;\n\nconst Emoji = ({ name, image }) => (\n  <Tooltip title={shortcode(name)} placement=\"top\">\n    <span className=\"Emoji\" data-emoji={name}>\n      <img\n        className=\"Emoji-img\"\n        src={url(image)}\n        alt={shortcode(name)}\n      />\n    </span>\n  </Tooltip>\n);\n\nEmoji.propTypes = {\n  name: PropTypes.string.isRequired,\n  image: PropTypes.string.isRequired,\n};\n\nexport default Emoji;\n","import React from 'react';\nimport Bold from './Bold';\nimport Code from './Code';\nimport Italic from './Italic';\nimport StrikeThrough from './StrikeThrough';\nimport Mention from './Mention';\nimport GroupMention from './GroupMention';\nimport Link from './Link';\nimport Emoji from './Emoji';\n\nexport default function compile(tree, opts = {}) {\n  const {\n    availableEmoji = [],\n    emojiImages = {},\n  } = opts;\n\n  return tree.map((node, i) => {\n    if (typeof node === 'string') {\n      return node;\n    }\n\n    /* eslint-disable react/no-array-index-key */\n    switch (node.type) {\n      case 'mention':\n        return node.user\n          ? <Mention key={i} user={node.user} />\n          : <GroupMention key={i} group={node.mention} users={node.group} />;\n      case 'link':\n        return <Link key={i} href={node.href}>{node.text}</Link>;\n      case 'emoji':\n        if (availableEmoji.indexOf(node.name) !== -1 && node.name in emojiImages) {\n          return (\n            <Emoji\n              key={i}\n              name={node.name}\n              image={emojiImages[node.name]}\n            />\n          );\n        }\n        return `:${node.name}:`;\n      case 'italic':\n        return <Italic key={i}>{compile(node.content, opts)}</Italic>;\n      case 'bold':\n        return <Bold key={i}>{compile(node.content, opts)}</Bold>;\n      case 'code':\n        return <Code key={i}>{compile(node.content, opts)}</Code>;\n      case 'strike':\n        return <StrikeThrough key={i}>{compile(node.content, opts)}</StrikeThrough>;\n      default:\n        return compile(node.content, opts);\n    }\n    /* eslint-enable react/no-array-index-key */\n  });\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Typography from '@material-ui/core/Typography';\nimport Card from '@material-ui/core/Card/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Avatar from '../Avatar';\nimport UserRoles from './UserRoles';\nimport formatJoinDate from '../../utils/formatJoinDate';\n\nconst UserCard = ({ user }) => (\n  <Card className=\"UserCard\">\n    <CardHeader\n      className=\"UserCard-header\"\n      title={user.username}\n      subheader={<UserRoles roles={user.roles} />}\n      avatar={<Avatar className=\"UserCard-avatar\" user={user} />}\n    />\n    <CardContent className=\"UserCard-joinDate\">\n      <Typography>\n        Joined: {formatJoinDate(user.createdAt)}\n      </Typography>\n    </CardContent>\n    <CardActions className=\"UserCard-actions\">\n      {/* Currently empty */}\n    </CardActions>\n  </Card>\n);\n\nUserCard.propTypes = {\n  user: PropTypes.object.isRequired,\n};\n\nexport default UserCard;\n","import { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport find from 'array-find';\nimport compose from 'recompose/compose';\nimport componentFromProp from 'recompose/componentFromProp';\nimport mapProps from 'recompose/mapProps';\nimport { roleColorsSelector } from '../../selectors/configSelectors';\n\nconst enhance = compose(\n  connect(createStructuredSelector({\n    colors: roleColorsSelector,\n  }), {}),\n  mapProps(({\n    colors,\n    role,\n    roles,\n    ...props\n  }) => ({\n    ...props,\n    style: {\n      color: (\n        role ? colors[role] : colors[find(roles, r => colors[r])]\n      ) || colors.default,\n    },\n    component: props.component || 'span',\n  })),\n);\n\nconst RoleColor = componentFromProp('component');\n\nexport default enhance(RoleColor);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst MediaLoadingIndicator = ({ className }) => (\n  <div className={cx('MediaLoadingIndicator', className)}>\n    <CircularProgress className=\"MediaLoadingIndicator-spinner\" />\n  </div>\n);\n\nMediaLoadingIndicator.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default MediaLoadingIndicator;\n","import mentionSoundUrl from '../../assets/audio/mention.mp3';\n\nlet mentionSound;\nif (typeof window !== 'undefined' && window.Audio) {\n  mentionSound = new window.Audio(mentionSoundUrl);\n}\n\nexport default function playMentionSound() {\n  if (mentionSound) {\n    mentionSound.play();\n  }\n}\n","import find from 'array-find';\nimport ms from 'ms';\nimport splitargs from 'splitargs';\nimport parseChatMarkup from 'u-wave-parse-chat-markup';\nimport flashDocumentTitle from 'flash-document-title';\nimport playMentionSound from '../utils/playMentionSound';\nimport {\n  RECEIVE_MOTD,\n  SET_MOTD_START,\n  SET_MOTD_COMPLETE,\n  SEND_MESSAGE,\n  RECEIVE_MESSAGE,\n  LOG,\n  REMOVE_MESSAGE,\n  REMOVE_USER_MESSAGES,\n  REMOVE_ALL_MESSAGES,\n  MUTE_USER,\n  UNMUTE_USER,\n} from '../constants/ActionTypes';\nimport { put } from './RequestActionCreators';\nimport { execute } from '../utils/ChatCommands';\nimport {\n  muteTimeoutsSelector,\n  mutedUserIDsSelector,\n  currentUserMuteSelector,\n} from '../selectors/chatSelectors';\nimport { settingsSelector } from '../selectors/settingSelectors';\nimport {\n  currentUserSelector,\n  userListSelector,\n  userHasRoleSelector,\n  currentUserHasRoleSelector,\n} from '../selectors/userSelectors';\nimport { currentTimeSelector } from '../selectors/timeSelectors';\nimport {\n  getAvailableGroupMentions,\n  resolveMentions,\n  hasMention,\n} from '../utils/chatMentions';\n\nexport function receiveMotd(text) {\n  return {\n    type: RECEIVE_MOTD,\n    payload: text,\n  };\n}\n\nlet logIdx = Date.now();\nexport function log(text) {\n  logIdx += 1;\n  return {\n    type: LOG,\n    payload: {\n      _id: logIdx,\n      text,\n    },\n  };\n}\n\nexport function prepareMessage(state, user, text, parseOpts = {}) {\n  const parsed = parseChatMarkup(text, parseOpts);\n  resolveMentions(parsed, state);\n  return {\n    type: SEND_MESSAGE,\n    payload: {\n      user,\n      message: text,\n      parsed,\n    },\n  };\n}\n\nexport function sendChat(text) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const sender = currentUserSelector(state);\n    const hasRole = currentUserHasRoleSelector(state);\n    const mute = currentUserMuteSelector(state);\n    if (mute) {\n      const timeLeft = ms(mute.expiresAt - Date.now(), { long: true });\n      dispatch(log(`You have been muted, and cannot chat for another ${timeLeft}.`));\n      return;\n    }\n\n    const users = userListSelector(state);\n    const message = prepareMessage(state, sender, text, {\n      mentions: [\n        ...users.map(user => user.username),\n        ...getAvailableGroupMentions(hasRole),\n      ],\n    });\n    dispatch(message);\n  };\n}\n\nexport function inputMessage(text) {\n  return (dispatch, getState) => {\n    if (text[0] === '/') {\n      const [command, ...params] = splitargs(text.slice(1));\n      if (command) {\n        const result = execute(getState(), command, params);\n        if (result) {\n          dispatch(result);\n        }\n        return;\n      }\n    }\n    dispatch(sendChat(text));\n  };\n}\n\nfunction isMuted(state, userID) {\n  return mutedUserIDsSelector(state).indexOf(userID) !== -1;\n}\n\nexport function receive(message) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const settings = settingsSelector(state);\n    const currentUser = currentUserSelector(state);\n    const users = userListSelector(state);\n    const sender = find(users, user => user._id === message.userID);\n    const senderHasRole = userHasRoleSelector(state)(sender);\n    const mentions = [\n      ...users.map(user => user.username),\n      ...getAvailableGroupMentions(mention => senderHasRole(`chat.mention.${mention}`)),\n    ];\n\n    if (isMuted(state, message.userID)) {\n      return;\n    }\n\n    const parsed = parseChatMarkup(message.text, { mentions });\n    resolveMentions(parsed, state);\n\n    const isMention = currentUser ? hasMention(parsed, currentUser._id) : false;\n\n    dispatch({\n      type: RECEIVE_MESSAGE,\n      payload: {\n        message: {\n          ...message,\n          user: sender,\n        },\n        isMention,\n        parsed,\n      },\n    });\n\n    if (isMention) {\n      if (settings.mentionSound) {\n        playMentionSound();\n      }\n      flashDocumentTitle(` ${sender.username}`);\n    }\n  };\n}\n\nexport function removeMessage(id) {\n  return {\n    type: REMOVE_MESSAGE,\n    payload: { _id: id },\n  };\n}\n\nexport function removeMessagesByUser(userID) {\n  return {\n    type: REMOVE_USER_MESSAGES,\n    payload: { userID },\n  };\n}\n\nexport function removeAllMessages() {\n  return {\n    type: REMOVE_ALL_MESSAGES,\n  };\n}\n\nfunction expireMute(userID) {\n  return {\n    type: UNMUTE_USER,\n    payload: { userID },\n  };\n}\n\nexport function muteUser(userID, { moderatorID, expiresAt }) {\n  return (dispatch, getState) => {\n    const currentTime = currentTimeSelector(getState());\n    const expireIn = expiresAt - currentTime;\n\n    dispatch({\n      type: MUTE_USER,\n      payload: {\n        userID,\n        moderatorID,\n        expiresAt,\n        expirationTimer: expireIn > 0 ?\n          setTimeout(() => dispatch(expireMute(userID)), expireIn) : null,\n      },\n    });\n  };\n}\n\nexport function unmuteUser(userID, { moderatorID }) {\n  return (dispatch, getState) => {\n    const muteTimeouts = muteTimeoutsSelector(getState());\n    if (muteTimeouts && muteTimeouts[userID]) {\n      clearTimeout(muteTimeouts[userID]);\n    }\n    dispatch({\n      type: UNMUTE_USER,\n      payload: { userID, moderatorID },\n    });\n  };\n}\n\nexport function setMotdStart(motd) {\n  return {\n    type: SET_MOTD_START,\n    payload: motd,\n  };\n}\n\nexport function setMotdComplete(motd) {\n  return {\n    type: SET_MOTD_COMPLETE,\n    payload: motd,\n  };\n}\n\nexport function setMotd(text) {\n  return put('/motd', { motd: text }, {\n    onStart: () => setMotdStart(text),\n    onComplete: ({ data }) => (dispatch) => {\n      dispatch(setMotdComplete(data.motd));\n      dispatch(log(`Message of the Day is now: ${data.motd}`));\n    },\n    onError: error => ({\n      type: SET_MOTD_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n","import find from 'array-find';\nimport createDebug from 'debug';\n\nconst debug = createDebug('uwave:chat-commands');\n\nconst commands = {};\n\nexport function getCommands() {\n  return commands;\n}\n\nexport function register(name, description, { action, guard }) {\n  commands[name] = { description, action, guard };\n}\n\nexport function canExecute(state, { guard } = {}) {\n  return guard ? guard(state) : true;\n}\n\nexport function execute(state, name, args = []) {\n  debug('execute', name, args);\n  if (commands[name]) {\n    const allowed = canExecute(state, commands[name]);\n    debug('canExecute', allowed);\n    if (allowed) {\n      return commands[name].action(...args);\n    }\n  }\n  return null;\n}\n\n// Helper to consistently find online users in command handlers.\nexport function findUser(users, username) {\n  const lname = username.toLowerCase();\n  return find(users, o => o.username.toLowerCase() === lname);\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst FormGroup = ({ children, className, ...props }) => (\n  <div\n    className={cx('FormGroup', className)}\n    {...props}\n  >\n    {children}\n  </div>\n);\n\nFormGroup.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node.isRequired,\n};\n\nexport default FormGroup;\n","import { createSelector } from 'reselect';\n\nimport { isPreviewMediaDialogOpenSelector } from './dialogSelectors';\nimport { isMutedSelector, volumeSelector } from './settingSelectors';\nimport { currentTimeSelector } from './timeSelectors';\nimport {\n  currentUserSelector,\n  currentUserHasRoleSelector,\n  usersSelector,\n} from './userSelectors';\n\nconst baseSelector = state => state.booth;\n\nexport const historyIDSelector = createSelector(baseSelector, booth => booth.historyID);\nexport const mediaSelector = createSelector(baseSelector, booth => booth.media);\nexport const startTimeSelector = createSelector(baseSelector, booth => booth.startTime || 0);\n\nexport const mediaDurationSelector = createSelector(\n  mediaSelector,\n  media => (media ? media.end - media.start : 0),\n);\n\nexport const endTimeSelector = createSelector(\n  startTimeSelector,\n  mediaDurationSelector,\n  (startTime, duration) => startTime + (duration * 1000) || 0,\n);\n\nexport const timeElapsedSelector = createSelector(\n  startTimeSelector,\n  currentTimeSelector,\n  // in seconds! because media duration is in seconds, too.\n  (startTime, currentTime) => (startTime ? Math.max((currentTime - startTime) / 1000, 0) : 0),\n);\n\nexport const timeRemainingSelector = createSelector(\n  mediaDurationSelector,\n  timeElapsedSelector,\n  (duration, elapsed) => (duration > 0 ? duration - elapsed : 0),\n);\n\nexport const mediaProgressSelector = createSelector(\n  mediaDurationSelector,\n  timeElapsedSelector,\n  (duration, elapsed) => (\n    duration\n      // Ensure that the result is between 0 and 1\n      // It can be outside this range if a network or server hiccup\n      // results in an advance event getting delayed.\n      ? Math.max(0, Math.min(1, elapsed / duration))\n      : 0\n  ),\n);\n\nexport const djSelector = createSelector(\n  baseSelector,\n  usersSelector,\n  (booth, users) => users[booth.djID],\n);\n\nexport const isCurrentDJSelector = createSelector(\n  djSelector,\n  currentUserSelector,\n  (dj, me) => (\n    dj && me ? dj._id === me._id : false\n  ),\n);\n\nexport const canSkipSelector = createSelector(\n  historyIDSelector,\n  isCurrentDJSelector,\n  currentUserHasRoleSelector,\n  (historyID, isCurrentDJ, hasRole) => {\n    if (!historyID) {\n      return false;\n    }\n    return isCurrentDJ ? hasRole('booth.skip.self') : hasRole('booth.skip.other');\n  },\n);\n\n// Playback should be muted when the user requested it,\n// and when a media preview dialog is open. (Otherwise their audio will interfere.)\nconst playbackMutedSelector = createSelector(\n  isMutedSelector,\n  isPreviewMediaDialogOpenSelector,\n  (isMuted, isPreviewMediaDialogOpen) => isMuted || isPreviewMediaDialogOpen,\n);\n\nexport const playbackVolumeSelector = createSelector(\n  volumeSelector,\n  playbackMutedSelector,\n  (volume, isMuted) => (isMuted ? 0 : volume),\n);\n\nexport const mobilePlaybackVolumeSelector = createSelector(\n  playbackMutedSelector,\n  isMuted => (isMuted ? 0 : 100),\n);\n","import { findDOMNode } from 'react-dom';\n\nexport default function isDraggingNearTopOfRow(monitor, component) {\n  // FIXME do this without findDOMNode, perhaps by using refs in the calling\n  // components.\n  // eslint-disable-next-line react/no-find-dom-node\n  const componentRect = findDOMNode(component).getBoundingClientRect();\n  const clientOffset = monitor.getClientOffset();\n\n  const middle = Math.ceil(componentRect.height / 2);\n  const topOffset = clientOffset.y - componentRect.top;\n  return topOffset < middle;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\n\nconst Action = ({ children, onAction, ...attrs }) => (\n  <IconButton\n    className=\"MediaActions-action\"\n    onClick={onAction}\n    {...attrs}\n  >\n    {children}\n  </IconButton>\n);\n\nAction.propTypes = {\n  children: PropTypes.element,\n  onAction: PropTypes.func,\n};\n\nexport default Action;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport MediaLoadingIndicator from './MediaLoadingIndicator';\n\nconst LoadingRow = ({\n  className,\n  selected = false,\n  ...attrs\n}) => (\n  <div\n    className={cx('MediaListRow', 'is-loading', className, selected && 'is-selected')}\n    {...attrs}\n  >\n    <MediaLoadingIndicator className=\"MediaListRow-loader\" />\n    <div className=\"MediaListRow-artist\">  </div>\n    <div className=\"MediaListRow-title\">  </div>\n    <div className=\"MediaListRow-duration\">  </div>\n  </div>\n);\n\nLoadingRow.propTypes = {\n  className: PropTypes.string,\n  selected: PropTypes.bool,\n};\n\nexport default LoadingRow;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport BaseList from 'react-list';\nimport LazyList from 'react-list-lazy-load';\nimport itemSelection from 'item-selection/immutable';\nimport LoadingRow from './LoadingRow';\n\n/**\n * Check if two media lists are different, taking into account\n * pagination. If the new media list contains items where the previous\n * list doesn't, but every other item is identical, we assume\n * the new list has just loaded a page that wasn't loaded in the\n * previous one, and decide that the list is not really different.\n */\nfunction didMediaChange(prev, next) {\n  return prev.some((item, i) => item && next[i] && item._id !== next[i]._id);\n}\n\nexport default class BaseMediaList extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    media: PropTypes.array,\n    size: PropTypes.number,\n    onRequestPage: PropTypes.func,\n    listComponent: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.func,\n    ]).isRequired,\n    rowComponent: PropTypes.func.isRequired,\n    rowProps: PropTypes.object,\n\n    onOpenPreviewMediaDialog: PropTypes.func,\n    makeActions: PropTypes.func,\n  };\n\n  static defaultProps = {\n    // The `size` property is only necessary for lazy loading.\n    size: null,\n    makeActions: () => <span />,\n  };\n\n  state = { selection: itemSelection(this.props.media) };\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.media !== this.props.media) {\n      const selection = this.state.selection.getIndices();\n      const mediaChanged = didMediaChange(this.props.media, nextProps.media);\n      this.setState({\n        selection: mediaChanged\n          ? itemSelection(nextProps.media)\n          : itemSelection(nextProps.media, selection),\n      });\n    }\n  }\n\n  selectItem(index, e) {\n    e.preventDefault();\n\n    let { selection } = this.state;\n\n    if (e.shiftKey) {\n      selection = selection.selectRange(index);\n    } else if (e.ctrlKey) {\n      selection = selection.selectToggle(index);\n    } else {\n      selection = selection.select(index);\n    }\n\n    this.setState({ selection });\n  }\n\n  renderList = (items, ref) => {\n    const ListComponent = this.props.listComponent;\n\n    return (\n      <ListComponent ref={ref}>\n        {items}\n      </ListComponent>\n    );\n  };\n\n  renderRow = (index) => {\n    const { makeActions } = this.props;\n    const props = this.props.rowProps || {};\n    const media = this.props.media[index];\n    const { selection } = this.state;\n    const selected = selection.isSelectedIndex(index);\n    if (!media) {\n      return (\n        <LoadingRow\n          key={index}\n          className=\"MediaList-row\"\n          selected={selected}\n        />\n      );\n    }\n    const MediaRow = this.props.rowComponent;\n    const isAlternate = index % 2 === 0;\n    return (\n      <MediaRow\n        key={media ? media._id : index}\n        {...props}\n        className={cx('MediaList-row', isAlternate && 'MediaListRow--alternate')}\n        media={media}\n        selected={selected}\n        selection={selection.get()}\n        onClick={e => this.selectItem(index, e)}\n        onOpenPreviewMediaDialog={this.props.onOpenPreviewMediaDialog}\n        makeActions={() => makeActions(media, selection, index)}\n      />\n    );\n  };\n\n  render() {\n    const {\n      className, media, size, onRequestPage,\n    } = this.props;\n    let list = (\n      <BaseList\n        itemsRenderer={this.renderList}\n        itemRenderer={this.renderRow}\n        length={size || media.length}\n        type=\"uniform\"\n        forceUpdateOnMediaChange={media}\n        forceUpdateOnSelectionChange={this.state.selection}\n      />\n    );\n    if (onRequestPage) {\n      list = (\n        <LazyList\n          items={media}\n          length={size || media.length}\n          pageSize={50}\n          onRequestPage={onRequestPage}\n        >\n          {list}\n        </LazyList>\n      );\n    }\n    return (\n      <div className={cx('MediaList', className)}>\n        {list}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport AddIcon from '@material-ui/icons/Add';\nimport Action from './Action';\n\nconst handleAdd = onAdd => (event) => {\n  const pos = event.target.getBoundingClientRect();\n  onAdd({\n    x: pos.left,\n    y: pos.top,\n  });\n};\n\nconst AddToPlaylist = ({ onAdd, ...props }) => (\n  <Action\n    {...props}\n    onAction={handleAdd(onAdd)}\n  >\n    <AddIcon />\n  </Action>\n);\n\nAddToPlaylist.propTypes = {\n  onAdd: PropTypes.func.isRequired,\n};\n\nexport default AddToPlaylist;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport uniqueId from 'lodash/uniqueId';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport TextField from '../../Form/TextField';\nimport Button from '../../Form/Button';\n\nexport default class PromptDialog extends React.Component {\n  static propTypes = {\n    children: PropTypes.node,\n    placeholder: PropTypes.string,\n    submitLabel: PropTypes.string,\n    inputType: PropTypes.string,\n    icon: PropTypes.node,\n    value: PropTypes.string,\n    title: PropTypes.string,\n    open: PropTypes.bool,\n\n    bodyClassName: PropTypes.string,\n    contentClassName: PropTypes.string,\n    titleClassName: PropTypes.string,\n\n    onSubmit: PropTypes.func.isRequired,\n    onCancel: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    submitLabel: 'OK',\n    inputType: 'text',\n    open: true,\n  };\n\n  state = {\n    busy: false,\n    value: this.props.value || '',\n  };\n\n  title = uniqueId('title');\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const promise = this.props.onSubmit(this.input.value);\n    if (promise && promise.then) {\n      this.setState({ busy: true });\n      const onDone = () => {\n        this.setState({ busy: false });\n      };\n      promise.then(onDone, onDone);\n    }\n  };\n\n  handleClose = () => {\n    this.props.onCancel();\n  };\n\n  handleInputChange = (event) => {\n    this.setState({ value: event.target.value });\n  };\n\n  refInput = (input) => {\n    this.input = input;\n  };\n\n  render() {\n    const {\n      children,\n      icon,\n      inputType,\n      placeholder,\n      submitLabel,\n      title,\n\n      bodyClassName,\n      contentClassName,\n      titleClassName,\n\n      onSubmit,\n\n      ...props\n    } = this.props;\n    const {\n      busy,\n      value,\n    } = this.state;\n\n    return (\n      <Dialog\n        fullWidth\n        {...props}\n        classes={{\n          paper: cx('Dialog', contentClassName),\n        }}\n        onClose={this.handleClose}\n        aria-labelledby={this.title}\n      >\n        <DialogTitle className={cx('Dialog-title', titleClassName)} id={this.title}>\n          {title}\n        </DialogTitle>\n        <DialogContent className={cx('Dialog-body', bodyClassName)}>\n          <Form onSubmit={this.handleSubmit}>\n            {children}\n            <FormGroup>\n              <TextField\n                ref={this.refInput}\n                autoFocus\n                type={inputType}\n                placeholder={placeholder}\n                icon={icon}\n                value={value}\n                onChange={this.handleInputChange}\n              />\n            </FormGroup>\n            <FormGroup>\n              <Button disabled={busy}>\n                {busy ? <div className=\"Button-loading\"><CircularProgress size=\"100%\" /></div> : submitLabel}\n              </Button>\n            </FormGroup>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MediaThumbnail = ({ url }) => (\n  <div className=\"MediaListRow-thumb\">\n    <img\n      className=\"MediaListRow-image\"\n      src={url}\n      alt=\"\"\n    />\n  </div>\n);\n\nMediaThumbnail.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\nexport default MediaThumbnail;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragSource } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport formatDuration from 'format-duration';\nimport { MEDIA } from '../../constants/DDItemTypes';\nimport MediaLoadingIndicator from './MediaLoadingIndicator';\nimport MediaThumbnail from './MediaThumbnail';\nimport Actions from './Actions';\n\nconst inSelection = (selection, media) =>\n  selection.some(item => item._id === media._id);\n\nconst mediaSource = {\n  beginDrag({ selection, media }) {\n    return {\n      media: inSelection(selection, media) ? selection : [media],\n    };\n  },\n};\n\nconst collect = connect => ({\n  connectDragSource: connect.dragSource(),\n  connectDragPreview: connect.dragPreview(),\n});\n\nconst enhance = DragSource(MEDIA, mediaSource, collect);\n\nclass Row extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    connectDragSource: PropTypes.func.isRequired,\n    connectDragPreview: PropTypes.func.isRequired,\n    media: PropTypes.object,\n    selected: PropTypes.bool,\n    selection: PropTypes.array,\n\n    onOpenPreviewMediaDialog: PropTypes.func,\n    onClick: PropTypes.func,\n    makeActions: PropTypes.func,\n  };\n\n  static defaultProps = {\n    selected: false,\n  };\n\n  componentDidMount() {\n    this.props.connectDragPreview(getEmptyImage());\n  }\n\n  handleKeyPress = (event) => {\n    if (event.code === 'Space') {\n      this.props.onClick();\n    }\n  };\n\n  handleDoubleClick = () => {\n    this.props.onOpenPreviewMediaDialog(this.props.media);\n  };\n\n  render() {\n    const {\n      className,\n      media,\n      selection,\n      selected,\n      connectDragSource,\n      // actions\n      makeActions,\n      // etc\n      onClick,\n    } = this.props;\n    const selectedClass = selected ? 'is-selected' : '';\n    const loadingClass = media.loading ? 'is-loading' : '';\n    const duration = 'start' in media\n      // playlist item\n      ? media.end - media.start\n      // search result\n      : media.duration;\n\n    return connectDragSource((\n      // Bit uneasy about this, but turning the entire row into a button seems\n      // wrong as well! Since we nest media action <button>s inside it, too.\n      //\n      // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      <div\n        className={cx('MediaListRow', className, selectedClass, loadingClass)}\n        onDoubleClick={this.handleDoubleClick}\n        onKeyPress={this.handleKeyPress}\n        onClick={onClick}\n      >\n        {media.loading ? (\n          <MediaLoadingIndicator className=\"MediaListRow-loader\" />\n        ) : (\n          <MediaThumbnail url={media.thumbnail} />\n        )}\n        <div className=\"MediaListRow-artist\" title={media.artist}>\n          {media.artist}\n        </div>\n        <div className=\"MediaListRow-title\" title={media.title}>\n          {media.title}\n        </div>\n        <div className=\"MediaListRow-duration\">\n          {formatDuration(duration * 1000)}\n        </div>\n        <Actions\n          className={cx('MediaListRow-actions', selectedClass)}\n          selection={selection}\n          media={media}\n          makeActions={makeActions}\n        />\n      </div>\n    ));\n  }\n}\n\nexport default enhance(Row);\n","const formatters = {\n  date: {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n  },\n  time: {\n    hour: 'numeric',\n    minute: 'numeric',\n  },\n};\n\nconst all = {\n  ...formatters.date,\n  ...formatters.time,\n};\n\nexport default function formatJoinDate(date, only) {\n  const format = only ? formatters[only] : all;\n  return new Date(date).toLocaleString([], format);\n}\n","import {\n  LOAD_ALL_PLAYLISTS_START, LOAD_ALL_PLAYLISTS_COMPLETE,\n  LOAD_PLAYLIST_START, LOAD_PLAYLIST_COMPLETE,\n  FILTER_PLAYLIST_ITEMS,\n  FILTER_PLAYLIST_ITEMS_START, FILTER_PLAYLIST_ITEMS_COMPLETE,\n  PLAYLIST_CYCLED,\n  SELECT_PLAYLIST,\n  ACTIVATE_PLAYLIST_START, ACTIVATE_PLAYLIST_COMPLETE,\n  CREATE_PLAYLIST_START, CREATE_PLAYLIST_COMPLETE,\n  RENAME_PLAYLIST_START, RENAME_PLAYLIST_COMPLETE,\n  DELETE_PLAYLIST_START, DELETE_PLAYLIST_COMPLETE,\n  OPEN_ADD_MEDIA_MENU, CLOSE_ADD_MEDIA_MENU,\n  ADD_MEDIA_START, ADD_MEDIA_COMPLETE,\n  REMOVE_MEDIA_START, REMOVE_MEDIA_COMPLETE,\n  MOVE_MEDIA_START, MOVE_MEDIA_COMPLETE,\n  UPDATE_MEDIA_START, UPDATE_MEDIA_COMPLETE,\n  SHUFFLE_PLAYLIST_START, SHUFFLE_PLAYLIST_COMPLETE,\n} from '../constants/ActionTypes';\nimport { openEditMediaDialog } from './DialogActionCreators';\nimport { del, get, post, put } from './RequestActionCreators';\nimport {\n  playlistsSelector,\n  playlistItemsSelector,\n  playlistItemFilterSelector,\n  activePlaylistIDSelector,\n  selectedPlaylistIDSelector,\n  activePlaylistSelector,\n  selectedPlaylistSelector,\n} from '../selectors/playlistSelectors';\nimport mergeIncludedModels from '../utils/mergeIncludedModels';\n\nconst MEDIA_PAGE_SIZE = 50;\n\nexport function setPlaylists(playlists) {\n  return {\n    type: LOAD_ALL_PLAYLISTS_COMPLETE,\n    payload: { playlists },\n  };\n}\n\nexport function flattenPlaylistItem(item) {\n  return {\n    ...item.media,\n    ...item,\n  };\n}\n\nexport function loadPlaylistStart(playlistID, page, { sneaky = false } = {}) {\n  return {\n    type: LOAD_PLAYLIST_START,\n    payload: { playlistID },\n    meta: { page, sneaky },\n  };\n}\n\nexport function loadPlaylistComplete(playlistID, media, pagination) {\n  return {\n    type: LOAD_PLAYLIST_COMPLETE,\n    payload: { playlistID, media },\n    meta: pagination,\n  };\n}\n\nexport function loadPlaylist(playlistID, page = 0, meta = {}) {\n  return get(`/playlists/${playlistID}/media`, {\n    qs: { page, limit: MEDIA_PAGE_SIZE },\n    onStart: () => loadPlaylistStart(playlistID, page, meta),\n    onComplete: res => loadPlaylistComplete(\n      playlistID,\n      mergeIncludedModels(res).map(flattenPlaylistItem),\n      {\n        page: res.meta.offset / res.meta.pageSize,\n        pageSize: res.meta.pageSize,\n        size: res.meta.total,\n      },\n    ),\n    onError: error => ({\n      type: LOAD_PLAYLIST_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { page },\n    }),\n  });\n}\n\nexport function filterPlaylistItemsStart(playlistID, page, filter) {\n  return {\n    type: FILTER_PLAYLIST_ITEMS_START,\n    payload: { playlistID, filter },\n    meta: { page },\n  };\n}\n\nexport function filterPlaylistItemsComplete(playlistID, media, pagination) {\n  return {\n    type: FILTER_PLAYLIST_ITEMS_COMPLETE,\n    payload: { playlistID, media },\n    meta: pagination,\n  };\n}\n\nexport function loadFilteredPlaylistItems(playlistID, page = 0) {\n  return (dispatch, getState) => {\n    const filter = playlistItemFilterSelector(getState()) || '';\n    return dispatch(get(`/playlists/${playlistID}/media`, {\n      qs: { filter, page, limit: MEDIA_PAGE_SIZE },\n      onStart: () => filterPlaylistItemsStart(playlistID, page, filter),\n      onComplete: res => filterPlaylistItemsComplete(\n        playlistID,\n        mergeIncludedModels(res).map(flattenPlaylistItem),\n        {\n          page: res.meta.offset / res.meta.pageSize,\n          pageSize: res.meta.pageSize,\n          size: res.meta.results,\n          filter,\n        },\n      ),\n      onError: error => ({\n        type: FILTER_PLAYLIST_ITEMS_COMPLETE,\n        error: true,\n        payload: error,\n        meta: { page },\n      }),\n    }));\n  };\n}\n\nexport function filterPlaylistItems(playlistID, filter) {\n  return (dispatch) => {\n    dispatch({\n      type: FILTER_PLAYLIST_ITEMS,\n      payload: { playlistID, filter },\n    });\n\n    const loadAll = loadPlaylist(playlistID, 0);\n    const loadFiltered = loadFilteredPlaylistItems(playlistID, 0);\n    dispatch(filter === '' ? loadAll : loadFiltered);\n  };\n}\n\nexport function selectPlaylist(playlistID) {\n  return (dispatch) => {\n    dispatch({\n      type: SELECT_PLAYLIST,\n      payload: { playlistID },\n    });\n\n    if (playlistID) {\n      dispatch(loadPlaylist(playlistID));\n    }\n  };\n}\n\nexport function playlistCycled(playlistID) {\n  return {\n    type: PLAYLIST_CYCLED,\n    payload: { playlistID },\n  };\n}\n\nfunction shouldLoadAfterCycle(playlist) {\n  const { media } = playlist;\n  // If the playlist was fully loaded, we can cycle naively\n  if (media.length === playlist.size && media.every(Boolean)) {\n    return false;\n  }\n  // If the first page _after_ cycle is fully loaded, we also don't need to do\n  // anything.\n  if (media.length > MEDIA_PAGE_SIZE &&\n      media.slice(1, 1 + MEDIA_PAGE_SIZE).every(Boolean)) {\n    return false;\n  }\n  // Otherwise, there will be unloaded items on the first page after cycling,\n  // so we want to eagerly load the page again.\n  return true;\n}\n\nexport function cyclePlaylist(playlistID) {\n  return (dispatch, getState) => {\n    const activePlaylist = activePlaylistSelector(getState());\n    const selectedPlaylist = selectedPlaylistSelector(getState());\n\n    let playlist;\n\n    if (playlistID === activePlaylist._id) {\n      playlist = activePlaylist;\n    } else if (playlistID === selectedPlaylist._id) {\n      playlist = selectedPlaylist;\n    }\n\n    dispatch(playlistCycled(playlistID));\n\n    if (playlist && shouldLoadAfterCycle(playlist)) {\n      dispatch(loadPlaylist(playlistID, 0));\n    }\n  };\n}\n\nexport function activatePlaylistStart(playlistID) {\n  return {\n    type: ACTIVATE_PLAYLIST_START,\n    payload: { playlistID },\n  };\n}\n\nexport function activatePlaylistComplete(playlistID) {\n  return {\n    type: ACTIVATE_PLAYLIST_COMPLETE,\n    payload: { playlistID },\n  };\n}\n\nexport function activatePlaylist(playlistID) {\n  return put(`/playlists/${playlistID}/activate`, {}, {\n    onStart: () => activatePlaylistStart(playlistID),\n    onComplete: () => activatePlaylistComplete(playlistID),\n    onError: error => ({\n      type: ACTIVATE_PLAYLIST_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { playlistID },\n    }),\n  });\n}\n\nexport function loadPlaylistsStart() {\n  return { type: LOAD_ALL_PLAYLISTS_START };\n}\n\nexport function loadPlaylistsComplete(playlists) {\n  return {\n    type: LOAD_ALL_PLAYLISTS_COMPLETE,\n    payload: { playlists },\n  };\n}\n\nexport function loadPlaylists() {\n  return get('/playlists', {\n    onStart: loadPlaylistsStart,\n    onComplete: res => loadPlaylistsComplete(res.data),\n    onError: error => ({\n      type: LOAD_ALL_PLAYLISTS_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function createPlaylistStart(props, tempId) {\n  return {\n    type: CREATE_PLAYLIST_START,\n    payload: props,\n    meta: { tempId },\n  };\n}\n\nexport function createPlaylistComplete(playlist, tempId) {\n  return {\n    type: CREATE_PLAYLIST_COMPLETE,\n    payload: { playlist },\n    meta: { tempId },\n  };\n}\n\nexport function createPlaylist(name) {\n  const tempId = -Date.now();\n  const description = '';\n  const shared = false;\n\n  return post('/playlists', { name, description, shared }, {\n    onStart: () => createPlaylistStart({ name, description, shared }, tempId),\n    onComplete: res => (dispatch, getState) => {\n      const playlist = res.data;\n      const isFirstPlaylist = !activePlaylistIDSelector(getState());\n      dispatch(createPlaylistComplete(playlist, tempId));\n      if (isFirstPlaylist) {\n        dispatch(activatePlaylistComplete(playlist._id));\n      }\n      return playlist;\n    },\n    onError: error => ({\n      type: CREATE_PLAYLIST_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { tempId },\n    }),\n  });\n}\n\nexport function renamePlaylist(playlistID, name) {\n  return put(`/playlists/${playlistID}/rename`, { name }, {\n    onStart: () => ({\n      type: RENAME_PLAYLIST_START,\n      payload: { playlistID, name },\n    }),\n    onComplete: ({ data }) => ({\n      type: RENAME_PLAYLIST_COMPLETE,\n      payload: { playlistID, name: data.name },\n    }),\n    onError: error => ({\n      type: RENAME_PLAYLIST_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { playlistID, name },\n    }),\n  });\n}\n\n/**\n * Select or activate a different playlist than the one given.\n * @return Promise\n */\n\nexport function deselectPlaylist(playlistID) {\n  return (dispatch, getState) => {\n    const selectedID = selectedPlaylistIDSelector(getState());\n    const activeID = activePlaylistIDSelector(getState());\n    if (playlistID === selectedID) {\n      dispatch(selectPlaylist(activeID));\n    }\n  };\n}\n\nexport function deletePlaylistStart(playlistID) {\n  return {\n    type: DELETE_PLAYLIST_START,\n    payload: { playlistID },\n  };\n}\n\nexport function deletePlaylistComplete(playlistID) {\n  return {\n    type: DELETE_PLAYLIST_COMPLETE,\n    payload: { playlistID },\n  };\n}\n\nexport function cannotDeleteActivePlaylist(playlistID) {\n  return {\n    type: DELETE_PLAYLIST_COMPLETE,\n    error: true,\n    payload: new Error('The active playlist cannot be deleted. ' +\n      'Activate a different playlist first, before deleting this one.'),\n    meta: { playlistID },\n  };\n}\n\nexport function deletePlaylist(playlistID) {\n  return (dispatch, getState) => {\n    const activeID = activePlaylistIDSelector(getState());\n\n    if (playlistID === activeID) {\n      dispatch(cannotDeleteActivePlaylist(playlistID));\n      return null;\n    }\n\n    dispatch(deselectPlaylist(playlistID));\n\n    return dispatch(del(`/playlists/${playlistID}`, {}, {\n      onStart: () => deletePlaylistStart(playlistID),\n      onComplete: () => deletePlaylistComplete(playlistID),\n      onError: error => ({\n        type: DELETE_PLAYLIST_COMPLETE,\n        error: true,\n        payload: error,\n        meta: { playlistID },\n      }),\n    }));\n  };\n}\n\nexport function addMediaMenu(items, position) {\n  return (dispatch, getState) => {\n    const playlists = playlistsSelector(getState());\n    dispatch({\n      type: OPEN_ADD_MEDIA_MENU,\n      payload: {\n        media: items,\n      },\n      meta: {\n        playlists,\n        position,\n        type: 'add',\n      },\n    });\n  };\n}\n\nexport function closeAddMediaMenu() {\n  return { type: CLOSE_ADD_MEDIA_MENU };\n}\n\nexport function addMediaStart(playlistID, media, location) {\n  return {\n    type: ADD_MEDIA_START,\n    payload: { playlistID, media, location },\n  };\n}\n\nexport function addMediaComplete(playlistID, newSize, insert) {\n  return {\n    type: ADD_MEDIA_COMPLETE,\n    payload: {\n      playlistID,\n      newSize,\n      afterID: insert.afterID,\n      appendedMedia: insert.media,\n    },\n  };\n}\n\n/**\n * Keep only the playlist item properties that are necessary to add an item to\n * a playlist. The rest (\"thumbnail\" etc) is left out for smaller payloads.\n */\n\nfunction minimizePlaylistItem(item) {\n  return {\n    sourceType: item.sourceType,\n    sourceID: item.sourceID,\n    artist: item.artist,\n    title: item.title,\n    start: item.start,\n    end: item.end,\n  };\n}\n\nexport function addMedia(playlist, items, afterID = null) {\n  const payload = {\n    items: items.map(minimizePlaylistItem),\n    after: afterID,\n  };\n\n  return post(`/playlists/${playlist._id}/media`, payload, {\n    onStart: () => addMediaStart(playlist._id, items, afterID),\n    onComplete: res => addMediaComplete(\n      playlist._id,\n      res.meta.playlistSize,\n      { afterID, media: mergeIncludedModels(res).map(flattenPlaylistItem) },\n    ),\n    onError: error => ({\n      type: ADD_MEDIA_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function editMedia(playlistID, media) {\n  return openEditMediaDialog(playlistID, media);\n}\n\nexport function updateMediaStart(playlistID, mediaID, props) {\n  return {\n    type: UPDATE_MEDIA_START,\n    payload: { playlistID, mediaID, props },\n  };\n}\n\nexport function updateMediaComplete(playlistID, mediaID, media) {\n  return {\n    type: UPDATE_MEDIA_COMPLETE,\n    payload: { playlistID, mediaID, media },\n  };\n}\n\nexport function updateMedia(playlistID, mediaID, props) {\n  return put(`/playlists/${playlistID}/media/${mediaID}`, props, {\n    onStart: () => updateMediaStart(playlistID, mediaID, props),\n    onComplete: res => updateMediaComplete(playlistID, mediaID, res.data),\n    onError: error => ({\n      type: UPDATE_MEDIA_COMPLETE,\n      payload: error,\n      error: true,\n      meta: { playlistID, mediaID, props },\n    }),\n  });\n}\n\nexport function removeMediaStart(playlistID, items) {\n  return {\n    type: REMOVE_MEDIA_START,\n    payload: { playlistID, medias: items },\n  };\n}\n\nexport function removeMediaComplete(playlistID, newSize, removedMedia) {\n  return {\n    type: REMOVE_MEDIA_COMPLETE,\n    payload: {\n      playlistID,\n      newSize,\n      removedMedia,\n    },\n  };\n}\n\nexport function removeMedia(playlistID, items) {\n  const itemIDs = items.map(media => media._id);\n  return del(`/playlists/${playlistID}/media`, { items: itemIDs }, {\n    onStart: () => removeMediaStart(playlistID, items),\n    onComplete: ({ meta }) => removeMediaComplete(\n      playlistID,\n      meta.playlistSize,\n      items,\n    ),\n    onError: error => ({\n      type: REMOVE_MEDIA_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function moveMediaStart(playlistID, items, location) {\n  return {\n    type: MOVE_MEDIA_START,\n    payload: { playlistID, location, medias: items },\n  };\n}\n\nexport function moveMediaComplete(playlistID, items, location) {\n  return {\n    type: MOVE_MEDIA_COMPLETE,\n    payload: { playlistID, location, medias: items },\n  };\n}\n\nfunction resolveMoveOptions(playlist = [], opts = {}) {\n  if (opts.after) {\n    return { after: opts.after };\n  }\n  if (opts.before) {\n    for (let i = 0, l = playlist.length; i < l; i += 1) {\n      if (playlist[i] && playlist[i]._id === opts.before) {\n        if (i === 0) {\n          return { at: 'start' };\n        }\n        return { after: playlist[i - 1]._id };\n      }\n    }\n  }\n  if (opts.at) {\n    return { at: opts.at };\n  }\n  return null;\n}\n\nexport function moveMedia(playlistID, medias, opts) {\n  return (dispatch, getState) => {\n    const playlistItems = playlistItemsSelector(getState())[playlistID];\n    const location = resolveMoveOptions(playlistItems, opts);\n\n    const items = medias.map(media => media._id);\n\n    return dispatch(put(`/playlists/${playlistID}/move`, { items, ...location }, {\n      onStart: () => moveMediaStart(playlistID, medias, location),\n      onComplete: () => moveMediaComplete(playlistID, medias, location),\n      onError: error => ({\n        type: MOVE_MEDIA_COMPLETE,\n        error: true,\n        payload: error,\n        meta: { playlistID, medias, location },\n      }),\n    }));\n  };\n}\n\nexport function shufflePlaylistStart(playlistID) {\n  return {\n    type: SHUFFLE_PLAYLIST_START,\n    payload: { playlistID },\n  };\n}\n\nexport function shufflePlaylistComplete(playlistID) {\n  return (dispatch) => {\n    dispatch({\n      type: SHUFFLE_PLAYLIST_COMPLETE,\n      payload: { playlistID },\n    });\n  };\n}\n\nexport function shufflePlaylist(playlistID) {\n  return (dispatch) => {\n    const shuffleOperation = post(`/playlists/${playlistID}/shuffle`, {}, {\n      onStart: () => shufflePlaylistStart(playlistID),\n      // onComplete: () => shufflePlaylistComplete(playlistID),\n      onError: error => ({\n        type: SHUFFLE_PLAYLIST_COMPLETE,\n        error: true,\n        payload: error,\n        meta: { playlistID },\n      }),\n    });\n    const loadOperation = loadPlaylist(playlistID, 0, { sneaky: true });\n\n    return dispatch(shuffleOperation)\n      .then(() => dispatch(loadOperation))\n      .then(() => dispatch(shufflePlaylistComplete(playlistID)));\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Component that handles the material-ui/Dialog close animation when a Dialog unmounts.\n */\nexport default class DialogCloseAnimation extends React.Component {\n  static propTypes = {\n    children: PropTypes.element,\n    delay: PropTypes.number.isRequired,\n  };\n\n  state = {\n    children: this.props.children,\n  };\n\n  // TODO translate this to componentDidUpdate()?\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.children) {\n      this.clearTimeout();\n      this.setState({\n        children: nextProps.children,\n      });\n    }\n    if (this.state.children && !nextProps.children) {\n      this.setState({\n        children: React.cloneElement(this.state.children, {\n          open: false,\n        }),\n      });\n\n      this.timeout = setTimeout(() => {\n        this.setState({\n          children: null,\n        });\n        this.timeout = null;\n      }, this.props.delay);\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearTimeout();\n  }\n\n  timeout = null;\n\n  clearTimeout() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = null;\n    }\n  }\n\n  render() {\n    return this.state.children || null;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport upperCaseFirst from 'upper-case-first';\nimport RoleColor from '../RoleColor';\n\nconst enhance = translate();\n\nconst UserRole = ({\n  t,\n  roleName,\n}) => (\n  <RoleColor component=\"div\" className=\"UserRole\" role={roleName}>\n    {t(`roles.${roleName}`, { defaultValue: upperCaseFirst(roleName) })}\n  </RoleColor>\n);\n\nUserRole.propTypes = {\n  t: PropTypes.func.isRequired,\n  roleName: PropTypes.string.isRequired,\n};\n\nexport default enhance(UserRole);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport UserRole from '../UserRole';\n\n/**\n * A list of roles.\n */\nconst UserRoles = ({ roles }) => (\n  <div className=\"UserRoles\">\n    {roles.map(roleName => (\n      <div className=\"UserRoles-role\" key={roleName}>\n        <UserRole roleName={roleName} />\n      </div>\n    ))}\n  </div>\n);\n\nUserRoles.propTypes = {\n  /**\n   * The roles to display.\n   */\n  roles: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nexport default UserRoles;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst dontBubble = event => event.stopPropagation();\n\n/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\nconst Actions = ({\n  className,\n  makeActions,\n  media,\n}) => (\n  <div\n    className={cx('MediaActions', className)}\n    onClick={dontBubble}\n  >\n    {makeActions(media)}\n  </div>\n);\n/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\n\nActions.propTypes = {\n  className: PropTypes.string,\n  media: PropTypes.object,\n  makeActions: PropTypes.func,\n};\n\nexport default Actions;\n","import { createSelector } from 'reselect';\nimport naturalCmp from 'natural-compare';\nimport values from 'object-values';\n\nconst byName = (a, b) => naturalCmp(a.name.toLowerCase(), b.name.toLowerCase());\n\nconst baseSelector = state => state.playlists;\n\nexport const playlistsSelector = createSelector(\n  baseSelector,\n  playlists => values(playlists.playlists).sort(byName),\n);\n\nexport const playlistItemsSelector = createSelector(\n  baseSelector,\n  playlists => playlists.playlistItems,\n);\n\nexport const activePlaylistIDSelector = createSelector(\n  baseSelector,\n  playlists => playlists.activePlaylistID,\n);\n\nconst activeMediaSelector = createSelector(\n  playlistItemsSelector,\n  activePlaylistIDSelector,\n  (playlistItems, activePlaylist) => playlistItems[activePlaylist] || [],\n);\n\nfunction mergePlaylistItems(playlist, playlistItems) {\n  if (playlist) {\n    return {\n      ...playlist,\n      media: playlistItems,\n    };\n  }\n  return null;\n}\n\nexport const activePlaylistSelector = createSelector(\n  baseSelector,\n  activePlaylistIDSelector,\n  activeMediaSelector,\n  (playlists, activeID, activeMedia) =>\n    mergePlaylistItems(playlists.playlists[activeID], activeMedia),\n);\n\nexport const selectedPlaylistIDSelector = createSelector(\n  baseSelector,\n  playlists => playlists.selectedPlaylistID,\n);\n\nconst selectedMediaSelector = createSelector(\n  playlistItemsSelector,\n  selectedPlaylistIDSelector,\n  (playlistItems, selectedPlaylist) => playlistItems[selectedPlaylist] || [],\n);\n\nconst filterSelector = createSelector(\n  baseSelector,\n  base => base.currentFilter,\n);\n\nconst currentFilterSelector = createSelector(\n  filterSelector,\n  selectedPlaylistIDSelector,\n  (filter, selectedID) => {\n    if (filter && filter.playlistID === selectedID) {\n      return filter;\n    }\n    return null;\n  },\n);\n\nexport const playlistItemFilterSelector = createSelector(\n  currentFilterSelector,\n  filter => filter && filter.filter,\n);\n\nexport const filteredSelectedPlaylistItemsSelector = createSelector(\n  selectedPlaylistIDSelector,\n  selectedMediaSelector,\n  currentFilterSelector,\n  (selectedID, selectedItems, filter) => {\n    if (filter) {\n      return filter.items;\n    }\n    return selectedItems;\n  },\n);\n\nexport const selectedPlaylistSelector = createSelector(\n  baseSelector,\n  selectedPlaylistIDSelector,\n  selectedMediaSelector,\n  (playlists, selectedID, selectedMedia) =>\n    mergePlaylistItems(playlists.playlists[selectedID], selectedMedia),\n);\n\nexport const nextMediaSelector = createSelector(\n  activeMediaSelector,\n  media => (media ? media[0] : null),\n);\n\nexport const isSelectedPlaylistLoadingSelector = createSelector(\n  selectedPlaylistSelector,\n  selectedPlaylist => Boolean(selectedPlaylist.loading),\n);\n\nexport const isFilteredSelector = createSelector(\n  playlistItemFilterSelector,\n  filter => Boolean(filter),\n);\n","/* global window */\nimport find from 'array-find';\nimport { createSelector } from 'reselect';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { availableLanguages } from '../locale';\n\nfunction getAvailableLanguage(languages) {\n  return find(languages, lang => (\n    availableLanguages.indexOf(lang) !== -1\n  ));\n}\n\nfunction getDefaultLanguage() {\n  if (typeof window === 'object' && window.navigator && window.navigator.languages) {\n    const browserLanguage = getAvailableLanguage(window.navigator.languages);\n    if (browserLanguage) {\n      return browserLanguage;\n    }\n  }\n  return 'en';\n}\n\nconst settingsBaseSelector = state => state.settings;\n\nexport const themeSelector = createSelector(\n  state => state.theme,\n  base => createMuiTheme(base),\n);\n\nexport const volumeSelector = createSelector(\n  settingsBaseSelector,\n  settings => settings.volume,\n);\n\nexport const isMutedSelector = createSelector(\n  settingsBaseSelector,\n  settings => settings.muted,\n);\n\nexport const languageSelector = createSelector(\n  settingsBaseSelector,\n  getDefaultLanguage,\n  (settings, defaultLanguage) => settings.language || defaultLanguage,\n);\n\nexport const videoSizeSelector = createSelector(\n  settingsBaseSelector,\n  settings => settings.videoSize,\n);\n\nexport const videoEnabledSelector = createSelector(\n  settingsBaseSelector,\n  settings => settings.videoEnabled,\n);\n\n// Settings with selected values (from selectors above) rather than \"saved\"\n// values (from localStorage).\nexport const settingsSelector = createSelector(\n  settingsBaseSelector,\n  volumeSelector,\n  isMutedSelector,\n  videoSizeSelector,\n  languageSelector,\n  (base, volume, muted, videoSize, language) => ({\n    ...base,\n    volume,\n    muted,\n    videoSize,\n    language,\n  }),\n);\n\nexport const notificationSettingsSelector = createSelector(\n  settingsSelector,\n  settings => settings.notifications,\n);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class TextField extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    type: PropTypes.string,\n    icon: PropTypes.element,\n  };\n\n  static defaultProps = {\n    type: 'text',\n  };\n\n  get value() {\n    return this.input.value;\n  }\n\n  refInput = (input) => {\n    this.input = input;\n  };\n\n  render() {\n    const {\n      type, icon, className, ...props\n    } = this.props;\n    return (\n      <div className={cx('TextField', className)}>\n        <input\n          ref={this.refInput}\n          className=\"TextField-input\"\n          type={type}\n          {...props}\n        />\n        <div className=\"TextField-icon\">{icon}</div>\n      </div>\n    );\n  }\n}\n","import { createSelector, createStructuredSelector } from 'reselect';\nimport { timeRemainingSelector, djSelector, isCurrentDJSelector } from './boothSelectors';\nimport { currentUserSelector, usersSelector } from './userSelectors';\n\nconst baseSelector = state => state.waitlist;\n\nexport const isLockedSelector = createSelector(baseSelector, wl => !!wl.locked);\nconst waitlistIDsSelector = createSelector(baseSelector, wl => wl.waitlist);\n\nexport const sizeSelector = createSelector(\n  waitlistIDsSelector,\n  list => list.length,\n);\n\nexport const waitlistUsersSelector = createSelector(\n  waitlistIDsSelector,\n  usersSelector,\n  (ids, users) => ids.map(id => users[id]),\n);\n\nexport const djAndWaitlistUsersSelector = createSelector(\n  djSelector,\n  waitlistUsersSelector,\n  (dj, waitlist) => (dj ? [dj, ...waitlist] : waitlist),\n);\n\nexport const positionSelector = createSelector(\n  waitlistIDsSelector,\n  currentUserSelector,\n  (ids, user) => {\n    if (!user) return -1;\n    return ids.indexOf(user._id);\n  },\n);\n\nexport const userInWaitlistSelector = createSelector(\n  positionSelector,\n  isCurrentDJSelector,\n  (position, isDJ) => position !== -1 || isDJ,\n);\n\nexport const waitlistSelector = createStructuredSelector({\n  locked: isLockedSelector,\n  users: waitlistUsersSelector,\n});\n\n// Most videos come in at around 4 minutes.\nconst averagePlayDuration = 4 * 60 * 1000;\nexport const baseEtaSelector = createSelector(\n  positionSelector,\n  sizeSelector,\n  (position, size) =>\n    (position === -1 ? size : position) * averagePlayDuration,\n);\n\nexport const etaSelector = createSelector(\n  baseEtaSelector,\n  timeRemainingSelector,\n  (eta, remaining) => eta + remaining,\n);\n","module.exports = __webpack_public_path__ + \"soundcloud_b5094d5.png\";","module.exports = __webpack_public_path__ + \"soundcloud-inline_b17b29c.png\";","import {\n  CLOSE_RESET_PASSWORD_DIALOG,\n  OPEN_EDIT_MEDIA_DIALOG, CLOSE_EDIT_MEDIA_DIALOG,\n  OPEN_PREVIEW_MEDIA_DIALOG, CLOSE_PREVIEW_MEDIA_DIALOG,\n  OPEN_LOGIN_DIALOG, CLOSE_LOGIN_DIALOG,\n} from '../constants/ActionTypes';\n\nexport function openEditMediaDialog(playlistID, media) {\n  return {\n    type: OPEN_EDIT_MEDIA_DIALOG,\n    payload: { playlistID, media },\n  };\n}\n\nexport function closeEditMediaDialog() {\n  return { type: CLOSE_EDIT_MEDIA_DIALOG };\n}\n\nexport function openPreviewMediaDialog(media) {\n  return {\n    type: OPEN_PREVIEW_MEDIA_DIALOG,\n    payload: { media },\n  };\n}\n\nexport function closePreviewMediaDialog() {\n  return {\n    type: CLOSE_PREVIEW_MEDIA_DIALOG,\n  };\n}\n\nexport function openLoginDialog() {\n  return {\n    type: OPEN_LOGIN_DIALOG,\n    payload: { show: 'login' },\n  };\n}\nexport function openRegisterDialog() {\n  return {\n    type: OPEN_LOGIN_DIALOG,\n    payload: { show: 'register' },\n  };\n}\n\nexport function closeLoginDialog() {\n  return { type: CLOSE_LOGIN_DIALOG };\n}\n\nexport function openResetPasswordDialog() {\n  return {\n    type: OPEN_LOGIN_DIALOG,\n    payload: { show: 'reset' },\n  };\n}\n\nexport function closeResetPasswordDialog() {\n  return { type: CLOSE_RESET_PASSWORD_DIALOG };\n}\n","module.exports = __webpack_public_path__ + \"youtube_7f029e1.png\";","import { createSelector } from 'reselect';\nimport memoize from 'lodash/memoize';\n\nexport const configSelector = state => state.config;\n\nexport const requestOptionsSelector = createSelector(\n  configSelector,\n  (config) => {\n    const options = {};\n    if (config.apiUrl) {\n      options.apiUrl = config.apiUrl;\n    }\n    return options;\n  },\n);\n\nexport const availableEmojiImagesSelector = createSelector(\n  configSelector,\n  config => config.emoji || {},\n);\n\nexport const availableEmojiNamesSelector = createSelector(\n  availableEmojiImagesSelector,\n  emoji => Object.keys(emoji),\n);\n\nconst reCaptchaSelector = createSelector(\n  configSelector,\n  config => config.recaptcha,\n);\n\nexport const reCaptchaSiteKeySelector = createSelector(\n  reCaptchaSelector,\n  rc => (rc ? rc.key : false),\n);\n\nexport const rolesSelector = createSelector(\n  configSelector,\n  config => config.roles,\n);\n\nexport const roleSelector = memoize(roleName => createSelector(\n  rolesSelector,\n  roles => roles[roleName],\n));\n\n// TODO configurable.\nexport const roleColorsSelector = () => ({\n  admin: '#ff3b74',\n  manager: '#05daa5',\n  moderator: '#00b3dc',\n  special: '#fc911d',\n  default: '',\n});\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport MuiButton from '@material-ui/core/Button';\n\nconst Button = ({\n  children, className, text, ...props\n}) => (\n  <MuiButton\n    variant=\"raised\"\n    color=\"primary\"\n    className={cx('Button', className)}\n    type=\"submit\"\n    {...props}\n  >\n    {text || children}\n  </MuiButton>\n);\n\nButton.propTypes = {\n  className: PropTypes.string,\n  text: PropTypes.string,\n  children: PropTypes.node,\n};\n\nexport default Button;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Form = ({ children, className, ...props }) => (\n  <form className={cx('Form', className)} {...props}>\n    {children}\n  </form>\n);\n\nForm.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Form;\n","module.exports = __webpack_public_path__ + \"logo-square_e06590b.png\";","module.exports = __webpack_public_path__ + \"mention_4dafefb.mp3\";","// Polyfills for browsers that might not yet support Promises or the Fetch API\n// (newer & better XMLHttpRequest).\nimport 'lie/polyfill';\nimport 'whatwg-fetch';\nimport pFinally from 'p-finally';\n\nif (!Promise.prototype.finally) {\n  // eslint-disable-next-line no-extend-native\n  Promise.prototype.finally = function finally_(handler) {\n    return pFinally(this, handler);\n  };\n}\n","import Responsive from 'react-responsive';\nimport withProps from 'recompose/withProps';\n\nexport const Mobile = withProps({ maxWidth: 767 })(Responsive);\nexport const Desktop = withProps({ minWidth: 768 })(Responsive);\n","import { get } from './RequestActionCreators';\nimport { SET_TIMER, OFFSET } from '../constants/ActionTypes';\nimport { timerSelector } from '../selectors/timeSelectors';\n\nexport function syncTimestamps(clientTimeBefore, serverTime) {\n  const clientTimeAfter = Date.now();\n  return {\n    type: OFFSET,\n    payload: Math.round(((serverTime - clientTimeBefore) + (serverTime - clientTimeAfter)) / 2),\n  };\n}\n\nexport function sync() {\n  const before = Date.now();\n  return get('/now', {\n    onComplete: now => syncTimestamps(before, now.time),\n  });\n}\n\n/**\n * Create an auto-syncing timer that ticks once each second.\n *\n * When dispatched, the action returns an array. Functions pushed\n * to this array will be called on each tick.\n */\nexport function createTimer(cb) {\n  return (dispatch) => {\n    let last = Date.now();\n    let syncing = false;\n\n    function finishedSync() {\n      syncing = false;\n      cb();\n    }\n\n    const intv = setInterval(() => {\n      // Resync if one 1000ms interval skipped over more than 5s of time.\n      // This most likely means the user's computer's time changed.\n      const now = Date.now();\n      if (Math.abs(last - now) > 5000) {\n        syncing = true;\n        dispatch(sync()).then(finishedSync, finishedSync);\n      } else if (!syncing) {\n        // If we're currently syncing we don't update timed elements for\n        // a while, to prevent weird back and forth jumps.\n        cb();\n      }\n      last = now;\n    }, 1000);\n\n    dispatch({\n      type: SET_TIMER,\n      payload: intv,\n    });\n  };\n}\n\nexport function stopTimer() {\n  return (dispatch, getState) => {\n    const timer = timerSelector(getState());\n    clearInterval(timer);\n    dispatch({\n      type: SET_TIMER,\n      payload: null,\n    });\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createTimer, stopTimer } from '../../actions/TickerActionCreators';\n\nconst mapDispatchToProps = {\n  createTimer,\n  stopTimer,\n};\n\nconst enhance = connect(null, mapDispatchToProps);\n\nclass ClockProvider extends React.Component {\n  static propTypes = {\n    createTimer: PropTypes.func.isRequired,\n    stopTimer: PropTypes.func.isRequired,\n    children: PropTypes.node.isRequired,\n  };\n\n  static childContextTypes = {\n    timerCallbacks: PropTypes.shape({\n      add: PropTypes.func,\n      remove: PropTypes.func,\n    }),\n  };\n\n  state = { callbacks: [] };\n\n  getChildContext() {\n    return {\n      timerCallbacks: this.timerCallbacks,\n    };\n  }\n\n  componentDidMount() {\n    // Start the clock! Wave stores the current time in the application state\n    // primarily to make sure that different timers in the UI update simultaneously.\n    this.props.createTimer(() => {\n      this.state.callbacks.forEach(cb => cb());\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.stopTimer();\n  }\n\n  timerCallbacks = {\n    add: cb => this.setState(s => ({\n      callbacks: s.callbacks.concat(cb),\n    })),\n    remove: cb => this.setState(s => ({\n      callbacks: s.callbacks.filter(cb1 => cb1 !== cb),\n    })),\n  };\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default enhance(ClockProvider);\n","import { OPEN_OVERLAY, CLOSE_OVERLAY, TOGGLE_OVERLAY } from '../constants/ActionTypes';\n\nexport function openOverlay(overlay) {\n  return {\n    type: OPEN_OVERLAY,\n    payload: { overlay },\n  };\n}\n\nexport function toggleOverlay(overlay) {\n  return {\n    type: TOGGLE_OVERLAY,\n    payload: { overlay },\n  };\n}\n\nexport function toggleRoomHistory() {\n  return toggleOverlay('roomHistory');\n}\n\nexport function togglePlaylistManager() {\n  return toggleOverlay('playlistManager');\n}\n\nexport function toggleSettings() {\n  return toggleOverlay('settings');\n}\n\nexport function toggleAbout() {\n  return toggleOverlay('about');\n}\n\nexport function toggleAdmin() {\n  return toggleOverlay('admin');\n}\n\nexport function closeAll() {\n  return { type: CLOSE_OVERLAY };\n}\n","import { createSelector } from 'reselect';\n\nconst baseSelector = state => state.server;\n\n// eslint-disable-next-line import/prefer-default-export\nexport const isConnectedSelector = createSelector(\n  baseSelector,\n  server => server.connected,\n);\n","import { createSelector, createStructuredSelector } from 'reselect';\nimport { currentUserSelector } from './userSelectors';\n\nconst baseSelector = state => state.votes;\n\nconst createPropSelector = (base, prop) => createSelector(base, obj => obj[prop]);\nconst createIsSelector = type => createSelector(\n  type,\n  currentUserSelector,\n  (users, me) => !!me && users.indexOf(me._id) > -1,\n);\nconst createCountSelector = type => createSelector(\n  type,\n  array => array.length,\n);\n\nexport const favoritesSelector = createPropSelector(baseSelector, 'favorites');\nexport const upvotesSelector = createPropSelector(baseSelector, 'upvotes');\nexport const downvotesSelector = createPropSelector(baseSelector, 'downvotes');\n\nexport const currentVotesSelector = createStructuredSelector({\n  favorites: favoritesSelector,\n  upvotes: upvotesSelector,\n  downvotes: downvotesSelector,\n});\n\nexport const isFavoriteSelector = createIsSelector(favoritesSelector);\nexport const isUpvoteSelector = createIsSelector(upvotesSelector);\nexport const isDownvoteSelector = createIsSelector(downvotesSelector);\n\nexport const favoritesCountSelector = createCountSelector(favoritesSelector);\nexport const upvotesCountSelector = createCountSelector(upvotesSelector);\nexport const downvotesCountSelector = createCountSelector(downvotesSelector);\n\nexport const currentVoteStatsSelector = createStructuredSelector({\n  isFavorite: isFavoriteSelector,\n  isUpvote: isUpvoteSelector,\n  isDownvote: isDownvoteSelector,\n  favoritesCount: favoritesCountSelector,\n  upvotesCount: upvotesCountSelector,\n  downvotesCount: downvotesCountSelector,\n});\n","import { createSelector } from 'reselect';\nimport { historyIDSelector, mediaSelector, startTimeSelector, djSelector } from './boothSelectors';\nimport { currentUserSelector } from './userSelectors';\nimport { currentVotesSelector } from './voteSelectors';\n\nconst byTimestamp = (a, b) => (a.timestamp < b.timestamp ? 1 : -1);\n\nconst baseSelector = state => state.roomHistory;\n\nexport const roomHistorySelector = createSelector(\n  baseSelector,\n  history => history.slice().sort(byTimestamp),\n);\n\nconst addOwnVoteProps = id => entry => ({\n  ...entry,\n  stats: {\n    ...entry.stats,\n    // No ID is provided for guest users.\n    isDownvote: !!id && entry.stats.downvotes.indexOf(id) > -1,\n    isFavorite: !!id && entry.stats.favorites.indexOf(id) > -1,\n    isUpvote: !!id && entry.stats.upvotes.indexOf(id) > -1,\n  },\n});\n\nexport const currentPlaySelector = createSelector(\n  currentUserSelector,\n  historyIDSelector,\n  mediaSelector,\n  startTimeSelector,\n  djSelector,\n  currentVotesSelector,\n  (user, historyID, media, timestamp, dj, stats) => {\n    if (!historyID) {\n      return null;\n    }\n    const entry = {\n      _id: historyID,\n      user: dj,\n      media,\n      timestamp,\n      stats,\n    };\n    return addOwnVoteProps(user ? user._id : null)(entry);\n  },\n);\n\nexport const roomHistoryWithVotesSelector = createSelector(\n  roomHistorySelector,\n  currentUserSelector,\n  currentPlaySelector,\n  (history, user, current) => {\n    const roomHistory = history.map(addOwnVoteProps(user ? user._id : null));\n    if (current) {\n      roomHistory.unshift(current);\n    }\n    return roomHistory;\n  },\n);\n","import {\n  ADVANCE,\n  BOOTH_SKIP,\n  LOAD_HISTORY_START, LOAD_HISTORY_COMPLETE,\n} from '../constants/ActionTypes';\nimport { flattenPlaylistItem } from './PlaylistActionCreators';\nimport { get, post } from './RequestActionCreators';\nimport { historyIDSelector, isCurrentDJSelector } from '../selectors/boothSelectors';\nimport { currentPlaySelector } from '../selectors/roomHistorySelectors';\nimport { usersSelector } from '../selectors/userSelectors';\nimport mergeIncludedModels from '../utils/mergeIncludedModels';\n\nexport function advanceToEmpty() {\n  return (dispatch, getState) => {\n    dispatch({\n      type: ADVANCE,\n      payload: null,\n      meta: { previous: currentPlaySelector(getState()) },\n    });\n  };\n}\n\n/**\n * Set the current song and DJ.\n */\nexport function advance(nextBooth) {\n  if (!nextBooth || !nextBooth.historyID) {\n    return advanceToEmpty();\n  }\n  const {\n    media, userID, historyID, playlistID, playedAt,\n  } = nextBooth;\n  return (dispatch, getState) => {\n    const user = usersSelector(getState())[userID];\n    dispatch({\n      type: ADVANCE,\n      payload: {\n        userID,\n        historyID,\n        playlistID,\n        user,\n        media: flattenPlaylistItem(media),\n        timestamp: playedAt,\n      },\n      meta: {\n        previous: currentPlaySelector(getState()),\n      },\n    });\n  };\n}\n\nexport function skipSelf(opts = {}) {\n  const remove = !!opts.remove;\n  return (dispatch, getState) => {\n    if (isCurrentDJSelector(getState())) {\n      return dispatch(post('/booth/skip', { remove }));\n    }\n    return Promise.reject(new Error('You\\'re not currently playing.'));\n  };\n}\n\nexport function skipped({ userID, moderatorID, reason }) {\n  return (dispatch, getState) => {\n    const users = usersSelector(getState());\n    dispatch({\n      type: BOOTH_SKIP,\n      payload: {\n        user: users[userID],\n        moderator: users[moderatorID],\n        reason,\n        timestamp: Date.now(),\n      },\n    });\n  };\n}\n\nexport function loadHistoryStart() {\n  return { type: LOAD_HISTORY_START };\n}\n\nexport function loadHistoryComplete(response) {\n  return (dispatch, getState) => {\n    const currentHistoryID = historyIDSelector(getState());\n    const { meta } = response;\n    let playHistory = mergeIncludedModels(response);\n    if (playHistory[0] && playHistory[0]._id === currentHistoryID) {\n      playHistory = playHistory.slice(1);\n    }\n    dispatch({\n      type: LOAD_HISTORY_COMPLETE,\n      payload: playHistory,\n      meta: {\n        page: Math.floor(meta.offset / meta.pageSize),\n        size: meta.pageSize,\n      },\n    });\n  };\n}\n\nexport function loadHistory() {\n  return get('/booth/history', {\n    onStart: loadHistoryStart,\n    onComplete: loadHistoryComplete,\n  });\n}\n","import { del, post, put } from './RequestActionCreators';\nimport { djSelector } from '../selectors/boothSelectors';\nimport {\n  SKIP_DJ_START, SKIP_DJ_COMPLETE,\n  MOVE_USER_START, MOVE_USER_COMPLETE,\n  REMOVE_USER_START, REMOVE_USER_COMPLETE,\n  MUTE_USER_START, MUTE_USER_COMPLETE,\n  UNMUTE_USER_START, UNMUTE_USER_COMPLETE,\n  BAN_USER_START, BAN_USER_COMPLETE,\n  ADD_USER_ROLES_START, ADD_USER_ROLES_COMPLETE,\n  REMOVE_USER_ROLES_START, REMOVE_USER_ROLES_COMPLETE,\n} from '../constants/ActionTypes';\nimport { removeMessage, removeMessagesByUser, removeAllMessages } from './ChatActionCreators';\n\nexport function skipCurrentDJ(reason = '', shouldRemove = false) {\n  return (dispatch, getState) => {\n    const dj = djSelector(getState());\n    if (!dj) {\n      return null;\n    }\n    const payload = {\n      userID: dj._id,\n      reason,\n      remove: shouldRemove,\n    };\n    return dispatch(post('/booth/skip', payload, {\n      onStart: () => ({ type: SKIP_DJ_START, payload }),\n      onComplete: () => ({ type: SKIP_DJ_COMPLETE, payload }),\n      onError: error => ({\n        type: SKIP_DJ_COMPLETE,\n        error: true,\n        payload: error,\n        meta: payload,\n      }),\n    }));\n  };\n}\n\nexport function removeCurrentDJ(reason = '') {\n  return skipCurrentDJ(reason, true);\n}\n\nexport function removeWaitlistUserStart(user) {\n  return {\n    type: REMOVE_USER_START,\n    payload: { user },\n  };\n}\n\nexport function removeWaitlistUserComplete(user) {\n  return {\n    type: REMOVE_USER_COMPLETE,\n    payload: { user },\n  };\n}\n\nexport function removeWaitlistUser(user) {\n  return (dispatch, getState) => {\n    dispatch(removeWaitlistUserStart(user));\n\n    const currentDJ = djSelector(getState());\n    let promise;\n    if (currentDJ && currentDJ._id === user._id) {\n      promise = dispatch(removeCurrentDJ());\n    } else {\n      promise = dispatch(del(`/waitlist/${user._id}`));\n    }\n\n    return promise\n      .then(() => dispatch(removeWaitlistUserComplete(user)))\n      .catch(error => dispatch({\n        type: REMOVE_USER_COMPLETE,\n        error: true,\n        payload: error,\n      }));\n  };\n}\n\nexport function moveWaitlistUserStart(user, position) {\n  return {\n    type: MOVE_USER_START,\n    payload: { user, position },\n  };\n}\n\nexport function moveWaitlistUserComplete(user, position) {\n  return {\n    type: MOVE_USER_COMPLETE,\n    payload: { user, position },\n  };\n}\n\nexport function moveWaitlistUser(user, position) {\n  return put('/waitlist/move', { userID: user._id, position }, {\n    onStart: () => moveWaitlistUserStart(user, position),\n    onComplete: () => moveWaitlistUserComplete(user, position),\n    onError: error => ({\n      type: MOVE_USER_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { user, position },\n    }),\n  });\n}\n\nexport function addUserRole(user, role) {\n  const userID = typeof user === 'object' ? user._id : user;\n  return put(`/users/${userID}/roles/${role}`, {}, {\n    onStart: () => ({\n      type: ADD_USER_ROLES_START,\n      payload: { user, roles: [role] },\n    }),\n    onComplete: () => ({\n      type: ADD_USER_ROLES_COMPLETE,\n      payload: { user, roles: [role] },\n    }),\n    onError: error => ({\n      type: ADD_USER_ROLES_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { user, roles: [role] },\n    }),\n  });\n}\n\nexport function removeUserRole(user, role) {\n  const userID = typeof user === 'object' ? user._id : user;\n  return del(`/users/${userID}/roles/${role}`, {}, {\n    onStart: () => ({\n      type: REMOVE_USER_ROLES_START,\n      payload: { user, roles: [role] },\n    }),\n    onComplete: () => ({\n      type: REMOVE_USER_ROLES_COMPLETE,\n      payload: { user, roles: [role] },\n    }),\n    onError: error => ({\n      type: REMOVE_USER_ROLES_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { user, roles: [role] },\n    }),\n  });\n}\n\nexport function deleteChatMessage(id) {\n  return del(`/chat/${id}`, {}, {\n    onStart: () => removeMessage(id),\n    onError: error => ({\n      type: undefined,\n      error: true,\n      payload: error,\n      meta: { id },\n    }),\n  });\n}\n\nexport function deleteChatMessagesByUser(userID) {\n  return del(`/chat/user/${userID}`, {}, {\n    onComplete: () => removeMessagesByUser(userID),\n    onError: error => ({\n      type: undefined,\n      error: true,\n      payload: error,\n      meta: { userID },\n    }),\n  });\n}\n\nexport function deleteAllChatMessages() {\n  return del('/chat', {}, {\n    onComplete: removeAllMessages,\n    onError: error => ({\n      type: undefined,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function muteUserStart(userID, duration) {\n  return {\n    type: MUTE_USER_START,\n    payload: { userID, duration },\n  };\n}\n\nexport function muteUserComplete(userID, duration) {\n  return {\n    type: MUTE_USER_COMPLETE,\n    payload: { userID, duration },\n  };\n}\n\n/**\n * Mute a user in the chat. Defaults to 10 minutes.\n */\nexport function muteUser(user, duration = 10 * 60 * 1000) {\n  const userID = typeof user === 'object' ? user._id : user;\n  return post(`/users/${userID}/mute`, { time: duration }, {\n    onStart: () => muteUserStart(userID, duration),\n    onComplete: () => muteUserComplete(userID, duration),\n    onError: error => ({\n      type: MUTE_USER_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function unmuteUserStart(userID) {\n  return {\n    type: UNMUTE_USER_START,\n    payload: { userID },\n  };\n}\n\nexport function unmuteUserComplete(userID) {\n  return {\n    type: UNMUTE_USER_COMPLETE,\n    payload: { userID },\n  };\n}\n\nexport function unmuteUser(user) {\n  const userID = typeof user === 'object' ? user._id : user;\n  return del(`/users/${userID}/mute`, {}, {\n    onStart: () => unmuteUserStart(userID),\n    onComplete: () => unmuteUserComplete(userID),\n    onError: error => ({\n      type: UNMUTE_USER_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function banUserStart(userID, duration, permanent) {\n  return {\n    type: BAN_USER_START,\n    payload: { userID, duration, permanent },\n  };\n}\n\nexport function banUserComplete(ban) {\n  return {\n    type: BAN_USER_COMPLETE,\n    payload: ban,\n  };\n}\n\n/**\n * Ban a user. Defaults to 24 hours.\n */\nexport function banUser(user, { duration = 24 * 60 * 60 * 1000, permanent = false }) {\n  const userID = typeof user === 'object' ? user._id : user;\n  return post('/bans', { userID, duration, permanent }, {\n    onStart: () => banUserStart(userID, duration, permanent),\n    onComplete: ({ data }) => banUserComplete(data),\n    onError: error => ({\n      type: BAN_USER_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n","import { del, post, put } from './RequestActionCreators';\nimport {\n  WAITLIST_LOAD,\n  WAITLIST_LOCK,\n  WAITLIST_CLEAR,\n  WAITLIST_UPDATE,\n  WAITLIST_JOIN,\n  WAITLIST_LEAVE,\n  WAITLIST_MOVE,\n  DO_JOIN_START, DO_JOIN_COMPLETE,\n  DO_LEAVE_START, DO_LEAVE_COMPLETE,\n  DO_LOCK_START, DO_LOCK_COMPLETE,\n  DO_CLEAR_START, DO_CLEAR_COMPLETE,\n} from '../constants/ActionTypes';\nimport { currentUserSelector } from '../selectors/userSelectors';\n\nexport function setWaitList(data) {\n  return {\n    type: WAITLIST_LOAD,\n    payload: {\n      waitlist: data.waitlist,\n      locked: data.locked,\n    },\n  };\n}\n\nexport function setLocked(lock) {\n  return {\n    type: WAITLIST_LOCK,\n    payload: {\n      locked: lock,\n    },\n  };\n}\n\nexport function clearWaitlist() {\n  return { type: WAITLIST_CLEAR };\n}\n\nexport function updatedWaitlist(waitlist) {\n  return {\n    type: WAITLIST_UPDATE,\n    payload: { waitlist },\n  };\n}\n\n// TODO split joining the waitlist and adding another user to the waitlist\n// into two different actions.\nexport function joinWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(post('/waitlist', { userID: user._id }, {\n      onStart: () => ({ type: DO_JOIN_START }),\n      onComplete: ({ data }) => ({\n        type: DO_JOIN_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_JOIN_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function joinedWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_JOIN,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function leaveWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(del(`/waitlist/${user._id}`, {}, {\n      onStart: () => ({ type: DO_LEAVE_START }),\n      onComplete: ({ data }) => ({\n        type: DO_LEAVE_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_LEAVE_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function leftWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_LEAVE,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function movedInWaitlist({\n  userID, moderatorID, position, waitlist,\n}) {\n  return (dispatch) => {\n    dispatch({\n      type: WAITLIST_MOVE,\n      payload: { userID, position },\n      meta: { moderatorID },\n    });\n    dispatch(updatedWaitlist(waitlist));\n  };\n}\n\nfunction putLock(status) {\n  return put('/waitlist/lock', { lock: status, clear: false }, {\n    onStart: () => ({\n      type: DO_LOCK_START,\n      payload: { locked: status },\n    }),\n    onComplete: ({ data }) => ({\n      type: DO_LOCK_COMPLETE,\n      payload: { locked: data.locked },\n    }),\n    onError: error => ({\n      type: DO_LOCK_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function modLockWaitlist() {\n  return putLock(true);\n}\nexport function modUnlockWaitlist() {\n  return putLock(false);\n}\n\nexport function modClearWaitlist() {\n  return del('/waitlist', {}, {\n    onStart: () => ({ type: DO_CLEAR_START }),\n    onComplete: () => ({ type: DO_CLEAR_COMPLETE }),\n    onError: error => ({\n      type: DO_CLEAR_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n","import { post } from './RequestActionCreators';\nimport { historyIDSelector } from '../selectors/boothSelectors';\nimport { playlistsSelector } from '../selectors/playlistSelectors';\nimport {\n  OPEN_ADD_MEDIA_MENU,\n  LOAD_VOTES,\n  FAVORITE, UPVOTE, DOWNVOTE,\n  DO_FAVORITE_START, DO_FAVORITE_COMPLETE,\n  DO_UPVOTE, DO_DOWNVOTE,\n} from '../constants/ActionTypes';\nimport mergeIncludedModels from '../utils/mergeIncludedModels';\nimport { flattenPlaylistItem } from './PlaylistActionCreators';\n\nexport function setVoteStats(voteStats) {\n  return {\n    type: LOAD_VOTES,\n    payload: voteStats,\n  };\n}\n\nexport function favorited({ userID, historyID }) {\n  return {\n    type: FAVORITE,\n    payload: { userID, historyID },\n  };\n}\n\nexport function receiveVote({ userID, vote }) {\n  const type = vote > 0 ? UPVOTE : DOWNVOTE;\n  return {\n    type,\n    payload: { userID },\n  };\n}\n\nexport function doUpvote() {\n  return { type: DO_UPVOTE };\n}\n\nexport function doDownvote() {\n  return { type: DO_DOWNVOTE };\n}\n\nexport function openFavoriteMenu(position) {\n  return (dispatch, getState) => {\n    const playlists = playlistsSelector(getState());\n    const historyID = historyIDSelector(getState());\n    dispatch({\n      type: OPEN_ADD_MEDIA_MENU,\n      payload: { historyID },\n      meta: {\n        playlists,\n        position,\n        type: 'favorite',\n      },\n    });\n  };\n}\n\nexport function favoriteMediaStart(playlistID, historyID) {\n  return {\n    type: DO_FAVORITE_START,\n    payload: { historyID, playlistID },\n  };\n}\n\nexport function favoriteMediaComplete(playlistID, historyID, changes) {\n  return {\n    type: DO_FAVORITE_COMPLETE,\n    payload: {\n      historyID,\n      playlistID,\n      added: changes.added.map(flattenPlaylistItem),\n      newSize: changes.playlistSize,\n    },\n  };\n}\n\nexport function favoriteMedia(playlist, historyID) {\n  const playlistID = playlist._id;\n  return post('/booth/favorite', { historyID, playlistID }, {\n    onStart: () => favoriteMediaStart(playlistID, historyID),\n    onComplete: res =>\n      favoriteMediaComplete(playlistID, historyID, {\n        added: mergeIncludedModels(res),\n        playlistSize: res.meta.playlistSize,\n      }),\n    onError: error => ({\n      type: DO_FAVORITE_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { historyID, playlistID },\n    }),\n  });\n}\n","/* eslint-disable import/prefer-default-export */\nimport { createSelector } from 'reselect';\n\nconst baseSelector = state => state.wlk;\n\nexport const shouldRandomizePlaylistsSelector = createSelector(\n  baseSelector,\n  wlk => wlk.shouldRandomize,\n);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport formatDuration from 'format-duration';\nimport timed from '../../utils/timed';\n\nconst Eta = ({\n  className, base, currentTime, endTime,\n}) => {\n  const currentRemaining = endTime - currentTime;\n  return (\n    <span className={cx('Eta', className)}>\n      {formatDuration(base + currentRemaining)}\n    </span>\n  );\n};\n\nEta.propTypes = {\n  className: PropTypes.string,\n  currentTime: PropTypes.number.isRequired,\n  endTime: PropTypes.number,\n  base: PropTypes.number,\n};\n\nexport default compose(\n  timed(),\n  pure,\n)(Eta);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate, Interpolate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport SongTitle from '../SongTitle';\nimport Eta from './Eta';\n\nconst NextMedia = ({\n  t,\n  className,\n  playlist,\n  nextMedia,\n  userInWaitlist,\n  userIsDJ,\n  baseEta,\n  mediaEndTime,\n}) => {\n  if (!playlist) {\n    return (\n      <div className={cx('NextMedia', className)}>\n        {t('playlists.noPlaylistsCreate')}\n      </div>\n    );\n  }\n\n  let key = 'eta.empty';\n  if (userIsDJ) {\n    key = 'eta.playingNow';\n  } else if (userInWaitlist) {\n    key = 'eta.eta';\n  }\n\n  const mediaEl = nextMedia\n    ? <SongTitle {...nextMedia} />\n    : <div className=\"SongTitle\">{t('playlists.empty')}</div>;\n  const playlistEl = (\n    <span className=\"NextMedia-playlist\">{playlist.name}</span>\n  );\n  const etaEl = (\n    <Eta className=\"NextMedia-eta\" base={baseEta} endTime={mediaEndTime} />\n  );\n  return (\n    <div className={cx('NextMedia', className)}>\n      {mediaEl}\n      <Interpolate\n        i18nKey={key}\n        playlist={playlistEl}\n        eta={etaEl}\n      />\n    </div>\n  );\n};\n\nNextMedia.propTypes = {\n  t: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  playlist: PropTypes.object,\n  nextMedia: PropTypes.object,\n  userInWaitlist: PropTypes.bool.isRequired,\n  userIsDJ: PropTypes.bool.isRequired,\n  baseEta: PropTypes.number,\n  mediaEndTime: PropTypes.number,\n};\n\nexport default compose(\n  translate(),\n  pure,\n)(NextMedia);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport pure from 'recompose/pure';\nimport SettingsIcon from '@material-ui/icons/Settings';\n\nimport Avatar from '../Avatar';\n\nconst enhance = pure;\n\nconst UserInfo = ({ className, user, onClick }) => (\n  <button\n    className={cx('UserInfo', className)}\n    onClick={onClick}\n  >\n    <Avatar\n      className=\"UserInfo-avatar\"\n      user={user}\n    />\n    <div className=\"UserInfo-settings\">\n      <SettingsIcon className=\"UserInfo-settingsIcon\" />\n    </div>\n  </button>\n);\n\nUserInfo.propTypes = {\n  className: PropTypes.string,\n  user: PropTypes.object.isRequired,\n  onClick: PropTypes.func,\n};\n\nexport default enhance(UserInfo);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nconst SkipReasonsList = ({\n  reasons,\n  onSelect,\n}) => (\n  <List className=\"SkipReasonsList\">\n    {reasons.map(reason => (\n      <ListItem\n        key={reason.name}\n        button\n        onClick={() => onSelect(reason.name)}\n      >\n        <ListItemText className=\"SkipReasonsList-label\" primary={reason.label} />\n      </ListItem>\n    ))}\n  </List>\n);\n\nSkipReasonsList.propTypes = {\n  reasons: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string,\n    label: PropTypes.string,\n  })).isRequired,\n  onSelect: PropTypes.func.isRequired,\n};\n\nexport default SkipReasonsList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport Popover from '@material-ui/core/Popover';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SkipIcon from '@material-ui/icons/SkipNext';\nimport SkipReasonsList from './SkipReasonsList';\n\nconst popoverPosition = {\n  marginThreshold: 0,\n  anchorOrigin: { horizontal: 'center', vertical: 'bottom' },\n  transformOrigin: { horizontal: 'center', vertical: 'bottom' },\n};\n\n// TODO not hardcode these maybe?\nconst reasons = [\n  'genre',\n  'history',\n  'unavailable',\n  'nsfw',\n  'duration',\n  'downvotes',\n  'other',\n];\n\nclass SkipButton extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    userIsDJ: PropTypes.bool.isRequired,\n    currentDJ: PropTypes.object.isRequired,\n    onSkip: PropTypes.func.isRequired,\n  };\n\n  state = {\n    isSkipping: false,\n    isOpen: false,\n    anchor: null,\n  };\n\n  handleOpen = (event) => {\n    if (this.props.userIsDJ) {\n      this.handleSkip('');\n      return;\n    }\n\n    this.setState({\n      isOpen: true,\n      anchor: event.currentTarget,\n    });\n  };\n\n  handleClose = () => {\n    this.setState({\n      isOpen: false,\n    });\n  };\n\n  handleSkip = (reason) => {\n    this.setState({ isSkipping: true });\n    Promise.resolve(this.props.onSkip(reason)).then(() => {\n      this.setState({ isSkipping: false });\n    });\n    this.handleClose();\n  };\n\n  render() {\n    const { t } = this.props;\n\n    if (this.state.isSkipping) {\n      return (\n        <span>\n          <div className=\"SkipButton is-loading\">\n            <CircularProgress className=\"SkipButton-loader\" />\n          </div>\n        </span>\n      );\n    }\n\n    let message = t('booth.skip.self');\n    if (!this.props.userIsDJ) {\n      message = t('booth.skip.other', { user: this.props.currentDJ.username });\n    }\n\n    return (\n      <span>\n        <Tooltip title={message}>\n          <IconButton className=\"SkipButton\" onClick={this.handleOpen}>\n            <SkipIcon />\n          </IconButton>\n        </Tooltip>\n        <Popover\n          open={this.state.isOpen}\n          anchorEl={this.state.anchor}\n          onClose={this.handleClose}\n          classes={{ paper: 'SkipButton-list' }}\n          {...popoverPosition}\n        >\n          <SkipReasonsList\n            reasons={reasons.map(name => ({\n              name,\n              label: t(`booth.skip.reasons.${name}`),\n            }))}\n            onSelect={this.handleSkip}\n          />\n        </Popover>\n      </span>\n    );\n  }\n}\n\nexport default compose(\n  translate(),\n  pure,\n)(SkipButton);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport Button from '@material-ui/core/Button';\nimport LockedIcon from '@material-ui/icons/Lock';\n\nconst WaitlistButton = ({\n  t,\n  userInWaitlist,\n  isLocked,\n  onClick,\n}) => {\n  let icon;\n  if (isLocked) {\n    icon = (\n      <LockedIcon\n        className={cx(\n          'FooterBar-joinIcon',\n          // The user can still leave the waitlist, if it's locked,\n          // but cannot join the waitlist.\n          !userInWaitlist && 'FooterBar-joinIcon--locked',\n        )}\n      />\n    );\n  }\n\n  return (\n    <Button\n      classes={{\n        root: 'FooterBar-join',\n        disabled: 'FooterBar-join--locked',\n      }}\n      disabled={isLocked && !userInWaitlist}\n      onClick={onClick}\n    >\n      {icon}\n      {isLocked && ' '}\n      {userInWaitlist ? t('waitlist.leave') : t('waitlist.join')}\n    </Button>\n  );\n};\n\nWaitlistButton.propTypes = {\n  t: PropTypes.func.isRequired,\n  userInWaitlist: PropTypes.bool,\n  isLocked: PropTypes.bool,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default compose(\n  translate(),\n  pure,\n)(WaitlistButton);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from '@material-ui/core/Tooltip';\n\n/* eslint-disable */\nconst Button = ({\n  onClick,\n  disabled,\n  count,\n  children,\n  tooltip,\n}) => (\n  // Wrapped in a <div> so the tooltip can listen for mouse events.\n  <Tooltip title={tooltip} placement=\"top\">\n    <div className=\"ResponseButton-wrap\">\n      <button\n        className={cx('ResponseButton', disabled && 'ResponseButton--disabled')}\n        disabled={disabled}\n        onClick={onClick}\n      >\n        <div className=\"ResponseButton-content\">\n          <div className=\"ResponseButton-icon\">{children}</div>\n          <span className=\"ResponseButton-count\">{count}</span>\n        </div>\n      </button>\n    </div>\n  </Tooltip>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n  disabled: PropTypes.bool,\n  count: PropTypes.number,\n  tooltip: PropTypes.string,\n};\n\nexport default Button;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport FavoritedIcon from '@material-ui/icons/Favorite';\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\nimport Button from './Button';\n\nconst enhance = translate();\n\nconst handleFavorite = onFavorite => (event) => {\n  const pos = event.target.getBoundingClientRect();\n  onFavorite({\n    x: pos.left,\n    y: pos.top,\n  });\n};\n\nconst Favorite = ({\n  t,\n  onFavorite,\n  count,\n  disabled,\n  active,\n}) => {\n  const CurrentIcon = active ? FavoritedIcon : FavoriteIcon;\n\n  return (\n    <Button\n      disabled={disabled}\n      tooltip={t('votes.favorite')}\n      onClick={handleFavorite(onFavorite)}\n      count={count}\n    >\n      <CurrentIcon className=\"ResponseButton-icon--favorite\" />\n    </Button>\n  );\n};\n\nFavorite.propTypes = {\n  t: PropTypes.func.isRequired,\n  onFavorite: PropTypes.func.isRequired,\n  count: PropTypes.number.isRequired,\n  disabled: PropTypes.bool,\n  active: PropTypes.bool,\n};\n\nexport default enhance(Favorite);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport UpvoteIcon from '@material-ui/icons/ThumbUp';\nimport Button from './Button';\n\nconst enhance = translate();\n\nconst Upvote = ({\n  t,\n  disabled,\n  active,\n  count,\n  onUpvote,\n}) => (\n  <Button\n    disabled={disabled}\n    tooltip={t('votes.upvote')}\n    onClick={onUpvote}\n    count={count}\n  >\n    <UpvoteIcon className={active ? 'ResponseButton-icon--upvoted' : ''} />\n  </Button>\n);\n\nUpvote.propTypes = {\n  t: PropTypes.func.isRequired,\n  onUpvote: PropTypes.func.isRequired,\n  count: PropTypes.number.isRequired,\n  disabled: PropTypes.bool,\n  active: PropTypes.bool,\n};\n\nexport default enhance(Upvote);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport DownvoteIcon from '@material-ui/icons/ThumbDown';\nimport Button from './Button';\n\nconst enhance = translate();\n\nconst Downvote = ({\n  t,\n  disabled,\n  active,\n  count,\n  onDownvote,\n}) => (\n  <Button\n    disabled={disabled}\n    tooltip={t('votes.downvote')}\n    onClick={onDownvote}\n    count={count}\n  >\n    <DownvoteIcon className={active ? 'ResponseButton-icon--downvoted' : ''} />\n  </Button>\n);\n\nDownvote.propTypes = {\n  t: PropTypes.func.isRequired,\n  onDownvote: PropTypes.func.isRequired,\n  count: PropTypes.number.isRequired,\n  disabled: PropTypes.bool,\n  active: PropTypes.bool,\n};\n\nexport default enhance(Downvote);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport pure from 'recompose/pure';\nimport Favorite from './Favorite';\nimport Upvote from './Upvote';\nimport Downvote from './Downvote';\n\nconst ResponseBar = ({\n  disabled = false,\n  isUpvote, upvotesCount, onUpvote,\n  isDownvote, downvotesCount, onDownvote,\n  isFavorite, favoritesCount, onFavorite,\n}) => (\n  <div className=\"AudienceResponse\">\n    <Upvote\n      disabled={disabled}\n      onUpvote={onUpvote}\n      count={upvotesCount}\n      active={isUpvote}\n    />\n    <Favorite\n      disabled={disabled}\n      onFavorite={onFavorite}\n      count={favoritesCount}\n      active={isFavorite}\n    />\n    <Downvote\n      disabled={disabled}\n      onDownvote={onDownvote}\n      count={downvotesCount}\n      active={isDownvote}\n    />\n  </div>\n);\n\nResponseBar.propTypes = {\n  disabled: PropTypes.bool,\n  isUpvote: PropTypes.bool,\n  isFavorite: PropTypes.bool,\n  isDownvote: PropTypes.bool,\n\n  upvotesCount: PropTypes.number.isRequired,\n  favoritesCount: PropTypes.number.isRequired,\n  downvotesCount: PropTypes.number.isRequired,\n\n  onUpvote: PropTypes.func.isRequired,\n  onFavorite: PropTypes.func.isRequired,\n  onDownvote: PropTypes.func.isRequired,\n};\n\nexport default pure(ResponseBar);\n","import React from 'react';\n\nconst message = 'Waitlist Roulette is enabled! A song will be picked from your playlists at random.';\n\nexport default () => (\n  <div className=\"NextMedia\">{message}</div>\n);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\n\nimport NextMedia from './NextMedia';\nimport UserInfo from './UserInfo';\nimport SkipButton from './SkipButton';\nimport WaitlistButton from './WaitlistButton';\nimport ResponseBar from './Responses/Bar';\n\nimport RandomizePlaylistsNotice from '../../_wlk/RandomizePlaylistsNotice';\n\nconst enhance = translate();\n\nclass FooterBar extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    baseEta: PropTypes.number,\n    mediaEndTime: PropTypes.number,\n    nextMedia: PropTypes.object,\n    playlist: PropTypes.object,\n    user: PropTypes.object,\n    userInWaitlist: PropTypes.bool.isRequired,\n    userIsDJ: PropTypes.bool.isRequired,\n    currentDJ: PropTypes.object,\n    showSkip: PropTypes.bool,\n    waitlistIsLocked: PropTypes.bool.isRequired,\n    voteStats: PropTypes.object,\n    shouldRandomizePlaylists: PropTypes.bool,\n\n    openLoginDialog: PropTypes.func,\n    openRegisterDialog: PropTypes.func,\n    togglePlaylistManager: PropTypes.func,\n    toggleSettings: PropTypes.func,\n    joinWaitlist: PropTypes.func,\n    leaveWaitlist: PropTypes.func,\n    onSkipTurn: PropTypes.func.isRequired,\n    onModSkip: PropTypes.func.isRequired,\n    onFavorite: PropTypes.func,\n    onUpvote: PropTypes.func,\n    onDownvote: PropTypes.func,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object,\n  };\n\n  handleSkipTurn = (reason) => {\n    if (!this.props.showSkip) {\n      return null;\n    }\n    if (!this.props.userIsDJ) {\n      return this.props.onModSkip(reason);\n    }\n    return this.props.onSkipTurn({ remove: false });\n  }\n\n  handleJoinWaitlist = () => {\n    if (this.props.user) {\n      return this.props.joinWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  handleLeaveWaitlist = () => {\n    if (this.props.userIsDJ) {\n      return this.props.onSkipTurn({ remove: true });\n    } else if (this.props.user) {\n      return this.props.leaveWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  render() {\n    const {\n      t,\n      openLoginDialog, openRegisterDialog,\n      togglePlaylistManager, toggleSettings,\n      onFavorite, onUpvote, onDownvote,\n    } = this.props;\n    const {\n      user, userIsDJ, userInWaitlist,\n      shouldRandomizePlaylists,\n      playlist, nextMedia, showSkip,\n      baseEta, mediaEndTime,\n      voteStats,\n    } = this.props;\n    const className = cx('FooterBar', this.props.className);\n\n    if (user && !user.isGuest) {\n      const canVote = !userIsDJ && !!this.props.currentDJ;\n      return (\n        <div className={className}>\n          <div className=\"FooterBar-user\">\n            <UserInfo\n              user={user}\n              onClick={toggleSettings}\n            />\n          </div>\n          <button\n            className=\"FooterBar-next\"\n            onClick={togglePlaylistManager}\n          >\n            {shouldRandomizePlaylists ? (\n              <RandomizePlaylistsNotice />\n            ) : (\n              <NextMedia\n                playlist={playlist}\n                nextMedia={nextMedia}\n                userInWaitlist={userInWaitlist}\n                userIsDJ={userIsDJ}\n                baseEta={baseEta}\n                mediaEndTime={mediaEndTime}\n              />\n            )}\n          </button>\n          <div\n            className={cx(\n              'FooterBar-responses',\n              !showSkip && 'FooterBar-responses--spaced',\n            )}\n          >\n            <ResponseBar\n              disabled={!canVote}\n              onFavorite={onFavorite}\n              onUpvote={onUpvote}\n              onDownvote={onDownvote}\n              {...voteStats}\n            />\n          </div>\n          {this.props.showSkip && (\n            <div className=\"FooterBar-skip\">\n              <SkipButton\n                userIsDJ={userIsDJ}\n                currentDJ={this.props.currentDJ}\n                onSkip={this.handleSkipTurn}\n              />\n            </div>\n          )}\n          <WaitlistButton\n            isLocked={this.props.waitlistIsLocked}\n            userInWaitlist={userInWaitlist}\n            onClick={userInWaitlist ? this.handleLeaveWaitlist : this.handleJoinWaitlist}\n          />\n        </div>\n      );\n    }\n    return (\n      <div className={className}>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--login\"\n          onClick={openLoginDialog}\n        >\n          {t('login.login').toUpperCase()}\n        </button>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--register\"\n          onClick={openRegisterDialog}\n        >\n          {t('login.register').toUpperCase()}\n        </button>\n        <div className=\"FooterBar-guest\">\n          You have to log in if you want to play!\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(FooterBar);\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport { skipSelf } from '../actions/BoothActionCreators';\nimport { openLoginDialog, openRegisterDialog } from '../actions/DialogActionCreators';\nimport { skipCurrentDJ as modSkipCurrentDJ } from '../actions/ModerationActionCreators';\nimport { togglePlaylistManager, toggleSettings } from '../actions/OverlayActionCreators';\nimport { joinWaitlist, leaveWaitlist } from '../actions/WaitlistActionCreators';\nimport { openFavoriteMenu, doUpvote, doDownvote } from '../actions/VoteActionCreators';\n\nimport {\n  djSelector,\n  isCurrentDJSelector,\n  canSkipSelector,\n  endTimeSelector,\n} from '../selectors/boothSelectors';\nimport {\n  activePlaylistSelector,\n  nextMediaSelector,\n} from '../selectors/playlistSelectors';\nimport { currentUserSelector } from '../selectors/userSelectors';\nimport {\n  baseEtaSelector,\n  userInWaitlistSelector,\n  isLockedSelector,\n} from '../selectors/waitlistSelectors';\nimport { currentVoteStatsSelector } from '../selectors/voteSelectors';\nimport { shouldRandomizePlaylistsSelector } from '../_wlk/selectors';\n\nimport FooterBar from '../components/FooterBar';\n\nconst mapStateToProps = createStructuredSelector({\n  baseEta: baseEtaSelector,\n  mediaEndTime: endTimeSelector,\n  playlist: activePlaylistSelector,\n  nextMedia: nextMediaSelector,\n  shouldRandomizePlaylists: shouldRandomizePlaylistsSelector,\n  user: currentUserSelector,\n  userInWaitlist: userInWaitlistSelector,\n  userIsDJ: isCurrentDJSelector,\n  currentDJ: djSelector,\n  showSkip: canSkipSelector,\n  waitlistIsLocked: isLockedSelector,\n  voteStats: currentVoteStatsSelector,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    joinWaitlist,\n    leaveWaitlist,\n    openLoginDialog,\n    openRegisterDialog,\n    togglePlaylistManager,\n    toggleSettings,\n    onSkipTurn: skipSelf,\n    onModSkip: modSkipCurrentDJ,\n    onFavorite: openFavoriteMenu,\n    onUpvote: doUpvote,\n    onDownvote: doDownvote,\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FooterBar);\n","import setPath from 'lodash/set';\nimport {\n  LOAD_SETTINGS,\n  CHANGE_SETTING,\n} from '../constants/ActionTypes';\n\nexport function loadSettings(obj) {\n  return {\n    type: LOAD_SETTINGS,\n    payload: obj,\n  };\n}\n\nexport function set(name, value) {\n  const changeset = {};\n  setPath(changeset, name, value);\n  return {\n    type: CHANGE_SETTING,\n    payload: changeset,\n  };\n}\n\nexport function setLanguage(lang) {\n  return set('language', lang);\n}\n","import { set } from './SettingsActionCreators';\nimport { settingsSelector } from '../selectors/settingSelectors';\nimport {\n  ENTER_FULLSCREEN,\n  EXIT_FULLSCREEN,\n} from '../constants/ActionTypes';\n\nexport function setVolume(volume) {\n  return set('volume', volume);\n}\n\nexport function mute() {\n  return set('muted', true);\n}\n\nexport function unmute() {\n  return set('muted', false);\n}\n\nexport function setVideoSize(size) {\n  return set('videoSize', size);\n}\n\nconst nextVideoSize = {\n  large: 'small',\n  small: 'large',\n};\nexport function toggleVideoSize() {\n  return (dispatch, getState) => {\n    const current = settingsSelector(getState()).videoSize;\n    const other = nextVideoSize[current];\n    dispatch(setVideoSize(other));\n  };\n}\n\nexport function enterFullscreen() {\n  return { type: ENTER_FULLSCREEN };\n}\n\nexport function exitFullscreen() {\n  return { type: EXIT_FULLSCREEN };\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport AboutIcon from '@material-ui/icons/ArrowDropDown';\nimport logo from '../../../assets/img/logo-square.png';\n\nconst AppTitle = ({\n  className,\n  children,\n  onClick,\n}) => (\n  <div className={cx('AppTitle', className)}>\n    <h1 className=\"AppTitle-logo\">\n      <img\n        className=\"AppTitle-logoImage\"\n        alt={children}\n        src={logo}\n      />\n    </h1>\n    <IconButton className=\"AppTitle-button\" onClick={onClick}>\n      <AboutIcon />\n    </IconButton>\n  </div>\n);\n\nAppTitle.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default AppTitle;\n","/**\n * Create a vendor-prefixed inline CSS object for a \"transform\" property.\n *\n * @param {string} transform CSS transform value.\n * @return {Object}\n */\n\nexport default function transformStyle(transform) {\n  return {\n    transform,\n    WebkitTransform: transform,\n  };\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport transformStyle from '../../utils/transformStyle';\n\nfunction forceReflow(el) {\n  // Hopefully the minifier won't optimise this away!\n  el.getBoundingClientRect();\n}\n\nconst Progress = ({ className, currentProgress, timeRemaining }) => {\n  function animate(el) {\n    if (!el) return;\n\n    // Set the width to the current progress without animating\n    Object.assign(el.style, {\n      transitionDuration: '0s',\n    }, transformStyle(`scaleX(${currentProgress})`));\n\n    // Force browser to rerender the bar immediately\n    forceReflow(el);\n\n    // Set up the actual animation. Progress bar goes to 100% full\n    // in $timeRemaining seconds.\n    Object.assign(el.style, {\n      transitionDuration: `${timeRemaining}s`,\n    }, transformStyle('scaleX(1)'));\n  }\n\n  return (\n    <div className={cx('Progress', className)}>\n      <div className=\"Progress-fill\" ref={animate} />\n    </div>\n  );\n};\n\nProgress.propTypes = {\n  className: PropTypes.string,\n  currentProgress: PropTypes.number.isRequired,\n  timeRemaining: PropTypes.number.isRequired,\n};\n\nexport default Progress;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport SongTitle from '../SongTitle';\n\nconst CurrentMedia = ({ t, className, media }) => (\n  <div className={className}>\n    {media\n      ? <SongTitle artist={media.artist} title={media.title} />\n      : t('booth.empty')}\n  </div>\n);\n\nCurrentMedia.propTypes = {\n  t: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  media: PropTypes.shape({\n    artist: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n  }),\n};\n\nexport default translate()(CurrentMedia);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport VolumeDownIcon from '@material-ui/icons/VolumeDown';\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff';\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\nimport Slider from '@material-ui/lab/Slider';\n\nexport default class Volume extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    volume: PropTypes.number,\n    muted: PropTypes.bool,\n\n    onVolumeChange: PropTypes.func,\n    onMute: PropTypes.func,\n    onUnmute: PropTypes.func,\n  };\n\n  shouldComponentUpdate(nextProps) {\n    return this.props.volume !== nextProps.volume ||\n      this.props.muted !== nextProps.muted;\n  }\n\n  handleVolumeChange = (e, volume) => {\n    this.props.onVolumeChange(volume);\n  };\n\n  handleMuteClick = () => {\n    if (this.props.muted) {\n      this.props.onUnmute();\n    } else {\n      this.props.onMute();\n    }\n  };\n\n  render() {\n    let VolumeIcon = VolumeUpIcon;\n    if (this.props.muted) {\n      VolumeIcon = VolumeOffIcon;\n    } else if (this.props.volume === 0) {\n      VolumeIcon = VolumeMuteIcon;\n    } else if (this.props.volume < 50) {\n      VolumeIcon = VolumeDownIcon;\n    }\n    return (\n      <div className={cx('VolumeSlider', this.props.className)}>\n        <IconButton onClick={this.handleMuteClick}>\n          <VolumeIcon />\n        </IconButton>\n        <div className=\"VolumeSlider-slider\">\n          <Slider\n            min={0}\n            max={100}\n            step={1}\n            value={this.props.volume}\n            onChange={this.handleVolumeChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport HistoryIcon from '@material-ui/icons/History';\n\nconst HistoryButton = ({ t, onClick }) => (\n  <Tooltip title={t('history.title')} position=\"bottom\">\n    <IconButton\n      aria-label={t('history.title')}\n      className=\"HeaderHistoryButton\"\n      onClick={onClick}\n    >\n      <HistoryIcon className=\"HeaderHistoryButton-icon\" />\n    </IconButton>\n  </Tooltip>\n);\n\nHistoryButton.propTypes = {\n  t: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default compose(\n  translate(),\n  pure,\n)(HistoryButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\n\nconst CurrentDJ = ({ t, className, dj }) => (\n  <div className={className}>\n    {t('booth.currentDJ', { user: dj.username })}\n  </div>\n);\n\nCurrentDJ.propTypes = {\n  t: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  dj: PropTypes.shape({\n    username: PropTypes.string.isRequired,\n  }),\n};\n\nexport default translate()(CurrentDJ);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport AppTitle from './AppTitle';\nimport Progress from './Progress';\nimport CurrentMedia from './CurrentMedia';\nimport Volume from './Volume';\nimport HistoryButton from './HistoryButton';\nimport CurrentDJ from './CurrentDJ';\n\nconst HeaderBar = ({\n  className,\n  title,\n  dj,\n  media,\n  mediaProgress,\n  mediaTimeRemaining,\n  volume,\n  muted,\n  onVolumeChange,\n  onVolumeMute,\n  onVolumeUnmute,\n  onToggleRoomHistory,\n  onToggleAboutOverlay,\n  ...attrs\n}) => (\n  <div\n    className={cx('HeaderBar', className)}\n    {...attrs}\n  >\n    <AppTitle\n      className=\"HeaderBar-title\"\n      onClick={onToggleAboutOverlay}\n    >\n      {title}\n    </AppTitle>\n    <div className=\"HeaderBar-nowPlaying\">\n      <CurrentMedia className=\"HeaderBar-media\" media={media} />\n      {dj && <CurrentDJ className=\"HeaderBar-dj\" dj={dj} />}\n    </div>\n    {media && (\n      <Progress\n        className=\"HeaderBar-progress\"\n        currentProgress={mediaProgress}\n        timeRemaining={mediaTimeRemaining}\n      />\n    )}\n    <div className=\"HeaderBar-volume\">\n      <Volume\n        volume={volume}\n        muted={muted}\n        onVolumeChange={onVolumeChange}\n        onMute={onVolumeMute}\n        onUnmute={onVolumeUnmute}\n      />\n    </div>\n    <div className=\"HeaderBar-history\">\n      <HistoryButton onClick={onToggleRoomHistory} />\n    </div>\n  </div>\n);\n\nHeaderBar.propTypes = {\n  className: PropTypes.string,\n  title: PropTypes.string,\n\n  dj: PropTypes.object,\n  media: PropTypes.object,\n  mediaProgress: PropTypes.number.isRequired,\n  mediaTimeRemaining: PropTypes.number.isRequired,\n  volume: PropTypes.number,\n  muted: PropTypes.bool,\n\n  onVolumeChange: PropTypes.func,\n  onVolumeMute: PropTypes.func,\n  onVolumeUnmute: PropTypes.func,\n  onToggleRoomHistory: PropTypes.func,\n  onToggleAboutOverlay: PropTypes.func,\n};\n\nexport default HeaderBar;\n","import PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport compose from 'recompose/compose';\nimport getContext from 'recompose/getContext';\nimport mapProps from 'recompose/mapProps';\nimport except from 'except';\nimport { createStructuredSelector } from 'reselect';\nimport { setVolume, mute, unmute } from '../actions/PlaybackActionCreators';\nimport { toggleRoomHistory, toggleAbout } from '../actions/OverlayActionCreators';\n\nimport {\n  djSelector,\n  mediaSelector,\n  mediaProgressSelector,\n  timeRemainingSelector,\n} from '../selectors/boothSelectors';\nimport { volumeSelector, isMutedSelector } from '../selectors/settingSelectors';\nimport HeaderBar from '../components/HeaderBar';\n\nconst mapStateToProps = createStructuredSelector({\n  mediaProgress: mediaProgressSelector,\n  mediaTimeRemaining: timeRemainingSelector,\n  media: mediaSelector,\n  dj: djSelector,\n  volume: volumeSelector,\n  muted: isMutedSelector,\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onVolumeChange: setVolume,\n  onVolumeMute: mute,\n  onVolumeUnmute: unmute,\n  onToggleRoomHistory: toggleRoomHistory,\n  onToggleAboutOverlay: toggleAbout,\n}, dispatch);\n\nexport default compose(\n  getContext({ uwave: PropTypes.object }),\n  connect(mapStateToProps, mapDispatchToProps),\n  // Remove the \"uwave\" propit was only necessary for the selector.\n  mapProps(props => except(props, 'uwave')),\n)(HeaderBar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * Check if the browser supports the CSS `blur()` filter.\n */\nfunction supportsBlur() {\n  // Be conservative if we're not in the browser.\n  if (typeof window === 'undefined' || !window.CSS) {\n    return false;\n  }\n\n  return (\n    CSS.supports('filter', 'blur(1em)') ||\n    CSS.supports('-webkit-filter', 'blur(1em)')\n  );\n}\n\n/**\n * A Video backdrop, blurred using the CSS `blur()` filter.\n */\nconst CSSVideoBackdrop = ({ url }) => (\n  <img\n    className=\"VideoBackdrop VideoBackdrop--blurry\"\n    src={url}\n    alt=\"\"\n  />\n);\n\nCSSVideoBackdrop.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\nconst svgWidth = 800;\nconst svgHeight = 480;\nconst svgBlur = 20;\n\n/**\n * A Video backdrop, blurred using an SVG filter.\n */\nconst SVGVideoBackdrop = ({ url }) => (\n  <div className=\"VideoBackdrop VideoBackdrop--svg\">\n    <svg viewBox={`0 0 ${svgWidth} ${svgHeight}`}>\n      <defs>\n        <filter id=\"blur\">\n          <feGaussianBlur stdDeviation={`${svgBlur} ${svgBlur}`} result=\"blur\" />\n        </filter>\n      </defs>\n      <image\n        xlinkHref={url}\n        x={svgBlur * -3}\n        y={svgBlur * -3}\n        filter=\"url(#blur)\"\n        width={svgWidth + (svgBlur * 6)}\n        height={svgHeight + (svgBlur * 6)}\n      />\n    </svg>\n  </div>\n);\n\nSVGVideoBackdrop.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\n// If the browser supports the CSS `blur()` filter, we can use the <img>-style\n// backdrop. Otherwise, fall back to the SVG backdrop.\nconst VideoBackdrop = supportsBlur() ? CSSVideoBackdrop : SVGVideoBackdrop;\n\nexport default VideoBackdrop;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst VideoProgressBar = ({\n  media,\n  seek,\n}) => (\n  <div className=\"Video-overlay Video-progress\">\n    <LinearProgress\n      variant=\"determinate\"\n      color=\"primary\"\n      value={((seek - media.start) / (media.end - media.start)) * 100}\n    />\n  </div>\n);\n\nVideoProgressBar.propTypes = {\n  media: PropTypes.shape({\n    start: PropTypes.number.isRequired,\n    end: PropTypes.number.isRequired,\n  }).isRequired,\n  seek: PropTypes.number.isRequired,\n};\n\nexport default VideoProgressBar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport { translate } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n// State-related imports\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { videoSizeSelector } from '../../selectors/settingSelectors';\nimport { toggleVideoSize } from '../../actions/PlaybackActionCreators';\n\n// Stolen from YouTube\nconst paths = {\n  // Currently small, show \"enlarge\" icon:\n  small: 'm 28,11 0,14 -20,0 0,-14 z m -18,2 16,0 0,10 -16,0 0,-10 z',\n  // Currently large, show smaller icon: (\"ensmall\"?! )\n  large: 'm 26,13 0,10 -16,0 0,-10 z m -14,2 12,0 0,6 -12,0 0,-6 z',\n};\n\nconst VideoSizeButton = ({\n  t,\n  videoSize,\n  onToggleVideoSize,\n}) => (\n  <Tooltip\n    title={videoSize === 'large'\n      ? t('settings.disableLargeVideo')\n      : t('settings.enableLargeVideo')\n    }\n    placement=\"bottom\"\n  >\n    <IconButton onClick={onToggleVideoSize}>\n      <SvgIcon viewBox=\"6 6 24 24\">\n        <path d={paths[videoSize]} fillRule=\"evenodd\" />\n      </SvgIcon>\n    </IconButton>\n  </Tooltip>\n);\n\nVideoSizeButton.propTypes = {\n  t: PropTypes.func.isRequired,\n  videoSize: PropTypes.oneOf(['small', 'large']).isRequired,\n  onToggleVideoSize: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = createStructuredSelector({\n  videoSize: videoSizeSelector,\n});\nconst mapDispatchToProps = dispatch => ({\n  onToggleVideoSize: () => dispatch(toggleVideoSize()),\n});\n\nexport default compose(\n  translate(),\n  connect(\n    mapStateToProps,\n    mapDispatchToProps,\n  ),\n)(VideoSizeButton);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport EnterFullscreenIcon from '@material-ui/icons/Fullscreen';\nimport ExitFullscreenIcon from '@material-ui/icons/FullscreenExit';\n\nimport VideoSizeButton from './VideoSizeButton';\n\nconst renderFullscreenIcon = isFullscreen => (\n  isFullscreen ? <ExitFullscreenIcon /> : <EnterFullscreenIcon />\n);\n\nconst VideoToolbar = ({\n  t,\n  children,\n  isFullscreen,\n  onFullscreenEnter,\n  onFullscreenExit,\n}) => (\n  <div className=\"Video-overlay Video-toolbar\">\n    {children}\n    <VideoSizeButton />\n    <Tooltip\n      title={isFullscreen\n        ? t('settings.disableFullscreen')\n        : t('settings.enableFullscreen')\n      }\n      placement=\"bottom-end\"\n    >\n      <IconButton onClick={isFullscreen ? onFullscreenExit : onFullscreenEnter}>\n        {renderFullscreenIcon(isFullscreen)}\n      </IconButton>\n    </Tooltip>\n  </div>\n);\n\nVideoToolbar.propTypes = {\n  t: PropTypes.func.isRequired,\n  onFullscreenEnter: PropTypes.func.isRequired,\n  onFullscreenExit: PropTypes.func.isRequired,\n  isFullscreen: PropTypes.bool,\n  /**\n   * Optional further video tools.\n   */\n  children: PropTypes.node,\n};\n\nexport default translate()(VideoToolbar);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst disableCursor = { cursor: 'none' };\nconst enableCursor = {};\n\nconst MouseMoveCapture = ({\n  active,\n  onMouseMove,\n}) => (\n  <div\n    className=\"Video-overlay Video-capture\"\n    style={active ? enableCursor : disableCursor}\n    onMouseMove={onMouseMove}\n  />\n);\n\nMouseMoveCapture.propTypes = {\n  onMouseMove: PropTypes.func.isRequired,\n  active: PropTypes.bool,\n};\n\nexport default MouseMoveCapture;\n","import cx from 'classnames';\nimport isEqual from 'is-equal-shallow';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport injectMediaSources from '../../utils/injectMediaSources';\n\nconst enhance = injectMediaSources();\n\nclass Player extends React.Component {\n  static propTypes = {\n    getAllMediaSources: PropTypes.func.isRequired,\n    enabled: PropTypes.bool,\n    size: PropTypes.string,\n    volume: PropTypes.number,\n    isMuted: PropTypes.bool,\n    media: PropTypes.object,\n    seek: PropTypes.number,\n    onPlay: PropTypes.func,\n  };\n\n  shouldComponentUpdate(nextProps) {\n    return !isEqual(nextProps, this.props);\n  }\n\n  render() {\n    const {\n      getAllMediaSources,\n      enabled,\n      size,\n      volume,\n      isMuted,\n      media,\n      seek,\n      onPlay,\n    } = this.props;\n\n    if (!media) {\n      return <div className=\"Player\" />;\n    }\n\n    const props = {\n      enabled,\n      media,\n      seek,\n      mode: size,\n      volume: isMuted ? 0 : volume,\n      onPlay,\n    };\n\n    const sources = getAllMediaSources();\n    const players = Object.keys(sources).map((sourceType) => {\n      const SourcePlayer = sources[sourceType].Player;\n      if (!SourcePlayer) {\n        return null;\n      }\n      return (\n        <SourcePlayer\n          key={sourceType}\n          {...props}\n          active={media.sourceType === sourceType}\n        />\n      );\n    }).filter(player => player !== null);\n\n    return (\n      <div className={cx('Player', `Player--${media.sourceType}`, `Player--${size}`)}>\n        {players}\n      </div>\n    );\n  }\n}\n\nexport default enhance(Player);\n","import cx from 'classnames';\nimport isEqual from 'is-equal-shallow';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport screenfull from 'screenfull';\nimport injectMediaSources from '../../utils/injectMediaSources';\nimport VideoBackdrop from './VideoBackdrop';\nimport VideoProgressBar from './VideoProgressBar';\nimport VideoToolbar from './VideoToolbar';\nimport MouseMoveCapture from './VideoMouseMoveCapture';\nimport Player from '../Player';\n\nconst defaultSourceTools = () => null;\n\nconst enhance = injectMediaSources();\n\nclass Video extends React.Component {\n  static propTypes = {\n    getMediaSource: PropTypes.func.isRequired,\n    isFullscreen: PropTypes.bool,\n    enabled: PropTypes.bool,\n    size: PropTypes.string,\n    volume: PropTypes.number,\n    isMuted: PropTypes.bool,\n    media: PropTypes.object,\n    seek: PropTypes.number,\n    onFullscreenEnter: PropTypes.func.isRequired,\n    onFullscreenExit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    shouldShowToolbar: false,\n  };\n\n  componentDidMount() {\n    if (screenfull.enabled) {\n      screenfull.on('change', this.handleFullscreenChange);\n    }\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return !isEqual(nextProps, this.props);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.isFullscreen && !this.props.isFullscreen && screenfull.enabled) {\n      // Checking for `enabled` here, because our props have probably changed\n      // _after_ exiting fullscreen mode (see `this.handleFullscreenChange`).\n      // This way we don't double-exit.\n      if (screenfull.isFullscreen) {\n        screenfull.exit();\n      }\n    }\n  }\n\n  handleFullscreenEnter = () => {\n    if (screenfull.enabled) {\n      screenfull.request(this.element);\n    }\n    this.props.onFullscreenEnter();\n  };\n\n  handleFullscreenChange = () => {\n    if (!screenfull.isFullscreen) {\n      this.props.onFullscreenExit();\n    }\n  };\n\n  handleMouseMove = () => {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    } else {\n      this.setState({ shouldShowToolbar: true });\n    }\n    this.timer = setTimeout(this.handleMouseMoveEnd, 5000);\n  };\n\n  handleMouseMoveEnd = () => {\n    clearTimeout(this.timer);\n    this.timer = null;\n    this.setState({ shouldShowToolbar: false });\n  };\n\n  refElement = (element) => {\n    this.element = element;\n  };\n\n  render() {\n    const {\n      getMediaSource,\n      isFullscreen,\n      enabled,\n      size,\n      volume,\n      isMuted,\n      media,\n      seek,\n      onFullscreenExit,\n    } = this.props;\n\n    if (!media) {\n      return <div className=\"Video\" />;\n    }\n\n    const {\n      shouldShowToolbar,\n    } = this.state;\n\n    const currentSource = getMediaSource(media.sourceType);\n    const MediaSourceTools = (currentSource && currentSource.VideoTools)\n      ? currentSource.VideoTools\n      : defaultSourceTools;\n\n    return (\n      <div\n        ref={this.refElement}\n        className={cx('Video', `Video--${media.sourceType}`, `Video--${size}`)}\n      >\n        <VideoBackdrop url={media.thumbnail} />\n        <Player\n          enabled={enabled}\n          size={size}\n          volume={volume}\n          isMuted={isMuted}\n          media={media}\n          seek={seek}\n        />\n\n        {isFullscreen && (\n          <MouseMoveCapture\n            active={shouldShowToolbar}\n            onMouseMove={this.handleMouseMove}\n          />\n        )}\n        {isFullscreen && (\n          <VideoProgressBar\n            media={media}\n            seek={seek}\n          />\n        )}\n        {(!isFullscreen || shouldShowToolbar) && (\n          <VideoToolbar\n            isFullscreen={isFullscreen}\n            onFullscreenEnter={this.handleFullscreenEnter}\n            onFullscreenExit={onFullscreenExit}\n          >\n            <MediaSourceTools media={media} />\n          </VideoToolbar>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default enhance(Video);\n","import compose from 'recompose/compose';\nimport { bindActionCreators } from 'redux';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport timed from '../utils/timed';\n\nimport {\n  enterFullscreen as onFullscreenEnter,\n  exitFullscreen as onFullscreenExit,\n} from '../actions/PlaybackActionCreators';\nimport {\n  historyIDSelector,\n  mediaSelector,\n  playbackVolumeSelector,\n  timeElapsedSelector,\n} from '../selectors/boothSelectors';\n\nimport Video from '../components/Video';\n\nconst mapStateToProps = createStructuredSelector({\n  historyID: historyIDSelector,\n  media: mediaSelector,\n  seek: timeElapsedSelector,\n  volume: playbackVolumeSelector,\n  isFullscreen: state => state.booth.isFullscreen,\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onFullscreenEnter,\n  onFullscreenExit,\n}, dispatch);\n\nexport default compose(\n  timed(),\n  connect(mapStateToProps, mapDispatchToProps),\n)(Video);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport find from 'array-find';\nimport CSSTransition from 'react-transition-group/CSSTransition';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\n\n// Use the css transitionend event to mark the finish of a transition.\n// Using this instead of a timeout prop so that we don't have to define\n// the timeout in multiple places, and it also fixes a small visual\n// glitch in Firefox where a scrollbar would appear for a split second\n// when the enter transition was almost complete.\nfunction addTransitionEndListener(node, done) {\n  node.addEventListener('transitionend', done, false);\n}\n\nconst Overlays = ({ children, active }) => {\n  let view;\n  if (Array.isArray(children)) {\n    view = find(children, child => child.key === active);\n  } else if (children.key === active) {\n    view = children;\n  }\n  if (view) {\n    // Pass on the `view.key` so that overlays are mounted and unmounted correctly\n    // when switching from one to the other.\n    view = (\n      <CSSTransition\n        key={view.key}\n        mountOnEnter\n        unmountOnExit\n        classNames=\"Overlay\"\n        addEndListener={addTransitionEndListener}\n      >\n        {view}\n      </CSSTransition>\n    );\n  }\n  return (\n    <TransitionGroup className=\"Overlays\">\n      {view}\n    </TransitionGroup>\n  );\n};\n\nOverlays.propTypes = {\n  children: PropTypes.node,\n  active: PropTypes.string,\n};\n\nexport default Overlays;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Overlay = ({ direction = 'bottom', children, className }) => (\n  <div\n    className={cx(\n      'Overlay',\n      `Overlay--from-${direction}`,\n    )}\n  >\n    <div className={cx('Overlay-body', className)}>\n      {children}\n    </div>\n  </div>\n);\n\nOverlay.propTypes = {\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  direction: PropTypes.string,\n};\n\nexport default Overlay;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport nest from 'recompose/nest';\nimport { connect } from 'react-redux';\nimport { translate } from 'react-i18next';\nimport hoistStatics from 'hoist-non-react-statics';\nimport loadable from 'react-loadable';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Overlay from '../Overlay';\nimport OverlayContent from '../Overlay/Content';\nimport OverlayHeader from '../Overlay/Header';\nimport { closeAll } from '../../actions/OverlayActionCreators';\n\nexport default function createLazyOverlay({\n  loader,\n  title,\n  OverlayComponent = Overlay,\n}) {\n  if (typeof loader !== 'function') throw new TypeError('loader must be a function');\n\n  const enhance = compose(\n    translate(),\n    connect(null, {\n      onCloseOverlay: closeAll,\n    }),\n  );\n\n  const LoadingOverlay = ({\n    t,\n    pastDelay,\n    onCloseOverlay,\n  }) => (\n    <React.Fragment>\n      <OverlayHeader\n        title={title ? title(t) : '...'}\n        onCloseOverlay={onCloseOverlay}\n      />\n      <OverlayContent className=\"LoadingOverlay-body\">\n        {pastDelay && (\n          <CircularProgress\n            className=\"LoadingOverlay-spinner\"\n            thickness={1.6}\n          />\n        )}\n      </OverlayContent>\n    </React.Fragment>\n  );\n\n  LoadingOverlay.propTypes = {\n    t: PropTypes.func.isRequired,\n    pastDelay: PropTypes.bool.isRequired,\n    onCloseOverlay: PropTypes.func.isRequired,\n  };\n\n  const LazyOverlay = loadable({\n    loader,\n    loading: enhance(LoadingOverlay),\n  });\n\n  return hoistStatics(nest(OverlayComponent, LazyOverlay), LazyOverlay);\n}\n","import { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { selectedPlaylistSelector } from '../selectors/playlistSelectors';\nimport { showSearchResultsSelector } from '../selectors/searchSelectors';\nimport { showImportPanelSelector } from '../selectors/importSelectors';\nimport createLazyOverlay from '../components/LazyOverlay';\n\nconst mapStateToProps = createStructuredSelector({\n  selectedPlaylist: selectedPlaylistSelector,\n  showImportPanel: showImportPanelSelector,\n  showSearchResults: showSearchResultsSelector,\n});\n\nconst enhance = connect(mapStateToProps);\n\nconst PlaylistManager = createLazyOverlay({\n  loader: () => import('../components/PlaylistManager' /* webpackChunkName: \"playlists\" */),\n  title: t => t('playlists.title'),\n});\n\nexport default enhance(PlaylistManager);\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport withProps from 'recompose/withProps';\nimport { openPreviewMediaDialog } from '../actions/DialogActionCreators';\nimport { addMediaMenu } from '../actions/PlaylistActionCreators';\nimport { roomHistoryWithVotesSelector } from '../selectors/roomHistorySelectors';\nimport Overlay from '../components/Overlay';\nimport createLazyOverlay from '../components/LazyOverlay';\n\nconst selectionOrOne = (media, selection) => {\n  // History entries store the played media on their `.media` property\n  if (selection.isSelected(media)) {\n    return selection.get().map(item => item.media);\n  }\n  return [media.media];\n};\n\nconst mapStateToProps = createStructuredSelector({\n  media: roomHistoryWithVotesSelector,\n});\n\nconst onOpenAddMediaMenu = (position, media, selection) =>\n  addMediaMenu(selectionOrOne(media, selection), position);\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onOpenAddMediaMenu,\n  onOpenPreviewMediaDialog: openPreviewMediaDialog,\n}, dispatch);\n\nconst enhance = connect(mapStateToProps, mapDispatchToProps);\n\nconst RoomHistory = createLazyOverlay({\n  loader: () => import('../components/RoomHistory' /* webpackChunkName: \"history\" */),\n  title: t => t('history.title'),\n  OverlayComponent: withProps({\n    direction: 'top',\n  })(Overlay),\n});\n\nexport default enhance(RoomHistory);\n","import { put } from './RequestActionCreators';\nimport {\n  LOAD_ONLINE_USERS,\n  USER_JOIN,\n  USER_LEAVE,\n  CHANGE_USERNAME,\n  USER_ADD_ROLES,\n  USER_REMOVE_ROLES,\n\n  RECEIVE_GUEST_COUNT,\n\n  DO_CHANGE_USERNAME_START,\n  DO_CHANGE_USERNAME_COMPLETE,\n} from '../constants/ActionTypes';\nimport {\n  currentUserSelector,\n  usersSelector,\n} from '../selectors/userSelectors';\n\nexport function setUsers(users) {\n  return {\n    type: LOAD_ONLINE_USERS,\n    payload: { users },\n  };\n}\n\nexport function receiveGuestCount(guests) {\n  return {\n    type: RECEIVE_GUEST_COUNT,\n    payload: { guests },\n  };\n}\n\nexport function join(user) {\n  return {\n    type: USER_JOIN,\n    payload: {\n      user,\n      timestamp: Date.now(),\n    },\n  };\n}\n\nexport function leave(id) {\n  return (dispatch, getState) => {\n    const user = usersSelector(getState())[id];\n    return dispatch({\n      type: USER_LEAVE,\n      payload: {\n        user,\n        userID: id,\n        timestamp: Date.now(),\n      },\n    });\n  };\n}\n\nexport function changeUsername(userID, username) {\n  return (dispatch, getState) => {\n    const user = usersSelector(getState())[userID];\n    return dispatch({\n      type: CHANGE_USERNAME,\n      payload: {\n        user,\n        userID,\n        username,\n        timestamp: Date.now(),\n      },\n    });\n  };\n}\n\nexport function doChangeUsername(username) {\n  return (dispatch, getState) => {\n    const user = currentUserSelector(getState());\n\n    return dispatch(put(`/users/${user._id}/username`, { username }, {\n      onStart: () => ({\n        type: DO_CHANGE_USERNAME_START,\n        payload: { username },\n      }),\n      onComplete: ({ data }) => ({\n        type: DO_CHANGE_USERNAME_COMPLETE,\n        payload: { username: data.username },\n      }),\n      onError: error => ({\n        type: DO_CHANGE_USERNAME_COMPLETE,\n        error: true,\n        payload: error,\n        meta: { username },\n      }),\n    }));\n  };\n}\n\nexport function addUserRoles(userID, roles) {\n  return (dispatch, getState) => {\n    const user = usersSelector(getState())[userID];\n    return dispatch({\n      type: USER_ADD_ROLES,\n      payload: {\n        user,\n        userID,\n        roles,\n        timestamp: Date.now(),\n      },\n    });\n  };\n}\n\nexport function removeUserRoles(userID, roles) {\n  return (dispatch, getState) => {\n    const user = usersSelector(getState())[userID];\n    return dispatch({\n      type: USER_REMOVE_ROLES,\n      payload: {\n        user,\n        userID,\n        roles,\n        timestamp: Date.now(),\n      },\n    });\n  };\n}\n","import cookiesEnabled from '@f/cookies-enabled';\n\nconst SESSION_KEY = '_session';\n\nexport function preferredSessionType() {\n  return typeof navigator !== 'undefined' && cookiesEnabled() && !process.env.FORCE_TOKEN\n    ? 'cookie'\n    : 'token';\n}\n\nexport function set(key) {\n  try {\n    localStorage.setItem(SESSION_KEY, key);\n  } catch (e) {\n    // cookies disabled\n  }\n}\n\nexport function unset() {\n  try {\n    localStorage.removeItem(SESSION_KEY);\n  } catch (e) {\n    // cookies disabled\n  }\n}\n\nexport function get() {\n  try {\n    return localStorage.getItem(SESSION_KEY);\n  } catch (e) {\n    // cookies disabled\n  }\n  return null;\n}\n","export default function startTutorial() {\n  return import('./tutorial' /* webpackChunkName: \"tutorial\" */).then(([Sideshow]) => {\n    Sideshow.start({ listAll: true });\n  });\n}\n","import createDebug from 'debug';\nimport {\n  INIT_STATE,\n  SOCKET_CONNECT,\n  SOCKET_RECONNECT,\n  AUTH_STRATEGIES,\n  REGISTER_START,\n  REGISTER_COMPLETE,\n  LOGIN_START,\n  LOGIN_COMPLETE,\n  SET_TOKEN,\n  LOGOUT_START,\n  LOGOUT_COMPLETE,\n  RESET_PASSWORD_COMPLETE,\n  LOAD_ALL_PLAYLISTS_START,\n} from '../constants/ActionTypes';\nimport * as Session from '../utils/Session';\nimport { get, post, del } from './RequestActionCreators';\nimport { advance, loadHistory } from './BoothActionCreators';\nimport { setPlaylists, loadPlaylist } from './PlaylistActionCreators';\nimport { syncTimestamps } from './TickerActionCreators';\nimport { closeLoginDialog } from './DialogActionCreators';\nimport { tokenSelector } from '../selectors/userSelectors';\nimport startTutorial from '../_wlk/startTutorial';\n\nconst debug = createDebug('uwave:actions:login');\n\nexport function socketConnect() {\n  return { type: SOCKET_CONNECT };\n}\n\nexport function socketReconnect() {\n  return { type: SOCKET_RECONNECT };\n}\n\nexport function setAuthenticationStrategies(strategies) {\n  return {\n    type: AUTH_STRATEGIES,\n    payload: { strategies },\n  };\n}\n\nexport function loginComplete({ token, socketToken, user }) {\n  return (dispatch) => {\n    dispatch({\n      type: LOGIN_COMPLETE,\n      payload: {\n        token,\n        socketToken,\n        user,\n      },\n    });\n    dispatch(closeLoginDialog());\n  };\n}\n\nexport function loadedState(state) {\n  return (dispatch, getState) => {\n    dispatch({\n      type: INIT_STATE,\n      payload: state,\n    });\n    if (state.booth && state.booth.historyID) {\n      // TODO don't set this when logging in _after_ entering the page?\n      dispatch(advance(state.booth));\n    }\n    if (state.user) {\n      const token = tokenSelector(getState());\n      dispatch(loginComplete({\n        token,\n        socketToken: state.socketToken,\n        user: state.user,\n      }));\n    }\n    if (state.activePlaylist) {\n      dispatch(loadPlaylist(state.activePlaylist));\n    }\n  };\n}\n\nexport function initState() {\n  const beforeTime = Date.now();\n\n  return get('/now', {\n    onStart: () => ({ type: LOAD_ALL_PLAYLISTS_START }),\n    onComplete: state => (dispatch) => {\n      dispatch(syncTimestamps(beforeTime, state.time));\n      dispatch(loadedState(state));\n      dispatch(loadHistory());\n    },\n  });\n}\n\nexport function setSessionToken(token) {\n  return {\n    type: SET_TOKEN,\n    payload: { token },\n  };\n}\n\nfunction loginStart() {\n  return { type: LOGIN_START };\n}\n\nexport function login({ email, password }) {\n  const sessionType = Session.preferredSessionType();\n  return post(`/auth/login?session=${sessionType}`, { email, password }, {\n    onStart: loginStart,\n    onComplete: res => (dispatch) => {\n      Session.set(res.meta.jwt);\n      dispatch(setSessionToken(res.meta.jwt));\n      dispatch(initState());\n    },\n    onError: error => ({\n      type: LOGIN_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function register({\n  email, username, password, grecaptcha,\n}) {\n  return post('/auth/register', {\n    email, username, password, grecaptcha,\n  }, {\n    onStart: () => ({ type: REGISTER_START }),\n    onComplete: res => (dispatch) => {\n      const user = res.data;\n      debug('registered', user);\n      dispatch({\n        type: REGISTER_COMPLETE,\n        payload: { user },\n      });\n      dispatch(login({ email, password }))\n        .then(() => {\n          if (matchMedia('(min-width: 769px)').matches) {\n            return startTutorial();\n          }\n          return null;\n        });\n    },\n    onError: error => ({\n      type: REGISTER_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nfunction logoutStart() {\n  return { type: LOGOUT_START };\n}\n\nfunction logoutComplete() {\n  return (dispatch) => {\n    dispatch({ type: LOGOUT_COMPLETE });\n    dispatch(setPlaylists([]));\n  };\n}\n\nexport function logout() {\n  return del('/auth', {}, {\n    onStart: () => (dispatch) => {\n      dispatch(logoutStart());\n      Session.unset();\n    },\n    onComplete: logoutComplete,\n  });\n}\n\nexport function resetPassword(email) {\n  return post('/auth/password/reset', email, {\n    onComplete: () => ({\n      type: RESET_PASSWORD_COMPLETE,\n      payload: 'Successfully sent password reset email',\n    }),\n    onError: error => ({\n      type: RESET_PASSWORD_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function getSocketAuthToken() {\n  return get('/auth/socket', {\n    onComplete: res => () => ({\n      socketToken: res.data.socketToken,\n    }),\n  });\n}\n\nfunction whenWindowClosed(window) {\n  return new Promise((resolve) => {\n    const i = setInterval(() => {\n      if (window.closed) {\n        clearInterval(i);\n        resolve();\n      }\n    }, 50);\n  });\n}\nfunction socialLogin(service) {\n  return (dispatch, getState) => {\n    const { apiUrl } = getState().config;\n    const loginWindow = window.open(`${apiUrl}/auth/service/${service}`);\n    return whenWindowClosed(loginWindow).then(() => {\n      // Check login state after the window closed.\n      dispatch(initState());\n    });\n  };\n}\nexport function loginWithGoogle() {\n  return socialLogin('google');\n}\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport {\n  set as setSetting,\n  setLanguage,\n} from '../actions/SettingsActionCreators';\nimport { doChangeUsername } from '../actions/UserActionCreators';\nimport { logout } from '../actions/LoginActionCreators';\nimport { currentUserSelector } from '../selectors/userSelectors';\nimport { settingsSelector } from '../selectors/settingSelectors';\nimport createLazyOverlay from '../components/LazyOverlay';\n\nconst mapStateToProps = createStructuredSelector({\n  settings: settingsSelector,\n  user: currentUserSelector,\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onSettingChange: setSetting,\n  onChangeUsername: doChangeUsername,\n  onChangeLanguage: setLanguage,\n  onLogout: logout,\n}, dispatch);\n\nconst enhance = connect(mapStateToProps, mapDispatchToProps);\n\nconst SettingsManager = createLazyOverlay({\n  loader: () => import('../components/SettingsManager' /* webpackChunkName: \"settings\" */),\n  title: t => t('settings.title'),\n});\n\nexport default enhance(SettingsManager);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport loadable from 'react-loadable';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Overlay from '../Overlay';\nimport OverlayHeader from '../Overlay/Header';\n\nconst AdminComponent = loadable({\n  loader: () => import('../../admin/containers/AdminApp' /* webpackChunkName: \"admin\" */),\n  loading: () => <CircularProgress size=\"100%\" />,\n});\n\nconst AdminProxy = ({ onCloseOverlay }) => (\n  <Overlay className=\"AppColumn AppColumn--full\" direction=\"top\">\n    <OverlayHeader\n      title=\"Administration\"\n      onCloseOverlay={onCloseOverlay}\n      direction=\"top\"\n    />\n    <div className=\"AppRow AppRow--middle AdminPanel\">\n      <AdminComponent />\n    </div>\n  </Overlay>\n);\n\nAdminProxy.propTypes = {\n  onCloseOverlay: PropTypes.func.isRequired,\n};\n\nexport default AdminProxy;\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport loadable from 'react-loadable';\n\nconst ServerList = loadable({\n  loader: () => import('@u-wave/react-server-list' /* webpackChunkName: \"serverList\" */),\n  loading: () => (\n    <div className=\"ServerList ServerList--loading\">\n      <CircularProgress />\n    </div>\n  ),\n  render(loaded, props) {\n    const { Container } = loaded;\n    return (\n      <div className=\"ServerList\">\n        <Container {...props} />\n      </div>\n    );\n  },\n});\n\nexport default ServerList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withState from 'recompose/withState';\nimport { translate } from 'react-i18next';\nimport List, { ListItem, ListItemText } from '../List';\nimport OverlayHeader from '../Overlay/Header';\nimport OverlayContent from '../Overlay/Content';\nimport ServerList from '../ServerList';\n\nconst enhance = compose(\n  translate(),\n  withState(\n    'active',\n    'setActive',\n    ({ hasAboutPage }) => (hasAboutPage ? 'about' : 'servers'),\n  ),\n);\n\nconst About = ({\n  t,\n  onCloseOverlay,\n  active,\n  setActive,\n  hasAboutPage,\n  render: AboutPanel,\n}) => (\n  <div className=\"About\">\n    <OverlayHeader\n      title={t('about.about')}\n      onCloseOverlay={onCloseOverlay}\n      direction=\"top\"\n    />\n    <OverlayContent className=\"AboutPanel\">\n      <List className=\"AboutPanel-menu\">\n        {hasAboutPage && (\n          <ListItem\n            className=\"AboutPanel-menuItem\"\n            selected={active === 'about'}\n            onClick={() => setActive('about')}\n          >\n            <ListItemText primary={t('about.about')} />\n          </ListItem>\n        )}\n        <ListItem\n          className=\"AboutPanel-menuItem\"\n          selected={active === 'servers'}\n          onClick={() => setActive('servers')}\n        >\n          <ListItemText primary={t('about.servers')} />\n        </ListItem>\n      </List>\n      <div className=\"AboutPanel-content\">\n        {active === 'about' && <AboutPanel />}\n        {active === 'servers' && <ServerList />}\n      </div>\n    </OverlayContent>\n  </div>\n);\n\nAbout.propTypes = {\n  t: PropTypes.func.isRequired,\n  onCloseOverlay: PropTypes.func.isRequired,\n  hasAboutPage: PropTypes.bool.isRequired,\n  active: PropTypes.oneOf(['about', 'servers']).isRequired,\n  setActive: PropTypes.func.isRequired,\n  render: PropTypes.func.isRequired,\n};\n\nexport default enhance(About);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Overlay from '../components/Overlay';\nimport About from '../components/About';\n\nexport default class AboutContainer extends React.Component {\n  static contextTypes = {\n    uwave: PropTypes.object,\n  };\n\n  getAboutPageComponent() {\n    if (this.hasAboutPageComponent()) {\n      const uw = this.context.uwave;\n      return uw.getAboutPageComponent();\n    }\n    return () => null;\n  }\n\n  hasAboutPageComponent() {\n    const uw = this.context.uwave;\n    return Boolean(uw && uw.getAboutPageComponent());\n  }\n\n  render() {\n    return (\n      <Overlay direction=\"top\">\n        <About\n          {...this.props}\n          hasAboutPage={this.hasAboutPageComponent()}\n          render={this.getAboutPageComponent()}\n        />\n      </Overlay>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst OfflineIcon = ({ style }) => (\n  <div\n    style={{\n      ...style,\n      width: 32,\n      height: 32,\n      display: 'inline-block',\n    }}\n  >\n    <CircularProgress size={32} />\n  </div>\n);\n\nOfflineIcon.propTypes = {\n  style: PropTypes.object,\n};\n\nexport default OfflineIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Card from '@material-ui/core/Card/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport OfflineIcon from './OfflineIcon';\n\nconst enhance = translate();\n\nconst ConnectionIndicator = ({ isConnected, t }) => (\n  isConnected ? null : (\n    <div className=\"ConnectionIndicator-position\">\n      <Card>\n        <CardHeader\n          title={t('server.connectionLost')}\n          subheader={t('server.reconnecting')}\n          avatar={<OfflineIcon />}\n        />\n      </Card>\n    </div>\n  )\n);\n\nConnectionIndicator.propTypes = {\n  t: PropTypes.func.isRequired,\n  isConnected: PropTypes.bool.isRequired,\n};\n\nexport default enhance(ConnectionIndicator);\n","import { SELECT_PANEL } from '../constants/ActionTypes';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function selectPanel(name) {\n  return {\n    type: SELECT_PANEL,\n    payload: {\n      panel: name,\n    },\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst DeleteButton = ({ onDelete }) => (\n  <button\n    className=\"ChatMessage-delete\"\n    onClick={onDelete}\n  >\n    Delete\n  </button>\n);\n\nDeleteButton.propTypes = {\n  onDelete: PropTypes.func.isRequired,\n};\n\nexport default DeleteButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst timeFormatOptions = { hour: 'numeric', minute: 'numeric' };\n\nconst MessageTimestamp = ({ date }) => (\n  <time\n    className=\"ChatMessage-timestamp\"\n    dateTime={date.toISOString()}\n  >\n    {date.toLocaleTimeString([], timeFormatOptions)}\n  </time>\n);\n\nMessageTimestamp.propTypes = {\n  date: PropTypes.instanceOf(Date).isRequired,\n};\n\nexport default MessageTimestamp;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport withHandlers from 'recompose/withHandlers';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport userCardable from '../../utils/userCardable';\nimport Avatar from '../Avatar';\nimport Username from '../Username';\nimport compile from './Markup/compile';\nimport DeleteButton from './DeleteButton';\nimport MessageTimestamp from './MessageTimestamp';\n\nconst enhance = compose(\n  pure,\n  userCardable(),\n  withHandlers({\n    onDeleteClick: props => () =>\n      props.onDelete(props._id),\n    onUsernameClick: props => (event) => {\n      event.preventDefault();\n      props.openUserCard(props.user);\n    },\n  }),\n);\n\nconst Message = ({\n  user,\n  text,\n  parsedText,\n  inFlight,\n  isMention,\n  timestamp,\n  compileOptions,\n  deletable,\n  onDeleteClick,\n  onUsernameClick,\n}) => {\n  let avatar;\n  if (inFlight) {\n    avatar = (\n      <div className=\"ChatMessage-avatar\">\n        <CircularProgress size=\"100%\" />\n      </div>\n    );\n  } else {\n    avatar = (\n      <Avatar\n        className=\"ChatMessage-avatar\"\n        user={user}\n      />\n    );\n  }\n\n  const children = parsedText ? compile(parsedText, compileOptions) : text;\n\n  const date = new Date(timestamp);\n\n  const className = cx(\n    'ChatMessage',\n    inFlight && 'ChatMessage--loading',\n    isMention && 'ChatMessage--mention',\n  );\n  return (\n    <div className={className}>\n      {avatar}\n      <div className=\"ChatMessage-content\">\n        <div className=\"ChatMessage-hover\">\n          {deletable && <DeleteButton onDelete={onDeleteClick} />}\n          <MessageTimestamp date={date} />\n        </div>\n        <button\n          className=\"ChatMessage-username ChatMessage-cardable\"\n          onClick={onUsernameClick}\n        >\n          <Username user={user} />\n        </button>\n        <span className=\"ChatMessage-text\">{children}</span>\n      </div>\n    </div>\n  );\n};\n\nMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  text: PropTypes.string.isRequired,\n  parsedText: PropTypes.array.isRequired,\n  inFlight: PropTypes.bool,\n  timestamp: PropTypes.number.isRequired,\n  isMention: PropTypes.bool.isRequired,\n  deletable: PropTypes.bool.isRequired,\n  onDeleteClick: PropTypes.func,\n  compileOptions: PropTypes.shape({\n    availableEmoji: PropTypes.array,\n    emojiImages: PropTypes.object,\n  }),\n  onUsernameClick: PropTypes.func.isRequired,\n};\n\nexport default enhance(Message);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport pure from 'recompose/pure';\n\nimport compile from './Markup/compile';\n\nconst Motd = ({ children, compileOptions }) => (\n  <div className=\"ChatMessage ChatMessage--motd\">\n    <div className=\"ChatMessage-content\">\n      {compile(children, compileOptions)}\n    </div>\n  </div>\n);\n\nMotd.propTypes = {\n  children: PropTypes.array.isRequired,\n  compileOptions: PropTypes.shape({\n    availableEmoji: PropTypes.array,\n    emojiImages: PropTypes.object,\n  }),\n};\n\nexport default pure(Motd);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\nimport ScrollDownIcon from '@material-ui/icons/ArrowDownward';\n\nconst ScrollNotice = ({ show, onClick }) => (\n  <div className={cx('ChatMessages-scrollDown', show && 'is-visible')}>\n    <div className=\"ChatMessages-scrollDownButton\">\n      <Button variant=\"fab\" mini color=\"primary\" onClick={onClick}>\n        <ScrollDownIcon />\n      </Button>\n    </div>\n  </div>\n);\n\nScrollNotice.propTypes = {\n  show: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ScrollNotice;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport pure from 'recompose/pure';\n\nconst LogMessage = ({ text }) => (\n  <div className=\"ChatMessage ChatMessage--log\">\n    <div className=\"ChatMessage-content\">\n      <span className=\"ChatMessage-text\">{text}</span>\n    </div>\n  </div>\n);\n\nLogMessage.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default pure(LogMessage);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate, Interpolate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport withHandlers from 'recompose/withHandlers';\nimport userCardable from '../../../utils/userCardable';\nimport Avatar from '../../Avatar';\nimport Username from '../../Username';\nimport MessageTimestamp from '../MessageTimestamp';\n\nconst enhance = compose(\n  translate(),\n  pure,\n  userCardable(),\n  withHandlers({\n    onClick: props => (event) => {\n      event.preventDefault();\n      props.openUserCard(props.user);\n    },\n  }),\n);\n\nconst UserNotificationMessage = ({\n  className,\n  user,\n  timestamp,\n  onClick,\n  ...props\n}) => (\n  <div className={cx('ChatMessage', 'ChatMessage--userNotification', className)}>\n    <Avatar\n      className=\"ChatMessage-avatar\"\n      user={user}\n    />\n    <div className=\"ChatMessage-content\">\n      <div className=\"ChatMessage-hover\">\n        <MessageTimestamp date={new Date(timestamp)} />\n      </div>\n      <Interpolate\n        username={(\n          <button className=\"ChatMessage-username ChatMessage-cardable\" onClick={onClick}>\n            <Username user={user} />\n          </button>\n        )}\n        {...props}\n      />\n    </div>\n  </div>\n);\n\nUserNotificationMessage.propTypes = {\n  className: PropTypes.string.isRequired,\n  user: PropTypes.object.isRequired,\n  timestamp: PropTypes.number.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default enhance(UserNotificationMessage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport UserNotificationMessage from './UserNotificationMessage';\n\nconst JoinMessage = ({\n  user,\n  timestamp,\n}) => (\n  <UserNotificationMessage\n    type=\"userJoin\"\n    className=\"ChatMessage--userJoin\"\n    i18nKey=\"chat.userJoin\"\n    user={user}\n    timestamp={timestamp}\n  />\n);\n\nJoinMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  timestamp: PropTypes.number.isRequired,\n};\n\nexport default JoinMessage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport UserNotificationMessage from './UserNotificationMessage';\n\nconst LeaveMessage = ({\n  user,\n  timestamp,\n}) => (\n  <UserNotificationMessage\n    type=\"userLeave\"\n    className=\"ChatMessage--userLeave\"\n    i18nKey=\"chat.userLeave\"\n    user={user}\n    timestamp={timestamp}\n  />\n);\n\nLeaveMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  timestamp: PropTypes.number.isRequired,\n};\n\nexport default LeaveMessage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport UserNotificationMessage from './UserNotificationMessage';\n\nconst UserNameChanged = ({\n  user,\n  timestamp,\n  newUsername,\n}) => (\n  <UserNotificationMessage\n    type=\"userNameChanged\"\n    className=\"ChatMessage--userNameChanged\"\n    i18nKey=\"chat.userNameChanged\"\n    user={user}\n    timestamp={timestamp}\n    newUsername={newUsername}\n  />\n);\n\nUserNameChanged.propTypes = {\n  user: PropTypes.object.isRequired,\n  newUsername: PropTypes.string.isRequired,\n  timestamp: PropTypes.number.isRequired,\n};\n\nexport default UserNameChanged;\n","import React from 'react';\nimport { translate } from 'react-i18next';\nimport PropTypes from 'prop-types';\nimport Username from '../../Username';\nimport UserNotificationMessage from './UserNotificationMessage';\n\nconst toUsername = user => (\n  <Username user={user} />\n);\n\nconst getLangKey = (hasModerator, hasReason) => {\n  if (hasReason) {\n    return hasModerator ? 'chat.modSkipReason' : 'chat.selfSkipReason';\n  }\n  return hasModerator ? 'chat.modSkip' : 'chat.selfSkip';\n};\n\nconst enhance = translate();\n\nconst SkipMessage = ({\n  t,\n  user,\n  moderator,\n  reason,\n  timestamp,\n}) => (\n  <UserNotificationMessage\n    type=\"skip\"\n    className=\"ChatMessage--skip\"\n    i18nKey={getLangKey(!!moderator, !!reason)}\n    user={moderator || user}\n    djName={toUsername(user)}\n    reason={reason ? t(`booth.skip.reasons.${reason}`) : undefined}\n    timestamp={timestamp}\n  />\n);\n\nSkipMessage.propTypes = {\n  t: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  moderator: PropTypes.object,\n  timestamp: PropTypes.number.isRequired,\n  reason: PropTypes.string,\n};\n\nexport default enhance(SkipMessage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport upperCaseFirst from 'upper-case-first';\nimport UserNotificationMessage from './UserNotificationMessage';\n\nconst getLangKey = (updateType) => {\n  if (updateType === 'add') {\n    return 'chat.rolesAdded';\n  }\n  return 'chat.rolesRemoved';\n};\n\nconst RoleUpdateMessage = ({\n  user,\n  updateType,\n  roles,\n  timestamp,\n}) => (\n  <UserNotificationMessage\n    type=\"roleUpdate\"\n    className=\"ChatMessage--roleUpdate\"\n    i18nKey={getLangKey(updateType)}\n    user={user}\n    roles={roles.map(upperCaseFirst).join(', ')}\n    timestamp={timestamp}\n  />\n);\n\nRoleUpdateMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  updateType: PropTypes.oneOf(['add', 'remove']).isRequired,\n  roles: PropTypes.arrayOf(PropTypes.string).isRequired,\n  timestamp: PropTypes.number.isRequired,\n};\n\nexport default RoleUpdateMessage;\n","import LogMessage from './LogMessage';\nimport JoinMessage from './NotificationMessages/JoinMessage';\nimport LeaveMessage from './NotificationMessages/LeaveMessage';\nimport NameChangedMessage from './NotificationMessages/NameChangedMessage';\nimport SkipMessage from './NotificationMessages/SkipMessage';\nimport RoleUpdateMessage from './NotificationMessages/RoleUpdateMessage';\n\nexport default {\n  log: LogMessage,\n  userJoin: JoinMessage,\n  userLeave: LeaveMessage,\n  userNameChanged: NameChangedMessage,\n  skip: SkipMessage,\n  roleUpdate: RoleUpdateMessage,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Message from './Message';\nimport Motd from './Motd';\nimport ScrollDownNotice from './ScrollDownNotice';\nimport specialMessages from './specialMessages';\n\nexport default class ChatMessages extends React.Component {\n  static propTypes = {\n    bus: PropTypes.object.isRequired,\n    messages: PropTypes.array,\n    motd: PropTypes.array,\n    canDeleteMessages: PropTypes.bool,\n    onDeleteMessage: PropTypes.func,\n    compileOptions: PropTypes.shape({\n      availableEmoji: PropTypes.array,\n      emojiImages: PropTypes.object,\n    }),\n  };\n\n  state = {\n    isScrolledToBottom: true,\n  };\n\n  componentDidMount() {\n    const { bus } = this.props;\n\n    this.scrollToBottom();\n    this.shouldScrollToBottom = false;\n\n    bus.on('chat:scroll', this.onExternalScroll);\n\n    // A window resize may affect the available space.\n    if (typeof window !== 'undefined') {\n      window.addEventListener('resize', this.handleResize);\n    }\n  }\n\n  // This usually means that new messages came in;\n  // either way it does not hurt to run this multiple times\n  // so it is safe to use.\n  // eslint-disable-next-line camelcase, react/sort-comp\n  UNSAFE_componentWillReceiveProps() {\n    this.shouldScrollToBottom = this.isScrolledToBottom();\n  }\n\n  componentDidUpdate() {\n    // Keep the chat scrolled to the bottom after a new message is addded.\n    if (this.shouldScrollToBottom) {\n      this.scrollToBottom();\n      this.shouldScrollToBottom = false;\n    }\n  }\n\n  componentWillUnmount() {\n    const { bus } = this.props;\n\n    bus.off('chat:scroll', this.onExternalScroll);\n\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n  }\n\n  onExternalScroll = (direction) => {\n    const el = this.container;\n    if (direction === 'start') {\n      el.scrollTop = 0;\n    } else if (direction === 'end') {\n      el.scrollTop = el.scrollHeight;\n    } else {\n      el.scrollTop += direction * 250;\n    }\n  };\n\n  scrollToBottom() {\n    const el = this.container;\n    el.scrollTop = el.scrollHeight;\n  }\n\n  isScrolledToBottom() {\n    const el = this.container;\n    const lastMessage = el.lastElementChild;\n    if (lastMessage) {\n      const neededSize = el.scrollTop + el.offsetHeight + lastMessage.offsetHeight;\n      return neededSize >= el.scrollHeight - 20;\n    }\n    return true;\n  }\n\n  handleResize = () => {\n    if (this.state.isScrolledToBottom) {\n      this.scrollToBottom();\n    }\n  };\n\n  handleScroll = () => {\n    this.setState({\n      isScrolledToBottom: this.isScrolledToBottom(),\n    });\n  };\n\n  handleScrollToBottom = (event) => {\n    event.preventDefault();\n    this.scrollToBottom();\n  };\n\n  refContainer = (container) => {\n    this.container = container;\n  };\n\n  renderMotd() {\n    if (!this.props.motd) {\n      return null;\n    }\n    return (\n      <Motd compileOptions={this.props.compileOptions}>\n        {this.props.motd}\n      </Motd>\n    );\n  }\n\n  renderMessage(msg) {\n    const SpecialMessage = specialMessages[msg.type];\n    if (SpecialMessage) {\n      return (\n        <SpecialMessage\n          key={msg._id}\n          {...msg}\n        />\n      );\n    }\n\n    return (\n      <Message\n        key={msg._id}\n        compileOptions={this.props.compileOptions}\n        deletable={this.props.canDeleteMessages}\n        onDelete={this.props.onDeleteMessage}\n        {...msg}\n      />\n    );\n  }\n\n  render() {\n    const { isScrolledToBottom } = this.state;\n\n    return (\n      <div\n        ref={this.refContainer}\n        className=\"ChatMessages\"\n        onScroll={this.handleScroll}\n      >\n        <ScrollDownNotice\n          show={!isScrolledToBottom}\n          onClick={this.handleScrollToBottom}\n        />\n        {this.renderMotd()}\n        {this.props.messages.map(this.renderMessage, this)}\n      </div>\n    );\n  }\n}\n","import compose from 'recompose/compose';\nimport { connect } from 'react-redux';\nimport { withBus } from 'react-bus';\nimport { createStructuredSelector } from 'reselect';\n\nimport {\n  motdSelector,\n  messagesSelector,\n  markupCompilerOptionsSelector,\n  canDeleteMessagesSelector,\n} from '../selectors/chatSelectors';\nimport { deleteChatMessage } from '../actions/ModerationActionCreators';\n\nimport ChatMessages from '../components/Chat/ChatMessages';\n\nconst mapStateToProps = createStructuredSelector({\n  motd: motdSelector,\n  messages: messagesSelector,\n  compileOptions: markupCompilerOptionsSelector,\n  canDeleteMessages: canDeleteMessagesSelector,\n});\n\nconst mapDispatchToProps = {\n  onDeleteMessage: deleteChatMessage,\n};\n\nconst enhance = compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withBus(),\n);\n\nexport default enhance(ChatMessages);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\n\nconst SuggestionsList = ({\n  children,\n}) => (\n  <div className=\"ChatInput-suggestions\">\n    <Paper>\n      <List>\n        {children}\n      </List>\n    </Paper>\n  </div>\n);\n\nSuggestionsList.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default SuggestionsList;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\n\nconst Suggestion = ({\n  children,\n  className,\n  select,\n  selected,\n  ...props\n}) => (\n  <ListItem\n    button\n    onClick={select}\n    className={cx('SuggestionItem', selected && 'is-focused', className)}\n    {...props}\n  >\n    {children}\n  </ListItem>\n);\n\nSuggestion.propTypes = {\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  select: PropTypes.func.isRequired,\n  selected: PropTypes.bool.isRequired,\n};\n\nexport default Suggestion;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Suggestion from './Suggestion';\n\nconst shortcode = emoji => `:${emoji.shortcode}:`;\n\nconst EmojiSuggestion = ({\n  value: emoji,\n  ...props\n}) => (\n  <Suggestion {...props}>\n    <ListItemAvatar>\n      <span\n        className=\"EmojiSuggestion-image\"\n        style={{ backgroundImage: `url(/assets/emoji/${emoji.image})` }}\n      />\n    </ListItemAvatar>\n    <ListItemText primary={shortcode(emoji)} />\n  </Suggestion>\n);\n\nEmojiSuggestion.propTypes = {\n  value: PropTypes.shape({\n    shortcode: PropTypes.string,\n    image: PropTypes.string,\n  }).isRequired,\n};\n\nexport default EmojiSuggestion;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport PeopleIcon from '@material-ui/icons/People';\nimport Suggestion from './Suggestion';\n\nconst GroupSuggestion = ({ value: group, ...props }) => (\n  <Suggestion {...props}>\n    <ListItemIcon>\n      <PeopleIcon />\n    </ListItemIcon>\n    <ListItemText primary={group} />\n  </Suggestion>\n);\n\nGroupSuggestion.propTypes = {\n  value: PropTypes.string.isRequired,\n};\n\nexport default GroupSuggestion;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Avatar from '../../Avatar';\nimport Suggestion from './Suggestion';\n\nconst UserSuggestion = ({\n  value: user,\n  ...props\n}) => (\n  <Suggestion {...props}>\n    <ListItemAvatar>\n      <div style={{ display: 'inline-block' }}>\n        <Avatar user={user} />\n      </div>\n    </ListItemAvatar>\n    <ListItemText primary={user.username} />\n  </Suggestion>\n);\n\nUserSuggestion.propTypes = {\n  value: PropTypes.shape({\n    _id: PropTypes.string.isRequired,\n    username: PropTypes.string.isRequired,\n    avatar: PropTypes.string,\n  }).isRequired,\n};\n\nexport default UserSuggestion;\n","import cx from 'classnames';\nimport sortBy from 'lodash/sortBy';\nimport uniqBy from 'lodash/uniqBy';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport AutoComplete, { Completion } from 'react-abstract-autocomplete';\nimport SuggestionsList from './SuggestionsList';\nimport EmojiSuggestion from './EmojiSuggestion';\nimport GroupSuggestion from './GroupSuggestion';\nimport UserSuggestion from './UserSuggestion';\n\nconst renderSuggestions = children => (\n  <SuggestionsList>{children}</SuggestionsList>\n);\n\n// User suggestions:\nconst getUserCompletions = (value, { trigger, completions }) => {\n  const compare = value.substr(trigger.length).toLowerCase();\n  return completions.filter(user => (\n    user.username.substr(0, compare.length).toLowerCase() === compare\n  ));\n};\nconst getUserText = (user, { trigger }) => `${trigger}${user.username} `;\nconst renderUser = props => <UserSuggestion {...props} />;\n\n// Group suggestions:\nconst renderGroup = props => <GroupSuggestion {...props} />;\n\n// Emoji suggestions:\nconst getEmojiCompletions = (value, { trigger, completions }) => {\n  const compare = value.substr(trigger.length).toLowerCase();\n  const results = completions.filter(emoji => (\n    emoji.shortcode.substr(0, compare.length).toLowerCase() === compare\n  ));\n  return sortBy(\n    uniqBy(results, emoji => emoji.image),\n    emoji => emoji.shortcode.length,\n  );\n};\nconst getEmojiText = value => `:${value.shortcode}: `;\nconst renderEmoji = props => <EmojiSuggestion {...props} />;\n\nconst enhance = translate();\n\nclass ChatInput extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    onSend: PropTypes.func.isRequired,\n    onScroll: PropTypes.func.isRequired,\n    mentionableUsers: PropTypes.array.isRequired,\n    mentionableGroups: PropTypes.array.isRequired,\n    availableEmoji: PropTypes.array.isRequired,\n  };\n\n  state = {\n    focused: false,\n    value: '',\n  };\n\n  clear() {\n    this.setState({ value: '' });\n  }\n\n  handleFocus = () => {\n    this.setState({ focused: true });\n  };\n  handleBlur = () => {\n    this.setState({ focused: false });\n  };\n\n  handleKeyDown = (e) => {\n    e.stopPropagation();\n    if (e.key === 'Enter') {\n      const value = e.target.value.trim();\n      if (value.length > 0) {\n        this.props.onSend(value);\n      }\n      this.clear();\n    }\n    if (e.key === 'PageUp') {\n      e.preventDefault();\n      this.props.onScroll(-1);\n    }\n    if (e.key === 'PageDown') {\n      e.preventDefault();\n      this.props.onScroll(1);\n    }\n    if (e.key === 'End' && e.ctrlKey) {\n      e.preventDefault();\n      this.props.onScroll('end');\n    }\n    if (e.key === 'Home' && e.ctrlKey) {\n      e.preventDefault();\n      this.props.onScroll('start');\n    }\n  };\n\n  handleUpdate = (newValue) => {\n    this.setState({ value: newValue });\n  };\n\n  render() {\n    const {\n      focused,\n      value,\n    } = this.state;\n    const {\n      t,\n      mentionableUsers,\n      mentionableGroups,\n      availableEmoji,\n    } = this.props;\n    const focusClass = focused ? 'is-focused' : '';\n    return (\n      <div className={cx('ChatInput', focusClass)}>\n        <AutoComplete\n          inputProps={{\n            type: 'text',\n            className: cx('ChatInput-input', focusClass),\n            placeholder: focused ? '' : t('chat.placeholder'),\n            onFocus: this.handleFocus,\n            onBlur: this.handleBlur,\n            onKeyDown: this.handleKeyDown,\n          }}\n          onUpdate={this.handleUpdate}\n          value={value}\n          renderSuggestions={renderSuggestions}\n          limit={6}\n        >\n          <Completion\n            trigger=\"@\"\n            minLength={2}\n            completions={mentionableUsers}\n            getCompletions={getUserCompletions}\n            getText={getUserText}\n            renderSuggestion={renderUser}\n          />\n          <Completion\n            trigger=\"@\"\n            minLength={2}\n            completions={mentionableGroups}\n            renderSuggestion={renderGroup}\n          />\n          <Completion\n            trigger=\":\"\n            completions={availableEmoji}\n            getCompletions={getEmojiCompletions}\n            getText={getEmojiText}\n            renderSuggestion={renderEmoji}\n          />\n        </AutoComplete>\n      </div>\n    );\n  }\n}\n\nexport default enhance(ChatInput);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport compose from 'recompose/compose';\nimport withProps from 'recompose/withProps';\nimport { connect } from 'react-redux';\nimport { withBus } from 'react-bus';\nimport { createStructuredSelector } from 'reselect';\nimport { inputMessage } from '../actions/ChatActionCreators';\nimport {\n  availableGroupMentionsSelector,\n  emojiCompletionsSelector,\n} from '../selectors/chatSelectors';\nimport {\n  userListSelector,\n  isLoggedInSelector,\n} from '../selectors/userSelectors';\n\nimport ChatInput from '../components/Chat/Input';\n\nconst mapStateToProps = createStructuredSelector({\n  isLoggedIn: isLoggedInSelector,\n  mentionableUsers: userListSelector,\n  mentionableGroups: availableGroupMentionsSelector,\n  availableEmoji: emojiCompletionsSelector,\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onSend: inputMessage,\n}, dispatch);\n\nconst enhance = compose(\n  connect(mapStateToProps, mapDispatchToProps),\n  withBus(),\n  withProps(({ bus }) => ({\n    onScroll: direction => bus.emit('chat:scroll', direction),\n  })),\n);\n\nconst ChatInputContainer = ({ isLoggedIn, ...props }) => (\n  isLoggedIn\n    ? <ChatInput {...props} />\n    : <span />\n);\n\nChatInputContainer.propTypes = {\n  isLoggedIn: PropTypes.bool.isRequired,\n};\n\nexport default enhance(ChatInputContainer);\n","import React from 'react';\nimport ChatMessages from '../../containers/ChatMessages';\nimport ChatInput from '../../containers/ChatInput';\n\nconst Chat = () => (\n  <div className=\"ChatContainer\">\n    <div className=\"ChatContainer-messages\">\n      <ChatMessages />\n    </div>\n    <div className=\"ChatContainer-input ChatInputWrapper\">\n      <ChatInput />\n    </div>\n  </div>\n);\n\nexport default Chat;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DownvoteIcon from '@material-ui/icons/ThumbDown';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport UpvoteIcon from '@material-ui/icons/ThumbUp';\n\nconst Votes = ({\n  upvote, downvote, favorite, ...props\n}) => (\n  <div {...props}>\n    {favorite && (\n      <FavoriteIcon className=\"UserRow-voteIcon UserRow-voteIcon--favorite\" />\n    )}\n    {upvote && (\n      <UpvoteIcon className=\"UserRow-voteIcon UserRow-voteIcon--upvote\" />\n    )}\n    {downvote && (\n      <DownvoteIcon className=\"UserRow-voteIcon UserRow-voteIcon--downvote\" />\n    )}\n  </div>\n);\n\nVotes.propTypes = {\n  upvote: PropTypes.bool,\n  downvote: PropTypes.bool,\n  favorite: PropTypes.bool,\n};\n\nexport default Votes;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withProps from 'recompose/withProps';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport userCardable from '../../utils/userCardable';\nimport Avatar from '../Avatar';\nimport Username from '../Username';\nimport Votes from './Votes';\n\nconst enhance = compose(\n  userCardable(),\n  withProps(props => ({\n    onOpenCard(event) {\n      event.preventDefault();\n      props.openUserCard(props.user);\n    },\n  })),\n);\n\nconst RoomUserRow = ({\n  className,\n  user,\n  onOpenCard,\n}) => (\n  <ListItem\n    button\n    className={cx('UserRow', 'UserRow--cardable', className)}\n    onClick={onOpenCard}\n  >\n    <ListItemAvatar>\n      <Avatar\n        className=\"UserRow-avatar\"\n        user={user}\n      />\n    </ListItemAvatar>\n    <ListItemText>\n      <Username className=\"UserRow-username\" user={user} />\n    </ListItemText>\n    <Votes className=\"UserRow-votes\" {...user.votes} />\n  </ListItem>\n);\n\nRoomUserRow.propTypes = {\n  className: PropTypes.string,\n  user: PropTypes.object.isRequired,\n  onOpenCard: PropTypes.func.isRequired,\n};\n\nexport default enhance(RoomUserRow);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { translate } from 'react-i18next';\n\nconst GuestsRow = ({ t, className, guests }) => (\n  <ListItem className={cx('UserRow', 'UserRow--guests', className)}>\n    <ListItemText\n      classes={{ primary: 'UserRow-guestsText' }}\n      primary={t('users.guests', { count: guests })}\n    />\n  </ListItem>\n);\n\nGuestsRow.propTypes = {\n  t: PropTypes.func.isRequired,\n  className: PropTypes.string,\n  guests: PropTypes.number.isRequired,\n};\n\nexport default translate()(GuestsRow);\n","import cx from 'classnames';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport MuiList from '@material-ui/core/List';\nimport List from 'react-list';\nimport RoomUserRow from './Row';\nimport GuestsRow from './GuestsRow';\n\nconst RoomUserList = ({ className, users, guests }) => {\n  const showGuests = guests > 0;\n  // The \"and X guests\" row is implemented somewhat hackily as an extra user\n  // row. To render properly at the end of the list, it needs to be rendered as\n  // an element of the list--so we tell react-list that we have an extra row\n  // when th guests row is shown.\n  const length = users.length + (showGuests ? 1 : 0);\n  return (\n    <div className={cx('UserList', 'UserList--online', className)}>\n      <List\n        itemsRenderer={(children, ref) => (\n          <MuiList\n            disablePadding\n            ref={(list) => {\n              ref(list && ReactDOM.findDOMNode(list)); // eslint-disable-line react/no-find-dom-node\n            }}\n          >\n            {children}\n          </MuiList>\n        )}\n        itemRenderer={(index, key) => {\n          const rowClass = cx(\n            'UserList-row',\n            (index % 2 === 0) && 'UserList-row--alternate',\n          );\n          // The very last row is the guests row\n          if (index === users.length) {\n            return (\n              <GuestsRow\n                key={key}\n                className={rowClass}\n                guests={guests}\n              />\n            );\n          }\n          return (\n            <RoomUserRow\n              key={key}\n              className={rowClass}\n              user={users[index]}\n            />\n          );\n        }}\n        length={length}\n        type=\"uniform\"\n      />\n    </div>\n  );\n};\n\nRoomUserList.propTypes = {\n  className: PropTypes.string,\n  users: PropTypes.arrayOf(PropTypes.object).isRequired,\n  guests: PropTypes.number.isRequired,\n};\n\nexport default RoomUserList;\n","import { connect } from 'react-redux';\nimport { createSelector, createStructuredSelector } from 'reselect';\n\nimport {\n  userListSelector,\n  guestCountSelector,\n} from '../selectors/userSelectors';\nimport { currentVotesSelector } from '../selectors/voteSelectors';\nimport RoomUserList from '../components/RoomUserList';\n\nconst userListWithVotesSelector = createSelector(\n  userListSelector,\n  currentVotesSelector,\n  (users, votes) => users.map(user => ({\n    ...user,\n    votes: {\n      upvote: votes.upvotes.indexOf(user._id) !== -1,\n      downvote: votes.downvotes.indexOf(user._id) !== -1,\n      favorite: votes.favorites.indexOf(user._id) !== -1,\n    },\n  })),\n);\n\nconst mapStateToProps = createStructuredSelector({\n  users: userListWithVotesSelector,\n  guests: guestCountSelector,\n});\n\nexport default connect(mapStateToProps)(RoomUserList);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MuiAvatar from '@material-ui/core/Avatar';\n\nconst Position = ({ position }) => (\n  <MuiAvatar className=\"WaitlistRow-position\">\n    {position}\n  </MuiAvatar>\n);\n\nPosition.propTypes = {\n  position: PropTypes.number.isRequired,\n};\n\nexport default Position;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withProps from 'recompose/withProps';\nimport { DragSource } from 'react-dnd';\nimport DragIcon from '@material-ui/icons/DragHandle';\nimport RemoveIcon from '@material-ui/icons/Close';\nimport { WAITLIST_USER } from '../../constants/DDItemTypes';\nimport userCardable from '../../utils/userCardable';\nimport Avatar from '../Avatar';\nimport Username from '../Username';\nimport Position from './Position';\n\nconst userSource = {\n  beginDrag(props) {\n    return { user: props.user };\n  },\n  endDrag(props, monitor) {\n    const result = monitor.getDropResult();\n    const item = monitor.getItem();\n    if (item.user && result) {\n      props.onMoveUser(result.position);\n    }\n  },\n};\n\nconst collect = (connect, monitor) => ({\n  isDragging: monitor.isDragging(),\n  connectDragSource: connect.dragSource(),\n  connectDragPreview: connect.dragPreview(),\n});\n\n/**\n * A Draggable waitlist user row with moderation tools.\n */\nconst ModRowBase = ({\n  className,\n  position,\n  user,\n  isDragging,\n  connectDragPreview,\n  connectDragSource,\n  onOpenCard,\n  onRemoveUser,\n}) => connectDragPreview((\n  <div\n    className={cx(\n      'UserRow',\n      'WaitlistRow',\n      'WaitlistRow--moderate',\n      isDragging && 'is-dragging',\n      className,\n    )}\n  >\n    <Position position={position + 1} />\n    <button\n      className=\"WaitlistRow-card\"\n      onClick={onOpenCard}\n    >\n      <Avatar\n        className=\"UserRow-avatar\"\n        user={user}\n      />\n      <Username className=\"UserRow-username\" user={user} />\n    </button>\n    <div className=\"WaitlistRow-tools\">\n      {connectDragSource((\n        <div className=\"WaitlistRow-tool WaitlistRow-handle\">\n          <DragIcon />\n        </div>\n      ))}\n      <button\n        className=\"WaitlistRow-tool WaitlistRow-remove\"\n        onClick={onRemoveUser}\n      >\n        <RemoveIcon />\n      </button>\n    </div>\n  </div>\n));\n\nModRowBase.propTypes = {\n  className: PropTypes.string,\n  position: PropTypes.number.isRequired,\n  user: PropTypes.object.isRequired,\n  connectDragPreview: PropTypes.func.isRequired,\n  connectDragSource: PropTypes.func.isRequired,\n  onMoveUser: PropTypes.func.isRequired,\n  onRemoveUser: PropTypes.func.isRequired,\n};\n\nexport default compose(\n  DragSource(WAITLIST_USER, userSource, collect),\n  userCardable(),\n  withProps(props => ({\n    onOpenCard(event) {\n      event.preventDefault();\n      props.openUserCard(props.user);\n    },\n  })),\n)(ModRowBase);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { DropTarget } from 'react-dnd';\nimport { WAITLIST_USER } from '../../constants/DDItemTypes';\nimport isDraggingNearTopOfRow from '../../utils/isDraggingNearTopOfRow';\n\nimport ModRowBase from './ModRowBase';\n\nconst userTarget = {\n  hover(props, monitor, component) {\n    component.setState({\n      insertAbove: isDraggingNearTopOfRow(monitor, component),\n    });\n  },\n  drop(props, monitor, component) {\n    const insertAfter = !isDraggingNearTopOfRow(monitor, component);\n    const { position } = component.props;\n    return { position: insertAfter ? position + 1 : position };\n  },\n};\n\nconst collect = (connect, monitor) => ({\n  connectDropTarget: connect.dropTarget(),\n  isOver: monitor.isOver(),\n});\n\n/**\n * A Waitlist user row with drag/drop reordering support. This draws a drop\n * indicator around the main row.\n */\nclass ModRow extends React.Component {\n  static propTypes = {\n    connectDropTarget: PropTypes.func.isRequired,\n    isOver: PropTypes.bool.isRequired,\n  };\n\n  state = {\n    insertAbove: false,\n  };\n\n  render() {\n    const {\n      connectDropTarget,\n      isOver,\n      ...props\n    } = this.props;\n    const { insertAbove } = this.state;\n\n    const dropIndicator = <div className=\"WaitlistRow-drop-indicator\" />;\n\n    return connectDropTarget((\n      <div>\n        {isOver && insertAbove && dropIndicator}\n        <ModRowBase {...props} />\n        {isOver && !insertAbove && dropIndicator}\n      </div>\n    ));\n  }\n}\n\nexport default DropTarget(WAITLIST_USER, userTarget, collect)(ModRow);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withProps from 'recompose/withProps';\nimport userCardable from '../../utils/userCardable';\nimport Avatar from '../Avatar';\nimport Username from '../Username';\nimport Position from './Position';\n\nconst SimpleRow = ({\n  className,\n  position,\n  user,\n  onOpenCard,\n}) => (\n  <button\n    className={cx(\n      'UserRow',\n      'WaitlistRow',\n      'UserRow--cardable',\n      className,\n    )}\n    onClick={onOpenCard}\n  >\n    <div>\n      <Position position={position + 1} />\n      <Avatar\n        className=\"UserRow-avatar\"\n        user={user}\n      />\n      <Username\n        className=\"UserRow-username\"\n        user={user}\n      />\n    </div>\n  </button>\n);\n\nSimpleRow.propTypes = {\n  className: PropTypes.string,\n  position: PropTypes.number.isRequired,\n  user: PropTypes.object.isRequired,\n  onOpenCard: PropTypes.func.isRequired,\n};\n\nexport default compose(\n  userCardable(),\n  withProps(props => ({\n    onOpenCard(event) {\n      event.preventDefault();\n      props.openUserCard(props.user);\n    },\n  })),\n)(SimpleRow);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport List from 'react-list';\nimport ModRow from './ModRow';\nimport SimpleRow from './SimpleRow';\n\nconst WaitList = ({\n  className,\n  users,\n  onMoveUser,\n  onRemoveUser,\n  canMoveUsers,\n}) => {\n  const Row = canMoveUsers ? ModRow : SimpleRow;\n  return (\n    <div\n      className={cx(\n        'UserList',\n        'UserList--queue',\n        'WaitList',\n        className,\n      )}\n    >\n      <List\n        itemRenderer={(index, key) => (\n          <Row\n            key={key}\n            className={cx('UserList-row', index % 2 === 0 && 'UserList-row--alternate')}\n            position={index}\n            user={users[index]}\n            onMoveUser={position => onMoveUser(users[index], position)}\n            onRemoveUser={() => onRemoveUser(users[index])}\n          />\n        )}\n        length={users.length}\n        type=\"uniform\"\n      />\n    </div>\n  );\n};\n\nWaitList.propTypes = {\n  className: PropTypes.string,\n  users: PropTypes.arrayOf(PropTypes.object).isRequired,\n  canMoveUsers: PropTypes.bool.isRequired,\n  onMoveUser: PropTypes.func.isRequired,\n  onRemoveUser: PropTypes.func.isRequired,\n};\n\nexport default WaitList;\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport {\n  moveWaitlistUser,\n  removeWaitlistUser,\n} from '../actions/ModerationActionCreators';\nimport { waitlistUsersSelector } from '../selectors/waitlistSelectors';\nimport { createRoleCheckSelector } from '../selectors/userSelectors';\nimport WaitList from '../components/WaitList';\n\nconst mapStateToProps = createStructuredSelector({\n  users: waitlistUsersSelector,\n  canMoveUsers: createRoleCheckSelector('waitlist.move'),\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onMoveUser: moveWaitlistUser,\n  onRemoveUser: removeWaitlistUser,\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WaitList);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst PanelContainer = ({ selected, children }) => (\n  <div className={cx('SidePanel-panel', selected && 'is-selected')}>\n    {children}\n  </div>\n);\n\nPanelContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n  selected: PropTypes.bool.isRequired,\n};\n\nexport default PanelContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport withState from 'recompose/withState';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Chat from '../Chat';\nimport RoomUserList from '../../containers/RoomUserList';\nimport WaitList from '../../containers/WaitList';\nimport PanelContainer from './PanelContainer';\n\nconst enhance = compose(\n  translate(),\n  withState('selected', 'setTab', 0),\n  pure,\n);\n\nconst subHeaderStyle = {\n  fontSize: '125%',\n};\n\nconst tabClasses = {\n  root: 'SidePanel-tab',\n  label: 'SidePanel-tabLabel',\n};\n\nconst getUsersLabel = (t, listenerCount) => (\n  <React.Fragment>\n    {t('users.title')}\n    <span key=\"sub\" style={subHeaderStyle}>\n      {listenerCount}\n    </span>\n  </React.Fragment>\n);\n\nconst getWaitlistLabel = (t, size, position) => {\n  if (size > 0) {\n    const posText = position !== -1\n      ? `${position + 1} / ${size}`\n      : size;\n\n    return (\n      <React.Fragment>\n        {t('waitlist.title')}\n        <span key=\"sub\" style={subHeaderStyle}>{posText}</span>\n      </React.Fragment>\n    );\n  }\n  return t('waitlist.title');\n};\n\nconst SidePanels = ({\n  t,\n  selected,\n  listenerCount,\n  waitlistSize,\n  waitlistPosition,\n  setTab,\n}) => (\n  <div>\n    <Tabs\n      value={selected}\n      onChange={(event, value) => setTab(value)}\n      fullWidth\n      classes={{\n        root: 'SidePanel-tabs',\n        indicator: 'SidePanel-indicator',\n      }}\n    >\n      <Tab\n        classes={tabClasses}\n        label={t('chat.title')}\n      />\n      <Tab\n        classes={tabClasses}\n        label={getUsersLabel(t, listenerCount)}\n      />\n      <Tab\n        classes={tabClasses}\n        label={getWaitlistLabel(t, waitlistSize, waitlistPosition)}\n      />\n    </Tabs>\n    <div>\n      <PanelContainer selected={selected === 0}>\n        <Chat />\n      </PanelContainer>\n      <PanelContainer selected={selected === 1}>\n        <RoomUserList />\n      </PanelContainer>\n      <PanelContainer selected={selected === 2}>\n        <WaitList />\n      </PanelContainer>\n    </div>\n  </div>\n);\n\nSidePanels.propTypes = {\n  t: PropTypes.func.isRequired,\n  listenerCount: PropTypes.number.isRequired,\n  waitlistSize: PropTypes.number.isRequired,\n  waitlistPosition: PropTypes.number.isRequired,\n  selected: PropTypes.number.isRequired,\n  setTab: PropTypes.func.isRequired,\n};\n\nexport default enhance(SidePanels);\n","import { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport { selectPanel } from '../actions/PanelSelectActionCreators';\nimport { listenerCountSelector } from '../selectors/userSelectors';\nimport {\n  sizeSelector as waitlistSizeSelector,\n  positionSelector as waitlistPositionSelector,\n} from '../selectors/waitlistSelectors';\n\nimport SidePanels from '../components/SidePanels';\n\nconst mapStateToProps = createStructuredSelector({\n  selected: state => state.selectedPanel,\n  waitlistPosition: waitlistPositionSelector,\n  waitlistSize: waitlistSizeSelector,\n  listenerCount: listenerCountSelector,\n});\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    onChange: (panelName) => {\n      // Ensure that we're actually switching panels--otherwise change events\n      // from eg. the chat box bubble up and trigger a panel rerender on every\n      // keypress.\n      if (typeof panelName === 'string') {\n        dispatch(selectPanel(panelName));\n      }\n    },\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidePanels);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport uniqueId from 'lodash/uniqueId';\nimport formatDuration from 'format-duration';\nimport ArtistIcon from '@material-ui/icons/Headset';\nimport TitleIcon from '@material-ui/icons/MusicNote';\nimport StartIcon from '@material-ui/icons/PlayArrow';\nimport EndIcon from '@material-ui/icons/Stop';\nimport SwapArtistTitleIcon from '@material-ui/icons/SwapHoriz';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport Button from '../../Form/Button';\nimport TextField from '../../Form/TextField';\n\n// naive HH:mm:ss  seconds\nconst parseDuration = str => str.split(':')\n  .map(part => parseInt(part.trim(), 10))\n  .reduce((duration, part) => (duration * 60) + part, 0);\n\nconst enhance = translate();\n\nclass EditMediaDialog extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    open: PropTypes.bool,\n    media: PropTypes.object,\n\n    bodyClassName: PropTypes.string,\n    contentClassName: PropTypes.string,\n    titleClassName: PropTypes.string,\n\n    onEditedMedia: PropTypes.func.isRequired,\n    onCloseDialog: PropTypes.func.isRequired,\n  };\n\n  state = {\n    errors: null,\n    artist: this.props.media.artist,\n    title: this.props.media.title,\n    start: formatDuration(this.props.media.start * 1000),\n    end: formatDuration(this.props.media.end * 1000),\n  };\n\n  title = uniqueId('editmedia');\n  labelStart = uniqueId('editmedia');\n  labelEnd = uniqueId('editmedia');\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    const { media, onEditedMedia, onCloseDialog } = this.props;\n    const {\n      artist, title, start, end,\n    } = this.state;\n\n    const startSeconds = parseDuration(start);\n    const endSeconds = parseDuration(end);\n\n    const errors = [];\n    if (Number.isNaN(startSeconds) || startSeconds < 0) {\n      errors.push('invalidStartTime');\n    }\n    if (Number.isNaN(endSeconds) || endSeconds < 0) {\n      errors.push('invalidEndTime');\n    } else if (endSeconds < startSeconds) {\n      errors.push('endTimeBeforeStart');\n    } else if (endSeconds > media.duration) {\n      errors.push('endTimeAfterSongEnd');\n    }\n\n    if (errors.length > 0) {\n      this.setState({ errors });\n      return;\n    }\n\n    onEditedMedia({\n      artist,\n      title,\n      start: startSeconds,\n      end: endSeconds,\n    });\n    onCloseDialog();\n  };\n\n  handleChangeArtist = (event) => {\n    this.setState({ artist: event.target.value });\n  };\n\n  handleChangeTitle = (event) => {\n    this.setState({ title: event.target.value });\n  };\n\n  handleChangeStart = (event) => {\n    this.setState({ start: event.target.value });\n  };\n\n  handleChangeEnd = (event) => {\n    this.setState({ end: event.target.value });\n  };\n\n  handleSwapArtistTitle = () => {\n    this.setState({\n      artist: this.state.title,\n      title: this.state.artist,\n    });\n  };\n\n  render() {\n    const {\n      t,\n      open,\n      media,\n      onCloseDialog,\n\n      bodyClassName,\n      contentClassName,\n      titleClassName,\n    } = this.props;\n    const {\n      errors,\n      artist,\n      title,\n      start,\n      end,\n    } = this.state;\n    const baseTabIndex = 1000;\n    let content = null;\n    if (open) {\n      const artistInput = (\n        <TextField\n          className=\"EditMediaDialogGroup-field\"\n          placeholder={t(['dialogs.editMedia.artistLabel', 'media.artist'])}\n          value={artist}\n          onChange={this.handleChangeArtist}\n          icon={<ArtistIcon nativeColor=\"#9f9d9e\" />}\n          tabIndex={baseTabIndex}\n          autoFocus\n        />\n      );\n      const artistTitleLabel = (\n        <div className=\"EditMediaDialogGroup-label\">\n          <IconButton onClick={this.handleSwapArtistTitle}>\n            <SwapArtistTitleIcon nativeColor=\"#9f9d9e\" />\n          </IconButton>\n        </div>\n      );\n      const titleInput = (\n        <TextField\n          className=\"EditMediaDialogGroup-field\"\n          placeholder={t(['dialogs.editMedia.titleLabel', 'media.title'])}\n          value={title}\n          onChange={this.handleChangeTitle}\n          icon={<TitleIcon nativeColor=\"#9f9d9e\" />}\n          tabIndex={baseTabIndex + 1}\n        />\n      );\n\n      const fromLabel = (\n        // eslint-disable-next-line jsx-a11y/label-has-for\n        <label htmlFor={this.labelStart} className=\"EditMediaDialogGroup-label\">\n          {t('dialogs.editMedia.playFromLabel')}\n        </label>\n      );\n      const fromInput = (\n        <TextField\n          id={this.labelStart}\n          className=\"EditMediaDialogGroup-field\"\n          placeholder=\"0:00\"\n          value={start}\n          onChange={this.handleChangeStart}\n          icon={<StartIcon nativeColor=\"#9f9d9e\" />}\n          tabIndex={baseTabIndex + 2}\n        />\n      );\n      const toLabel = (\n        // eslint-disable-next-line jsx-a11y/label-has-for\n        <label htmlFor={this.labelEnd} className=\"EditMediaDialogGroup-label\">\n          {t('dialogs.editMedia.playToLabel')}\n        </label>\n      );\n      const toInput = (\n        <TextField\n          id={this.labelEnd}\n          className=\"EditMediaDialogGroup-field\"\n          placeholder={formatDuration(media.duration)}\n          value={end}\n          onChange={this.handleChangeEnd}\n          icon={<EndIcon nativeColor=\"#9f9d9e\" />}\n          tabIndex={baseTabIndex + 3}\n        />\n      );\n\n      content = (\n        <Form onSubmit={this.handleSubmit}>\n          {errors && errors.length > 0 && (\n            <FormGroup>\n              {errors.map(error => <div>{t(`dialogs.editMedia.errors.${error}`)}</div>)}\n            </FormGroup>\n          )}\n\n          <div className=\"EditMediaDialogForm\">\n            <div className=\"EditMediaDialogForm-column\">\n              <FormGroup className=\"EditMediaDialogGroup\">\n                {artistInput}\n              </FormGroup>\n              <FormGroup className=\"EditMediaDialogGroup\">\n                {fromLabel}\n                {fromInput}\n              </FormGroup>\n            </div>\n            <div className=\"EditMediaDialogForm-separator\">\n              <FormGroup className=\"EditMediaDialogGroup\">\n                {artistTitleLabel}\n              </FormGroup>\n              <FormGroup className=\"EditMediaDialogGroup\">\n                {toLabel}\n              </FormGroup>\n            </div>\n            <div className=\"EditMediaDialogForm-column\">\n              <FormGroup className=\"EditMediaDialogGroup\">\n                {titleInput}\n              </FormGroup>\n              <FormGroup className=\"EditMediaDialogGroup\">\n                {toInput}\n              </FormGroup>\n            </div>\n          </div>\n\n          <FormGroup className=\"FormGroup--noSpacing\">\n            <Button className=\"EditMediaDialog-submit\">\n              {t('dialogs.editMedia.save')}\n            </Button>\n          </FormGroup>\n        </Form>\n      );\n    }\n\n    return (\n      <Dialog\n        classes={{\n          paper: cx('Dialog', 'EditMediaDialog', contentClassName),\n        }}\n        open={open}\n        onClose={onCloseDialog}\n        aria-labelledby={this.title}\n      >\n        <DialogTitle id={this.title} className={cx('Dialog-title', titleClassName)}>\n          {t('dialogs.editMedia.title')}\n        </DialogTitle>\n        <DialogContent className={cx('Dialog-body', bodyClassName)}>\n          {content}\n        </DialogContent>\n      </Dialog>\n    );\n  }\n}\n\nexport default enhance(EditMediaDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { updateMedia } from '../actions/PlaylistActionCreators';\nimport { closeEditMediaDialog } from '../actions/DialogActionCreators';\nimport { editMediaDialogSelector } from '../selectors/dialogSelectors';\nimport EditMediaDialog from '../components/Dialogs/EditMediaDialog';\nimport DialogCloseAnimation from '../components/DialogCloseAnimation';\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onUpdateMedia: updateMedia,\n  onCloseDialog: closeEditMediaDialog,\n}, dispatch);\n\nconst DIALOG_ANIMATION_DURATION = 450; // ms\n\nconst enhance = connect(editMediaDialogSelector, mapDispatchToProps);\n\nconst EditMediaDialogContainer = ({\n  onUpdateMedia,\n  playlistID,\n  media,\n  ...props\n}) => (\n  <DialogCloseAnimation delay={DIALOG_ANIMATION_DURATION}>\n    {media && (\n      <EditMediaDialog\n        {...props}\n        media={media}\n        onEditedMedia={update => onUpdateMedia(playlistID, media._id, update)}\n      />\n    )}\n  </DialogCloseAnimation>\n);\n\nEditMediaDialogContainer.propTypes = {\n  playlistID: PropTypes.string,\n  media: PropTypes.object,\n  onUpdateMedia: PropTypes.func.isRequired,\n};\n\nexport default enhance(EditMediaDialogContainer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { translate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport GoogleButton from 'react-google-button';\nimport { loginWithGoogle } from '../../../actions/LoginActionCreators';\n\nconst enhance = compose(\n  connect(null, {\n    onGoogleClick: loginWithGoogle,\n  }),\n  translate(),\n);\n\nconst SocialLogin = ({ t, onGoogleClick }) => (\n  <GoogleButton\n    style={{ width: '100%' }}\n    label={t('login.social.loginWithGoogle')}\n    onClick={onGoogleClick}\n  />\n);\n\nSocialLogin.propTypes = {\n  t: PropTypes.func.isRequired,\n  onGoogleClick: PropTypes.func.isRequired,\n};\n\nexport default enhance(SocialLogin);\n","import React from 'react';\n\nconst LoginMethodSeparator = () => (\n  <p className=\"LoginMethodSeparator\">\n    <span className=\"LoginMethodSeparator-line\" />\n    <span className=\"LoginMethodSeparator-label\">or</span>\n    <span className=\"LoginMethodSeparator-line\" />\n  </p>\n);\n\nexport default LoginMethodSeparator;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport EmailIcon from '@material-ui/icons/Email';\nimport PasswordIcon from '@material-ui/icons/Lock';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport TextField from '../../Form/TextField';\nimport Button from '../../Form/Button';\nimport SocialLogin from './SocialLogin';\nimport Separator from './Separator';\n\nconst enhance = translate();\n\nclass LoginForm extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    error: PropTypes.object,\n    supportsSocialAuth: PropTypes.bool,\n    onLogin: PropTypes.func,\n    onOpenResetPasswordDialog: PropTypes.func,\n  };\n\n  state = { busy: false };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ busy: true });\n    this.props.onLogin({\n      email: this.email.value,\n      password: this.password.value,\n    }).finally(() => {\n      this.setState({ busy: false });\n    });\n  };\n\n  handleResetPassword = (event) => {\n    event.preventDefault();\n    this.props.onOpenResetPasswordDialog();\n  };\n\n  refEmail = (email) => {\n    this.email = email;\n  };\n\n  refPassword = (password) => {\n    this.password = password;\n  };\n\n  render() {\n    const { t, error, supportsSocialAuth } = this.props;\n    const { busy } = this.state;\n\n    return (\n      <Form className=\"LoginForm\" onSubmit={this.handleSubmit}>\n        {error && <FormGroup>{error.message}</FormGroup>}\n        {supportsSocialAuth && (\n          <React.Fragment>\n            <SocialLogin />\n            <Separator />\n          </React.Fragment>\n        )}\n        <FormGroup>\n          <TextField\n            ref={this.refEmail}\n            className=\"LoginForm-field\"\n            type=\"email\"\n            autocomplete=\"email\"\n            placeholder={t('login.email')}\n            icon={<EmailIcon nativeColor=\"#9f9d9e\" />}\n            autoFocus\n          />\n        </FormGroup>\n\n        <FormGroup>\n          <TextField\n            ref={this.refPassword}\n            className=\"LoginForm-field\"\n            type=\"password\"\n            autocomplete=\"current-password\"\n            placeholder={t('login.password')}\n            icon={<PasswordIcon nativeColor=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n\n        <FormGroup>\n          <Button\n            className=\"LoginForm-submit\"\n            disabled={busy}\n          >\n            {busy ? (\n              <div className=\"Button-loading\">\n                <CircularProgress size=\"100%\" />\n              </div>\n            ) : t('login.login')}\n          </Button>\n        </FormGroup>\n\n        <FormGroup className=\"LoginForm-forgot\">\n          <button onClick={this.handleResetPassword} className=\"LoginForm-forgotLink\">\n            Forgot Password?\n          </button>\n        </FormGroup>\n      </Form>\n    );\n  }\n}\n\nexport default enhance(LoginForm);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class ReCaptcha extends React.Component {\n  static propTypes = {\n    grecaptcha: PropTypes.object.isRequired,\n    sitekey: PropTypes.string.isRequired,\n    theme: PropTypes.string,\n    onResponse: PropTypes.func.isRequired,\n  };\n\n  static defaultProps = {\n    theme: 'light',\n  };\n\n  componentDidMount() {\n    this.props.grecaptcha.render(this.container, {\n      sitekey: this.props.sitekey,\n      callback: this.handleResponse,\n      theme: this.props.theme,\n    });\n  }\n\n  handleResponse = (res) => {\n    if (this.props.onResponse) {\n      this.props.onResponse(res);\n    }\n  };\n\n  refContainer = (container) => {\n    this.container = container;\n  };\n\n  render() {\n    return <div ref={this.refContainer} />;\n  }\n}\n","import React from 'react';\nimport loadScript from 'load-script2';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport InternalCaptcha from './ReCaptcha';\n\nconst GRECAPTCHA_API = 'https://www.google.com/recaptcha/api.js';\nconst onloadCallbackName = 'grecaptchaOnload__$';\nconst onloadCallbacks = [];\n\nfunction loadReCaptcha(cb) {\n  loadScript(`${GRECAPTCHA_API}?onload=${onloadCallbackName}&render=explicit`);\n  onloadCallbacks.push(cb);\n}\n\nfunction onload() {\n  onloadCallbacks.forEach(fn => fn(window.grecaptcha));\n}\n\nexport default class ReCaptcha extends React.Component {\n  state = {\n    grecaptcha: window.grecaptcha,\n  };\n\n  componentDidMount() {\n    if (!this.state.grecaptcha) {\n      if (typeof window[onloadCallbackName] !== 'function') {\n        window[onloadCallbackName] = onload;\n      }\n\n      loadReCaptcha((grecaptcha) => {\n        this.setState({ grecaptcha });\n      });\n    }\n  }\n\n  render() {\n    if (!this.state.grecaptcha) {\n      return <CircularProgress className=\"ReCaptcha-spinner\" />;\n    }\n    return (\n      <InternalCaptcha\n        {...this.props}\n        grecaptcha={this.state.grecaptcha}\n      />\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate, Interpolate } from 'react-i18next';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport EmailIcon from '@material-ui/icons/Email';\nimport PasswordIcon from '@material-ui/icons/Lock';\nimport UserIcon from '@material-ui/icons/Person';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport TextField from '../../Form/TextField';\nimport Button from '../../Form/Button';\nimport ReCaptcha from '../../ReCaptcha';\nimport SocialLogin from './SocialLogin';\nimport Separator from './Separator';\n\nconst enhance = translate();\n\nclass RegisterForm extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    useReCaptcha: PropTypes.bool,\n    reCaptchaSiteKey: PropTypes.string,\n    supportsSocialAuth: PropTypes.bool,\n    error: PropTypes.object,\n\n    onRegister: PropTypes.func,\n  };\n\n  state = {\n    busy: false,\n    agreed: false,\n    captchaResponse: null,\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ busy: true });\n    this.props.onRegister({\n      username: this.username.value,\n      email: this.email.value,\n      password: this.password.value,\n      grecaptcha: this.state.captchaResponse,\n    }).finally(() => {\n      this.setState({ busy: false });\n    });\n  };\n\n  handleCaptchaResponse = (response) => {\n    this.setState({\n      captchaResponse: response,\n    });\n  };\n\n  handleTosCheckbox = (event, checked) => {\n    this.setState({\n      agreed: checked,\n    });\n  };\n\n  refUsername = (username) => {\n    this.username = username;\n  };\n\n  refEmail = (email) => {\n    this.email = email;\n  };\n\n  refPassword = (password) => {\n    this.password = password;\n  };\n\n  renderCaptcha() {\n    if (!this.props.useReCaptcha) {\n      return null;\n    }\n    return (\n      <FormGroup>\n        <ReCaptcha\n          sitekey={this.props.reCaptchaSiteKey}\n          onResponse={this.handleCaptchaResponse}\n          theme=\"dark\"\n        />\n      </FormGroup>\n    );\n  }\n\n  render() {\n    const {\n      t, error, supportsSocialAuth, useReCaptcha,\n    } = this.props;\n    const { agreed, busy, captchaResponse } = this.state;\n    const captchaOk = !useReCaptcha || !!captchaResponse;\n\n    return (\n      <Form className=\"RegisterForm\" onSubmit={this.handleSubmit}>\n        {error && <FormGroup>{error.message}</FormGroup>}\n        {supportsSocialAuth && (\n          <React.Fragment>\n            <SocialLogin />\n            <Separator />\n          </React.Fragment>\n        )}\n        <FormGroup>\n          <TextField\n            ref={this.refUsername}\n            className=\"RegisterForm-field\"\n            autocomplete=\"nickname\"\n            placeholder={t('login.username')}\n            icon={<UserIcon nativeColor=\"#9f9d9e\" />}\n            autoFocus\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refEmail}\n            className=\"RegisterForm-field\"\n            type=\"email\"\n            autocomplete=\"email\"\n            placeholder={t('login.email')}\n            icon={<EmailIcon nativeColor=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refPassword}\n            className=\"RegisterForm-field\"\n            type=\"password\"\n            autocomplete=\"new-password\"\n            placeholder={t('login.password')}\n            icon={<PasswordIcon nativeColor=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n\n        {this.renderCaptcha()}\n\n        <FormGroup>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={agreed}\n                onChange={this.handleTosCheckbox}\n              />\n            }\n            label={\n              <Interpolate\n                i18nKey=\"login.agree\"\n                privacyPolicy={\n                  <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"/privacy.html\">\n                    {t('login.privacyPolicy')}\n                  </a>\n                }\n              />\n            }\n          />\n        </FormGroup>\n\n        <FormGroup>\n          <Button\n            className=\"RegisterForm-submit\"\n            disabled={busy || !agreed || !captchaOk}\n          >\n            {busy\n              ? <div className=\"Button-loading\"><CircularProgress size=\"100%\" /></div>\n              : t('login.register')\n            }\n          </Button>\n        </FormGroup>\n      </Form>\n    );\n  }\n}\n\nexport default enhance(RegisterForm);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport EmailIcon from '@material-ui/icons/Email';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport TextField from '../../Form/TextField';\nimport Button from '../../Form/Button';\n\nconst enhance = translate();\n\nclass ResetPasswordForm extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    error: PropTypes.object,\n    onResetPassword: PropTypes.func.isRequired,\n    onCloseDialog: PropTypes.func.isRequired,\n  };\n\n  state = {\n    busy: false,\n    done: false,\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ busy: true });\n    Promise.resolve(this.props.onResetPassword({\n      email: this.email.value,\n    })).then(() => {\n      this.setState({\n        busy: false,\n        done: true,\n      });\n    }, () => {\n      this.setState({ busy: false });\n    });\n  };\n\n  refEmail = (email) => {\n    this.email = email;\n  };\n\n  render() {\n    const { t, error, onCloseDialog } = this.props;\n    const { busy, done } = this.state;\n\n    if (done) {\n      return (\n        <div>\n          <p>{t('login.passwordResetSent')}</p>\n          <p>\n            <Button className=\"ResetPasswordForm-submit\" onClick={onCloseDialog}>\n              {t('close')}\n            </Button>\n          </p>\n        </div>\n      );\n    }\n\n    return (\n      <Form className=\"ResetPasswordForm\" onSubmit={this.handleSubmit}>\n        {error && <FormGroup>{error.message}</FormGroup>}\n        <FormGroup>\n          <TextField\n            ref={this.refEmail}\n            className=\"ResetPasswordForm-field\"\n            type=\"email\"\n            autocomplete=\"email\"\n            placeholder={t('login.email')}\n            icon={<EmailIcon nativeColor=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n\n        <FormGroup>\n          <Button\n            className=\"ResetPasswordForm-submit\"\n            disabled={busy}\n          >\n            {busy ? (\n              <div className=\"Button-loading\"><CircularProgress size=\"100%\" /></div>\n            ) : t('login.requestPasswordReset')}\n          </Button>\n        </FormGroup>\n      </Form>\n    );\n  }\n}\n\nexport default enhance(ResetPasswordForm);\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport { translate } from 'react-i18next';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport LoginForm from './LoginForm';\nimport RegisterForm from './RegisterForm';\nimport ResetPasswordForm from './ResetPasswordForm';\n\nconst enhance = compose(\n  translate(),\n  withMobileDialog(),\n);\n\nconst LoginDialog = (props) => {\n  const {\n    t,\n    fullScreen,\n    open,\n    show,\n    onCloseDialog,\n  } = props;\n  let form;\n  let title;\n  if (show === 'register') {\n    title = t('login.register');\n    form = <RegisterForm {...props} />;\n  } else if (show === 'reset') {\n    title = 'Reset Password';\n    form = <ResetPasswordForm {...props} />;\n  } else {\n    title = t('login.login');\n    form = <LoginForm {...props} />;\n  }\n  return (\n    <Dialog\n      classes={{\n        paper: cx('Dialog', 'LoginDialog', fullScreen && 'LoginDialog--mobile'),\n      }}\n      open={open}\n      fullScreen={fullScreen}\n      onClose={onCloseDialog}\n      aria-labelledby=\"uw-login-title\"\n    >\n      <DialogTitle className=\"Dialog-title\" id=\"uw-login-title\">\n        {title}\n        {fullScreen && (\n          <IconButton className=\"Dialog-close\" onClick={onCloseDialog}>\n            <CloseIcon />\n          </IconButton>\n        )}\n      </DialogTitle>\n      <DialogContent className=\"Dialog-body\">\n        {form}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nLoginDialog.propTypes = {\n  t: PropTypes.func.isRequired,\n  open: PropTypes.bool,\n  show: PropTypes.string,\n  fullScreen: PropTypes.bool.isRequired,\n  onCloseDialog: PropTypes.func,\n};\n\nexport default enhance(LoginDialog);\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { resetPassword, login, register } from '../actions/LoginActionCreators';\nimport { openResetPasswordDialog, closeLoginDialog } from '../actions/DialogActionCreators';\n\nimport { loginDialogSelector } from '../selectors/dialogSelectors';\nimport LoginDialog from '../components/Dialogs/LoginDialog';\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onOpenResetPasswordDialog: openResetPasswordDialog,\n  onResetPassword: resetPassword,\n  onLogin: login,\n  onRegister: register,\n  onCloseDialog: closeLoginDialog,\n}, dispatch);\n\nexport default connect(loginDialogSelector, mapDispatchToProps)(LoginDialog);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport injectMediaSources from '../../utils/injectMediaSources';\n\nconst PreviewPlayer = ({\n  media,\n  seek = 0,\n  getMediaSource,\n  ...props\n}) => {\n  const { Player } = getMediaSource(media.sourceType);\n  return (\n    <Player\n      enabled\n      active\n      seek={seek}\n      media={media}\n      {...props}\n    />\n  );\n};\n\nPreviewPlayer.propTypes = {\n  media: PropTypes.object.isRequired,\n  seek: PropTypes.number,\n  getMediaSource: PropTypes.func.isRequired,\n};\n\nexport default injectMediaSources()(PreviewPlayer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport PreviewPlayer from '../../Video/Player';\n\nconst TITLE = 'preview-media-title';\n\nfunction getTitle(media) {\n  return `${media.artist}  ${media.title}`;\n}\n\nconst PreviewMediaDialog = ({\n  open,\n  media,\n  volume,\n  onCloseDialog,\n}) => (\n  <Dialog\n    classes={{\n      root: 'AppColumn AppColumn--left',\n      paper: 'Dialog PreviewMediaDialog',\n    }}\n    BackdropProps={{\n      className: 'AppColumn AppColumn--full',\n    }}\n    open={open}\n    onClose={onCloseDialog}\n    disableEnforceFocus\n    maxWidth={false}\n    aria-labelledby={TITLE}\n  >\n    <DialogTitle id={TITLE} className=\"Dialog-title\">\n      {open ? getTitle(media) : 'Preview Media'}\n    </DialogTitle>\n    <DialogContent className=\"Dialog-body PreviewMediaDialog-content\">\n      {open && (\n        <PreviewPlayer\n          mode=\"preview\"\n          media={media}\n          volume={volume}\n        />\n      )}\n    </DialogContent>\n  </Dialog>\n);\n\nPreviewMediaDialog.propTypes = {\n  open: PropTypes.bool,\n  media: PropTypes.object,\n  volume: PropTypes.number,\n\n  onCloseDialog: PropTypes.func.isRequired,\n};\n\nexport default PreviewMediaDialog;\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { closePreviewMediaDialog } from '../actions/DialogActionCreators';\n\nimport { previewMediaDialogSelector as mapStateToProps } from '../selectors/dialogSelectors';\nimport PreviewMediaDialog from '../components/Dialogs/PreviewMediaDialog';\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onCloseDialog: closePreviewMediaDialog,\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PreviewMediaDialog);\n","import React from 'react';\n\nimport EditMediaDialog from '../../containers/EditMediaDialog';\nimport LoginDialog from '../../containers/LoginDialog';\nimport PreviewMediaDialog from '../../containers/PreviewMediaDialog';\n\nconst Dialogs = () => (\n  <div className=\"Dialogs\">\n    <EditMediaDialog />\n    <LoginDialog />\n    <PreviewMediaDialog />\n  </div>\n);\n\nexport default Dialogs;\n","import { createSelector, createStructuredSelector } from 'reselect';\nimport { playlistsSelector } from './playlistSelectors';\n\nconst baseSelector = state => state.addToPlaylistMenu;\nexport const isOpenSelector = createSelector(baseSelector, menu => menu.open);\nexport const positionSelector = createSelector(baseSelector, menu => menu.position);\nconst typeSelector = createSelector(baseSelector, menu => menu.type);\nconst dataSelector = createSelector(baseSelector, menu => menu.data);\n\nexport const isFavoriteSelector = createSelector(typeSelector, type => type === 'favorite');\n\nexport const mediaSelector = createSelector(\n  dataSelector,\n  isOpenSelector,\n  isFavoriteSelector,\n  (data, isOpen, isFavorite) => (isOpen && !isFavorite ? data.media : null),\n);\nexport const historyIDSelector = createSelector(\n  dataSelector,\n  isOpenSelector,\n  isFavoriteSelector,\n  (data, isOpen, isFavorite) => (isOpen && isFavorite ? data.historyID : null),\n);\n\nexport const addToPlaylistMenuSelector = createStructuredSelector({\n  type: typeSelector,\n  open: isOpenSelector,\n  position: positionSelector,\n  playlists: playlistsSelector,\n});\n","import find from 'array-find';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Popover from '@material-ui/core/Popover';\nimport Typography from '@material-ui/core/Typography';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport CreatePlaylistIcon from '@material-ui/icons/Add';\nimport ActiveIcon from '@material-ui/icons/Check';\n\nconst enhance = translate();\n\nclass PlaylistsMenu extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onCreatePlaylist: PropTypes.func.isRequired,\n    playlists: PropTypes.arrayOf(PropTypes.object),\n    position: PropTypes.shape({\n      x: PropTypes.number,\n      y: PropTypes.number,\n    }),\n  };\n\n  handleSelect = (e, playlistID) => {\n    this.props.onClose();\n    this.props.onSelect(find(this.props.playlists, pl => pl._id === playlistID));\n  };\n\n  render() {\n    const {\n      t,\n      playlists,\n      position,\n      onClose,\n      onCreatePlaylist,\n    } = this.props;\n\n    return (\n      <Popover\n        open\n        anchorPosition={{ left: position.x, top: position.y }}\n        anchorReference=\"anchorPosition\"\n        onClose={onClose}\n      >\n        <MenuList>\n          <MenuItem onClick={onCreatePlaylist}>\n            <ListItemText primary={t('playlists.new')} />\n            <ListItemIcon><CreatePlaylistIcon /></ListItemIcon>\n          </MenuItem>\n          {playlists.map(playlist => (\n            <MenuItem\n              className=\"AddToPlaylistMenu-playlist\"\n              key={playlist._id}\n              onClick={event => this.handleSelect(event, playlist._id)}\n            >\n              {!!playlist.active && (\n                <ListItemIcon>\n                  <ActiveIcon />\n                </ListItemIcon>\n              )}\n              <ListItemText disableTypography className=\"AddToPlaylistMenu-playlistName\">\n                <Typography noWrap variant=\"subheading\">{playlist.name}</Typography>\n              </ListItemText>\n              <ListItemText className=\"AddToPlaylistMenu-smallIcon\" primary={String(playlist.size || 0)} />\n            </MenuItem>\n          ))}\n        </MenuList>\n      </Popover>\n    );\n  }\n}\n\nexport default enhance(PlaylistsMenu);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport CreatePlaylistIcon from '@material-ui/icons/Add';\nimport PromptDialog from '../Dialogs/PromptDialog';\nimport PlaylistsMenu from './PlaylistsMenu';\n\nconst enhance = translate();\n\nclass AddToPlaylistMenu extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    onCreatePlaylist: PropTypes.func.isRequired,\n  };\n\n  state = {\n    creating: false,\n  };\n\n  handleOpen = () => {\n    this.setState({ creating: true });\n  };\n\n  handleClose = () => {\n    this.setState({ creating: false });\n  };\n\n  handleSubmit = playlistName =>\n    Promise.resolve(this.props.onCreatePlaylist(playlistName))\n      .then(playlist => this.props.onSelect(playlist))\n      .then(() => this.props.onClose());\n\n  render() {\n    const { t, ...props } = this.props;\n    return (\n      <React.Fragment>\n        {!this.state.creating && (\n          <PlaylistsMenu\n            {...props}\n            onCreatePlaylist={this.handleOpen}\n          />\n        )}\n        {this.state.creating && (\n          <PromptDialog\n            title={t('dialogs.createPlaylist.nameInputTitle')}\n            icon={<CreatePlaylistIcon nativeColor=\"#777\" />}\n            submitLabel={t('dialogs.createPlaylist.action')}\n            onSubmit={this.handleSubmit}\n            onCancel={this.handleClose}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default enhance(AddToPlaylistMenu);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport {\n  createPlaylist,\n  addMedia,\n  closeAddMediaMenu,\n} from '../actions/PlaylistActionCreators';\nimport { favoriteMedia } from '../actions/VoteActionCreators';\n\nimport {\n  isFavoriteSelector,\n  isOpenSelector,\n  positionSelector,\n  mediaSelector,\n  historyIDSelector,\n} from '../selectors/addToPlaylistMenuSelectors';\nimport { playlistsSelector } from '../selectors/playlistSelectors';\nimport AddToPlaylistMenu from '../components/AddToPlaylistMenu';\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onClose: closeAddMediaMenu,\n  onCreatePlaylist: createPlaylist,\n  onAddMedia: addMedia,\n  onFavoriteMedia: favoriteMedia,\n}, dispatch);\n\nconst mapStateToProps = createStructuredSelector({\n  isFavorite: isFavoriteSelector,\n  isOpen: isOpenSelector,\n  position: positionSelector,\n  playlists: playlistsSelector,\n  media: mediaSelector,\n  historyID: historyIDSelector,\n});\n\nconst AddToPlaylistMenuContainer = ({\n  isOpen,\n  position,\n  isFavorite,\n  playlists,\n  media,\n  historyID,\n  onCreatePlaylist,\n  onAddMedia,\n  onFavoriteMedia,\n  onClose,\n}) => {\n  if (!isOpen) {\n    return <span />;\n  }\n\n  const onSelect = playlist => (\n    isFavorite\n      ? onFavoriteMedia(playlist, historyID)\n      : onAddMedia(playlist, media)\n  );\n\n  return (\n    <AddToPlaylistMenu\n      open={isOpen}\n      position={position}\n      playlists={playlists}\n      onClose={onClose}\n      onCreatePlaylist={onCreatePlaylist}\n      onSelect={onSelect}\n    />\n  );\n};\n\nAddToPlaylistMenuContainer.propTypes = {\n  isFavorite: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  position: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n  }),\n  playlists: PropTypes.arrayOf(PropTypes.object),\n\n  media: PropTypes.arrayOf(PropTypes.object),\n  historyID: PropTypes.string,\n\n  onClose: PropTypes.func.isRequired,\n  onCreatePlaylist: PropTypes.func.isRequired,\n  onAddMedia: PropTypes.func.isRequired,\n  onFavoriteMedia: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddToPlaylistMenuContainer);\n","import assign from 'object-assign';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ListIcon from '@material-ui/icons/List';\nimport transformStyle from '../../utils/transformStyle';\n\nconst getItemStyles = offset => (\n  offset ? assign(\n    { display: 'inline-block' },\n    transformStyle(`translate(${offset.x}px, ${offset.y}px)`),\n  ) : { display: 'none' }\n);\n\nconst MediaDragPreview = ({\n  items,\n  currentOffset,\n}) => {\n  if (!items || !items.media) {\n    return null;\n  }\n  return (\n    <div\n      className=\"MediaDragPreview\"\n      style={getItemStyles(currentOffset)}\n    >\n      <ListIcon className=\"MediaDragPreview-icon\" />\n      {items.media.length}\n    </div>\n  );\n};\n\nMediaDragPreview.propTypes = {\n  items: PropTypes.object,\n  currentOffset: PropTypes.shape({\n    x: PropTypes.number.isRequired,\n    y: PropTypes.number.isRequired,\n  }),\n};\n\nexport default MediaDragPreview;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragLayer } from 'react-dnd';\nimport { MEDIA, WAITLIST_USER } from '../constants/DDItemTypes';\nimport MediaDragPreview from '../components/MediaList/MediaDragPreview';\n\nconst enhance = DragLayer(monitor => ({\n  items: monitor.getItem(),\n  type: monitor.getItemType(),\n  currentOffset: monitor.getClientOffset(),\n  isDragging: monitor.isDragging(),\n}));\n\nclass DragLayerContainer extends React.Component {\n  static propTypes = {\n    type: PropTypes.oneOf([MEDIA, WAITLIST_USER]),\n    items: PropTypes.object,\n    isDragging: PropTypes.bool.isRequired,\n  };\n\n  renderPreview() {\n    switch (this.props.type) {\n      case MEDIA:\n        return <MediaDragPreview {...this.props} />;\n      default:\n        return null;\n    }\n  }\n\n  render() {\n    const { isDragging, items } = this.props;\n    if (!isDragging || !items) {\n      return null;\n    }\n\n    return (\n      <div className=\"DragLayerContainer\">\n        {this.renderPreview()}\n      </div>\n    );\n  }\n}\n\nexport default enhance(DragLayerContainer);\n","/* global localStorage */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragDropContext } from 'react-dnd';\nimport compose from 'recompose/compose';\nimport toClass from 'recompose/toClass';\nimport HTML5Backend from 'react-dnd-html5-backend';\n\nimport FooterBar from '../../containers/FooterBar';\nimport HeaderBar from '../../containers/HeaderBar';\nimport Video from '../../containers/Video';\nimport ErrorArea from '../../containers/ErrorArea';\nimport Overlays from './Overlays';\nimport PlaylistManager from '../../containers/PlaylistManager';\nimport RoomHistory from '../../containers/RoomHistory';\nimport SettingsManager from '../../containers/SettingsManager';\nimport AdminProxy from '../AdminProxy';\nimport About from '../../containers/About';\nimport ConnectionIndicator from '../ConnectionIndicator';\n\nimport SidePanels from '../../containers/SidePanels';\nimport Dialogs from '../Dialogs';\nimport AddToPlaylistMenu from '../../containers/AddToPlaylistMenu';\nimport DragLayer from '../../containers/DragLayer';\n\nconst App = ({\n  activeOverlay,\n  isConnected,\n  settings,\n  onCloseOverlay,\n}) => (\n  <div className=\"App\">\n    <div className=\"AppColumn AppColumn--left\">\n      <div className=\"AppRow AppRow--top\">\n        <HeaderBar\n          className=\"App-header\"\n          title=\"Wave\"\n        />\n      </div>\n      <div className=\"AppRow AppRow--middle\">\n        <Video\n          enabled={settings.videoEnabled}\n          size={settings.videoSize}\n          isMuted={settings.muted}\n          volume={settings.volume}\n        />\n        <ErrorArea />\n        <ConnectionIndicator isConnected={isConnected} />\n      </div>\n      <Overlays transitionName=\"Overlay\" active={activeOverlay}>\n        <About key=\"about\" onCloseOverlay={onCloseOverlay} />\n        <AdminProxy key=\"admin\" onCloseOverlay={onCloseOverlay} />\n        <PlaylistManager key=\"playlistManager\" onCloseOverlay={onCloseOverlay} />\n        <RoomHistory key=\"roomHistory\" onCloseOverlay={onCloseOverlay} />\n        <SettingsManager key=\"settings\" onCloseOverlay={onCloseOverlay} />\n      </Overlays>\n      <FooterBar className=\"AppRow AppRow--bottom\" />\n    </div>\n\n    <div className=\"AppColumn AppColumn--right\">\n      <SidePanels />\n    </div>\n\n    <Dialogs />\n\n    <AddToPlaylistMenu />\n    <DragLayer />\n  </div>\n);\n\nApp.propTypes = {\n  activeOverlay: PropTypes.string,\n  isConnected: PropTypes.bool.isRequired,\n  settings: PropTypes.object.isRequired,\n  onCloseOverlay: PropTypes.func.isRequired,\n};\n\nexport default compose(\n  DragDropContext(HTML5Backend),\n  // DragDropContext needs to be able to set a ref on the component, so we can't\n  // use a stateless function directly.\n  toClass,\n)(App);\n","import { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport {\n  selectedPlaylistSelector,\n  filteredSelectedPlaylistItemsSelector,\n} from '../../selectors/playlistSelectors';\nimport { showSearchResultsSelector } from '../../selectors/searchSelectors';\nimport { showImportPanelSelector } from '../../selectors/importSelectors';\nimport createLazyOverlay from '../../components/LazyOverlay';\n\nconst mapStateToProps = createStructuredSelector({\n  selectedPlaylist: selectedPlaylistSelector,\n  selectedItems: filteredSelectedPlaylistItemsSelector,\n  showImportPanel: showImportPanelSelector,\n  showSearchResults: showSearchResultsSelector,\n});\n\nconst enhance = connect(mapStateToProps);\n\nconst PlaylistManager = createLazyOverlay({\n  loader: () => import('../components/PlaylistManager' /* webpackChunkName: \"playlistsMobile\" */),\n  title: t => t('playlists.title'),\n});\n\nexport default enhance(PlaylistManager);\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport withProps from 'recompose/withProps';\nimport { openPreviewMediaDialog } from '../../actions/DialogActionCreators';\nimport { addMediaMenu } from '../../actions/PlaylistActionCreators';\nimport { roomHistoryWithVotesSelector } from '../../selectors/roomHistorySelectors';\nimport Overlay from '../../components/Overlay';\nimport createLazyOverlay from '../../components/LazyOverlay';\n\nconst selectionOrOne = (media, selection) => {\n  // History entries store the played media on their `.media` property\n  if (selection.isSelected(media)) {\n    return selection.get().map(item => item.media);\n  }\n  return [media.media];\n};\n\nconst mapStateToProps = createStructuredSelector({\n  media: roomHistoryWithVotesSelector,\n});\n\nconst onOpenAddMediaMenu = (position, media, selection) =>\n  addMediaMenu(selectionOrOne(media, selection), position);\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onOpenAddMediaMenu,\n  onOpenPreviewMediaDialog: openPreviewMediaDialog,\n}, dispatch);\n\nconst enhance = connect(mapStateToProps, mapDispatchToProps);\n\nconst RoomHistory = createLazyOverlay({\n  loader: () => import('../components/RoomHistory' /* webpackChunkName: \"historyMobile\" */),\n  title: t => t('history.title'),\n  OverlayComponent: withProps({\n    direction: 'top',\n  })(Overlay),\n});\n\nexport default enhance(RoomHistory);\n","export const SET_DRAWER_OPEN = 'uwave/mobile/SET_DRAWER_OPEN';\nexport const TOGGLE_DRAWER_OPEN = 'uwave/mobile/TOGGLE_DRAWER_OPEN';\nexport const SET_USERS_DRAWER_OPEN = 'uwave/mobile/SET_USERS_DRAWER_OPEN';\n","import {\n  SET_DRAWER_OPEN,\n  SET_USERS_DRAWER_OPEN,\n  TOGGLE_DRAWER_OPEN,\n} from '../constants/ActionTypes';\n\nexport function setDrawer(val) {\n  return { type: SET_DRAWER_OPEN, payload: val };\n}\n\nexport function openDrawer() {\n  return setDrawer(true);\n}\n\nexport function closeDrawer() {\n  return setDrawer(false);\n}\n\nexport function toggleDrawer() {\n  return { type: TOGGLE_DRAWER_OPEN };\n}\n\nexport function setUsersDrawer(val) {\n  return { type: SET_USERS_DRAWER_OPEN, payload: val };\n}\n\nexport function openUsersDrawer() {\n  return setUsersDrawer(true);\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport FavoritedIcon from '@material-ui/icons/Favorite';\nimport FavoriteIcon from '@material-ui/icons/FavoriteBorder';\nimport DownvoteIcon from '@material-ui/icons/ThumbDown';\nimport UpvoteIcon from '@material-ui/icons/ThumbUp';\n\nconst VoteButtons = ({\n  isUpvote, onUpvote,\n  isDownvote, onDownvote,\n  isFavorite, onFavorite,\n}) => (\n  <div className=\"VoteButtons\">\n    <IconButton onClick={onUpvote} className=\"VoteButtons-button\">\n      <UpvoteIcon className={cx(isUpvote && 'ResponseButton-icon--upvoted')} />\n    </IconButton>\n    <IconButton onClick={onFavorite} className=\"VoteButtons-button\">\n      {isFavorite ? (\n        <FavoritedIcon className=\"ResponseButton-icon--favorite\" />\n      ) : (\n        <FavoriteIcon />\n      )}\n    </IconButton>\n    <IconButton onClick={onDownvote} className=\"VoteButtons-button\">\n      <DownvoteIcon className={cx(isDownvote && 'ResponseButton-icon--downvoted')} />\n    </IconButton>\n  </div>\n);\n\nVoteButtons.propTypes = {\n  isUpvote: PropTypes.bool,\n  isFavorite: PropTypes.bool,\n  isDownvote: PropTypes.bool,\n  onUpvote: PropTypes.func.isRequired,\n  onDownvote: PropTypes.func.isRequired,\n  onFavorite: PropTypes.func.isRequired,\n};\n\nexport default VoteButtons;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Player from '../../../components/Player';\nimport VideoBackdrop from '../../../components/Video/VideoBackdrop';\nimport VoteButtons from './VoteButtons';\n\nclass Video extends React.Component {\n  static propTypes = {\n    media: PropTypes.shape({\n      sourceType: PropTypes.string.isRequired,\n      thumbnail: PropTypes.string.isRequired,\n    }),\n    voteStats: PropTypes.shape({\n      isUpvote: PropTypes.bool,\n      isFavorite: PropTypes.bool,\n      isDownvote: PropTypes.bool,\n    }),\n\n    onUpvote: PropTypes.func.isRequired,\n    onDownvote: PropTypes.func.isRequired,\n    onFavorite: PropTypes.func.isRequired,\n  };\n\n  state = {\n    sourceType: undefined, // eslint-disable-line react/no-unused-state\n    enableOverlay: false,\n    showVoteButtons: false,\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { sourceType } = nextProps.media || {};\n    // Switching to a different source type may require an autoplay tap again.\n    // Disable the vote buttons until the media source reports playback started.\n    if (sourceType !== prevState.sourceType) {\n      return {\n        enableOverlay: sourceType === undefined,\n        sourceType,\n      };\n    }\n    return null;\n  }\n\n  handleClick = () => {\n    this.setState(s => ({\n      showVoteButtons: !s.showVoteButtons,\n    }));\n  };\n\n  // Add the vote buttons tap-trap once autoplay permission is granted.\n  handlePlay = () => {\n    this.setState({ enableOverlay: true });\n  };\n\n  render() {\n    const {\n      media,\n      voteStats,\n      onUpvote,\n      onDownvote,\n      onFavorite,\n      ...props\n    } = this.props;\n    const { enableOverlay, showVoteButtons } = this.state;\n\n    return (\n      <div className=\"Video\">\n        {media && <VideoBackdrop url={media.thumbnail} />}\n        <div className=\"Video-player\">\n          <Player\n            {...props}\n            media={media}\n            size=\"large\"\n            onPlay={this.handlePlay}\n          />\n        </div>\n        {enableOverlay && (\n          <button\n            className=\"Video-buttonTrigger\"\n            onClick={this.handleClick}\n            aria-label=\"Show vote buttons\"\n          />\n        )}\n        {showVoteButtons && (\n          <div className=\"Video-buttons\">\n            <VoteButtons\n              {...voteStats}\n              onUpvote={onUpvote}\n              onDownvote={onDownvote}\n              onFavorite={onFavorite}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Video;\n","import compose from 'recompose/compose';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport timed from '../../utils/timed';\nimport {\n  openFavoriteMenu,\n  doUpvote,\n  doDownvote,\n} from '../../actions/VoteActionCreators';\nimport {\n  historyIDSelector,\n  mediaSelector,\n  mobilePlaybackVolumeSelector,\n  timeElapsedSelector,\n} from '../../selectors/boothSelectors';\nimport { currentVoteStatsSelector } from '../../selectors/voteSelectors';\nimport Video from '../components/Video';\n\nconst mapStateToProps = createStructuredSelector({\n  historyID: historyIDSelector,\n  media: mediaSelector,\n  seek: timeElapsedSelector,\n  volume: mobilePlaybackVolumeSelector,\n  voteStats: currentVoteStatsSelector,\n});\n\nconst mapDispatchToProps = {\n  onFavorite: openFavoriteMenu,\n  onUpvote: doUpvote,\n  onDownvote: doDownvote,\n};\n\nconst enhance = compose(\n  timed(),\n  connect(mapStateToProps, mapDispatchToProps),\n);\n\nexport default enhance(Video);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport compose from 'recompose/compose';\nimport { connect } from 'react-redux';\nimport { translate } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\n\nimport {\n  openLoginDialog,\n  openRegisterDialog,\n} from '../../actions/DialogActionCreators';\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onLogin: openLoginDialog,\n  onRegister: openRegisterDialog,\n}, dispatch);\n\nconst enhance = compose(\n  translate(),\n  connect(undefined, mapDispatchToProps),\n);\n\nconst buttonStyle = {\n  height: '100%',\n  fontSize: '11pt',\n  textTransform: 'uppercase',\n  width: '50%',\n};\n\nconst LoginButtons = ({\n  t,\n  onLogin,\n  onRegister,\n}) => (\n  <span style={{ display: 'flex', justifyContent: 'stretch', height: '100%' }}>\n    <Button\n      variant=\"raised\"\n      color=\"primary\"\n      onClick={onLogin}\n      style={buttonStyle}\n    >\n      {t('login.login')}\n    </Button>\n    <Button\n      onClick={onRegister}\n      style={buttonStyle}\n    >\n      {t('login.register')}\n    </Button>\n  </span>\n);\n\nLoginButtons.propTypes = {\n  t: PropTypes.func.isRequired,\n  onLogin: PropTypes.func.isRequired,\n  onRegister: PropTypes.func.isRequired,\n};\n\nexport default enhance(LoginButtons);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport { isLoggedInSelector } from '../../selectors/userSelectors';\n\nimport ChatMessages from '../../containers/ChatMessages';\nimport ChatInput from '../../containers/ChatInput';\nimport LoginButtons from './LoginButtons';\n\nconst mapStateToProps = createStructuredSelector({\n  isLoggedIn: isLoggedInSelector,\n});\n\nconst ChatContainer = ({ isLoggedIn }) => (\n  <div className=\"ChatContainer\">\n    <div className=\"ChatContainer-messages\">\n      <ChatMessages />\n    </div>\n    <div className=\"ChatContainer-input ChatInputWrapper\">\n      {isLoggedIn ? (\n        <ChatInput />\n      ) : (\n        <LoginButtons />\n      )}\n    </div>\n  </div>\n);\n\nChatContainer.propTypes = {\n  isLoggedIn: PropTypes.bool.isRequired,\n};\n\nexport default connect(mapStateToProps)(ChatContainer);\n","import { createSelector } from 'reselect';\n\nconst baseSelector = state => state.mobile;\n\nexport const drawerIsOpenSelector = createSelector(\n  baseSelector,\n  base => base.drawer,\n);\n\nexport const usersDrawerIsOpenSelector = createSelector(\n  baseSelector,\n  base => base.usersDrawer,\n);\n","import { toggleOverlay, togglePlaylistManager } from '../../actions/OverlayActionCreators';\nimport { selectPlaylist } from '../../actions/PlaylistActionCreators';\n\nexport function openPlaylist(playlistID) {\n  return (dispatch) => {\n    dispatch(togglePlaylistManager());\n    dispatch(selectPlaylist(playlistID));\n  };\n}\n\nexport function toggleServerList() {\n  return toggleOverlay('serverList');\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport compose from 'recompose/compose';\nimport withHandlers from 'recompose/withHandlers';\nimport Drawer from '@material-ui/core/Drawer';\nimport MenuList from '@material-ui/core/MenuList';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\nimport ActiveIcon from '@material-ui/icons/Check';\nimport UserCard from '../../../components/UserCard/UserCard';\n\nconst enhance = compose(\n  translate(),\n  withHandlers({\n    // Prevent defaults for react-tap-event-plugin:\n    // https://github.com/zilverline/react-tap-event-plugin/issues/77\n    onShowAbout: props => (event) => {\n      event.preventDefault();\n      props.onShowAbout();\n      props.onDrawerClose();\n    },\n    onShowServerList: props => (event) => {\n      event.preventDefault();\n      props.onShowServerList();\n      props.onDrawerClose();\n    },\n    onShowSettings: props => (event) => {\n      event.preventDefault();\n      props.onShowSettings();\n      props.onDrawerClose();\n    },\n  }),\n);\n\nconst classes = {\n  paper: 'DrawerMenu',\n};\n\nconst DrawerMenu = ({\n  t,\n  user,\n  playlists,\n  open,\n  hasAboutPage,\n  onShowAbout,\n  onShowServerList,\n  onShowSettings,\n  onShowPlaylist,\n  onDrawerClose,\n}) => (\n  <Drawer open={open} onClose={onDrawerClose} classes={classes}>\n    {user && <UserCard user={user} />}\n    <MenuList>\n      {hasAboutPage && <MenuItem onClick={onShowAbout}>{t('about.about')}</MenuItem>}\n      <MenuItem onClick={onShowServerList}>{t('about.servers')}</MenuItem>\n      <MenuItem onClick={onShowSettings}>{t('settings.title')}</MenuItem>\n    </MenuList>\n    <Divider />\n    <MenuList\n      subheader={<ListSubheader>{t('playlists.title')}</ListSubheader>}\n    >\n      {playlists.map(playlist => (\n        <MenuItem\n          key={playlist._id}\n          onClick={(event) => {\n            event.preventDefault();\n            onShowPlaylist(playlist._id);\n            onDrawerClose();\n          }}\n        >\n          {playlist.active && (\n            <ListItemIcon>\n              <ActiveIcon />\n            </ListItemIcon>\n          )}\n          <ListItemText disableTypography>\n            <Typography noWrap variant=\"subheading\">{playlist.name}</Typography>\n          </ListItemText>\n        </MenuItem>\n      ))}\n    </MenuList>\n  </Drawer>\n);\n\nDrawerMenu.propTypes = {\n  t: PropTypes.func.isRequired,\n  user: PropTypes.object,\n  playlists: PropTypes.arrayOf(PropTypes.shape({ name: PropTypes.string.isRequired })),\n  open: PropTypes.bool.isRequired,\n  hasAboutPage: PropTypes.bool.isRequired,\n  onShowAbout: PropTypes.func.isRequired,\n  onShowServerList: PropTypes.func.isRequired,\n  onShowSettings: PropTypes.func.isRequired,\n  onShowPlaylist: PropTypes.func.isRequired,\n  onDrawerClose: PropTypes.func.isRequired,\n};\n\nexport default enhance(DrawerMenu);\n","import compose from 'recompose/compose';\nimport getContext from 'recompose/getContext';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\nimport { currentUserSelector } from '../../selectors/userSelectors';\nimport { playlistsSelector } from '../../selectors/playlistSelectors';\nimport { toggleSettings, toggleAbout } from '../../actions/OverlayActionCreators';\nimport { drawerIsOpenSelector } from '../selectors/drawerSelectors';\nimport { setDrawer } from '../actions/DrawerActionCreators';\nimport { toggleServerList, openPlaylist } from '../actions/OverlayActionCreators';\nimport DrawerMenu from '../components/DrawerMenu';\n\nconst mapStateToProps = createStructuredSelector({\n  user: currentUserSelector,\n  playlists: playlistsSelector,\n  open: drawerIsOpenSelector,\n  hasAboutPage: (state, props) => {\n    const uw = props.uwave;\n    return Boolean(uw && uw.getAboutPageComponent());\n  },\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onShowAbout: toggleAbout,\n  onShowServerList: toggleServerList,\n  onShowSettings: toggleSettings,\n  onShowPlaylist: openPlaylist,\n  onDrawerClose: () => setDrawer(false),\n}, dispatch);\n\nconst enhance = compose(\n  getContext({ uwave: PropTypes.object }),\n  connect(mapStateToProps, mapDispatchToProps),\n);\n\nexport default enhance(DrawerMenu);\n","import { createSelector } from 'reselect';\nimport { userListSelector } from '../../selectors/userSelectors';\nimport { djAndWaitlistUsersSelector } from '../../selectors/waitlistSelectors';\n\nexport * from '../../selectors/userSelectors';\n\nexport const listenersSelector = createSelector(\n  userListSelector,\n  djAndWaitlistUsersSelector,\n  (users, waitlist) => users.filter(user =>\n    !waitlist.some(waiting => waiting._id === user._id)),\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Avatar from '@material-ui/core/Avatar';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport Username from '../../../components/Username';\n\nconst UserRow = ({\n  user,\n  icon,\n}) => (\n  <ListItem>\n    <ListItemAvatar>\n      <Avatar className=\"Avatar\" src={user.avatar || `https://sigil.u-wave.net/${user._id}`} />\n    </ListItemAvatar>\n    <ListItemText>\n      <Username user={user} />\n    </ListItemText>\n    {icon && (\n      <ListItemIcon>{icon}</ListItemIcon>\n    )}\n  </ListItem>\n);\n\nUserRow.propTypes = {\n  user: PropTypes.object.isRequired,\n  icon: PropTypes.node,\n};\n\nexport default UserRow;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst WaitlistPosition = ({ position }) => (\n  <span className=\"UsersDrawer-position\">\n    {position}\n  </span>\n);\n\nWaitlistPosition.propTypes = {\n  position: PropTypes.number.isRequired,\n};\n\nexport default WaitlistPosition;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport withProps from 'recompose/withProps';\nimport { translate } from 'react-i18next';\nimport List from '@material-ui/core/List';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport CurrentDJIcon from '@material-ui/icons/PlayArrow';\nimport UserRow from './UserRow';\nimport WaitlistPosition from './WaitlistPosition';\n\nconst JoinWaitlistButton = withProps({\n  variant: 'raised',\n  color: 'primary',\n  style: {\n    marginLeft: 16,\n    marginBottom: 8,\n  },\n})(Button);\n\nconst UserList = ({\n  t,\n  currentDJ,\n  users,\n  waitlist,\n  isLockedWaitlist,\n  userIsLoggedIn,\n  userInWaitlist,\n  onJoinWaitlist,\n}) => (\n  <div>\n    {currentDJ && <Divider />}\n\n    <List\n      subheader={<ListSubheader>{t('waitlist.title')}</ListSubheader>}\n    >\n      {currentDJ && (\n        <UserRow\n          user={currentDJ}\n          icon={<CurrentDJIcon style={{ margin: 5 }} />}\n        />\n      )}\n      {waitlist.map((user, position) => (\n        <UserRow\n          key={user._id}\n          user={user}\n          icon={<WaitlistPosition position={position + 1} />}\n        />\n      ))}\n    </List>\n    {userIsLoggedIn && !userInWaitlist && (\n      <JoinWaitlistButton\n        onClick={() => onJoinWaitlist()}\n        disabled={isLockedWaitlist}\n      >\n        {t('waitlist.join')}\n      </JoinWaitlistButton>\n    )}\n\n    <Divider />\n\n    <List\n      subheader={<ListSubheader>{t('users.title')}</ListSubheader>}\n    >\n      {users.map(user => (\n        <UserRow key={user._id} user={user} />\n      ))}\n    </List>\n  </div>\n);\n\nUserList.propTypes = {\n  t: PropTypes.func.isRequired,\n  currentDJ: PropTypes.object,\n  users: PropTypes.arrayOf(PropTypes.object).isRequired,\n  waitlist: PropTypes.arrayOf(PropTypes.object).isRequired,\n  userIsLoggedIn: PropTypes.bool.isRequired,\n  userInWaitlist: PropTypes.bool,\n  isLockedWaitlist: PropTypes.bool,\n  onJoinWaitlist: PropTypes.func.isRequired,\n};\n\nexport default translate()(UserList);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Drawer from '@material-ui/core/Drawer';\nimport UserList from './UserList';\n\nconst classes = {\n  paper: 'UsersDrawer',\n};\n\nconst UsersDrawer = ({\n  currentDJ,\n  users,\n  waitlist,\n  isLockedWaitlist,\n  userInWaitlist,\n  userIsLoggedIn,\n  open,\n  onDrawerClose,\n  onJoinWaitlist,\n  onLeaveWaitlist,\n}) => (\n  <Drawer\n    anchor=\"right\"\n    open={open}\n    onClose={onDrawerClose}\n    classes={classes}\n  >\n    <UserList\n      currentDJ={currentDJ}\n      users={users}\n      waitlist={waitlist}\n      isLockedWaitlist={isLockedWaitlist}\n      userIsLoggedIn={userIsLoggedIn}\n      userInWaitlist={userInWaitlist}\n      onJoinWaitlist={onJoinWaitlist}\n      onLeaveWaitlist={onLeaveWaitlist}\n    />\n  </Drawer>\n);\n\nUsersDrawer.propTypes = {\n  currentDJ: PropTypes.object,\n  users: PropTypes.arrayOf(PropTypes.object).isRequired,\n  waitlist: PropTypes.arrayOf(PropTypes.object).isRequired,\n  userIsLoggedIn: PropTypes.bool.isRequired,\n  userInWaitlist: PropTypes.bool,\n  isLockedWaitlist: PropTypes.bool,\n  open: PropTypes.bool.isRequired,\n  onDrawerClose: PropTypes.func.isRequired,\n  onJoinWaitlist: PropTypes.func.isRequired,\n  onLeaveWaitlist: PropTypes.func.isRequired,\n};\n\nexport default UsersDrawer;\n","import { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\n\nimport {\n  waitlistUsersSelector,\n  userInWaitlistSelector,\n  isLockedSelector,\n} from '../../selectors/waitlistSelectors';\nimport { isLoggedInSelector } from '../../selectors/userSelectors';\nimport { djSelector } from '../../selectors/boothSelectors';\nimport { listenersSelector } from '../selectors/userSelectors';\nimport {\n  joinWaitlist,\n  leaveWaitlist,\n} from '../../actions/WaitlistActionCreators';\n\nimport { usersDrawerIsOpenSelector } from '../selectors/drawerSelectors';\nimport { setUsersDrawer } from '../actions/DrawerActionCreators';\nimport UsersDrawer from '../components/UsersDrawer';\n\nconst mapStateToProps = createStructuredSelector({\n  currentDJ: djSelector,\n  users: listenersSelector,\n  waitlist: waitlistUsersSelector,\n  open: usersDrawerIsOpenSelector,\n  userIsLoggedIn: isLoggedInSelector,\n  userInWaitlist: userInWaitlistSelector,\n  isLockedWaitlist: isLockedSelector,\n});\n\nconst mapDispatchToProps = {\n  onDrawerClose: () => setUsersDrawer(false),\n  onJoinWaitlist: joinWaitlist,\n  onLeaveWaitlist: leaveWaitlist,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UsersDrawer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\n\nconst enhance = translate();\n\nconst VideoDisabledMessage = ({ t, onEnableVideo }) => (\n  <div className=\"VideoDisabledMessage\">\n    <p className=\"VideoDisabledMessage-text\">{t('booth.videoDisabled')}</p>\n    <Button variant=\"raised\" color=\"primary\" onClick={onEnableVideo}>\n      {'Enable?'}\n    </Button>\n  </div>\n);\n\nVideoDisabledMessage.propTypes = {\n  t: PropTypes.func.isRequired,\n  onEnableVideo: PropTypes.func.isRequired,\n};\n\nexport default enhance(VideoDisabledMessage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport withHandlers from 'recompose/withHandlers';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport HistoryIcon from '@material-ui/icons/History';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport SongTitle from '../../../components/SongTitle';\nimport Video from '../../containers/Video';\nimport Chat from '../../containers/Chat';\nimport DrawerMenu from '../../containers/DrawerMenu';\nimport UsersDrawer from '../../containers/UsersDrawer';\nimport VideoDisabledMessage from './VideoDisabledMessage';\n\nconst waitlistIconStyle = {\n  fontSize: '125%',\n  textAlign: 'center',\n};\n\nconst getWaitlistLabel = (size, position) => {\n  if (size > 0) {\n    const posText = position !== -1\n      ? `${position + 1}/${size}`\n      : size;\n\n    return posText;\n  }\n  return '0';\n};\n\nconst enhance = withHandlers({\n  // Prevent defaults for react-tap-event-plugin:\n  // https://github.com/zilverline/react-tap-event-plugin/issues/77\n  onOpenRoomHistory: props => (event) => {\n    event.preventDefault();\n    props.onOpenRoomHistory();\n  },\n  onOpenDrawer: props => (event) => {\n    event.preventDefault();\n    props.onOpenDrawer();\n  },\n  onOpenWaitlist: props => (event) => {\n    event.preventDefault();\n    props.onOpenWaitlist();\n  },\n});\n\nconst MainView = ({\n  media,\n  videoEnabled,\n  waitlistPosition,\n  waitlistSize,\n  onOpenRoomHistory,\n  onOpenDrawer,\n  onOpenWaitlist,\n  onEnableVideo,\n}) => (\n  <div className=\"MainView\">\n    <AppBar position=\"static\" className=\"MainView-appBar\">\n      <Toolbar>\n        <IconButton aria-label=\"Menu\" onClick={onOpenDrawer}>\n          <MenuIcon />\n        </IconButton>\n        <Typography variant=\"title\" className=\"MainView-title\">\n          {media ? (\n            <SongTitle artist={media.artist} title={media.title} />\n          ) : (\n            'Nobody is DJing!'\n          )}\n        </Typography>\n        <IconButton onClick={onOpenRoomHistory}>\n          <HistoryIcon />\n        </IconButton>\n        <IconButton style={waitlistIconStyle} onClick={onOpenWaitlist}>\n          {getWaitlistLabel(waitlistSize, waitlistPosition)}\n        </IconButton>\n      </Toolbar>\n    </AppBar>\n\n    <div className=\"MainView-content\">\n      <div className=\"MobileApp-video\">\n        <Video\n          enabled={videoEnabled}\n          size=\"large\"\n        />\n        {!videoEnabled && (\n          <VideoDisabledMessage onEnableVideo={onEnableVideo} />\n        )}\n      </div>\n      <div className=\"MobileApp-chat\">\n        <Chat />\n      </div>\n    </div>\n\n    <DrawerMenu />\n    <UsersDrawer />\n  </div>\n);\n\nMainView.propTypes = {\n  media: PropTypes.object,\n  videoEnabled: PropTypes.bool.isRequired,\n  waitlistPosition: PropTypes.number.isRequired,\n  waitlistSize: PropTypes.number.isRequired,\n  onOpenRoomHistory: PropTypes.func.isRequired,\n  onOpenWaitlist: PropTypes.func.isRequired,\n  onOpenDrawer: PropTypes.func.isRequired,\n  onEnableVideo: PropTypes.func.isRequired,\n};\n\nexport default enhance(MainView);\n","import { bindActionCreators } from 'redux';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\n\nimport { selectPanel } from '../../actions/PanelSelectActionCreators';\nimport { toggleRoomHistory } from '../../actions/OverlayActionCreators';\nimport { set } from '../../actions/SettingsActionCreators';\nimport {\n  mediaSelector,\n  startTimeSelector,\n} from '../../selectors/boothSelectors';\nimport {\n  sizeSelector as waitlistSizeSelector,\n  positionSelector as waitlistPositionSelector,\n} from '../../selectors/waitlistSelectors';\nimport { playlistsSelector } from '../../selectors/playlistSelectors';\nimport { videoEnabledSelector } from '../../selectors/settingSelectors';\n\nimport { openDrawer, openUsersDrawer } from '../actions/DrawerActionCreators';\nimport MainView from '../components/MainView';\n\nconst mapStateToProps = createStructuredSelector({\n  selected: state => state.selectedPanel,\n  videoEnabled: videoEnabledSelector,\n  media: mediaSelector,\n  startTime: startTimeSelector,\n  waitlistPosition: waitlistPositionSelector,\n  waitlistSize: waitlistSizeSelector,\n  playlists: playlistsSelector,\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onTabChange: selectPanel,\n  onOpenRoomHistory: toggleRoomHistory,\n  onOpenDrawer: openDrawer,\n  onOpenWaitlist: openUsersDrawer,\n  onEnableVideo: () => set('videoEnabled', true),\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MainView);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Overlay from '../../components/Overlay';\nimport OverlayHeader from '../../components/Overlay/Header';\nimport OverlayContent from '../../components/Overlay/Content';\n\nconst enhance = translate();\n\nclass AboutContainer extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    onCloseOverlay: PropTypes.func.isRequired,\n  };\n  static contextTypes = {\n    uwave: PropTypes.object,\n  };\n\n  getAboutPageComponent() {\n    const uw = this.context.uwave;\n    if (uw) {\n      return uw.getAboutPageComponent();\n    }\n    return null;\n  }\n\n  render() {\n    const About = this.getAboutPageComponent();\n    if (!About) return null;\n\n    const { t, onCloseOverlay, ...props } = this.props;\n\n    return (\n      <Overlay>\n        <OverlayHeader title={t('about.about')} onCloseOverlay={onCloseOverlay} />\n        <OverlayContent className=\"AboutPanel\">\n          <About {...props} />\n        </OverlayContent>\n      </Overlay>\n    );\n  }\n}\n\nexport default enhance(AboutContainer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Overlay from '../../components/Overlay';\nimport OverlayContent from '../../components/Overlay/Content';\nimport OverlayHeader from '../../components/Overlay/Header';\nimport ServerList from '../../components/ServerList';\n\nconst enhance = translate();\n\nconst ServerListContainer = ({ t, onCloseOverlay }) => (\n  <Overlay>\n    <OverlayHeader title={t('about.servers')} onCloseOverlay={onCloseOverlay} />\n    <OverlayContent className=\"AboutPanel\">\n      <ServerList />\n    </OverlayContent>\n  </Overlay>\n);\n\nServerListContainer.propTypes = {\n  t: PropTypes.func.isRequired,\n  onCloseOverlay: PropTypes.func.isRequired,\n};\n\nexport default enhance(ServerListContainer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport find from 'array-find';\nimport CSSTransition from 'react-transition-group/CSSTransition';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\n\nconst Overlays = ({ children, active }) => {\n  let view;\n  if (Array.isArray(children)) {\n    view = find(children, child => child.key === active);\n  } else if (children.key === active) {\n    view = children;\n  }\n\n  if (view) {\n    // Pass on the `view.key` so that overlays are mounted and unmounted correctly\n    // when switching from one to the other.\n    view = (\n      <CSSTransition\n        key={view.key}\n        mountOnEnter\n        unmountOnExit\n        classNames=\"Overlay\"\n        timeout={180}\n      >\n        {view}\n      </CSSTransition>\n    );\n  }\n\n  return (\n    <TransitionGroup className=\"Overlays\">\n      {view}\n    </TransitionGroup>\n  );\n};\n\nOverlays.propTypes = {\n  children: PropTypes.node,\n  active: PropTypes.string,\n};\n\nexport default Overlays;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport toClass from 'recompose/toClass';\nimport withState from 'recompose/withState';\nimport { DragDropContext } from 'react-dnd';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport ErrorArea from '../../../containers/ErrorArea';\nimport PlaylistManager from '../../containers/PlaylistManager';\nimport RoomHistory from '../../containers/RoomHistory';\nimport SettingsManager from '../../../containers/SettingsManager';\nimport Dialogs from '../../../components/Dialogs';\nimport AddToPlaylistMenu from '../../../containers/AddToPlaylistMenu';\nimport DragLayer from '../../../containers/DragLayer';\nimport MainView from '../../containers/MainView';\nimport About from '../../containers/About';\nimport ServerList from '../../containers/ServerList';\nimport Overlays from './Overlays';\n\nconst enhance = compose(\n  DragDropContext(HTML5Backend),\n  toClass,\n  withState('dismissedWarning', 'onDismiss', false),\n);\n\nconst MobileApp = ({\n  settings,\n  activeOverlay,\n  onCloseOverlay,\n  dismissedWarning,\n  onDismiss,\n}) => (\n  <div className={cx('App', 'MobileApp', 'is-mobile', settings.videoEnabled && 'MobileApp--videoEnabled')}>\n    <MainView />\n\n    <Snackbar\n      open={!dismissedWarning}\n      onClose={() => onDismiss(true)}\n      message=\"Note: The mobile version is in beta and may crash regularly.\"\n    />\n\n    <ErrorArea />\n\n    <Overlays transitionName=\"Overlay\" active={activeOverlay}>\n      <About key=\"about\" onCloseOverlay={onCloseOverlay} />\n      <ServerList key=\"serverList\" onCloseOverlay={onCloseOverlay} />\n      <PlaylistManager key=\"playlistManager\" onCloseOverlay={onCloseOverlay} />\n      <RoomHistory key=\"roomHistory\" onCloseOverlay={onCloseOverlay} />\n      <SettingsManager key=\"settings\" onCloseOverlay={onCloseOverlay} />\n    </Overlays>\n\n    <Dialogs />\n\n    <AddToPlaylistMenu />\n    <DragLayer />\n  </div>\n);\n\nMobileApp.propTypes = {\n  settings: PropTypes.shape({\n    videoEnabled: PropTypes.bool.isRequired,\n  }).isRequired,\n  activeOverlay: PropTypes.string,\n  onCloseOverlay: PropTypes.func.isRequired,\n  // Mobile Beta warning\n  dismissedWarning: PropTypes.bool.isRequired,\n  onDismiss: PropTypes.func.isRequired,\n};\n\nexport default enhance(MobileApp);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\n\nfunction reload() {\n  window.location.reload();\n}\n\nconst FatalError = ({ error }) => (\n  <div className=\"FatalError\">\n    <Card\n      raised\n      className=\"FatalError-paper\"\n    >\n      <CardContent>\n        <Typography variant=\"headline\">Wave Crashed</Typography>\n        <Typography component=\"p\">\n          {error.message}\n        </Typography>\n        <Typography component=\"p\">\n          The admins have been made aware of this issue.\n          Please reload the page.\n        </Typography>\n      </CardContent>\n      <CardActions>\n        <Button\n          variant=\"raised\"\n          color=\"secondary\"\n          className=\"FatalError-reload\"\n          onClick={reload}\n          autoFocus\n        >\n          Reload\n        </Button>\n      </CardActions>\n    </Card>\n  </div>\n);\n\nFatalError.propTypes = {\n  error: PropTypes.object.isRequired,\n};\n\nexport default FatalError;\n","/* global bugsnag */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport nest from 'recompose/nest';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport { I18nextProvider } from 'react-i18next';\nimport { Provider as BusProvider } from 'react-bus';\nimport { Mobile, Desktop } from '../components/Responsive';\nimport ClockProvider from '../components/ClockProvider';\nimport { closeAll } from '../actions/OverlayActionCreators';\nimport {\n  settingsSelector,\n  languageSelector,\n  themeSelector,\n} from '../selectors/settingSelectors';\nimport { isConnectedSelector } from '../selectors/serverSelectors';\nimport DesktopApp from '../components/App';\nimport MobileApp from '../mobile/components/App';\nimport FatalError from '../components/FatalError';\n\nconst SimpleProviders = nest(BusProvider, ClockProvider);\n\nconst mapStateToProps = createStructuredSelector({\n  activeOverlay: state => state.activeOverlay,\n  isConnected: isConnectedSelector,\n  settings: settingsSelector,\n  language: languageSelector,\n  theme: themeSelector,\n});\n\nconst mapDispatchToProps = {\n  onCloseOverlay: closeAll,\n};\n\nconst enhance = connect(mapStateToProps, mapDispatchToProps);\n\nclass AppContainer extends React.Component {\n  static propTypes = {\n    mediaSources: PropTypes.object.isRequired,\n    uwave: PropTypes.object,\n    language: PropTypes.string,\n    theme: PropTypes.object,\n    locale: PropTypes.object.isRequired,\n  };\n\n  static childContextTypes = {\n    mediaSources: PropTypes.object,\n    uwave: PropTypes.object,\n  };\n\n  state = {\n    error: null,\n  };\n\n  getChildContext() {\n    return {\n      mediaSources: this.props.mediaSources,\n      uwave: this.props.uwave,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.language !== prevProps.language) {\n      this.props.locale.changeLanguage(this.props.language);\n    }\n  }\n\n  componentDidCatch(error, info) {\n    this.setState({ error });\n\n    bugsnag.notify(error, {\n      metaData: {\n        componentStack: info.componentStack,\n      },\n    });\n  }\n\n  renderApp = () => (\n    <React.Fragment>\n      <Mobile>\n        <MobileApp {...this.props} />\n      </Mobile>\n      <Desktop>\n        <DesktopApp {...this.props} />\n      </Desktop>\n    </React.Fragment>\n  );\n\n  render() {\n    if (this.state.error) {\n      // Let's hope the ThemeProvider works at least...\n      return (\n        <MuiThemeProvider theme={this.props.theme}>\n          <FatalError error={this.state.error} />\n        </MuiThemeProvider>\n      );\n    }\n\n    return (\n      <MuiThemeProvider theme={this.props.theme}>\n        <I18nextProvider i18n={this.props.locale}>\n          <SimpleProviders>\n            {this.renderApp()}\n          </SimpleProviders>\n        </I18nextProvider>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default enhance(AppContainer);\n","export default function createGenerateClassName() {\n  let counter = 0;\n\n  function getNextUnknownName() {\n    counter += 1;\n    return `Component${counter}`;\n  }\n\n  function generateClassName(rule, styleSheet) {\n    const componentName = styleSheet.options.name || getNextUnknownName();\n    if (rule.key === 'root') {\n      return componentName;\n    }\n    return `${componentName}-${rule.key}`;\n  }\n\n  return generateClassName;\n}\n","import isEqual from 'is-equal-shallow';\nimport { loadSettings } from '../actions/SettingsActionCreators';\n\nconst SETTINGS_KEY = 'uwaveSettings';\n\nconst attempt = (fn) => {\n  try {\n    return fn() || undefined;\n  } catch (e) {\n    return undefined;\n  }\n};\n\n// [Store enhancer][1] that saves and loads app settings to and from\n// localStorage.\n//\n// [1]: http://redux.js.org/docs/Glossary.html#store-enhancer\nconst persistSettings = next => (reducer, initialState) => {\n  const settings = attempt(() =>\n    JSON.parse(localStorage.getItem(SETTINGS_KEY)));\n\n  const store = next(reducer, initialState);\n\n  store.dispatch(loadSettings(settings));\n\n  let prevSettings = settings;\n  store.subscribe(() => {\n    const newSettings = store.getState().settings;\n    if (!isEqual(prevSettings, newSettings)) {\n      attempt(() =>\n        localStorage.setItem(SETTINGS_KEY, JSON.stringify(newSettings)));\n    }\n    prevSettings = newSettings;\n  });\n  return store;\n};\n\nexport default persistSettings;\n","/* eslint-disable import/prefer-default-export */\n\nexport const SHOULD_RANDOMIZE = 'wlk/SHOULD_RANDOMIZE';\n","import createDebug from 'debug';\nimport WebSocket from 'reconnecting-websocket';\nimport {\n  LOGIN_COMPLETE,\n  LOGOUT_START,\n  SOCKET_CONNECT,\n  SOCKET_RECONNECT,\n  SOCKET_DISCONNECTED,\n  SOCKET_CONNECTED,\n  SEND_MESSAGE,\n  DO_UPVOTE,\n  DO_DOWNVOTE,\n} from '../constants/ActionTypes';\nimport { SHOULD_RANDOMIZE } from '../_wlk/constants';\nimport { getSocketAuthToken } from '../actions/LoginActionCreators';\nimport {\n  advance,\n  skipped,\n} from '../actions/BoothActionCreators';\nimport {\n  receive as chatReceive,\n  removeMessage,\n  removeMessagesByUser,\n  removeAllMessages,\n  muteUser as chatMute,\n  unmuteUser as chatUnmute,\n} from '../actions/ChatActionCreators';\nimport { cyclePlaylist } from '../actions/PlaylistActionCreators';\nimport {\n  join as userJoin,\n  leave as userLeave,\n  changeUsername,\n  addUserRoles,\n  removeUserRoles,\n  receiveGuestCount,\n} from '../actions/UserActionCreators';\nimport {\n  clearWaitlist,\n  joinedWaitlist,\n  leftWaitlist,\n  updatedWaitlist,\n  movedInWaitlist,\n  setLocked as setWaitlistLocked,\n} from '../actions/WaitlistActionCreators';\nimport { favorited, receiveVote } from '../actions/VoteActionCreators';\n\nconst debug = createDebug('uwave:websocket');\n\nfunction defaultUrl() {\n  const loc = window.location;\n  const port = loc.port || (loc.protocol === 'https:' ? 443 : 80);\n  const protocol = loc.protocol === 'https:' ? 'wss:' : 'ws:';\n  return `${protocol}//${loc.hostname}:${port}`;\n}\n\nconst actions = {\n  chatMessage({\n    id, userID, message, timestamp,\n  }) {\n    return chatReceive({\n      _id: id,\n      userID,\n      text: message,\n      timestamp,\n    });\n  },\n  chatDelete() {\n    return removeAllMessages();\n  },\n  chatDeleteByID({ _id }) {\n    return removeMessage(_id);\n  },\n  chatDeleteByUser({ userID }) {\n    return removeMessagesByUser(userID);\n  },\n  chatMute({ userID, expiresAt, moderatorID }) {\n    return chatMute(userID, { moderatorID, expiresAt });\n  },\n  chatUnmute({ userID, moderatorID }) {\n    return chatUnmute(userID, { moderatorID });\n  },\n  advance(booth) {\n    return advance(booth);\n  },\n  skip({ userID, moderatorID, reason }) {\n    return skipped({ userID, moderatorID, reason });\n  },\n  favorite({ userID, historyID }) {\n    return favorited({ userID, historyID });\n  },\n  vote({ _id, value }) {\n    return receiveVote({ userID: _id, vote: value });\n  },\n  waitlistJoin({ userID, waitlist }) {\n    return joinedWaitlist({ userID, waitlist });\n  },\n  waitlistLeave({ userID, waitlist }) {\n    return leftWaitlist({ userID, waitlist });\n  },\n  waitlistUpdate(waitlist) {\n    return updatedWaitlist(waitlist);\n  },\n  waitlistLock({ locked }) {\n    return setWaitlistLocked(locked);\n  },\n  waitlistMove({\n    userID, moderatorID, position, waitlist,\n  }) {\n    return movedInWaitlist({\n      userID, moderatorID, position, waitlist,\n    });\n  },\n  // TODO Treat moderator force-add and force-remove differently from voluntary\n  // joins and leaves.\n  waitlistAdd({ userID, waitlist }) {\n    return joinedWaitlist({ userID, waitlist });\n  },\n  waitlistRemove({ userID, waitlist }) {\n    return leftWaitlist({ userID, waitlist });\n  },\n  waitlistClear() {\n    return clearWaitlist();\n  },\n  playlistCycle({ playlistID }) {\n    return cyclePlaylist(playlistID);\n  },\n  join(user) {\n    return userJoin(user);\n  },\n  leave(userID) {\n    return userLeave(userID);\n  },\n  nameChange({ userID, username }) {\n    return changeUsername(userID, username);\n  },\n  guests: receiveGuestCount,\n  'acl:allow': ({ userID, roles }) =>\n    addUserRoles(userID, roles),\n  'acl:disallow': ({ userID, roles }) =>\n    removeUserRoles(userID, roles),\n  'wlk:shouldRandomize': ({ value }) => ({\n    type: SHOULD_RANDOMIZE,\n    payload: value,\n  }),\n};\n\nexport default function middleware({ url = defaultUrl() } = {}) {\n  return ({ dispatch, getState }) => {\n    let socket;\n    let queue = [];\n    let sentAuthToken = false;\n    let opened = false;\n\n    function isOpen() {\n      return socket && opened;\n    }\n\n    function sendAuthToken(tokne) {\n      socket.send(tokne);\n      sentAuthToken = true;\n    }\n\n    function maybeAuthenticateOnConnect(state) {\n      const { user } = state.auth;\n      if (!user) return;\n      debug('open', user.id);\n\n      dispatch(getSocketAuthToken()).then(({ socketToken }) => {\n        if (socketToken) {\n          sendAuthToken(socketToken);\n        } else {\n          sentAuthToken = false;\n        }\n      });\n    }\n\n    function send(command, data) {\n      if (isOpen()) {\n        socket.send(JSON.stringify({ command, data }));\n      } else {\n        queue.push({ command, data });\n      }\n    }\n\n    function drainQueuedMessages() {\n      const messages = queue;\n      queue = [];\n      messages.forEach((msg) => {\n        send(msg.command, msg.data);\n      });\n    }\n\n    function onOpen() {\n      opened = true;\n      dispatch({ type: SOCKET_CONNECTED });\n      maybeAuthenticateOnConnect(getState());\n    }\n\n    function onClose() {\n      opened = false;\n      dispatch({ type: SOCKET_DISCONNECTED });\n    }\n\n    function onMessage(pack) {\n      // Ignore keepalive messages.\n      if (pack.data === '-') return;\n\n      const { command, data } = JSON.parse(pack.data);\n      debug(command, data);\n\n      if (command === 'authenticated') {\n        drainQueuedMessages();\n        return;\n      }\n\n      if (typeof actions[command] === 'function') {\n        const action = actions[command](data);\n        if (action) {\n          dispatch(action);\n          return;\n        }\n      }\n      debug('!unknown socket message type');\n    }\n\n    return next => (action) => {\n      const { type, payload, error } = action;\n\n      if (error) {\n        next(action);\n        return;\n      }\n\n      switch (type) {\n        case SOCKET_RECONNECT:\n          if (socket) {\n            socket.close(undefined, undefined, { keepClosed: true });\n          }\n        // fall through\n        case SOCKET_CONNECT:\n          socket = new WebSocket(url);\n          socket.addEventListener('message', onMessage);\n          socket.addEventListener('open', onOpen);\n          socket.addEventListener('close', onClose);\n          socket.addEventListener('connecting', onClose);\n          break;\n        case SEND_MESSAGE:\n          send('sendChat', payload.message);\n          break;\n        case DO_UPVOTE:\n          send('vote', 1);\n          break;\n        case DO_DOWNVOTE:\n          send('vote', -1);\n          break;\n        case LOGIN_COMPLETE:\n          if (!sentAuthToken && isOpen()) {\n            sendAuthToken(payload.socketToken);\n          }\n          break;\n        case LOGOUT_START:\n          sentAuthToken = false;\n          send('logout', null);\n          break;\n        default:\n          break;\n      }\n      next(action);\n    };\n  };\n}\n","import { OPEN_OVERLAY, CLOSE_OVERLAY, TOGGLE_OVERLAY } from '../constants/ActionTypes';\n\nconst initialState = null;\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case OPEN_OVERLAY:\n      return payload.overlay;\n    case TOGGLE_OVERLAY:\n      return state === payload.overlay ? null : payload.overlay;\n    case CLOSE_OVERLAY:\n      return null;\n    default:\n      return state;\n  }\n}\n","import { OPEN_ADD_MEDIA_MENU, CLOSE_ADD_MEDIA_MENU } from '../constants/ActionTypes';\n\nconst initialState = {\n  open: false,\n  position: { x: 0, y: 0 },\n  playlists: [],\n  type: null,\n  data: null,\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload, meta } = action;\n  switch (type) {\n    case OPEN_ADD_MEDIA_MENU:\n      return {\n        ...state,\n        open: true,\n        type: meta.type,\n        position: meta.position,\n        playlists: meta.playlists,\n        data: payload,\n      };\n    case CLOSE_ADD_MEDIA_MENU:\n      return initialState;\n    default:\n      return state;\n  }\n}\n","import {\n  ADVANCE,\n  ENTER_FULLSCREEN,\n  EXIT_FULLSCREEN,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  historyID: null,\n  media: null,\n  djID: null,\n  startTime: null,\n  isFullscreen: false,\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case ADVANCE:\n      if (payload) {\n        return {\n          ...state,\n          historyID: payload.historyID,\n          media: payload.media,\n          djID: payload.userID,\n          startTime: payload.timestamp,\n        };\n      }\n      return {\n        ...state,\n        historyID: null,\n        media: null,\n        djID: null,\n        startTime: null,\n      };\n    case ENTER_FULLSCREEN:\n      return {\n        ...state,\n        isFullscreen: true,\n      };\n    case EXIT_FULLSCREEN:\n      return {\n        ...state,\n        isFullscreen: false,\n      };\n    default:\n      return state;\n  }\n}\n","import except from 'except';\nimport {\n  INIT_STATE,\n  RECEIVE_MOTD,\n  RECEIVE_MESSAGE,\n  SEND_MESSAGE,\n  LOG,\n  REMOVE_MESSAGE,\n  REMOVE_USER_MESSAGES,\n  REMOVE_ALL_MESSAGES,\n  MUTE_USER,\n  UNMUTE_USER,\n} from '../constants/ActionTypes';\nimport reduceNotifications from './chat/notifications';\n\nconst initialState = {\n  /**\n   * Message of the Day, a message shown at the very top of the Chat box. Can be\n   * used for announcements, for example, or a welcome message.\n   */\n  motd: null,\n  /**\n   * All messages, including log messages and in-flight messages.\n   */\n  messages: [],\n  /**\n   * Mutes and their expiration times.\n   */\n  mutedUsers: {},\n};\n\nfunction removeInFlightMessage(messages, remove) {\n  return messages.filter(message => (\n    // keep if this message is not in flight\n    !message.inFlight ||\n    // or is not the message we're looking for\n    message.userID !== remove.userID ||\n    message.text !== remove.text\n  ));\n}\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  const { messages } = state;\n  switch (type) {\n    case INIT_STATE:\n      return {\n        ...state,\n        motd: payload.motd,\n      };\n    case RECEIVE_MOTD:\n      return {\n        ...state,\n        motd: payload,\n      };\n    case SEND_MESSAGE: {\n      const inFlightMessage = {\n        _id: `inflight${Date.now()}`,\n        type: 'chat',\n        user: payload.user,\n        userID: payload.user._id,\n        text: payload.message,\n        parsedText: payload.parsed,\n        timestamp: Date.now(),\n        inFlight: true,\n        // Will be resolved when the message is received instead.\n        isMention: false,\n      };\n      return {\n        ...state,\n        messages: messages.concat([inFlightMessage]),\n      };\n    }\n    case RECEIVE_MESSAGE: {\n      const message = {\n        ...payload.message,\n        type: 'chat',\n        inFlight: false,\n        parsedText: payload.parsed,\n        isMention: payload.isMention,\n      };\n\n      return {\n        ...state,\n        messages: removeInFlightMessage(messages, message).concat([message]),\n      };\n    }\n    case LOG: {\n      const logMessage = {\n        type: 'log',\n        _id: `log-${payload._id}`,\n        text: payload.text,\n      };\n      return {\n        ...state,\n        messages: messages.concat([logMessage]),\n      };\n    }\n\n    case REMOVE_MESSAGE:\n      return {\n        ...state,\n        messages: state.messages.filter(msg => msg._id !== payload._id),\n      };\n    case REMOVE_USER_MESSAGES:\n      return {\n        ...state,\n        messages: state.messages.filter(msg => msg.userID !== payload.userID),\n      };\n    case REMOVE_ALL_MESSAGES:\n      return {\n        ...state,\n        messages: [],\n      };\n\n    case MUTE_USER:\n      return {\n        ...state,\n        mutedUsers: {\n          ...state.mutedUsers,\n          [payload.userID]: {\n            mutedBy: payload.moderatorID,\n            expiresAt: payload.expiresAt,\n            expirationTimer: payload.expirationTimer,\n          },\n        },\n      };\n    case UNMUTE_USER:\n      return {\n        ...state,\n        mutedUsers: except(state.mutedUsers, payload.userID),\n      };\n\n    default: {\n      const nextMessages = reduceNotifications(messages, action);\n      if (nextMessages !== messages) {\n        return { ...state, messages: nextMessages };\n      }\n      return state;\n    }\n  }\n}\n","import {\n  BOOTH_SKIP,\n  USER_JOIN,\n  USER_LEAVE,\n  CHANGE_USERNAME,\n  USER_ADD_ROLES,\n  USER_REMOVE_ROLES,\n} from '../../constants/ActionTypes';\n\nexport default function reduceNotifications(state, { type, payload }) {\n  switch (type) {\n    case USER_JOIN:\n      return state.concat([{\n        type: 'userJoin',\n        _id: `userJoin-${payload.user._id}-${payload.timestamp}`,\n        user: payload.user,\n        timestamp: payload.timestamp,\n      }]);\n    case USER_LEAVE:\n      return state.concat([{\n        type: 'userLeave',\n        _id: `userLeave-${payload.user._id}-${payload.timestamp}`,\n        user: payload.user,\n        timestamp: payload.timestamp,\n      }]);\n    case CHANGE_USERNAME:\n      return state.concat([{\n        type: 'userNameChanged',\n        _id: `userNameChanged-${payload.userID}-${payload.timestamp}`,\n        user: payload.user,\n        newUsername: payload.username,\n        timestamp: payload.timestamp,\n      }]);\n    case USER_ADD_ROLES: // fall through\n    case USER_REMOVE_ROLES:\n      return state.concat([{\n        type: 'roleUpdate',\n        _id: `roleUpdate-${payload.timestamp}`,\n        user: payload.user,\n        updateType: type === USER_ADD_ROLES ? 'add' : 'remove',\n        roles: payload.roles,\n        timestamp: payload.timestamp,\n      }]);\n    case BOOTH_SKIP:\n      return state.concat([{\n        type: 'skip',\n        _id: `skip-${payload.timestamp}`,\n        user: payload.user,\n        moderator: payload.moderator,\n        reason: payload.reason,\n        timestamp: payload.timestamp,\n      }]);\n    default:\n      return state;\n  }\n}\n\n","import {\n  OPEN_EDIT_MEDIA_DIALOG, CLOSE_EDIT_MEDIA_DIALOG,\n  OPEN_PREVIEW_MEDIA_DIALOG, CLOSE_PREVIEW_MEDIA_DIALOG,\n  OPEN_LOGIN_DIALOG, CLOSE_LOGIN_DIALOG,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  editMedia: {\n    open: false,\n    payload: {},\n  },\n  previewMedia: {\n    open: false,\n    payload: {},\n  },\n  login: {\n    open: false,\n    payload: {},\n  },\n};\n\nconst openDialog = (state, name, payload, open = true) => ({\n  ...state,\n  [name]: {\n    open,\n    payload,\n  },\n});\nconst closeDialog = (state, name) =>\n  openDialog(state, name, {}, false);\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case OPEN_EDIT_MEDIA_DIALOG:\n      return openDialog(state, 'editMedia', payload);\n    case CLOSE_EDIT_MEDIA_DIALOG:\n      return closeDialog(state, 'editMedia');\n    case OPEN_PREVIEW_MEDIA_DIALOG:\n      return openDialog(state, 'previewMedia', payload);\n    case CLOSE_PREVIEW_MEDIA_DIALOG:\n      return closeDialog(state, 'previewMedia');\n    case OPEN_LOGIN_DIALOG:\n      return openDialog(state, 'login', payload);\n    case CLOSE_LOGIN_DIALOG:\n      return closeDialog(state, 'login');\n    default:\n      return state;\n  }\n}\n","import {\n  SHOW_IMPORT_PANEL,\n  SHOW_IMPORT_SOURCE_PANEL,\n  HIDE_IMPORT_SOURCE_PANEL,\n  SELECT_PLAYLIST,\n  SHOW_SEARCH_RESULTS,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  showPanel: false,\n  sourceType: null,\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case SHOW_IMPORT_PANEL:\n      return {\n        ...state,\n        showPanel: true,\n      };\n    case SELECT_PLAYLIST:\n    case SHOW_SEARCH_RESULTS:\n      return {\n        ...state,\n        showPanel: false,\n      };\n    case SHOW_IMPORT_SOURCE_PANEL:\n      return {\n        ...state,\n        sourceType: payload.sourceType,\n      };\n    case HIDE_IMPORT_SOURCE_PANEL:\n      return {\n        ...state,\n        sourceType: null,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  SHOW_IMPORT_PANEL,\n  SELECT_PLAYLIST,\n  SET_SEARCH_SOURCE,\n  SHOW_SEARCH_RESULTS,\n  SEARCH_START,\n  SEARCH_COMPLETE,\n  SEARCH_DELETE,\n} from '../constants/ActionTypes';\nimport { IDLE, LOADING, LOADED } from '../constants/LoadingStates';\n\nconst initialState = {\n  sourceType: 'youtube',\n  query: null,\n  showResults: false,\n  results: {},\n  loadingState: IDLE,\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case SHOW_SEARCH_RESULTS:\n      return {\n        ...state,\n        showResults: true,\n      };\n    case SEARCH_START:\n      return {\n        ...state,\n        query: payload.query,\n        results: {},\n        loadingState: LOADING,\n      };\n    case SEARCH_COMPLETE:\n      return {\n        ...state,\n        results: payload.results,\n        loadingState: LOADED,\n      };\n    case SET_SEARCH_SOURCE:\n      return {\n        ...state,\n        sourceType: payload.source,\n      };\n    case SEARCH_DELETE:\n      return {\n        ...state,\n        query: null,\n        loadingState: IDLE,\n        results: {},\n        showResults: false,\n      };\n    case SELECT_PLAYLIST:\n    case SHOW_IMPORT_PANEL:\n      return {\n        ...state,\n        showResults: false,\n      };\n    default:\n      return state;\n  }\n}\n","import assign from 'object-assign';\nimport except from 'except';\nimport escapeStringRegExp from 'escape-string-regexp';\nimport findIndex from 'array-findindex';\nimport indexBy from 'index-by';\nimport mapObj from 'object.map';\n\nimport {\n  INIT_STATE,\n\n  LOAD_ALL_PLAYLISTS_COMPLETE,\n  LOAD_PLAYLIST_START,\n  LOAD_PLAYLIST_COMPLETE,\n  PLAYLIST_CYCLED,\n  SELECT_PLAYLIST,\n  ACTIVATE_PLAYLIST_START,\n  ACTIVATE_PLAYLIST_COMPLETE,\n  CREATE_PLAYLIST_START,\n  CREATE_PLAYLIST_COMPLETE,\n  RENAME_PLAYLIST_START,\n  RENAME_PLAYLIST_COMPLETE,\n  DELETE_PLAYLIST_START,\n  DELETE_PLAYLIST_COMPLETE,\n  ADD_MEDIA_START,\n  ADD_MEDIA_COMPLETE,\n  REMOVE_MEDIA_START,\n  REMOVE_MEDIA_COMPLETE,\n  MOVE_MEDIA_START,\n  MOVE_MEDIA_COMPLETE,\n  UPDATE_MEDIA_START,\n  UPDATE_MEDIA_COMPLETE,\n  FILTER_PLAYLIST_ITEMS,\n  FILTER_PLAYLIST_ITEMS_COMPLETE,\n\n  DO_FAVORITE_COMPLETE,\n\n  SEARCH_START,\n  SEARCH_DELETE,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  playlists: {},\n  playlistItems: {},\n  activePlaylistID: null,\n  selectedPlaylistID: null,\n  currentFilter: {},\n};\n\nfunction deselectAll(playlists) {\n  return mapObj(playlists, playlist => (\n    playlist.selected\n      ? { ...playlist, selected: false }\n      : playlist\n  ));\n}\n\nfunction processInsert(list, insert, position) {\n  let insertIdx = 0;\n  if (position.at === 'end') {\n    insertIdx = list.length;\n  } else if (position.at === 'start') {\n    insertIdx = 0;\n  } else if (position.after != null && position.after !== -1) {\n    insertIdx = findIndex(list, media => media !== null && media._id === position.after) + 1;\n  }\n  return [\n    ...list.slice(0, insertIdx),\n    ...insert,\n    ...list.slice(insertIdx),\n  ];\n}\n\n// Moves a list of media items to a given position in the playlist.\nfunction processMove(list, movedMedia, location) {\n  // Take all moved media items out of the playlist\n  const wasMoved = indexBy(movedMedia, '_id');\n  const newPlaylist = list.filter(media => media === null || !wasMoved[media._id]);\n  // and add them back in at the correct place.\n  return processInsert(newPlaylist, movedMedia, location);\n}\n\nfunction updatePlaylist(state, playlistID, modify) {\n  const playlist = state.playlists[playlistID];\n  if (playlist) {\n    return {\n      ...state,\n      playlists: {\n        ...state.playlists,\n        [playlistID]: modify(playlist),\n      },\n    };\n  }\n  return state;\n}\n\n// Applies a function to the media list belonging to `playlistID` if it is found\n// locally, i.e. in either the active or the selected playlist.\nfunction updatePlaylistItems(state, playlistID, modify) {\n  const playlist = state.playlists[playlistID];\n  const media = state.playlistItems[playlistID];\n  if (playlist) {\n    let nextFilter = state.currentFilter;\n    if (state.selectedPlaylistID === playlistID && nextFilter) {\n      nextFilter = {\n        ...nextFilter,\n        items: modify(nextFilter.items || [], playlist),\n      };\n    }\n    return {\n      ...state,\n      playlistItems: {\n        ...state.playlistItems,\n        [playlistID]: modify(media || [], playlist),\n      },\n      currentFilter: nextFilter,\n    };\n  }\n  return state;\n}\n\nfunction updatePlaylistAndItems(state, playlistID, modifyPlaylist, modifyItems) {\n  const newState = updatePlaylist(state, playlistID, modifyPlaylist);\n  return updatePlaylistItems(newState, playlistID, modifyItems);\n}\n\nfunction setPlaylistLoading(state, id, loading = true) {\n  return updatePlaylist(state, id, playlist => ({\n    ...playlist,\n    loading,\n  }));\n}\n\nfunction fill(array, value) {\n  for (let i = 0, l = array.length; i < l; i += 1) {\n    array[i] = value; // eslint-disable-line no-param-reassign\n  }\n  return array;\n}\n\nfunction mergePlaylistPage(size, oldMedia, newMedia, { page, pageSize }) {\n  const media = fill(Array(size), null);\n  oldMedia.forEach((item, i) => {\n    media[i] = item;\n  });\n  newMedia.forEach((item, i) => {\n    media[(page * pageSize) + i] = item;\n  });\n  return media;\n}\n\nfunction filterCachedPlaylistItems(state, playlistID, filter) {\n  const rx = new RegExp(escapeStringRegExp(filter), 'i');\n  const playlist = state.playlistItems[playlistID];\n  if (playlist) {\n    return playlist.filter(item => item && (\n      rx.test(item.artist) || rx.test(item.title)\n    ));\n  }\n  return [];\n}\n\nexport default function reduce(state = initialState, action = {}) {\n  const {\n    type, payload, meta, error,\n  } = action;\n\n  switch (type) {\n    case INIT_STATE:\n      // Probably not signed in.\n      if (!payload.playlists) return state;\n\n      return {\n        ...state,\n        playlists: indexBy(payload.playlists.map(playlist => ({\n          ...playlist,\n          active: playlist._id === payload.activePlaylist,\n          selected: playlist._id === payload.activePlaylist,\n        })), '_id'),\n        // Preload the first item in the active playlist so it can be shown in\n        // the footer bar immediately. Else it would flash \"This playlist is empty\"\n        // for a moment.\n        playlistItems: payload.activePlaylist && payload.firstActivePlaylistItem ? {\n          ...state.playlistItems,\n          [payload.activePlaylist]: [payload.firstActivePlaylistItem],\n        } : state.playlistItems,\n        activePlaylistID: payload.activePlaylist,\n        selectedPlaylistID: payload.activePlaylist,\n      };\n    case LOAD_ALL_PLAYLISTS_COMPLETE:\n      return {\n        ...state,\n        playlists: indexBy(payload.playlists, '_id'),\n      };\n    case ACTIVATE_PLAYLIST_START:\n    // TODO use a different property here so we can show a loading icon on\n    // the \"Active\" button only, instead of on top of the entire playlist\n      return setPlaylistLoading(state, payload.playlistID);\n    case ACTIVATE_PLAYLIST_COMPLETE:\n      if (error) {\n        return setPlaylistLoading(state, meta.playlistID, false);\n      }\n\n      return {\n        ...state,\n        // set `active` property on all playlists\n        playlists: mapObj(state.playlists, playlist => ({\n          ...playlist,\n          loading: playlist._id === payload.playlistID ? false : playlist.loading,\n          active: playlist._id === payload.playlistID,\n        })),\n        activePlaylistID: payload.playlistID,\n      };\n    case SELECT_PLAYLIST:\n      return {\n        ...state,\n        // set `selected` property on playlists\n        playlists: mapObj(state.playlists, playlist => ({\n          ...playlist,\n          selected: playlist._id === payload.playlistID,\n        })),\n        selectedPlaylistID: payload.playlistID,\n      };\n    case SEARCH_START:\n    // We deselect playlists when doing a search, so the UI can switch to the\n    // search results view instead.\n      return {\n        ...state,\n        playlists: deselectAll(state.playlists),\n        selectedPlaylistID: null,\n      };\n    case SEARCH_DELETE:\n    // Select the active playlist when search results are closed while they\n    // were focused.\n      if (state.selectedPlaylistID) return state;\n\n      return {\n        ...state,\n        playlists: mapObj(state.playlists, playlist => ({\n          ...playlist,\n          selected: playlist.active,\n        })),\n        selectedPlaylistID: state.activePlaylistID,\n      };\n\n    case LOAD_PLAYLIST_START: {\n      if (meta.sneaky || meta.page !== 0 || state.playlistItems[payload.playlistID]) {\n        return state;\n      }\n\n      // Reserve space in the playlistItems array.\n      return updatePlaylistItems(\n        state,\n        payload.playlistID,\n        (items, playlist) => fill(Array(playlist.size), null)\n          .map((item, i) => items[i] || item),\n      );\n    }\n    case LOAD_PLAYLIST_COMPLETE:\n      if (error) {\n        return setPlaylistLoading(state, meta.playlistID, false);\n      }\n\n      return updatePlaylistAndItems(\n        state,\n        payload.playlistID,\n        playlist => ({ ...playlist, loading: false }),\n        items => mergePlaylistPage(meta.size, items, payload.media, meta),\n      );\n\n    case FILTER_PLAYLIST_ITEMS:\n    // Only the selected playlist can be filtered.\n      if (payload.playlistID !== state.selectedPlaylistID) {\n        return state;\n      }\n      if (!payload.filter) {\n        return {\n          ...state,\n          currentFilter: null,\n        };\n      }\n      return {\n        ...state,\n        currentFilter: {\n          playlistID: payload.playlistID,\n          filter: payload.filter,\n          items: filterCachedPlaylistItems(state, payload.playlistID, payload.filter),\n        },\n      };\n    case FILTER_PLAYLIST_ITEMS_COMPLETE: {\n    // Only the selected playlist can be filtered.\n      if (payload.playlistID !== state.selectedPlaylistID) {\n        return state;\n      }\n      const { currentFilter } = state;\n      const items = mergePlaylistPage(meta.size, currentFilter.items, payload.media, meta);\n      return {\n        ...state,\n        currentFilter: { ...currentFilter, items },\n      };\n    }\n\n    case PLAYLIST_CYCLED:\n      return updatePlaylistItems(state, payload.playlistID, (items, playlist) => {\n        const newItems = items.slice(1);\n        newItems[playlist.size - 1] = items[0]; // eslint-disable-line prefer-destructuring\n        return newItems;\n      });\n\n      // here be dragons\n      // TODO find a simpler way to store this stuff, that doesn't involve keeping\n      // millions of properties (six properties to be precise) in sync\n      // Playlists that are being created have a temporary ID that is used until the\n      // real ID comes back from the server.\n    case CREATE_PLAYLIST_START: {\n      const newPlaylist = {\n        _id: meta.tempId,\n        name: payload.name,\n        description: payload.description,\n        shared: payload.shared,\n        selected: true,\n        creating: true,\n      };\n      return {\n        ...state,\n        playlists: assign(\n          deselectAll(state.playlists),\n          { [meta.tempId]: newPlaylist },\n        ),\n        selectedPlaylistID: meta.tempId,\n      };\n    }\n    case CREATE_PLAYLIST_COMPLETE:\n      if (error) {\n        return {\n          ...state,\n          playlists: except(state.playlists, `${meta.tempId}`),\n        };\n      }\n\n      return {\n        ...state,\n        playlists: assign(\n          deselectAll(except(state.playlists, `${meta.tempId}`)),\n          {\n            [payload.playlist._id]: {\n              ...payload.playlist,\n              selected: true,\n            },\n          },\n        ),\n        selectedPlaylistID: payload.playlist._id,\n      };\n\n    case RENAME_PLAYLIST_START:\n      return setPlaylistLoading(state, payload.playlistID);\n    case RENAME_PLAYLIST_COMPLETE: {\n      if (error) {\n        return setPlaylistLoading(state, meta.playlistID, false);\n      }\n\n      const renamedPlaylist = state.playlists[payload.playlistID];\n      if (renamedPlaylist) {\n        return updatePlaylist(state, payload.playlistID, playlist => ({\n          ...playlist,\n          name: payload.name,\n          loading: false,\n        }));\n      }\n      return state;\n    }\n    case DELETE_PLAYLIST_START:\n      return setPlaylistLoading(state, payload.playlistID);\n    case DELETE_PLAYLIST_COMPLETE:\n      if (error) {\n        return setPlaylistLoading(state, meta.playlistID, false);\n      }\n\n      return {\n        ...state,\n        // When deleting the selected playlist, select the active playlist instead.\n        selectedPlaylistID: state.selectedPlaylistID === payload.playlistID\n          ? state.activePlaylistID\n          : state.selectedPlaylistID,\n        playlists: except(state.playlists, payload.playlistID),\n      };\n\n    case ADD_MEDIA_START:\n      return setPlaylistLoading(state, payload.playlistID);\n    case ADD_MEDIA_COMPLETE:\n      if (error) {\n        return setPlaylistLoading(state, meta.playlistID, false);\n      }\n\n      return updatePlaylistAndItems(\n        state,\n        payload.playlistID,\n        playlist => ({\n          ...playlist,\n          loading: false,\n          size: payload.newSize,\n        }),\n        items => processInsert(items, payload.appendedMedia, { after: payload.afterID }),\n      );\n    case DO_FAVORITE_COMPLETE:\n      return updatePlaylistAndItems(\n        state,\n        payload.playlistID,\n        playlist => ({\n          ...playlist,\n          size: payload.newSize,\n        }),\n        items => processInsert(items, payload.added, { at: 'end' }),\n      );\n\n    case UPDATE_MEDIA_START:\n      return updatePlaylistItems(state, payload.playlistID, items =>\n        items.map(media => (\n          media && media._id === payload.mediaID\n            ? { ...media, loading: true }\n            : media\n        )));\n    case UPDATE_MEDIA_COMPLETE:\n      return updatePlaylistItems(state, payload.playlistID, items =>\n        items.map(media => (\n          media && media._id === payload.mediaID\n            ? { ...media, ...payload.media, loading: false }\n            : media\n        )));\n\n    case MOVE_MEDIA_START: {\n      const isMovingMedia = indexBy(payload.medias, '_id');\n      return updatePlaylistItems(state, payload.playlistID, items =>\n        items.map(media => media && ({\n          ...media,\n          loading: isMovingMedia[media._id] || media.loading,\n        })));\n    }\n    case MOVE_MEDIA_COMPLETE:\n      return updatePlaylistItems(state, payload.playlistID, items =>\n        processMove(items, payload.medias, payload.location));\n\n    case REMOVE_MEDIA_START: {\n      const isRemovingMedia = indexBy(payload.medias, '_id');\n      return updatePlaylistItems(state, payload.playlistID, items =>\n        items.map(media => media && ({\n          ...media,\n          loading: isRemovingMedia[media._id] || media.loading,\n        })));\n    }\n    case REMOVE_MEDIA_COMPLETE: {\n      const isRemovedMedia = indexBy(payload.removedMedia, '_id');\n      return updatePlaylistAndItems(\n        state,\n        payload.playlistID,\n        playlist => ({ ...playlist, size: payload.newSize }),\n        items => items.filter(media => media === null || !isRemovedMedia[media._id]),\n      );\n    }\n    default:\n      return state;\n  }\n}\n","import { ADVANCE, LOAD_HISTORY_COMPLETE } from '../constants/ActionTypes';\n\nconst initialState = [];\n\nconst normalize = entry => ({\n  _id: entry._id || entry.historyID,\n  user: entry.user,\n  media: {\n    ...entry.media.media,\n    ...entry.media,\n  },\n  timestamp: new Date(entry.timestamp || entry.playedAt).getTime(),\n  stats: entry.stats || {\n    upvotes: entry.upvotes || [],\n    downvotes: entry.downvotes || [],\n    favorites: entry.favorites || [],\n  },\n});\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload, meta } = action;\n  switch (type) {\n    case LOAD_HISTORY_COMPLETE:\n      return payload.map(normalize);\n    case ADVANCE: {\n      const mostRecent = state[0];\n      // If the currently playing track is already in the history, remove it--\n      // it'll be added back on the next advance, and will be handled by the\n      // roomHistorySelector in the mean time.\n      if (mostRecent && payload && mostRecent._id === payload.historyID) {\n        return state.slice(1);\n      }\n      if (!meta || !meta.previous) {\n        return state;\n      }\n      return [normalize(meta.previous), ...state];\n    }\n    default:\n      return state;\n  }\n}\n","import { SELECT_PANEL } from '../constants/ActionTypes';\n\nconst initialState = 'chat';\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case SELECT_PANEL:\n      return payload.panel;\n    default:\n      return state;\n  }\n}\n","import { SOCKET_CONNECTED, SOCKET_DISCONNECTED } from '../constants/ActionTypes';\n\nconst initialState = {\n  connected: false,\n};\n\nexport default function serverReducer(state = initialState, action = {}) {\n  const { type } = action;\n\n  switch (type) {\n    case SOCKET_CONNECTED:\n      return { ...state, connected: true };\n    case SOCKET_DISCONNECTED:\n      return { ...state, connected: false };\n    default:\n      return state;\n  }\n}\n","import merge from 'deepmerge';\nimport compose from 'recompose/compose';\nimport {\n  LOAD_SETTINGS,\n  CHANGE_SETTING,\n} from '../constants/ActionTypes';\n\n// Some people have >100% volumes stored in their localStorage settings\n// because of a bug in Wave 1.4. This ensures that _everyone's_ volume\n// is between 0 and 100.\nfunction fixVolume(state) {\n  if (state.volume < 0) return { ...state, volume: 0 };\n  if (state.volume > 100) return { ...state, volume: 100 };\n  return state;\n}\n\nconst initialState = {\n  language: null,\n  mentionSound: true,\n  muted: false,\n  videoEnabled: true,\n  videoSize: 'large',\n  volume: 0,\n  notifications: {\n    userJoin: true,\n    userLeave: true,\n    userNameChanged: true,\n    skip: true,\n  },\n};\n\nfunction reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case LOAD_SETTINGS:\n    // Loading settings defaults to the initial state.\n      return {\n        ...initialState,\n        ...payload,\n        // Merge notification settings if we have new ones.\n        // Needed if new notification types were added since the last time\n        // settings were saved to localStorage.\n        notifications: payload ? {\n          ...initialState.notifications,\n          ...payload.notifications,\n        } : initialState.notifications,\n      };\n    case CHANGE_SETTING:\n      return merge(state, payload, { clone: true });\n    default:\n      return state;\n  }\n}\n\nexport default compose(fixVolume, reduce);\n","import { SET_TIMER, OFFSET } from '../constants/ActionTypes';\n\nconst initialState = {\n  timer: 0,\n  offset: 0,\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  switch (action.type) {\n    case SET_TIMER:\n      return { ...state, timer: action.payload };\n    case OFFSET:\n      return { ...state, offset: action.payload };\n    default:\n      return state;\n  }\n}\n","import except from 'except';\nimport indexBy from 'index-by';\nimport { combineReducers } from 'redux';\nimport {\n  INIT_STATE,\n  LOAD_ONLINE_USERS,\n  USER_JOIN,\n  USER_LEAVE,\n  CHANGE_USERNAME,\n  USER_ADD_ROLES,\n  USER_REMOVE_ROLES,\n  RECEIVE_GUEST_COUNT,\n} from '../constants/ActionTypes';\n\nfunction updateUser(state, userID, update) {\n  if (state[userID]) {\n    return {\n      ...state,\n      [userID]: update(state[userID]),\n    };\n  }\n  return state;\n}\n\nfunction guestsReducer(state = 0, action = {}) {\n  if (action.type === INIT_STATE) {\n    return action.payload.guests;\n  }\n  if (action.type === RECEIVE_GUEST_COUNT) {\n    return action.payload.guests;\n  }\n  return state;\n}\n\nfunction usersReducer(state = {}, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case INIT_STATE: // fall through\n    case LOAD_ONLINE_USERS:\n    // this is merged in instead of replacing the state, because sometimes the\n    // JOIN event from the current user comes in before the LOAD event, and then\n    // the current user is sometimes excluded from the state. it looks like this\n    // approach could cause problems, too, though.\n    // TODO maybe replace state instead anyway and merge in the current user?\n      return {\n        ...state,\n        ...indexBy(payload.users, '_id'),\n      };\n    case USER_JOIN:\n      return {\n        ...state,\n        [payload.user._id]: payload.user,\n      };\n    case USER_LEAVE:\n      return except(state, payload.userID);\n    case CHANGE_USERNAME:\n      return updateUser(state, payload.userID, user => ({\n        ...user,\n        username: payload.username,\n      }));\n    case USER_ADD_ROLES:\n      return updateUser(state, payload.userID, user => ({\n        ...user,\n        roles: [...user.roles, ...payload.roles],\n      }));\n    case USER_REMOVE_ROLES:\n      return updateUser(state, payload.userID, user => ({\n        ...user,\n        roles: user.roles.filter(role => payload.roles.indexOf(role) === -1),\n      }));\n    default:\n      return state;\n  }\n}\n\nconst reduce = combineReducers({\n  guests: guestsReducer,\n  users: usersReducer,\n});\n\nexport default reduce;\n","import {\n  ADVANCE,\n  LOAD_VOTES,\n  FAVORITE,\n  UPVOTE,\n  DOWNVOTE,\n  DO_FAVORITE_START,\n  DO_FAVORITE_COMPLETE,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  upvotes: [],\n  downvotes: [],\n  favorites: [],\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case ADVANCE:\n      if (payload && payload.stats) {\n        return {\n          ...state,\n          upvotes: payload.stats.upvotes,\n          downvotes: payload.stats.downvotes,\n          favorites: payload.stats.favorites,\n        };\n      }\n      return initialState;\n    case LOAD_VOTES:\n      return {\n        ...state,\n        upvotes: payload.upvotes,\n        downvotes: payload.downvotes,\n        favorites: payload.favorites,\n      };\n    case UPVOTE:\n      return {\n        ...state,\n        upvotes: [...state.upvotes, payload.userID],\n        downvotes: state.downvotes.filter(vote => vote !== payload.userID),\n      };\n    case DOWNVOTE:\n      return {\n        ...state,\n        upvotes: state.upvotes.filter(vote => vote !== payload.userID),\n        downvotes: [...state.downvotes, payload.userID],\n      };\n    case FAVORITE:\n      if (state.favorites.indexOf(payload.userID) === -1) {\n        return {\n          ...state,\n          favorites: [...state.favorites, payload.userID],\n        };\n      }\n      return state;\n    case DO_FAVORITE_START:\n      return state;\n    case DO_FAVORITE_COMPLETE:\n      return state;\n    default:\n      return state;\n  }\n}\n","import {\n  INIT_STATE,\n  WAITLIST_LOAD,\n  WAITLIST_LOCK,\n  WAITLIST_CLEAR,\n  WAITLIST_UPDATE,\n  WAITLIST_JOIN,\n  WAITLIST_LEAVE,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  waitlist: [],\n  locked: false,\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, payload } = action;\n  switch (type) {\n    case INIT_STATE:\n      return {\n        ...state,\n        waitlist: payload.waitlist,\n        locked: payload.waitlistLocked,\n      };\n    case WAITLIST_LOAD:\n      return {\n        ...state,\n        waitlist: payload.waitlist,\n        locked: payload.locked,\n      };\n    case WAITLIST_LOCK:\n      return {\n        ...state,\n        locked: payload.locked,\n      };\n    case WAITLIST_CLEAR:\n      return {\n        ...state,\n        waitlist: [],\n      };\n    case WAITLIST_JOIN:\n    case WAITLIST_LEAVE:\n    case WAITLIST_UPDATE:\n      return {\n        ...state,\n        waitlist: payload.waitlist,\n      };\n    default:\n      return state;\n  }\n}\n","import { SHOULD_RANDOMIZE } from './constants';\n\nconst initialState = {\n  shouldRandomize: false,\n};\n\nexport default function wlkReducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case SHOULD_RANDOMIZE:\n      return {\n        ...state,\n        shouldRandomize: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n","import {\n  SET_DRAWER_OPEN,\n  SET_USERS_DRAWER_OPEN,\n  TOGGLE_DRAWER_OPEN,\n} from '../constants/ActionTypes';\n\nconst initialState = {\n  drawer: false,\n  usersDrawer: false,\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case SET_DRAWER_OPEN:\n      return {\n        ...state,\n        drawer: action.payload,\n      };\n    case SET_USERS_DRAWER_OPEN:\n      return {\n        ...state,\n        usersDrawer: action.payload,\n      };\n    case TOGGLE_DRAWER_OPEN:\n      return {\n        ...state,\n        drawer: !state.drawer,\n      };\n    default:\n      return state;\n  }\n}\n","const initialState = {};\n\n// A reducer that calls each known Media Source's reducer.\nfunction reduceSources(state = initialState, action, sources) {\n  return Object.keys(sources).reduce((newState, sourceName) => {\n    const source = sources[sourceName];\n    if (!source.reducer) {\n      return newState;\n    }\n    return {\n      ...newState,\n      [sourceName]: source.reducer(newState[sourceName], action),\n    };\n  }, state);\n}\n\nexport default function createSourcesReducer(options) {\n  const mediaSources = options.mediaSources || {};\n  return function reducer(state, action) {\n    return reduceSources(state, action, mediaSources);\n  };\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst enhance = translate();\n\nconst ImportPanelHeader = ({\n  t,\n  className,\n  children,\n  onClosePanel,\n}) => (\n  <div className={cx('ImportPanelHeader', className)}>\n    <div className=\"ImportPanelHeader-content\">\n      {children}\n    </div>\n    <Tooltip title={t('close')} placement=\"top\">\n      <IconButton onClick={onClosePanel}>\n        <CloseIcon />\n      </IconButton>\n    </Tooltip>\n  </div>\n);\n\nImportPanelHeader.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node,\n  t: PropTypes.func.isRequired,\n  onClosePanel: PropTypes.func.isRequired,\n};\n\nexport default enhance(ImportPanelHeader);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport injectMediaSources from '../../../utils/injectMediaSources';\n\nconst ImportSourceBlock = ({\n  getMediaSource,\n  sourceType,\n  title,\n  children,\n}) => (\n  <div className=\"ImportSourceBlock PlaylistImport-source\">\n    <img\n      className=\"ImportSourceBlock-image\"\n      alt={title}\n      title={title}\n      src={getMediaSource(sourceType).logo}\n    />\n    {children}\n  </div>\n);\n\nImportSourceBlock.propTypes = {\n  getMediaSource: PropTypes.func.isRequired,\n  sourceType: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default injectMediaSources()(ImportSourceBlock);\n","import * as PlaylistActionCreators from './actions/PlaylistActionCreators';\nimport * as RequestActionCreators from './actions/RequestActionCreators';\nimport MediaList from './components/MediaList';\nimport VideoBackdrop from './components/Video/VideoBackdrop';\nimport ImportPanelHeader from './components/PlaylistManager/Import/ImportPanelHeader';\nimport ImportSourceBlock from './components/PlaylistManager/Import/ImportSourceBlock';\nimport Form from './components/Form';\nimport FormGroup from './components/Form/Group';\nimport TextField from './components/Form/TextField';\nimport FormButton from './components/Form/Button';\n\nexport * as constants from './constants';\n\nexport const components = {\n  MediaList,\n  VideoBackdrop,\n  ImportPanelHeader,\n  ImportSourceBlock,\n  Form,\n  FormGroup,\n  TextField,\n  FormButton,\n};\n\nexport const actions = {\n  playlists: PlaylistActionCreators,\n  request: RequestActionCreators,\n};\n","import onIdle from 'on-idle';\nimport PlaylistManager from '../containers/PlaylistManager';\nimport SettingsManager from '../containers/SettingsManager';\nimport RoomHistory from '../containers/RoomHistory';\n\nfunction loaded() {\n  return new Promise((resolve) => {\n    if (document.readyState === 'complete') {\n      resolve();\n    } else {\n      window.addEventListener('load', resolve);\n    }\n  });\n}\n\nexport default function preloadDesktop() {\n  loaded().then(() => {\n    onIdle(() => {\n      PlaylistManager.preload();\n      SettingsManager.preload();\n      RoomHistory.preload();\n    });\n  });\n}\n","import ms from 'ms';\nimport { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport {\n  userListSelector,\n  isModeratorSelector,\n} from '../../selectors/userSelectors';\nimport { banUser } from '../../actions/ModerationActionCreators';\n\nregister(\n  'ban',\n  'Ban a user. Syntax: \"/ban username duration\" or \"/ban username perma\"',\n  {\n    guard: isModeratorSelector,\n    action: (username, duration = '24h') => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to ban.'));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username,\n      );\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not online.`));\n      }\n      const permanent = duration === 'perma';\n      return dispatch(banUser(user, {\n        duration: ms(`${duration}`),\n        permanent,\n      }));\n    },\n  },\n);\n","import { register, findUser } from '../ChatCommands';\n\nimport {\n  userListSelector,\n  isModeratorSelector,\n  isManagerSelector,\n} from '../../selectors/userSelectors';\nimport {\n  deleteChatMessagesByUser,\n  deleteAllChatMessages,\n} from '../../actions/ModerationActionCreators';\nimport {\n  log,\n  setMotd,\n} from '../../actions/ChatActionCreators';\n\nregister(\n  'motd',\n  'Set the Message of the Day, displayed at the very top of the chat.',\n  {\n    guard: isManagerSelector,\n    action: (...args) => {\n      const motd = args.join(' ');\n      return setMotd(motd);\n    },\n  },\n);\n\nregister(\n  'clearchat',\n  'Delete all chat messages. ' +\n  'Pass a username (\"/clearchat kool_panda\") to only delete messages by that user.',\n  {\n    guard: isModeratorSelector,\n    action: (...args) => (dispatch, getState) => {\n      const username = args.join(' ').trim();\n      if (username) {\n        const user = findUser(userListSelector(getState()), username);\n        if (user) {\n          return dispatch(deleteChatMessagesByUser(user._id));\n        }\n        return dispatch(log(`User ${username} is not online right now.`));\n      }\n      return dispatch(deleteAllChatMessages());\n    },\n  },\n);\n","import { getCommands, register, canExecute } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\nimport startTutorial from '../../_wlk/startTutorial';\n\nregister('help', 'List available commands.', {\n  action: () => (dispatch, getState) => {\n    const available = getCommands();\n    dispatch(log('Available commands:'));\n    Object.keys(available).sort().forEach((name) => {\n      const command = available[name];\n      if (canExecute(getState(), command)) {\n        dispatch(log(`/${name} - ${command.description}`));\n      }\n    });\n  },\n});\n\nregister('tutorial', 'Start a tutorial.', {\n  action: () => () => {\n    startTutorial();\n  },\n});\n","import ms from 'ms';\nimport { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport { mutedUsersSelector } from '../../selectors/chatSelectors';\nimport {\n  userListSelector,\n  isModeratorSelector,\n} from '../../selectors/userSelectors';\nimport { muteUser, unmuteUser } from '../../actions/ModerationActionCreators';\n\nregister(\n  'mute',\n  'Mute a user in chat, preventing them from chatting. Syntax: \"/mute username duration\"',\n  {\n    guard: isModeratorSelector,\n    action: (username, duration = '30m') => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to mute.'));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username,\n      );\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not online.`));\n      }\n      return dispatch(muteUser(user, ms(`${duration}`)));\n    },\n  },\n);\n\nregister(\n  'unmute',\n  'Unmute a user in chat. Syntax: \"/unmute username\"',\n  {\n    guard: isModeratorSelector,\n    action: username => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to unmute.'));\n      }\n      const user = findUser(mutedUsersSelector(getState()), username);\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not muted.`));\n      }\n      return dispatch(unmuteUser(user));\n    },\n  },\n);\n","import { register } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\nimport {\n  setVolume,\n  mute,\n  unmute,\n} from '../../actions/PlaybackActionCreators';\nimport {\n  doUpvote,\n  doDownvote,\n} from '../../actions/VoteActionCreators';\nimport { set as setSetting } from '../../actions/SettingsActionCreators';\n\nregister(\n  'volume',\n  'Set the current volume.',\n  {\n    action: (value) => {\n      const volume = parseInt(value, 10);\n      if (!Number.isFinite(volume) || volume < 0 || volume > 100) {\n        return log('Volume must be a number between 0 and 100.');\n      }\n      return setVolume(volume);\n    },\n  },\n);\n\nregister('mute', 'Mute the volume.', {\n  action: () => mute(),\n});\n\nregister('unmute', 'Unmute the media volume.', {\n  action: () => unmute(),\n});\n\nregister('upvote', 'Upvote the current track.', {\n  action: () => doUpvote(),\n});\n\nregister('downvote', 'Downvote the current track.', {\n  action: () => doDownvote(),\n});\n\nregister('playback', 'Enable or disable playback. Syntax: \"/playback on|off\"', {\n  action: (type) => {\n    if (type.toLowerCase() === 'on') {\n      return setSetting('videoEnabled', true);\n    }\n    if (type.toLowerCase() === 'off') {\n      return setSetting('videoEnabled', false);\n    }\n    return log('Use \"/playback on\" to enable media playback or \"/playback off\" to disable it.');\n  },\n});\n","import { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport { rolesSelector } from '../../selectors/configSelectors';\nimport {\n  userListSelector,\n  isModeratorSelector,\n  isManagerSelector,\n} from '../../selectors/userSelectors';\nimport {\n  addUserRole,\n  removeUserRole,\n} from '../../actions/ModerationActionCreators';\nimport { toggleAdmin } from '../../actions/OverlayActionCreators';\n\nregister(\n  'roles',\n  'List roles.',\n  {\n    action: () => (dispatch, getState) => {\n      const allRoles = Object.keys(rolesSelector(getState()));\n      const roles = allRoles.filter(role => role.indexOf('.') === -1);\n      const permissions = allRoles.filter(role => role.indexOf('.') !== -1);\n\n      dispatch(log(`Roles: ${roles.join(', ')}`));\n      return dispatch(log(`Permissions: ${permissions.join(', ')}`));\n    },\n  },\n);\n\nregister(\n  'addrole',\n  'Assign a role to a user. Syntax: \"/addrole username role\"',\n  {\n    guard: isManagerSelector,\n    action: (username, role) => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to promote or demote.'));\n      }\n      if (!role) {\n        return dispatch(log(`Provide a role to assign to ${username}. Use /roles for a full list.`));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username,\n      );\n      return dispatch(addUserRole(user, role));\n    },\n  },\n);\n\nregister(\n  'removerole',\n  'Remove a role from a user. Syntax: \"/removerole username role\"',\n  {\n    guard: isManagerSelector,\n    action: (username, role) => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to promote or demote.'));\n      }\n      if (!role) {\n        return dispatch(log(`Provide a role assign to ${username}. Use /roles for a full list.`));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username,\n      );\n      return dispatch(removeUserRole(user, role));\n    },\n  },\n);\n\nregister(\n  'admin',\n  'Open the administration panel.',\n  {\n    guard: isModeratorSelector,\n    action: toggleAdmin,\n  },\n);\n","import { register } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\nimport { doChangeUsername } from '../../actions/UserActionCreators';\n\nregister(\n  'nick',\n  'Change your username.',\n  {\n    action: (name) => {\n      if (name.length < 3 || name.length > 32) {\n        return log('Username must be between 3 and 32 characters long.');\n      }\n\n      return doChangeUsername(name);\n    },\n  },\n);\n","import { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport {\n  joinWaitlist,\n  modClearWaitlist,\n  modLockWaitlist,\n  modUnlockWaitlist,\n} from '../../actions/WaitlistActionCreators';\nimport {\n  skipCurrentDJ,\n  removeWaitlistUser,\n  moveWaitlistUser,\n} from '../../actions/ModerationActionCreators';\nimport {\n  userListSelector,\n  isModeratorSelector,\n} from '../../selectors/userSelectors';\nimport {\n  waitlistUsersSelector,\n  djAndWaitlistUsersSelector,\n} from '../../selectors/waitlistSelectors';\n\nregister('skip', 'Skip the current DJ.', {\n  guard: isModeratorSelector,\n  action: (...args) => skipCurrentDJ(args ? args.join(' ') : '[No reason given]'),\n});\n\nregister(\n  'wladd',\n  'Add a user to the waitlist. Syntax: \"/wladd username\"',\n  {\n    guard: isModeratorSelector,\n    action: username => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to add to the waitlist. Syntax: \"/wladd username\"'));\n      }\n\n      const user = findUser(userListSelector(getState()), username);\n      if (user) {\n        return dispatch(joinWaitlist(user));\n      }\n      return dispatch(log(`User ${username} is not online right now.`));\n    },\n  },\n);\n\nregister(\n  'wlremove',\n  'Remove a user from the waitlist. Syntax: \"/wlremove username\"',\n  {\n    guard: isModeratorSelector,\n    action: username => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to remove from the waitlist. Syntax: \"/wlremove username\"'));\n      }\n\n      const user = findUser(\n        djAndWaitlistUsersSelector(getState()),\n        username,\n      );\n      if (user) {\n        return dispatch(removeWaitlistUser(user));\n      }\n      return dispatch(log(`User ${username} is not in the waitlist.`));\n    },\n  },\n);\n\nregister(\n  'wlclear',\n  'Remove everyone from the waitlist.',\n  { guard: isModeratorSelector, action: modClearWaitlist },\n);\n\nregister(\n  'wllock',\n  'Lock the waitlist.',\n  { guard: isModeratorSelector, action: modLockWaitlist },\n);\n\nregister(\n  'wlunlock',\n  'Unlock the waitlist.',\n  { guard: isModeratorSelector, action: modUnlockWaitlist },\n);\n\nregister(\n  'wlmove',\n  'Move a user to a different position in the waitlist. ' +\n  'Syntax: \"/wlmove username position\"',\n  {\n    guard: isModeratorSelector,\n    action: (username, posStr) => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to move in the waitlist. Syntax: \"/wlmove username position\"'));\n      }\n      const position = parseInt(posStr, 10) - 1;\n      if (typeof position !== 'number' || position < 0) {\n        return dispatch(log(`Provide a position to move @${username} to. Syntax: \"/wlmove username position\"`));\n      }\n\n      const user = findUser(\n        waitlistUsersSelector(getState()),\n        username,\n      );\n      if (user) {\n        return dispatch(moveWaitlistUser(user, position));\n      }\n      return dispatch(log(`User ${username} is not in the waitlist.`));\n    },\n  },\n);\n","/* eslint-disable import/first */\nimport './polyfills';\nimport React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { AppContainer as HotContainer } from 'react-hot-loader';\nimport { create as createJss } from 'jss';\nimport { jssPreset } from '@material-ui/core/styles';\nimport JssProvider from 'react-jss/lib/JssProvider';\n/* eslint-enable */\nimport createLocale from './locale';\nimport AppContainer from './containers/App';\nimport { get as readSession } from './utils/Session';\nimport createGenerateClassName from './utils/createGenerateClassName';\nimport configureStore from './store/configureStore';\nimport { initState, socketConnect, setSessionToken } from './actions/LoginActionCreators';\nimport { languageSelector } from './selectors/settingSelectors';\nimport * as api from './api';\nimport preloadDesktop from './utils/preloadDesktop';\n// Register default chat commands.\nimport './utils/commands';\n\nexport default class Uwave {\n  options = {};\n  sources = {};\n  sessionToken = null;\n  renderTarget = null;\n  aboutPageComponent = null;\n\n  jss = createJss(jssPreset());\n  generateClassName = createGenerateClassName();\n\n  constructor(options = {}, session = readSession()) {\n    this.options = options;\n    this.sessionToken = session;\n    this.ready = new Promise((resolve) => {\n      this.resolveReady = resolve;\n    });\n\n    Object.assign(this, api.constants);\n    Object.assign(this, api.components);\n    Object.assign(this, api.actions);\n\n    if (module.hot) {\n      const { getComponent } = this;\n      this.getComponent = () => (\n        <HotContainer>{getComponent.call(this)}</HotContainer>\n      );\n      const uw = this;\n      module.hot.accept('./containers/App', () => {\n        if (uw.renderTarget) {\n          uw.renderToDOM(uw.renderTarget);\n        }\n      });\n    }\n  }\n\n  use(plugin) {\n    plugin(this);\n    return this;\n  }\n\n  source(sourcePlugin, opts = {}) {\n    const sourceFactory = sourcePlugin.default || sourcePlugin;\n\n    const type = typeof sourceFactory;\n    if (type !== 'function' && type !== 'object') {\n      throw new TypeError(`Source plugin should be a function, got ${type}`);\n    }\n\n    const source = type === 'function'\n      ? sourceFactory(this, opts)\n      : sourceFactory;\n\n    if (typeof source.name !== 'string') {\n      throw new TypeError('Source plugin did not provide a name');\n    }\n\n    this.sources[source.name] = source;\n\n    return source;\n  }\n\n  setAboutPageComponent(AboutPageComponent) {\n    this.aboutPageComponent = AboutPageComponent;\n  }\n  getAboutPageComponent() {\n    return this.aboutPageComponent;\n  }\n\n  build() {\n    this.store = configureStore(\n      { config: this.options },\n      { mediaSources: this.sources, socketUrl: this.options.socketUrl },\n    );\n\n    const localePromise = createLocale(languageSelector(this.store.getState()));\n\n    if (this.sessionToken) {\n      this.store.dispatch(setSessionToken(this.sessionToken));\n      this.sessionToken = null;\n    }\n\n    if (typeof window !== 'undefined') {\n      this.jss.setup({\n        insertionPoint: document.querySelector('#jss'),\n      });\n    }\n\n    if (typeof matchMedia !== 'undefined' && matchMedia('(min-width: 768px)').matches) {\n      this.ready.then(() => {\n        preloadDesktop();\n      });\n    }\n\n    this.store.dispatch(socketConnect());\n    return Promise.all([\n      localePromise,\n      this.store.dispatch(initState()),\n    ]).then(([locale]) => {\n      this.locale = locale;\n      this.resolveReady();\n    });\n  }\n\n  getComponent() {\n    return (\n      <Provider store={this.store}>\n        <JssProvider jss={this.jss} generateClassName={this.generateClassName}>\n          <AppContainer\n            mediaSources={this.sources}\n            locale={this.locale}\n            uwave={this}\n          />\n        </JssProvider>\n      </Provider>\n    );\n  }\n\n  renderToDOM(target) {\n    if (!this.store) {\n      this.build();\n    }\n\n    this.renderTarget = target;\n    const element = (\n      <React.StrictMode>\n        {this.getComponent()}\n      </React.StrictMode>\n    );\n    render(element, target);\n  }\n}\n","import { applyMiddleware, combineReducers, compose, createStore } from 'redux';\nimport thunk from 'redux-thunk';\nimport logger from 'redux-logger';\nimport { batchedSubscribe } from 'redux-batched-subscribe';\nimport nanoraf from 'nanoraf';\nimport raf from 'raf';\nimport persistSettings from './persistSettings';\nimport webApiRequest from './request';\nimport webApiSocket from './socket';\nimport * as reducers from '../reducers';\nimport createSourcesReducer from '../reducers/createSourcesReducer';\n\n// Setting up a store in Redux can be kind of messy because there are a lot of\n// things coming together in one place. Luckily, we don't have _that_ much going\n// on in Wave, so it's kind of manageable.\n\nexport default function createUwaveStore(initialState = {}, options = {}) {\n  const isTesting = process.env.NODE_ENV === 'testing';\n  const enableLogging = process.env.NODE_ENV !== 'production' && !isTesting;\n\n  const rerender = nanoraf((notify) => {\n    notify();\n  }, raf);\n\n  const middleware = [\n    // Redux-Thunk allows dispatching a function to the store instead of an\n    // action object. These functions can then dispatch action objects as they\n    // please. It's used primarily for async actions: for example, actions that\n    // send HTTP requests. Those might dispatch an action object once the\n    // request finishes.\n    thunk,\n    // This allows dispatching REQUEST_START actions to the store, which will\n    // then be executed and handled as HTTP requests by the middleware.\n    webApiRequest(),\n    !isTesting && webApiSocket({ url: options.socketUrl }),\n    // Redux-Logger logs state changes to the console, including the\n    // Before-state, the Action object, and the After-state. Invaluable for\n    // debugging :)\n    enableLogging && logger,\n  ].filter(Boolean);\n\n  let currentReducers = {\n    ...reducers,\n    sources: createSourcesReducer(options),\n  };\n\n  const store = createStore(\n    // Finish up the reducer function by combining all the different reducers\n    // into one big reducer that works on one big state object.\n    combineReducers(currentReducers),\n    initialState,\n    compose(\n      // Adds all of the above  middleware features to the store.\n      applyMiddleware(...middleware),\n      // Keeps the user's settings in localStorage, so that a refresh doesn't\n      // reset all your preferences.\n      // This is done separately from the Middleware features, because it changes\n      // the _initial_ `settings` state, something that Middleware can't do.\n      persistSettings,\n      batchedSubscribe(rerender),\n    ),\n  );\n\n  if (process.env.NODE_ENV === 'development' && module.hot) {\n    // Update the store's reducer function when the reducer source code has\n    // changed. See /tasks/watch.js for more on Hot Reloading!\n    // This is only used when debugging, not in a deployed app.\n    module.hot.accept('../reducers', () => {\n      store.replaceReducer(combineReducers({\n        ...reducers,\n        sources: createSourcesReducer(options),\n      }));\n    });\n  }\n\n  store.mount = (name, reducer) => {\n    currentReducers = {\n      ...currentReducers,\n      [name]: reducer,\n    };\n    store.replaceReducer(combineReducers(currentReducers));\n  };\n\n  return store;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport YouTube from '@u-wave/react-youtube';\n\nexport default class YouTubePlayerEmbed extends React.Component {\n  static propTypes = {\n    active: PropTypes.bool.isRequired,\n    media: PropTypes.object,\n    seek: PropTypes.number,\n    volume: PropTypes.number,\n    controllable: PropTypes.bool,\n    onPlay: PropTypes.func,\n  };\n\n  static defaultProps = {\n    controllable: false,\n  };\n\n  handleYTPlay = () => {\n    if (this.props.onPlay) {\n      this.props.onPlay();\n    }\n  };\n\n  handleYTPause = (event) => {\n    if (!this.props.controllable && this.props.active) {\n      event.target.playVideo();\n    }\n  };\n\n  refPlayer = (player) => {\n    this.player = player;\n  };\n\n  render() {\n    const {\n      active, media, seek, volume, controllable,\n    } = this.props;\n\n    return (\n      <YouTube\n        ref={this.refPlayer}\n        video={active ? media.sourceID : null}\n        width=\"100%\"\n        height=\"100%\"\n        autoplay\n        modestBranding\n        volume={volume / 100}\n        playbackRate={1}\n        controls={controllable}\n        showRelatedVideos={false}\n        showInfo={false}\n        annotations={false}\n        startSeconds={(seek || 0) + (media.start || 0)}\n        endSeconds={media.end || media.duration}\n        onPause={this.handleYTPause}\n        onPlaying={this.handleYTPlay}\n      />\n    );\n  }\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport YouTubePlayerEmbed from './PlayerEmbed';\n\nconst YouTubePlayer = ({\n  active,\n  className,\n  enabled,\n  mode,\n  media,\n  seek,\n  volume,\n  onPlay,\n}) => {\n  const modeClass = `src-youtube-Player--${mode}`;\n\n  return (\n    <div className={cx('src-youtube-Player', modeClass, className)} hidden={!active}>\n      {enabled && (\n        <YouTubePlayerEmbed\n          media={media}\n          active={active}\n          seek={Math.round(seek)}\n          volume={volume}\n          controllable={mode === 'preview'}\n          onPlay={onPlay}\n        />\n      )}\n    </div>\n  );\n};\n\nYouTubePlayer.propTypes = {\n  className: PropTypes.string,\n  mode: PropTypes.oneOf(['small', 'large', 'preview']),\n  active: PropTypes.bool.isRequired,\n  enabled: PropTypes.bool,\n  media: PropTypes.object,\n  seek: PropTypes.number,\n  volume: PropTypes.number,\n  onPlay: PropTypes.func,\n};\n\nexport default YouTubePlayer;\n","export const PLAYLIST = 'youtube/import/PLAYLIST';\nexport const CHANNEL = 'youtube/import/CHANNEL';\n\nexport const GET_IMPORTABLE_PLAYLIST_START = 'youtube/import/GET_IMPORTABLE_PLAYLIST_START';\nexport const GET_IMPORTABLE_PLAYLIST_COMPLETE = 'youtube/import/GET_IMPORTABLE_PLAYLIST_COMPLETE';\n\nexport const GET_CHANNEL_PLAYLISTS_START = 'youtube/import/GET_CHANNEL_PLAYLISTS_START';\nexport const GET_CHANNEL_PLAYLISTS_COMPLETE = 'youtube/import/GET_CHANNEL_PLAYLISTS_COMPLETE';\n\nexport const IMPORT_PLAYLIST_START = 'youtube/import/IMPORT_PLAYLIST_START';\nexport const IMPORT_PLAYLIST_COMPLETE = 'youtube/import/IMPORT_PLAYLIST_COMPLETE';\n","import { get, post } from '../../actions/RequestActionCreators';\n\nimport {\n  createPlaylistStart,\n  createPlaylistComplete,\n} from '../../actions/PlaylistActionCreators';\n\nimport {\n  GET_IMPORTABLE_PLAYLIST_START,\n  GET_IMPORTABLE_PLAYLIST_COMPLETE,\n  GET_CHANNEL_PLAYLISTS_START,\n  GET_CHANNEL_PLAYLISTS_COMPLETE,\n  IMPORT_PLAYLIST_START,\n  IMPORT_PLAYLIST_COMPLETE,\n} from './constants';\n\nfunction getImportablePlaylistStart(url) {\n  return {\n    type: GET_IMPORTABLE_PLAYLIST_START,\n    payload: { url },\n  };\n}\n\nfunction getImportablePlaylistComplete(url, playlist, items) {\n  return {\n    type: GET_IMPORTABLE_PLAYLIST_COMPLETE,\n    payload: { url, playlist, items },\n  };\n}\n\nexport function getImportablePlaylist(url) {\n  return get('/import/youtube/playlist', {\n    qs: { url },\n    onStart: () => getImportablePlaylistStart(url),\n    onComplete: ({ playlist, items }) =>\n      getImportablePlaylistComplete(url, playlist, items),\n    onError: error => ({\n      type: GET_IMPORTABLE_PLAYLIST_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { url },\n    }),\n  });\n}\n\nfunction importPlaylistStart(id, name) {\n  return (dispatch) => {\n    dispatch(createPlaylistStart({ name }, `yt:${id}`));\n    dispatch({\n      type: IMPORT_PLAYLIST_START,\n      payload: { id, name },\n    });\n  };\n}\n\nfunction importPlaylistComplete(id, playlist) {\n  return (dispatch) => {\n    dispatch({\n      type: IMPORT_PLAYLIST_COMPLETE,\n      payload: { playlist },\n      meta: { id },\n    });\n    dispatch(createPlaylistComplete(playlist, `yt:${id}`));\n  };\n}\n\nexport function importPlaylist(id, name) {\n  return post('/import/youtube/importplaylist', { id, name }, {\n    onStart: () => importPlaylistStart(id, name),\n    onComplete: playlist => importPlaylistComplete(id, playlist),\n    onError: error => ({\n      type: IMPORT_PLAYLIST_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { id },\n    }),\n  });\n}\n\nfunction getChannelPlaylistsStart(url) {\n  return {\n    type: GET_CHANNEL_PLAYLISTS_START,\n    payload: { url },\n  };\n}\n\nfunction getChannelPlaylistsComplete(channel, playlists) {\n  return {\n    type: GET_CHANNEL_PLAYLISTS_COMPLETE,\n    payload: {\n      channel,\n      playlists,\n    },\n  };\n}\n\nexport function getChannelPlaylists(url) {\n  return get('/import/youtube/channel', {\n    qs: { url },\n    onStart: () => getChannelPlaylistsStart(url),\n    onComplete: ({ channel, playlists }) =>\n      getChannelPlaylistsComplete(channel, playlists),\n    onError: error => ({\n      type: GET_CHANNEL_PLAYLISTS_COMPLETE,\n      error: true,\n      payload: error,\n      meta: { url },\n    }),\n  });\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PlaylistIcon from '@material-ui/icons/PlaylistPlay';\nimport ImportSourceBlock from '../../components/PlaylistManager/Import/ImportSourceBlock';\nimport Form from '../../components/Form';\nimport FormGroup from '../../components/Form/Group';\nimport TextField from '../../components/Form/TextField';\nimport Button from '../../components/Form/Button';\n\nimport {\n  getChannelPlaylists,\n  getImportablePlaylist,\n} from './actions';\n\nexport default class YoutubeImportForm extends React.Component {\n  static propTypes = {\n    onShowImportPanel: PropTypes.func.isRequired,\n    onHideImportPanel: PropTypes.func.isRequired,\n  };\n\n  static contextTypes = {\n    store: PropTypes.object,\n  };\n\n  dispatch(action) {\n    return this.context.store.dispatch(action);\n  }\n\n  handleImportChannel = (e) => {\n    e.preventDefault();\n    const url = this.channel.value;\n    this.dispatch(getChannelPlaylists(url)).catch(() => {\n      this.props.onHideImportPanel();\n    });\n    this.props.onShowImportPanel();\n  };\n\n  handleImportPlaylist = (e) => {\n    e.preventDefault();\n    const url = this.playlist.value;\n\n    this.dispatch(getImportablePlaylist(url)).catch(() => {\n      this.props.onHideImportPanel();\n    });\n    this.props.onShowImportPanel();\n  };\n\n  refChannel = (channel) => {\n    this.channel = channel;\n  };\n\n  refPlaylist = (playlist) => {\n    this.playlist = playlist;\n  };\n\n  render() {\n    return (\n      <ImportSourceBlock\n        title=\"YouTube\"\n        sourceType=\"youtube\"\n      >\n        <Form onSubmit={this.handleImportChannel}>\n          <FormGroup>\n            <TextField\n              ref={this.refChannel}\n              placeholder=\"Channel URL\"\n              icon={<PlaylistIcon nativeColor=\"#9f9d9e\" />}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Button>Import From Channel</Button>\n          </FormGroup>\n        </Form>\n        <Form onSubmit={this.handleImportPlaylist}>\n          <FormGroup>\n            <TextField\n              ref={this.refPlaylist}\n              placeholder=\"Playlist URL\"\n              icon={<PlaylistIcon nativeColor=\"#9f9d9e\" />}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Button>Import Playlist</Button>\n          </FormGroup>\n        </Form>\n      </ImportSourceBlock>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ImportPanelHeader from '../../components/PlaylistManager/Import/ImportPanelHeader';\n\nconst LoadingPanel = ({ onClosePanel }) => (\n  <div className=\"ImportPanel\">\n    <ImportPanelHeader onClosePanel={onClosePanel} />\n    <div className=\"ImportPanel-loading\">\n      <CircularProgress size=\"100%\" />\n    </div>\n  </div>\n);\n\nLoadingPanel.propTypes = {\n  onClosePanel: PropTypes.func.isRequired,\n};\n\nexport default LoadingPanel;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport ImportIcon from '@material-ui/icons/PlaylistAdd';\n\nconst PlaylistRow = ({\n  className,\n  playlist,\n  onImport,\n  // etc\n  ...attrs\n}) => {\n  const thumbnail = (\n    <div className=\"MediaListRow-thumb\">\n      <img\n        className=\"MediaListRow-image\"\n        key={playlist.id}\n        src={playlist.thumbnail}\n        alt=\"\"\n      />\n    </div>\n  );\n\n  return (\n    <div\n      className={cx('MediaListRow', 'src-youtube-PlaylistRow', className)}\n      {...attrs}\n    >\n      {thumbnail}\n      <div className=\"src-youtube-PlaylistRow-info\" title={playlist.description}>\n        <div className=\"src-youtube-PlaylistRow-name\">\n          {playlist.name}\n        </div>\n        <div className=\"src-youtube-PlaylistRow-size\">\n          Items: {playlist.size}\n        </div>\n      </div>\n      <IconButton className=\"src-youtube-PlaylistRow-import\" onClick={onImport}>\n        <ImportIcon />\n      </IconButton>\n    </div>\n  );\n};\n\nPlaylistRow.propTypes = {\n  className: PropTypes.string,\n  playlist: PropTypes.object.isRequired,\n  onImport: PropTypes.func.isRequired,\n};\n\nexport default PlaylistRow;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport List from 'react-list';\n\nimport ImportPanelHeader from '../../components/PlaylistManager/Import/ImportPanelHeader';\n\nimport PlaylistRow from './PlaylistRow';\n\nexport default class ChannelPanel extends React.Component {\n  static propTypes = {\n    importingChannelTitle: PropTypes.string.isRequired,\n    importablePlaylists: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n    onImportPlaylist: PropTypes.func.isRequired,\n    onClosePanel: PropTypes.func.isRequired,\n  };\n\n  renderRow = (index, key) => {\n    const playlist = this.props.importablePlaylists[index];\n    return (\n      <PlaylistRow\n        key={key}\n        className={index % 2 === 0 ? 'MediaListRow--alternate' : ''}\n        playlist={playlist}\n        onImport={() => this.props.onImportPlaylist(playlist.sourceID, playlist.name)}\n      />\n    );\n  };\n\n  render() {\n    const {\n      importingChannelTitle,\n      importablePlaylists,\n      onClosePanel,\n    } = this.props;\n\n    return (\n      <div className=\"ImportPanel ChannelPanel\">\n        <ImportPanelHeader onClosePanel={onClosePanel}>\n          {`${importingChannelTitle}'s Playlists`}\n        </ImportPanelHeader>\n        <div className=\"MediaList ImportPanel-body\">\n          <List\n            type=\"uniform\"\n            length={importablePlaylists.length}\n            itemRenderer={this.renderRow}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport ImportIcon from '@material-ui/icons/PlaylistAdd';\nimport MediaList from '../../components/MediaList';\nimport AddToPlaylistAction from '../../components/MediaList/Actions/AddToPlaylist';\nimport ImportPanelHeader from '../../components/PlaylistManager/Import/ImportPanelHeader';\n\nconst selectionOrOne = (media, selection) => {\n  if (selection.isSelected(media)) {\n    return selection.get();\n  }\n  return [media];\n};\n\nexport default class YouTubeImportPlaylistPanel extends React.Component {\n  static propTypes = {\n    importingPlaylist: PropTypes.shape({\n      sourceID: PropTypes.string,\n      name: PropTypes.string,\n    }).isRequired,\n    importingPlaylistItems: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n    onImportPlaylist: PropTypes.func.isRequired,\n    onOpenAddMediaMenu: PropTypes.func.isRequired,\n    onClosePanel: PropTypes.func.isRequired,\n  };\n\n  handleImportFull = () => {\n    const {\n      importingPlaylist,\n      onImportPlaylist,\n    } = this.props;\n    onImportPlaylist(importingPlaylist.sourceID, importingPlaylist.name);\n  };\n\n  render() {\n    const {\n      importingPlaylist,\n      importingPlaylistItems,\n      onOpenAddMediaMenu,\n      onClosePanel,\n    } = this.props;\n\n    return (\n      <div className=\"ImportPanel src-youtube-PlaylistPanel\">\n        <ImportPanelHeader onClosePanel={onClosePanel}>\n          <div className=\"src-youtube-PlaylistPanel-header\">\n            <div className=\"src-youtube-PlaylistPanel-name\">\n              {importingPlaylist.name}\n            </div>\n            <Tooltip title={`Import All (${importingPlaylistItems.length})`} placement=\"top\">\n              <IconButton onClick={this.handleImportFull}>\n                <ImportIcon className=\"src-youtube-PlaylistPanel-importIcon\" />\n              </IconButton>\n            </Tooltip>\n          </div>\n        </ImportPanelHeader>\n        <MediaList\n          className=\"ImportPanel-body\"\n          media={importingPlaylistItems}\n          makeActions={(media, selection) => (\n            <React.Fragment>\n              <AddToPlaylistAction\n                key=\"add\"\n                onAdd={position => onOpenAddMediaMenu(selectionOrOne(media, selection), position)}\n              />\n            </React.Fragment>\n          )}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { IDLE, LOADING, LOADED } from '../../constants/LoadingStates';\n\nimport { addMediaMenu as openAddMediaMenu } from '../../actions/PlaylistActionCreators';\nimport { PLAYLIST, CHANNEL } from './constants';\nimport { importPlaylist } from './actions';\nimport LoadingPanel from './LoadingPanel';\nimport ChannelPanel from './ChannelPanel';\nimport PlaylistPanel from './PlaylistPanel';\n\nconst mapStateToProps = () => ({});\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onImportPlaylist: importPlaylist,\n  onOpenAddMediaMenu: openAddMediaMenu,\n}, dispatch);\n\nconst YouTubeImportPanel = ({ type, importingState, ...props }) => {\n  if (importingState === LOADED) {\n    if (type === PLAYLIST) {\n      return <PlaylistPanel {...props} />;\n    }\n    return <ChannelPanel {...props} />;\n  }\n  return <LoadingPanel {...props} />;\n};\n\nYouTubeImportPanel.propTypes = {\n  type: PropTypes.oneOf([PLAYLIST, CHANNEL]).isRequired,\n  importingState: PropTypes.oneOf([IDLE, LOADING, LOADED]),\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(YouTubeImportPanel);\n","import { IDLE, LOADING, LOADED } from '../../constants/LoadingStates';\n\nimport {\n  PLAYLIST,\n  CHANNEL,\n  GET_IMPORTABLE_PLAYLIST_START,\n  GET_IMPORTABLE_PLAYLIST_COMPLETE,\n  GET_CHANNEL_PLAYLISTS_START,\n  GET_CHANNEL_PLAYLISTS_COMPLETE,\n} from './constants';\n\nconst initialState = {\n  type: null,\n  importingState: IDLE,\n  importingPlaylistName: '',\n  importingPlaylistItems: [],\n  importingChannelTitle: '',\n  importablePlaylists: [],\n};\n\nexport default function reduce(state = initialState, action = {}) {\n  const { type, error, payload } = action;\n  switch (type) {\n    case GET_IMPORTABLE_PLAYLIST_START:\n      return {\n        ...state,\n        type: PLAYLIST,\n        importingState: LOADING,\n      };\n    case GET_IMPORTABLE_PLAYLIST_COMPLETE:\n      if (error) {\n        return {\n          ...state,\n          type: null,\n          importingState: IDLE,\n        };\n      }\n\n      return {\n        ...state,\n        importingState: LOADED,\n        importingPlaylist: payload.playlist,\n        importingPlaylistItems: payload.items,\n      };\n    case GET_CHANNEL_PLAYLISTS_START:\n      return {\n        ...state,\n        type: CHANNEL,\n        importingState: LOADING,\n      };\n    case GET_CHANNEL_PLAYLISTS_COMPLETE:\n      if (error) {\n        return {\n          ...state,\n          type: null,\n          importingState: IDLE,\n        };\n      }\n\n      return {\n        ...state,\n        importingState: LOADED,\n        importingChannelTitle: payload.channel.title,\n        importablePlaylists: payload.playlists,\n      };\n    default:\n      return state;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ArtistIcon from '@material-ui/icons/Headset';\nimport TitleIcon from '@material-ui/icons/MusicNote';\n\nconst iconStyles = {\n  float: 'left',\n  marginRight: 3,\n};\n\nconst SongInfo = ({\n  artist, title, artistUrl, trackUrl,\n}) => (\n  <div className=\"src-soundcloud-SongInfo\">\n    <a\n      className=\"src-soundcloud-SongInfo-link src-soundcloud-SongInfo-link--artist\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      href={artistUrl}\n      title={artist}\n    >\n      <ArtistIcon style={iconStyles} />\n      {artist}\n    </a>\n    <a\n      className=\"src-soundcloud-SongInfo-link src-soundcloud-SongInfo-link--track\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      href={trackUrl}\n      title={title}\n    >\n      <TitleIcon style={iconStyles} />\n      {title}\n    </a>\n  </div>\n);\n\nSongInfo.propTypes = {\n  artist: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  artistUrl: PropTypes.string.isRequired,\n  trackUrl: PropTypes.string.isRequired,\n};\n\nexport default SongInfo;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport createDebug from 'debug';\nimport { translate } from 'react-i18next';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport SongInfo from './SongInfo';\nimport soundcloudLogo from '../../../assets/img/soundcloud-inline.png';\n\nconst debug = createDebug('uwave:component:video:soundcloud');\n\nconst CLIENT_ID = '9d883cdd4c3c54c6dddda2a5b3a11200';\n\nfunction getErrorMessage(err) {\n  if (err.name === 'MediaError') {\n    if (err.code === 2) {\n      return 'soundcloud.error.network';\n    }\n    if (err.code === 3) {\n      return 'soundcloud.error.decode';\n    }\n    if (err.code === 4 && /404|not found/i.test(err.message)) {\n      return 'soundcloud.error.notFound';\n    }\n  }\n  return err.message;\n}\n\nconst enhance = translate();\n\nclass SoundCloudPlayer extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    active: PropTypes.bool.isRequired,\n    enabled: PropTypes.bool,\n    media: PropTypes.object,\n    seek: PropTypes.number,\n    volume: PropTypes.number,\n    onPlay: PropTypes.func,\n  };\n\n  state = {\n    error: null,\n    needsTap: false,\n  };\n\n  componentDidMount() {\n    this.audio = new Audio();\n    this.audio.addEventListener('error', () => {\n      this.handleError(this.audio.error);\n    });\n    this.audio.autoplay = true;\n    this.play();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.volume !== this.props.volume) {\n      this.audio.volume = this.props.volume / 100;\n    }\n    if (prevProps.media.sourceID !== this.props.media.sourceID ||\n        prevProps.enabled !== this.props.enabled ||\n        prevProps.active !== this.props.active) {\n      if (this.props.enabled && this.props.active) {\n        this.play();\n      } else {\n        this.stop();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.stop();\n  }\n\n  play() {\n    this.setState({ needsTap: false, error: null });\n    if (this.props.enabled && this.props.active) {\n      // In Firefox we have to wait for the \"canplaythrough\" event before\n      // seeking.\n      // http://stackoverflow.com/a/34970444\n      const doSeek = () => {\n        this.audio.currentTime = this.props.seek + (this.props.media.start || 0);\n        this.audio.volume = this.props.volume / 100;\n        this.audio.removeEventListener('canplaythrough', doSeek, false);\n      };\n\n      const { streamUrl } = this.props.media.sourceData;\n      this.audio.src = `${streamUrl}?client_id=${CLIENT_ID}`;\n      const res = this.audio.play();\n      if (res && res.then) res.catch(this.handleError);\n      debug('currentTime', this.props.seek);\n      this.audio.addEventListener('canplaythrough', doSeek, false);\n      if (this.props.onPlay) {\n        this.audio.addEventListener('play', this.props.onPlay, false);\n      }\n    } else {\n      this.stop();\n    }\n  }\n\n  stop() {\n    this.setState({ error: null });\n    this.audio.pause();\n  }\n\n  handleError = (error) => {\n    this.setState({\n      error,\n      needsTap: error.name === 'NotAllowedError',\n    });\n  };\n\n  handlePlay = () => {\n    this.play();\n  };\n\n  render() {\n    if (!this.props.active) {\n      return null;\n    }\n\n    const { t, media } = this.props;\n    const { error, needsTap } = this.state;\n    const { sourceData } = media;\n    if (!sourceData) {\n      return <div className={cx('src-soundcloud-Player', this.props.className)} />;\n    }\n\n    if (needsTap) {\n      return (\n        <div className={cx('src-soundcloud-Player', this.props.className)}>\n          <Paper className=\"src-soundcloud-Player-message\">\n            <Typography component=\"p\" paragraph>\n              {t('booth.autoplayBlocked')}\n            </Typography>\n            <Button variant=\"raised\" color=\"primary\" onClick={this.handlePlay}>\n              {t('booth.play')}\n            </Button>\n          </Paper>\n        </div>\n      );\n    }\n\n    if (error) {\n      return (\n        <div className={cx('src-soundcloud-Player', this.props.className)}>\n          <Paper className=\"src-soundcloud-Player-error\">\n            <ErrorIcon className=\"src-soundcloud-Player-errorIcon\" />\n            <Typography component=\"p\">\n              {t('soundcloud.error.template', {\n                error: t(getErrorMessage(error), { defaultValue: error.message }),\n              })}\n            </Typography>\n          </Paper>\n        </div>\n      );\n    }\n\n    return (\n      <div className={cx('src-soundcloud-Player', this.props.className)}>\n        <div className=\"src-soundcloud-Player-meta\">\n          <div className=\"src-soundcloud-Player-info\">\n            <img\n              className=\"src-soundcloud-Player-art\"\n              src={media.thumbnail}\n              alt=\"\"\n            />\n            <div className=\"src-soundcloud-Player-links\">\n              <SongInfo\n                artist={sourceData.username}\n                title={sourceData.fullTitle}\n                artistUrl={sourceData.artistUrl}\n                trackUrl={sourceData.permalinkUrl}\n              />\n            </div>\n          </div>\n          <a\n            href={sourceData.permalinkUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"src-soundcloud-Player-permalink\"\n          >\n            View on{' '}\n            <img\n              src={soundcloudLogo}\n              alt=\"SoundCloud\"\n            />\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(SoundCloudPlayer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport qsStringify from 'qs-stringify';\n\nconst createEmbedUrl = sourceID =>\n  `https://w.soundcloud.com/player/?${qsStringify({\n    url: `https://api.soundcloud.com/tracks/${sourceID}`,\n    color: '55B9FF',\n    auto_play: true,\n    hide_related: true,\n    buying: false,\n    liking: false,\n    download: false,\n    sharing: false,\n    show_comments: false,\n    visual: true,\n  })}`;\n\nconst PreviewPlayer = ({ media }) => (\n  <iframe\n    title=\"SoundCloud Embed\"\n    width=\"100%\"\n    height=\"240\"\n    scrolling=\"no\"\n    frameBorder=\"no\"\n    src={createEmbedUrl(media.sourceID)}\n  />\n);\n\nPreviewPlayer.propTypes = {\n  media: PropTypes.object.isRequired,\n};\n\nexport default PreviewPlayer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Player from './Player';\nimport PreviewPlayer from './PreviewPlayer';\n\nconst PlayerWrapper = (props) => {\n  if (props.mode === 'preview') {\n    return <PreviewPlayer {...props} />;\n  }\n  return <Player {...props} />;\n};\n\nPlayerWrapper.propTypes = {\n  mode: PropTypes.string.isRequired,\n};\n\nexport default PlayerWrapper;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n/* eslint-disable max-len */\nconst FacebookIcon = props => (\n  <SvgIcon viewBox=\"0 0 216 216\" {...props}>\n    <path d=\"M204.1,0H11.9C5.3,0,0,5.3,0,11.9v192.2c0,6.6,5.3,11.9,11.9,11.9h103.5v-83.6H87.2V99.8h28.1  v-24c0-27.9,17-43.1,41.9-43.1c11.9,0,22.2,0.9,25.2,1.3v29.2l-17.3,0c-13.5,0-16.2,6.4-16.2,15.9v20.8h32.3l-4.2,32.6H149V216h55  c6.6,0,11.9-5.3,11.9-11.9V11.9C216,5.3,210.7,0,204.1,0z\" />\n  </SvgIcon>\n);\n/* eslint-enable max-len */\n\nexport default FacebookIcon;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n// YouTube icon from the Font-Awesome icon font by Dave Gandy:\n// http://fontawesome.io/icon/youtube-play/\n// https://github.com/FortAwesome/Font-Awesome\n\n/* eslint-disable max-len */\nconst YouTubeIcon = props => (\n  <SvgIcon viewBox=\"0 0 1792 1792\" {...props}>\n    <path d=\"M1280 896q0-37-30-54l-512-320q-31-20-65-2-33 18-33 56v640q0 38 33 56 16 8 31 8 20 0 34-10l512-320q30-17 30-54zm512 0q0 96-1 150t-8.5 136.5-22.5 147.5q-16 73-69 123t-124 58q-222 25-671 25t-671-25q-71-8-124.5-58t-69.5-123q-14-65-21.5-147.5t-8.5-136.5-1-150 1-150 8.5-136.5 22.5-147.5q16-73 69-123t124-58q222-25 671-25t671 25q71 8 124.5 58t69.5 123q14 65 21.5 147.5t8.5 136.5 1 150z\" />\n  </SvgIcon>\n);\n/* eslint-enable max-len */\n\nexport default YouTubeIcon;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n// Instagram icon from the Font-Awesome icon font by Dave Gandy:\n// http://fontawesome.io/icon/instagram/\n// https://github.com/FortAwesome/Font-Awesome\n\n/* eslint-disable max-len */\nconst InstagramIcon = props => (\n  <SvgIcon viewBox=\"0 0 1792 1792\" {...props}>\n    <path d=\"M1490 1426v-648h-135q20 63 20 131 0 126-64 232.5t-174 168.5-240 62q-197 0-337-135.5t-140-327.5q0-68 20-131h-141v648q0 26 17.5 43.5t43.5 17.5h1069q25 0 43-17.5t18-43.5zm-284-533q0-124-90.5-211.5t-218.5-87.5q-127 0-217.5 87.5t-90.5 211.5 90.5 211.5 217.5 87.5q128 0 218.5-87.5t90.5-211.5zm284-360v-165q0-28-20-48.5t-49-20.5h-174q-29 0-49 20.5t-20 48.5v165q0 29 20 49t49 20h174q29 0 49-20t20-49zm174-208v1142q0 81-58 139t-139 58h-1142q-81 0-139-58t-58-139v-1142q0-81 58-139t139-58h1142q81 0 139 58t58 139z\" />\n  </SvgIcon>\n);\n/* eslint-enable max-len */\n\nexport default InstagramIcon;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n/* eslint-disable max-len */\nconst GithubIcon = props => (\n  <SvgIcon viewBox=\"-40 -40 520 520\" {...props}>\n    <path d=\"M409.132 114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736 15.166 259.057 5.365 219.27 5.365c-39.78 0-76.47 9.804-110.062 29.408-33.596 19.605-60.192 46.204-79.8 79.8C9.803 148.168 0 184.853 0 224.63c0 47.78 13.94 90.745 41.827 128.906 27.884 38.164 63.906 64.572 108.063 79.227 5.14.954 8.945.283 11.42-1.996 2.474-2.282 3.71-5.14 3.71-8.562 0-.57-.05-5.708-.144-15.417-.098-9.71-.144-18.18-.144-25.406l-6.567 1.136c-4.187.767-9.47 1.092-15.846 1-6.375-.09-12.992-.757-19.843-2-6.854-1.23-13.23-4.085-19.13-8.558-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.9-9.233-8.992-14.56-4.093-5.33-8.232-8.944-12.42-10.847l-1.998-1.43c-1.332-.952-2.568-2.1-3.71-3.43-1.143-1.33-1.998-2.663-2.57-3.997-.57-1.335-.097-2.43 1.428-3.29 1.525-.858 4.28-1.275 8.28-1.275l5.708.853c3.807.763 8.516 3.042 14.133 6.85 5.615 3.807 10.23 8.755 13.847 14.843 4.38 7.807 9.657 13.755 15.846 17.848 6.184 4.093 12.42 6.136 18.7 6.136 6.28 0 11.703-.476 16.273-1.423 4.565-.95 8.848-2.382 12.847-4.284 1.713-12.758 6.377-22.56 13.988-29.41-10.847-1.14-20.6-2.857-29.263-5.14-8.658-2.286-17.605-5.996-26.835-11.14-9.235-5.137-16.896-11.516-22.985-19.126-6.09-7.614-11.088-17.61-14.987-29.98-3.9-12.373-5.852-26.647-5.852-42.825 0-23.035 7.52-42.637 22.557-58.817-7.044-17.318-6.38-36.732 1.997-58.24 5.52-1.715 13.706-.428 24.554 3.853 10.85 4.284 18.794 7.953 23.84 10.995 5.046 3.04 9.09 5.618 12.135 7.708 17.706-4.947 35.977-7.42 54.82-7.42s37.116 2.473 54.822 7.42l10.85-6.85c7.418-4.57 16.18-8.757 26.26-12.564 10.09-3.806 17.803-4.854 23.135-3.14 8.562 21.51 9.325 40.923 2.28 58.24 15.035 16.18 22.558 35.788 22.558 58.818 0 16.178-1.958 30.497-5.853 42.966-3.9 12.47-8.94 22.457-15.125 29.98-6.19 7.52-13.9 13.85-23.13 18.985-9.233 5.14-18.183 8.85-26.84 11.135-8.663 2.286-18.416 4.004-29.264 5.146 9.894 8.563 14.842 22.078 14.842 40.54v60.237c0 3.422 1.19 6.28 3.572 8.562 2.38 2.278 6.136 2.95 11.276 1.994 44.163-14.653 80.185-41.062 108.068-79.226 27.88-38.16 41.826-81.126 41.826-128.906-.01-39.77-9.818-76.454-29.414-110.05z\" />\n  </SvgIcon>\n);\n/* eslint-enable max-len */\n\nexport default GithubIcon;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n// Twitter icon from the Font-Awesome icon font by Dave Gandy:\n// http://fontawesome.io/icon/twitter/\n// https://github.com/FortAwesome/Font-Awesome\n\n/* eslint-disable max-len */\nconst TwitterIcon = props => (\n  <SvgIcon viewBox=\"0 0 1792 1792\" {...props}>\n    <path d=\"M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z\" />\n  </SvgIcon>\n);\n/* eslint-enable max-len */\n\nexport default TwitterIcon;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n// Slack icon from the Font-Awesome icon font by Dave Gandy:\n// http://fontawesome.io/icon/slack/\n// https://github.com/FortAwesome/Font-Awesome\n\n/* eslint-disable max-len */\nconst SlackIcon = props => (\n  <SvgIcon viewBox=\"0 0 1792 1792\" {...props}>\n    <path d=\"M1583 776q62 0 103.5 40.5t41.5 101.5q0 97-93 130l-172 59 56 167q7 21 7 47 0 59-42 102t-101 43q-47 0-85.5-27t-53.5-72l-55-165-310 106 55 164q8 24 8 47 0 59-42 102t-102 43q-47 0-85-27t-53-72l-55-163-153 53q-29 9-50 9-61 0-101.5-40t-40.5-101q0-47 27.5-85t71.5-53l156-53-105-313-156 54q-26 8-48 8-60 0-101-40.5t-41-100.5q0-47 27.5-85t71.5-53l157-53-53-159q-8-24-8-47 0-60 42-102.5t102-42.5q47 0 85 27t53 72l54 160 310-105-54-160q-8-24-8-47 0-59 42.5-102t101.5-43q47 0 85.5 27.5t53.5 71.5l53 161 162-55q21-6 43-6 60 0 102.5 39.5t42.5 98.5q0 45-30 81.5t-74 51.5l-157 54 105 316 164-56q24-8 46-8zm-794 262l310-105-105-315-310 107z\" />\n  </SvgIcon>\n);\n/* eslint-enable max-len */\n\nexport default SlackIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Button from '@material-ui/core/Button';\n\nconst SocialMediaLink = ({ href, label, children }) => (\n  <li className=\"wlk-AboutPage-socialMedia\">\n    <Button target=\"_blank\" href={href}>\n      <span className=\"wlk-AboutPage-socialMediaIcon\">{children}</span>\n      {label}\n    </Button>\n  </li>\n);\n\nSocialMediaLink.propTypes = {\n  href: PropTypes.string.isRequired,\n  label: PropTypes.string.isRequired,\n  children: PropTypes.element.isRequired,\n};\n\nexport default SocialMediaLink;\n","import React from 'react';\nimport FacebookIcon from './icons/Facebook';\nimport YouTubeIcon from './icons/YouTube';\nimport InstagramIcon from './icons/Instagram';\nimport GithubIcon from './icons/Github';\nimport TwitterIcon from './icons/Twitter';\nimport SlackIcon from './icons/Slack';\nimport SocialMediaLink from './SocialMediaLink';\n\nimport './AboutPage.css';\n\nexport default () => (\n  <div className=\"wlk-AboutPage\">\n    <h1 className=\"wlk-AboutPage-title\">WE  KPOP</h1>\n    <p>\n      WLK is a community dedicated to sharing the best South Korean music.\n      Listen to what other people play live from YouTube and SoundCloud,\n      share your opinion by talking to others and contribute to each day&#39;s\n      unique playlist by hand-picking tracks yourself.\n    </p>\n    <p>\n      WLK can also be found on:\n    </p>\n    <ul>\n      <SocialMediaLink label=\"YouTube\" href=\"https://youtube.com/c/welovekpopclub\">\n        <YouTubeIcon />\n      </SocialMediaLink>\n      <SocialMediaLink label=\"Facebook\" href=\"https://facebook.com/wlk.yt\">\n        <FacebookIcon />\n      </SocialMediaLink>\n      <SocialMediaLink label=\"Instagram\" href=\"https://instagram.com/wlk_official\">\n        <InstagramIcon />\n      </SocialMediaLink>\n      <SocialMediaLink label=\"Twitter\" href=\"https://twitter.com/wlk_official\">\n        <TwitterIcon />\n      </SocialMediaLink>\n      <SocialMediaLink label=\"Github\" href=\"https://github.com/welovekpop\">\n        <GithubIcon />\n      </SocialMediaLink>\n      <SocialMediaLink label=\"Slack\" href=\"https://slack.wlk.yt\">\n        <SlackIcon />\n      </SocialMediaLink>\n    </ul>\n    <hr className=\"wlk-AboutPage-separator\" />\n    <h2>Rules</h2>\n    <div className=\"wlk-Rules\">\n      <div className=\"wlk-Rules-left\">\n        <ol start=\"1\" className=\"wlk-Rules-list\">\n          <li className=\"wlk-Rules-item\">Play only Korean related songs.</li>\n          <li className=\"wlk-Rules-item\">Songs that are over 7:00 minutes long might be skipped.</li>\n          <li className=\"wlk-Rules-item\">Songs that are heavily downvoted might be skipped.</li>\n          <li className=\"wlk-Rules-item\">Songs that are in the history (previous 25 songs) will be skipped.</li>\n          <li className=\"wlk-Rules-item\">Try to play the best quality versions of songs.</li>\n        </ol>\n      </div>\n      <div className=\"wlk-Rules-right\">\n        <ol start=\"6\" className=\"wlk-Rules-list\">\n          <li className=\"wlk-Rules-item\">Chat in English!</li>\n          <li className=\"wlk-Rules-item\">Don&#39;t spam the chat.</li>\n        </ol>\n      </div>\n    </div>\n  </div>\n);\n","import Uwave from './Uwave';\nimport youTubeSource from './sources/youtube';\nimport soundCloudSource from './sources/soundcloud';\n\nimport AboutPage from './_wlk/AboutPage';\n\nfunction readApplicationConfig() {\n  try {\n    return JSON.parse(document.getElementById('u-wave-config').textContent);\n  } catch (e) {\n    return {};\n  }\n}\n\nconst uw = new Uwave(readApplicationConfig());\n\n// Configure the Media sources to be used by this Wave client instance.\nuw.source(youTubeSource());\nuw.source(soundCloudSource());\n\nuw.setAboutPageComponent(AboutPage);\n\nwindow.uw = uw;\n\nuw.build().then(() => {\n  uw.renderToDOM(document.querySelector('#app'));\n  document.querySelector('#app-loading').innerHTML = '';\n  document.querySelector('#jss').textContent = '';\n}).catch((err) => {\n  document.querySelector('.LoadingScreen-notice').textContent = `Error: ${err.message}`;\n\n  setTimeout(() => {\n    throw err;\n  }, 0);\n});\n","import Player from './Player';\nimport logo from '../../../assets/img/youtube.png';\nimport ImportForm from './ImportForm';\nimport ImportPanel from './ImportPanel';\nimport reducer from './reducer';\n\nexport default function youtube() {\n  return {\n    name: 'youtube',\n    Player,\n    logo,\n    ImportForm,\n    ImportPanel,\n    reducer,\n  };\n}\n","import Player from './PlayerWrapper';\nimport logo from '../../../assets/img/soundcloud.png';\n\nexport default function soundcloud() {\n  return {\n    name: 'soundcloud',\n    Player,\n    logo,\n  };\n}\n","export const INIT_STATE = 'auth/INIT_STATE';\nexport const SOCKET_CONNECT = 'auth/SOCKET_CONNECT';\nexport const SOCKET_RECONNECT = 'auth/SOCKET_RECONNECT';\nexport const SOCKET_CONNECTED = 'auth/SOCKET_CONNECTED';\nexport const SOCKET_DISCONNECTED = 'auth/SOCKET_DISCONNECTED';\n\nexport const AUTH_STRATEGIES = 'auth/AUTH_STRATEGIES';\nexport const SET_TOKEN = 'auth/SET_TOKEN';\n\nexport const REGISTER_START = 'auth/REGISTER_START';\nexport const REGISTER_COMPLETE = 'auth/REGISTER_COMPLETE';\n\nexport const LOGIN_START = 'auth/LOGIN_START';\nexport const LOGIN_COMPLETE = 'auth/LOGIN_COMPLETE';\n\nexport const LOGOUT_START = 'auth/LOGOUT_START';\nexport const LOGOUT_COMPLETE = 'auth/LOGOUT_COMPLETE';\n\nexport const RESET_PASSWORD_COMPLETE = 'auth/RESET_PASSWORD_COMPLETE';\n","export const ADVANCE = 'booth/ADVANCE';\nexport const BOOTH_SKIP = 'booth/SKIP';\nexport const LOAD_HISTORY_START = 'booth/LOAD_HISTORY_START';\nexport const LOAD_HISTORY_COMPLETE = 'booth/LOAD_HISTORY_COMPLETE';\n\nexport const ENTER_FULLSCREEN = 'playback/ENTER_FULLSCREEN';\nexport const EXIT_FULLSCREEN = 'playback/EXIT_FULLSCREEN';\n","export const RECEIVE_MOTD = 'chat/RECEIVE_MOTD';\nexport const SET_MOTD_START = 'chat/SET_MOTD_START';\nexport const SET_MOTD_COMPLETE = 'chat/SET_MOTD_COMPLETE';\n\nexport const RECEIVE_MESSAGE = 'chat/RECEIVE_MESSAGE';\nexport const SEND_MESSAGE = 'chat/SEND_MESSAGE';\n\nexport const NOTIFY = 'chat/NOTIFY';\nexport const LOG = 'chat/LOG';\n\nexport const REMOVE_MESSAGE = 'chat/REMOVE_MESSAGE';\nexport const REMOVE_USER_MESSAGES = 'chat/REMOVE_USER_MESSAGES';\nexport const REMOVE_ALL_MESSAGES = 'chat/REMOVE_ALL_MESSAGES';\n\nexport const MUTE_USER = 'chat/MUTE_USER';\nexport const UNMUTE_USER = 'chat/UNMUTE_USER';\n","export const OPEN_EDIT_MEDIA_DIALOG = 'dialogs/OPEN_EDIT_MEDIA_DIALOG';\nexport const CLOSE_EDIT_MEDIA_DIALOG = 'dialogs/CLOSE_EDIT_MEDIA_DIALOG';\n\nexport const OPEN_PREVIEW_MEDIA_DIALOG = 'auth/OPEN_PREVIEW_MEDIA_DIALOG';\nexport const CLOSE_PREVIEW_MEDIA_DIALOG = 'auth/CLOSE_PREVIEW_MEDIA_DIALOG';\n\nexport const OPEN_LOGIN_DIALOG = 'auth/OPEN_LOGIN_DIALOG';\nexport const CLOSE_LOGIN_DIALOG = 'auth/CLOSE_LOGIN_DIALOG';\n\nexport const OPEN_RESET_PASSWORD_DIALOG = 'auth/OPEN_RESET_PASSWORD_DIALOG';\nexport const CLOSE_RESET_PASSWORD_DIALOG = 'auth/CLOSE_RESET_PASSWORD_DIALOG';\n","// eslint-disable-next-line import/prefer-default-export\nexport const ERROR_DISMISS = 'errors/DISMISS';\n","export const SHOW_IMPORT_PANEL = 'imports/SHOW_IMPORT_PANEL';\nexport const HIDE_IMPORT_PANEL = 'imports/HIDE_IMPORT_PANEL';\nexport const SHOW_IMPORT_SOURCE_PANEL = 'imports/SHOW_IMPORT_SOURCE_PANEL';\nexport const HIDE_IMPORT_SOURCE_PANEL = 'imports/HIDE_IMPORT_SOURCE_PANEL';\n","export const SKIP_DJ_START = 'moderation/SKIP_DJ_START';\nexport const SKIP_DJ_COMPLETE = 'moderation/SKIP_DJ_COMPLETE';\n\nexport const MOVE_USER_START = 'moderation/MOVE_USER_START';\nexport const MOVE_USER_COMPLETE = 'moderation/MOVE_USER_COMPLETE';\n\nexport const REMOVE_USER_START = 'moderation/REMOVE_USER_START';\nexport const REMOVE_USER_COMPLETE = 'moderation/REMOVE_USER_COMPLETE';\n\nexport const MUTE_USER_START = 'moderation/MUTE_USER_START';\nexport const MUTE_USER_COMPLETE = 'moderation/MUTE_USER_COMPLETE';\nexport const UNMUTE_USER_START = 'moderation/UNMUTE_USER_START';\nexport const UNMUTE_USER_COMPLETE = 'moderation/UNMUTE_USER_COMPLETE';\n\nexport const BAN_USER_START = 'moderation/BAN_USER_START';\nexport const BAN_USER_COMPLETE = 'moderation/BAN_USER_COMPLETE';\n\nexport const ADD_USER_ROLES_START = 'moderation/ADD_USER_ROLES_START';\nexport const ADD_USER_ROLES_COMPLETE = 'moderation/ADD_USER_ROLES_COMPLETE';\nexport const REMOVE_USER_ROLES_START = 'moderation/REMOVE_USER_ROLES_START';\nexport const REMOVE_USER_ROLES_COMPLETE = 'moderation/REMOVE_USER_ROLES_COMPLETE';\n","export const OPEN_OVERLAY = 'overlay/OPEN_OVERLAY';\nexport const CLOSE_OVERLAY = 'overlay/CLOSE_OVERLAY';\nexport const TOGGLE_OVERLAY = 'overlay/TOGGLE_OVERLAY';\n","// eslint-disable-next-line import/prefer-default-export\nexport const SELECT_PANEL = 'panel/SELECT_PANEL';\n","export const LOAD_PLAYLIST_START = 'playlists/LOAD_PLAYLIST_START';\nexport const LOAD_PLAYLIST_COMPLETE = 'playlists/LOAD_PLAYLIST_COMPLETE';\nexport const FILTER_PLAYLIST_ITEMS = 'playlists/FILTER_PLAYLIST_ITEMS';\nexport const FILTER_PLAYLIST_ITEMS_START = 'playlists/FILTER_PLAYLIST_ITEMS_START';\nexport const FILTER_PLAYLIST_ITEMS_COMPLETE = 'playlists/FILTER_PLAYLIST_ITEMS_COMPLETE';\nexport const PLAYLIST_CYCLED = 'playlists/PLAYLIST_CYCLED';\n\nexport const SELECT_PLAYLIST = 'playlists/SELECT_PLAYLIST';\n\nexport const ACTIVATE_PLAYLIST_START = 'playlists/ACTIVATE_PLAYLIST_START';\nexport const ACTIVATE_PLAYLIST_COMPLETE = 'playlists/ACTIVATE_PLAYLIST_COMPLETE';\n\nexport const LOAD_ALL_PLAYLISTS_START = 'playlists/LOAD_ALL_PLAYLISTS_START';\nexport const LOAD_ALL_PLAYLISTS_COMPLETE = 'playlists/LOAD_ALL_PLAYLISTS_COMPLETE';\n\nexport const CREATE_PLAYLIST_START = 'playlists/CREATE_PLAYLIST_START';\nexport const CREATE_PLAYLIST_COMPLETE = 'playlists/CREATE_PLAYLIST_COMPLETE';\n\nexport const RENAME_PLAYLIST_START = 'playlists/RENAME_PLAYLIST_START';\nexport const RENAME_PLAYLIST_COMPLETE = 'playlists/RENAME_PLAYLIST_COMPLETE';\n\nexport const DELETE_PLAYLIST_START = 'playlists/DELETE_PLAYLIST_START';\nexport const DELETE_PLAYLIST_COMPLETE = 'playlists/DELETE_PLAYLIST_COMPLETE';\n\nexport const OPEN_ADD_MEDIA_MENU = 'playlists/OPEN_ADD_MEDIA_MENU';\nexport const CLOSE_ADD_MEDIA_MENU = 'playlists/CLOSE_ADD_MEDIA_MENU';\nexport const ADD_MEDIA_START = 'playlists/ADD_MEDIA_START';\nexport const ADD_MEDIA_COMPLETE = 'playlists/ADD_MEDIA_COMPLETE';\n\nexport const REMOVE_MEDIA_START = 'playlists/REMOVE_MEDIA_START';\nexport const REMOVE_MEDIA_COMPLETE = 'playlists/REMOVE_MEDIA_COMPLETE';\n\nexport const MOVE_MEDIA_START = 'playlists/MOVE_MEDIA_START';\nexport const MOVE_MEDIA_COMPLETE = 'playlists/MOVE_MEDIA_COMPLETE';\n\nexport const UPDATE_MEDIA_START = 'playlists/UPDATE_MEDIA_START';\nexport const UPDATE_MEDIA_COMPLETE = 'playlists/UPDATE_MEDIA_COMPLETE';\n\nexport const SHUFFLE_PLAYLIST_START = 'playlists/SHUFFLE_PLAYLIST_START';\nexport const SHUFFLE_PLAYLIST_COMPLETE = 'playlists/SHUFFLE_PLAYLIST_COMPLETE';\n","export const REQUEST_START = 'request/REQUEST_START';\nexport const REQUEST_COMPLETE = 'request/REQUEST_COMPLETE';\n","export const SHOW_SEARCH_RESULTS = 'search/SHOW_SEARCH_RESULTS';\nexport const SET_SEARCH_SOURCE = 'search/SET_SEARCH_SOURCE';\nexport const SEARCH_START = 'search/SEARCH_START';\nexport const SEARCH_COMPLETE = 'search/SEARCH_COMPLETE';\nexport const SEARCH_DELETE = 'search/SEARCH_DELETE';\n","export const LOAD_SETTINGS = 'settings/LOAD_SETTINGS';\nexport const CHANGE_SETTING = 'settings/CHANGE_SETTING';\n","export const SET_TIMER = 'tick/SET_TIMER';\nexport const OFFSET = 'tick/OFFSET';\n","export const LOAD_ONLINE_USERS = 'users/LOAD';\nexport const USER_JOIN = 'users/JOIN';\nexport const USER_LEAVE = 'users/LEAVE';\nexport const CHANGE_USERNAME = 'users/CHANGE_USERNAME';\nexport const USER_ADD_ROLES = 'users/ADD_ROLES';\nexport const USER_REMOVE_ROLES = 'users/REMOVE_ROLES';\n\nexport const RECEIVE_GUEST_COUNT = 'users/RECEIVE_GUEST_COUNT';\n\nexport const DO_CHANGE_USERNAME_START = 'users/DO_CHANGE_USERNAME_START';\nexport const DO_CHANGE_USERNAME_COMPLETE = 'users/DO_CHANGE_USERNAME_COMPLETE';\n","export const LOAD_VOTES = 'votes/LOAD_VOTES';\nexport const UPVOTE = 'votes/UPVOTE';\nexport const DOWNVOTE = 'votes/DOWNVOTE';\nexport const FAVORITE = 'votes/FAVORITE';\n\nexport const DO_UPVOTE = 'votes/DO_UPVOTE';\nexport const DO_DOWNVOTE = 'votes/DO_DOWNVOTE';\nexport const DO_FAVORITE_START = 'votes/DO_FAVORITE_START';\nexport const DO_FAVORITE_COMPLETE = 'votes/DO_FAVORITE_COMPLETE';\n","export const WAITLIST_LOAD = 'waitlist/LOAD';\n\nexport const WAITLIST_LOCK = 'waitlist/LOCK';\nexport const WAITLIST_CLEAR = 'waitlist/CLEAR';\n\nexport const WAITLIST_UPDATE = 'waitlist/UPDATE';\nexport const WAITLIST_JOIN = 'waitlist/JOIN';\nexport const WAITLIST_LEAVE = 'waitlist/LEAVE';\nexport const WAITLIST_MOVE = 'waitlist/MOVE';\n\nexport const DO_JOIN_START = 'waitlist/DO_JOIN_START';\nexport const DO_JOIN_COMPLETE = 'waitlist/DO_JOIN_COMPLETE';\n\nexport const DO_LEAVE_START = 'waitlist/DO_LEAVE_START';\nexport const DO_LEAVE_COMPLETE = 'waitlist/DO_LEAVE_COMPLETE';\n\nexport const DO_LOCK_START = 'waitlist/DO_LOCK_START';\nexport const DO_LOCK_COMPLETE = 'waitlist/DO_LOCK_COMPLETE';\n\nexport const DO_CLEAR_START = 'waitlist/DO_CLEAR_START';\nexport const DO_CLEAR_COMPLETE = 'waitlist/DO_CLEAR_COMPLETE';\n","export const IDLE = 'loadingState/IDLE';\nexport const LOADING = 'loadingState/LOADING';\nexport const LOADED = 'loadingState/LOADED';\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Avatar = ({ className, user }) => (\n  <div className={cx('Avatar', className)}>\n    <img\n      className=\"Avatar-image\"\n      src={user.avatar || `https://sigil.u-wave.net/${encodeURIComponent(user._id)}`}\n      alt={user.username}\n    />\n  </div>\n);\n\nAvatar.propTypes = {\n  className: PropTypes.string,\n  user: PropTypes.object.isRequired,\n};\n\nexport default Avatar;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport pure from 'recompose/pure';\nimport RoleColor from '../RoleColor';\n\nconst enhance = pure;\n\nconst Username = ({ className, user }) => (\n  <RoleColor className={cx('Username', className)} roles={user.roles}>\n    {user.username}\n  </RoleColor>\n);\n\nUsername.propTypes = {\n  className: PropTypes.string,\n  user: PropTypes.shape({\n    username: PropTypes.string,\n    roles: PropTypes.arrayOf(PropTypes.string),\n  }).isRequired,\n};\n\nexport default enhance(Username);\n","import { createSelector, createStructuredSelector } from 'reselect';\nimport objMap from 'object.map';\nimport parseChatMarkup from 'u-wave-parse-chat-markup';\n\nimport { getAvailableGroupMentions } from '../utils/chatMentions';\nimport {\n  availableEmojiNamesSelector,\n  availableEmojiImagesSelector,\n} from './configSelectors';\nimport {\n  usersSelector,\n  currentUserSelector,\n  currentUserHasRoleSelector,\n  createRoleCheckSelector,\n} from './userSelectors';\nimport { notificationSettingsSelector } from './settingSelectors';\n\nconst baseSelector = state => state.chat;\n\nexport const rawMotdSelector = createSelector(baseSelector, chat => chat.motd);\nexport const motdSelector = createSelector(\n  rawMotdSelector,\n  motd => (motd ? parseChatMarkup(motd) : null),\n);\n\nconst MAX_MESSAGES = 500;\nconst allMessagesSelector = createSelector(baseSelector, chat => chat.messages);\nconst filteredMessagesSelector = createSelector(\n  allMessagesSelector,\n  notificationSettingsSelector,\n  (messages, notificationSettings) => messages.filter((message) => {\n    if (message.type === 'userJoin') return notificationSettings.userJoin;\n    if (message.type === 'userLeave') return notificationSettings.userLeave;\n    if (message.type === 'userNameChanged') return notificationSettings.userNameChanged;\n    if (message.type === 'skip') return notificationSettings.skip;\n    return true;\n  }),\n);\nexport const messagesSelector = createSelector(\n  filteredMessagesSelector,\n  messages => messages.slice(-MAX_MESSAGES),\n);\n\nexport const markupCompilerOptionsSelector = createStructuredSelector({\n  availableEmoji: availableEmojiNamesSelector,\n  emojiImages: availableEmojiImagesSelector,\n});\n\nconst mutesSelector = createSelector(baseSelector, chat => chat.mutedUsers);\n\nexport const muteTimeoutsSelector = createSelector(\n  mutesSelector,\n  mutes => objMap(mutes, mute => mute.expirationTimer),\n);\n\nexport const mutedUserIDsSelector = createSelector(\n  mutesSelector,\n  mutes => Object.keys(mutes),\n);\n\nexport const mutedUsersSelector = createSelector(\n  mutedUserIDsSelector,\n  usersSelector,\n  (mutedIDs, users) => mutedIDs.map(userID => users[userID]),\n);\n\nexport const currentUserMuteSelector = createSelector(\n  currentUserSelector,\n  mutesSelector,\n  (user, mutes) => (user ? mutes[user._id] : null),\n);\n\nexport const availableGroupMentionsSelector = createSelector(\n  currentUserHasRoleSelector,\n  hasRole => getAvailableGroupMentions(mention => hasRole(`chat.mention.${mention}`)),\n);\n\nexport const emojiCompletionsSelector = createSelector(\n  availableEmojiImagesSelector,\n  images => Object.keys(images).map(name => ({\n    shortcode: name,\n    image: images[name],\n  })),\n);\n\nexport const canDeleteMessagesSelector = createRoleCheckSelector('chat.delete');\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseBottomIcon from '@material-ui/icons/KeyboardArrowDown';\nimport CloseTopIcon from '@material-ui/icons/KeyboardArrowUp';\n\nconst icons = {\n  bottom: CloseBottomIcon,\n  top: CloseTopIcon,\n};\n\nconst Close = ({ className, onClose, direction }) => {\n  const CloseIcon = icons[direction];\n  return (\n    <IconButton\n      className={cx('OverlayHeaderClose', className)}\n      onClick={onClose}\n    >\n      <CloseIcon className=\"OverlayHeaderClose-icon\" />\n    </IconButton>\n  );\n};\n\nClose.propTypes = {\n  className: PropTypes.string,\n  direction: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Close;\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport CloseButton from './Close';\n\nconst Header = ({\n  className,\n  title,\n  children,\n  onCloseOverlay,\n  direction = 'bottom',\n}) => (\n  <div className={cx('OverlayHeader', className)}>\n    <div className=\"OverlayHeader-title\">\n      {title.toUpperCase()}\n    </div>\n    <div className=\"OverlayHeader-content\">\n      {children}\n    </div>\n    <CloseButton\n      direction={direction}\n      className=\"OverlayHeader-close\"\n      onClose={onCloseOverlay}\n    />\n  </div>\n);\n\nHeader.propTypes = {\n  className: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  children: PropTypes.node,\n  direction: PropTypes.string,\n  onCloseOverlay: PropTypes.func.isRequired,\n};\n\nexport default Header;\n","export const MEDIA = 'dd/MEDIA';\nexport const WAITLIST_USER = 'dd/WAITLIST_USER';\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Modal from '@material-ui/core/Modal';\nimport UserCard from './UserCard';\n\nclass UserCardWrapper extends React.Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    position: PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired,\n    }).isRequired,\n  };\n\n  state = {\n    positionDiffX: 0,\n    positionDiffY: 0,\n  };\n\n  componentDidMount() {\n    this.shouldFit = true;\n  }\n\n  componentDidUpdate() {\n    this.shouldFit = true;\n  }\n\n  fitInsideWindow() {\n    if (!this.container) {\n      return;\n    }\n\n    const card = this.container.firstChild;\n    const rect = card.getBoundingClientRect();\n    const offsetBottom = window.innerHeight - rect.bottom;\n    if (offsetBottom < 0) {\n      this.setState({\n        positionDiffY: offsetBottom - 1,\n      });\n    }\n  }\n\n  refContainer = (container) => {\n    this.container = container;\n    if (this.shouldFit && container) {\n      this.fitInsideWindow();\n    }\n  };\n\n  render() {\n    const {\n      onClose,\n      position,\n      ...props\n    } = this.props;\n    const { positionDiffX, positionDiffY } = this.state;\n\n    return (\n      <Modal\n        open\n        BackdropProps={{ invisible: true }}\n        onClose={onClose}\n      >\n        <div\n          style={{\n            position: 'absolute',\n            left: position.x + positionDiffX,\n            top: position.y + positionDiffY,\n          }}\n          ref={this.refContainer}\n        >\n          <div className=\"UserCardWrapper\">\n            <UserCard {...props} />\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nexport default UserCardWrapper;\n","import React from 'react';\nimport UserCard from '../components/UserCard';\n\nexport default function userCardable() {\n  return (Component) => {\n    class CardableComponent extends React.Component {\n      state = {\n        open: false,\n        user: null,\n        position: null,\n      };\n\n      handleOpen = (user) => {\n        const pos = this.container.getBoundingClientRect();\n        this.setState({\n          open: true,\n          user,\n          position: {\n            x: pos.left,\n            y: pos.top,\n          },\n        });\n      };\n\n      handleClose = () => {\n        this.setState({ open: false });\n      };\n\n      refContainer = (container) => {\n        this.container = container;\n      };\n\n      render() {\n        const { open, position, user } = this.state;\n        return (\n          <div ref={this.refContainer}>\n            {open && (\n              <UserCard\n                user={user}\n                position={position}\n                onClose={this.handleClose}\n              />\n            )}\n            <Component\n              {...this.props}\n              openUserCard={this.handleOpen}\n              closeUserCard={this.handleClose}\n            />\n          </div>\n        );\n      }\n    }\n\n    return CardableComponent;\n  };\n}\n","import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst OverlayContent = ({\n  className,\n  children,\n}) => (\n  <div className={cx('Overlay-content', className)}>\n    {children}\n  </div>\n);\n\nOverlayContent.propTypes = {\n  className: PropTypes.string,\n  children: PropTypes.node.isRequired,\n};\n\nexport default OverlayContent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction getComponentName(Component) {\n  return Component.name || Component.displayName || 'Component';\n}\n\nexport default function injectMediaSources() {\n  return Component => class extends React.Component {\n    static displayName = `InjectMediaSources(${getComponentName(Component)})`;\n\n    static contextTypes = {\n      mediaSources: PropTypes.object,\n    };\n\n    getMediaSource = name => this.context.mediaSources[name];\n    getAllMediaSources = () => this.context.mediaSources;\n\n    render() {\n      return (\n        <Component\n          getMediaSource={this.getMediaSource}\n          getAllMediaSources={this.getAllMediaSources}\n          {...this.props}\n        />\n      );\n    }\n  };\n}\n","import assign from 'object-assign';\nimport { createSelector } from 'reselect';\nimport { reCaptchaSiteKeySelector } from './configSelectors';\nimport { volumeSelector } from './settingSelectors';\nimport { authErrorSelector, supportsSocialAuthSelector } from './userSelectors';\n\nconst baseSelector = state => state.dialogs;\n\nconst merge = dialog => ({ ...dialog.payload, open: dialog.open });\n\nexport const loginDialogSelector = createSelector(\n  baseSelector,\n  authErrorSelector,\n  reCaptchaSiteKeySelector,\n  supportsSocialAuthSelector,\n  (dialogs, error, siteKey, supportsSocialAuth) => assign(merge(dialogs.login), {\n    error,\n    useReCaptcha: !!siteKey,\n    reCaptchaSiteKey: siteKey || null,\n    supportsSocialAuth,\n  }),\n);\n\nexport const editMediaDialogSelector = createSelector(\n  baseSelector,\n  dialogs => merge(dialogs.editMedia),\n);\n\nexport const previewMediaDialogSelector = createSelector(\n  baseSelector,\n  volumeSelector,\n  (dialogs, volume) => ({\n    ...merge(dialogs.previewMedia),\n    volume,\n  }),\n);\n\nexport const isPreviewMediaDialogOpenSelector = createSelector(\n  baseSelector,\n  dialogs => dialogs.previewMedia && !!dialogs.previewMedia.open,\n);\n","import getPath from 'lodash/get';\nimport setPath from 'lodash/set';\nimport find from 'lodash/find';\n\nexport default function mergeIncludedModels({ data, meta, included }) {\n  Object.keys(meta.included || {}).forEach((type) => {\n    meta.included[type].forEach((path) => {\n      data.forEach((item) => {\n        const id = getPath(item, path);\n        const model = find(included[type], m => m._id === id);\n        setPath(item, path, model);\n      });\n    });\n  });\n  return data;\n}\n","import { createSelector } from 'reselect';\n\nconst baseSelector = state => state.time;\n\nconst timeSelector = () => Date.now();\nconst offsetSelector = createSelector(baseSelector, time => time.offset);\nexport const timerSelector = createSelector(baseSelector, time => time.timer);\n\nexport const currentTimeSelector = createSelector(\n  timeSelector,\n  offsetSelector,\n  (time, offset) => time + offset,\n);\n","import { createSelector } from 'reselect';\nimport naturalCmp from 'natural-compare';\nimport values from 'object-values';\nimport { rolesSelector } from './configSelectors';\n\nconst authSelector = state => state.auth;\n\nconst usersBaseSelector = state => state.users;\nexport const usersSelector = createSelector(usersBaseSelector, base => base.users);\n\nexport const authErrorSelector = createSelector(authSelector, auth => auth.error);\nconst currentUserIDSelector = createSelector(authSelector, auth => auth.user);\nexport const currentUserSelector = createSelector(\n  usersSelector,\n  currentUserIDSelector,\n  (users, userID) => (\n    userID in users\n      ? users[userID]\n      : null\n  ),\n);\nexport const isLoggedInSelector = createSelector(currentUserSelector, Boolean);\nexport const tokenSelector = createSelector(authSelector, auth => auth.token);\nexport const authStrategiesSelector = createSelector(authSelector, auth => auth.strategies);\nexport function supportsAuthStrategy(name) {\n  return createSelector(authStrategiesSelector, strategies => strategies.indexOf(name) !== -1);\n}\nexport const supportsSocialAuthSelector = createSelector(\n  supportsAuthStrategy('google'),\n  (...support) => support.some(Boolean),\n);\n\n// The Super User role allows a user to do everything. It's hardcoded as the \"*\"\n// role.\nconst superUserRoleSelector = () => '*';\n\n// Flatten a user's roles.\nfunction getAllUserRoles(roles, user) {\n  function getSubRoles(subRoles, role) {\n    // Recursive Reduce!\n    return roles[role].reduce(\n      getSubRoles,\n      [role, ...subRoles],\n    );\n  }\n  return user.roles ? user.roles.reduce(getSubRoles, []) : [];\n}\n\nfunction compareUsers(roles, superuser) {\n  return (a, b) => {\n    const aRoles = getAllUserRoles(roles, a);\n    const bRoles = getAllUserRoles(roles, b);\n    // Sort superusers to the top,\n    if (aRoles.indexOf(superuser) !== -1) {\n      return -1;\n    }\n    if (bRoles.indexOf(superuser) !== -1) {\n      return 1;\n    }\n    // other users by the amount of permissions they have,\n    if (aRoles.length > bRoles.length) {\n      return -1;\n    }\n    if (aRoles.length < bRoles.length) {\n      return 1;\n    }\n    // and sort by username if the roles are equal.\n    return naturalCmp(a.username.toLowerCase(), b.username.toLowerCase());\n  };\n}\n\nexport const userListSelector = createSelector(\n  rolesSelector,\n  superUserRoleSelector,\n  usersSelector,\n  (roles, superuserRole, users) =>\n    values(users).sort(compareUsers(roles, superuserRole)),\n);\n\nexport const userCountSelector = createSelector(\n  userListSelector,\n  users => users.length,\n);\n\nexport const guestCountSelector = createSelector(\n  usersBaseSelector,\n  base => base.guests,\n);\n\nexport const listenerCountSelector = createSelector(\n  userCountSelector,\n  guestCountSelector,\n  (users, guests) => users + guests,\n);\n\nexport const userHasRoleSelector = createSelector(\n  rolesSelector,\n  superUserRoleSelector,\n  (roles, superUserRole) => (user) => {\n    // If there is no authenticated user, we always return false.\n    if (!user) {\n      return () => false;\n    }\n\n    const userRoles = getAllUserRoles(roles, user);\n    // If this is a super user, we always return true.\n    if (userRoles.indexOf(superUserRole) !== -1) {\n      return () => true;\n    }\n\n    return role => userRoles.indexOf(role) !== -1;\n  },\n);\n\n// Selects a function that checks if a user has the given role.\n//\n//   const hasRole = hasRoleSelector(getState());\n//   hasRole(user, 'waitlist.join');\n//\nexport const hasRoleSelector = createSelector(\n  userHasRoleSelector,\n  userHasRole =>\n    (user, role) => userHasRole(user)(role),\n);\n\nexport const currentUserHasRoleSelector = createSelector(\n  userHasRoleSelector,\n  currentUserSelector,\n  (userHasRole, user) => userHasRole(user),\n);\n\n// Creates a selector that will check if the current user has a given role.\n//\n//   createRoleCheckSelector('some.role')(store.getState()) //  true/false\n//\nexport const createRoleCheckSelector = role => createSelector(\n  currentUserHasRoleSelector,\n  hasRole => hasRole(role),\n);\n\n// Selectors for compatibility with the old role system.\n// TODO All uses of these selectors should be phased out in favour of more\n// specific roles in the future.\nexport const isModeratorSelector = createRoleCheckSelector('moderator');\nexport const isManagerSelector = createRoleCheckSelector('manager');\n","import { createSelector } from 'reselect';\nimport { userListSelector, hasRoleSelector } from '../selectors/userSelectors';\nimport { djAndWaitlistUsersSelector } from '../selectors/waitlistSelectors';\n\nexport const everyone = userListSelector;\n\n// plug.dj-like.\nexport const djs = djAndWaitlistUsersSelector;\nexport const waitlist = djs;\n\nexport const staff = createSelector(\n  userListSelector,\n  hasRoleSelector,\n  // TODO should this maybe not hardcode the 'moderator' role? How to do it\n  // otherwise?\n  (users, hasRole) => users.map(user => hasRole(user, 'moderator')),\n);\n","import find from 'lodash/find';\nimport { userListSelector } from '../selectors/userSelectors';\nimport * as groupMentions from './groupMentions';\n\nexport { groupMentions };\n\n/**\n * Get a list of group names that can be mentioned by a user.\n *\n * @param {function(role: string): boolean} canMention\n */\nexport function getAvailableGroupMentions(canMention) {\n  if (canMention) {\n    return Object.keys(groupMentions).filter(canMention);\n  }\n  return [];\n}\n\n/**\n * Attach user objects to mentions in a parsed chat message.\n *\n * @param {Array} tree Parsed message.\n * @param {Array.<{username: string}>} users List of users.\n */\nexport function resolveMentions(tree, state) {\n  const users = userListSelector(state);\n  tree.forEach((node) => {\n    if (node.type === 'mention') {\n      const groupSelector = groupMentions[node.mention];\n      /* eslint-disable no-param-reassign */\n      if (groupSelector) {\n        node.group = groupSelector(state);\n      } else {\n        node.user = find(users, user => user.username.toLowerCase() === node.mention);\n      }\n      /* eslint-enable no-param-reassign */\n    } else if (node.content) {\n      resolveMentions(node.content, state);\n    }\n  });\n}\n\n/**\n * Check whether a parsed chat message mentions a given user ID. Expects mention\n * nodes to have User data, added by `resolveMentions()`.\n *\n * @param {Array} tree Parsed message.\n * @param {String} id User ID.\n */\nexport function hasMention(tree, id) {\n  return tree.some((node) => {\n    if (node.type === 'mention') {\n      if (node.user) {\n        return node.user._id === id;\n      } else if (node.group) {\n        return node.group.some(user => user._id === id);\n      }\n      return false;\n    }\n    return Array.isArray(node) && hasMention(node, id);\n  });\n}\n","import { ERROR_DISMISS } from '../constants/ActionTypes';\n\n// eslint-disable-next-line import/prefer-default-export\nexport function dismiss() {\n  return { type: ERROR_DISMISS };\n}\n","import { createSelector } from 'reselect';\n\nconst baseSelector = state => state.errors;\n\n// eslint-disable-next-line import/prefer-default-export\nexport const firstErrorSelector = createSelector(\n  baseSelector,\n  errors => errors[0],\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nconst ErrorArea = ({ error, onDismiss }) => (\n  <div className=\"ErrorArea\">\n    <Snackbar\n      ContentProps={{ className: 'ErrorArea-snackbar' }}\n      open={!!error}\n      message={error || ''}\n      onClose={onDismiss}\n    />\n  </div>\n);\n\nErrorArea.propTypes = {\n  error: PropTypes.string,\n  onDismiss: PropTypes.func.isRequired,\n};\n\nexport default ErrorArea;\n","import { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { dismiss } from '../actions/ErrorActionCreators';\nimport { firstErrorSelector } from '../selectors/errorSelectors';\n\nimport ErrorArea from '../components/ErrorArea';\n\nconst mapStateToProps = state => ({\n  error: firstErrorSelector(state),\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  onDismiss: dismiss,\n}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ErrorArea);\n","export default {\n  palette: {\n    type: 'dark',\n    primary: {\n      light: '#b20062',\n      main: '#9d2053',\n      contrastText: '#fff',\n    },\n    background: {\n      paper: '#303030',\n    },\n  },\n  typography: {\n    fontFamily: '\"Open Sans\", Roboto, Arial, sans-serif',\n  },\n};\n","import i18next from 'i18next';\nimport * as en from '../locale/en.yaml';\n\nconst resources = {\n  cs: () => import('../locale/cs.yaml' /* webpackChunkName: \"lang_cs\" */),\n  cy: () => import('../locale/cy.yaml' /* webpackChunkName: \"lang_cy\" */),\n  de: () => import('../locale/de.yaml' /* webpackChunkName: \"lang_de\" */),\n  es: () => import('../locale/es.yaml' /* webpackChunkName: \"lang_es\" */),\n  fr: () => import('../locale/fr.yaml' /* webpackChunkName: \"lang_fr\" */),\n  ko: () => import('../locale/ko.yaml' /* webpackChunkName: \"lang_ko\" */),\n  nl: () => import('../locale/nl.yaml' /* webpackChunkName: \"lang_nl\" */),\n  pt: () => import('../locale/pt.yaml' /* webpackChunkName: \"lang_pt\" */),\n  zh: () => import('../locale/zh.yaml' /* webpackChunkName: \"lang_zh\" */),\n};\n\nclass UwaveBackend {\n  static type = 'backend';\n  type = 'backend';\n  cache = {};\n\n  getResource(language) {\n    if (this.cache[language]) {\n      return this.cache[language];\n    }\n    if (!resources[language]) {\n      return Promise.reject(new Error(`The language \"${language}\" is not supported.`));\n    }\n\n    this.cache[language] = resources[language]();\n\n    return this.cache[language];\n  }\n\n  read(language, namespace, callback) {\n    this.getResource(language)\n      .then(resource => resource[namespace])\n      .then((result) => {\n        callback(null, result);\n      })\n      .catch(callback);\n  }\n}\n\ni18next.use(new UwaveBackend());\n\ni18next.init({\n  fallbackLng: 'en',\n  defaultNS: 'uwave',\n  interpolation: {\n    // Prevent double-escapes: React already escapes things for us\n    escapeValue: false,\n  },\n});\n\n// Synchronously add the fallback language.\ni18next.addResourceBundle('en', 'uwave', en.uwave);\n\nexport const availableLanguages = ['en', ...Object.keys(resources)];\n\nexport default function createLocale(language) {\n  const locale = i18next.cloneInstance();\n  locale.availableLanguages = availableLanguages;\n\n  return new Promise((resolve) => {\n    locale.changeLanguage(language, () => {\n      resolve(locale);\n    });\n  });\n}\n"],"sourceRoot":""}