{"version":3,"sources":["webpack:///../node_modules/querystring-es3/index.js","webpack:///./password-reset/constants.js","webpack:///./password-reset/reducers.js","webpack:///./password-reset/actions.js","webpack:///./password-reset/components/PasswordResetPage/index.js","webpack:///./password-reset/components/PasswordResetSuccessPage/index.js","webpack:///./password-reset/containers/PasswordResetApp.js","webpack:///./password-reset/app.js","webpack:///../node_modules/querystring-es3/encode.js","webpack:///../node_modules/querystring-es3/decode.js"],"names":["exports","decode","parse","__webpack_require__","encode","stringify","SET_RESET_KEY","SET_RESET_SUCCESS","passwordReset","state","action","error","type","extends_default","key","payload","success","resetPasswordComplete","enhance","Object","dist_es","jsx_default","Email","nativeColor","Lock","PasswordResetPage_PasswordResetPage","newPassword","newPasswordConfirm","handlePasswordChange","event","_this","setState","target","value","handlePasswordConfirmChange","handleSubmit","preventDefault","isValid","props","onSubmit","this","length","render","_props","t","email","Paper","className","Form","Group","Typography","TextField","disabled","placeholder","icon","PasswordResetPage_ref","onChange","_ref2","_ref3","Button","react_default","a","Component","propTypes","components_PasswordResetPage","PasswordResetSuccessPage_enhance","PasswordResetSuccessPage_PasswordResetSuccessPage","_ref","variant","components_PasswordResetSuccessPage","mapStateToProps","reselect_es","mapDispatchToProps","dispatch","getState","RequestActionCreators","post","password","onComplete","onError","err","PasswordResetApp_enhance","react_redux_es","muiTheme","createMuiTheme","theme_0","ErrorArea","PasswordResetApp_PasswordResetApp","locale","objectWithoutProperties_default","MuiThemeProvider","theme","i18n","PasswordResetApp_ref2","createElement","PasswordResetApp_ref3","containers_PasswordResetApp","app_config","document","querySelector","textContent","app_key","store","es","reducers_namespaceObject","config","redux_thunk_es","request","qs","querystring_es3","window","location","search","slice","locale_0","then","react_dom_default","react_hot_loader","stringifyPrimitive","v","isFinite","module","obj","sep","eq","name","undefined","map","objectKeys","k","ks","encodeURIComponent","isArray","join","Array","xs","prototype","toString","call","f","res","i","push","keys","hasOwnProperty","prop","options","regexp","split","maxKeys","len","kstr","vstr","x","replace","idx","indexOf","substr","decodeURIComponent"],"mappings":"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","file":"passwordReset_775f405.js","sourcesContent":["'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","export const SET_RESET_KEY = 'uwave/password-reset/SET_RESET_KEY';\nexport const SET_RESET_SUCCESS = 'uwave/password-reset/SET_RESET_SUCCESS';\n\nexport const RESET_PASSWORD_START = 'uwave/password-reset/RESET_PASSWORD_START';\nexport const RESET_PASSWORD_COMPLETE = 'uwave/password-reset/RESET_PASSWORD_COMPLETE';\n","import {\n  SET_RESET_KEY,\n  SET_RESET_SUCCESS,\n} from './constants';\n\nexport auth from '../reducers/auth';\nexport config from '../reducers/config';\nexport errors from '../reducers/errors';\nexport theme from '../reducers/theme';\n\nexport function passwordReset(state = {}, action = {}) {\n  if (action.error) return state;\n\n  switch (action.type) {\n    case SET_RESET_KEY:\n      return {\n        ...state,\n        key: action.payload,\n      };\n    case SET_RESET_SUCCESS:\n      return {\n        ...state,\n        success: true,\n      };\n\n    default:\n      return state;\n  }\n}\n","import {\n  SET_RESET_KEY,\n  SET_RESET_SUCCESS,\n} from './constants';\nimport { post } from '../actions/RequestActionCreators';\n\nexport function setResetKey(key) {\n  return {\n    type: SET_RESET_KEY,\n    payload: key,\n  };\n}\n\nexport function resetPasswordComplete() {\n  return { type: SET_RESET_SUCCESS };\n}\n\nexport function resetPassword(newPassword) {\n  return (dispatch, getState) => {\n    const { key } = getState().passwordReset;\n\n    return dispatch(post(`/auth/password/reset/${key}`, { password: newPassword }, {\n      onComplete: resetPasswordComplete,\n      onError: err => ({\n        type: SET_RESET_SUCCESS,\n        error: true,\n        payload: err,\n      }),\n    }));\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport EmailIcon from '@material-ui/icons/Email';\nimport PasswordIcon from '@material-ui/icons/Lock';\nimport Paper from 'material-ui/Paper';\nimport Typography from 'material-ui/Typography';\nimport { translate } from 'react-i18next';\nimport Form from '../../../components/Form';\nimport FormGroup from '../../../components/Form/Group';\nimport TextField from '../../../components/Form/TextField';\nimport Button from '../../../components/Form/Button';\n\nconst enhance = translate();\n\nclass PasswordResetPage extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    email: PropTypes.string.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    newPassword: '',\n    newPasswordConfirm: '',\n  };\n\n  isValid() {\n    return this.state.newPassword.length >= 6 &&\n      this.state.newPassword === this.state.newPasswordConfirm;\n  }\n\n  handlePasswordChange = (event) => {\n    this.setState({\n      newPassword: event.target.value,\n    });\n  };\n\n  handlePasswordConfirmChange = (event) => {\n    this.setState({\n      newPasswordConfirm: event.target.value,\n    });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    if (this.isValid()) {\n      this.props.onSubmit(this.state.newPassword);\n    }\n  };\n\n  render() {\n    const { t, email } = this.props;\n    const isValid = this.isValid();\n\n    return (\n      <Paper className=\"PasswordReset\">\n        <Form onSubmit={this.handleSubmit}>\n          <FormGroup>\n            <Typography>\n              {t('resetPassword.introduction')}\n            </Typography>\n          </FormGroup>\n          {email && (\n            // Not used at the moment, but we may show (parts of) the user's\n            // email address on the reset page at some point.\n            <FormGroup>\n              <TextField\n                type=\"email\"\n                disabled\n                value={email}\n                placeholder={t('login.email')}\n                icon={<EmailIcon nativeColor=\"#9f9d9e\" />}\n              />\n            </FormGroup>\n          )}\n          <FormGroup>\n            <TextField\n              type=\"password\"\n              value={this.state.newPassword}\n              onChange={this.handlePasswordChange}\n              placeholder={t('login.password')}\n              icon={<PasswordIcon nativeColor=\"#9f9d9e\" />}\n            />\n          </FormGroup>\n          <FormGroup>\n            <TextField\n              type=\"password\"\n              value={this.state.newPasswordConfirm}\n              onChange={this.handlePasswordConfirmChange}\n              placeholder={t('login.password')}\n              icon={<PasswordIcon nativeColor=\"#9f9d9e\" />}\n            />\n          </FormGroup>\n          <FormGroup>\n            <Button disabled={!isValid}>\n              {t('resetPassword.submit')}\n            </Button>\n          </FormGroup>\n        </Form>\n      </Paper>\n    );\n  }\n}\n\nexport default enhance(PasswordResetPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\nimport Paper from 'material-ui/Paper';\nimport Typography from 'material-ui/Typography';\n\nconst enhance = translate();\n\nconst PasswordResetSuccessPage = ({ t }) => (\n  <Paper className=\"PasswordReset\">\n    <Typography variant=\"body1\">\n      {t('resetPassword.success')}\n    </Typography>\n  </Paper>\n);\n\nPasswordResetSuccessPage.propTypes = {\n  t: PropTypes.func.isRequired,\n};\n\nexport default enhance(PasswordResetSuccessPage);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { MuiThemeProvider, createMuiTheme } from 'material-ui/styles';\nimport { I18nextProvider } from 'react-i18next';\nimport { resetPassword } from '../actions';\nimport ErrorArea from '../../containers/ErrorArea';\nimport PasswordResetPage from '../components/PasswordResetPage';\nimport PasswordResetSuccessPage from '../components/PasswordResetSuccessPage';\nimport theme from '../../theme';\n\nconst mapStateToProps = createStructuredSelector({\n  success: state => state.passwordReset.success,\n});\n\nconst mapDispatchToProps = {\n  onSubmit: resetPassword,\n};\n\nconst enhance = connect(mapStateToProps, mapDispatchToProps);\n\nconst muiTheme = createMuiTheme(theme);\n\nconst PasswordResetApp = ({\n  locale, success, ...props\n}) => (\n  <MuiThemeProvider theme={muiTheme}>\n    <I18nextProvider i18n={locale}>\n      <div>\n        {success ? (\n          <PasswordResetSuccessPage />\n        ) : (\n          <PasswordResetPage {...props} />\n        )}\n        <ErrorArea />\n      </div>\n    </I18nextProvider>\n  </MuiThemeProvider>\n);\n\nPasswordResetApp.propTypes = {\n  locale: PropTypes.object.isRequired,\n  success: PropTypes.bool,\n};\n\nexport default enhance(PasswordResetApp);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, combineReducers } from 'redux';\nimport { Provider } from 'react-redux';\nimport { parse as parseQS } from 'querystring';\nimport thunk from 'redux-thunk';\nimport { AppContainer as HotContainer } from 'react-hot-loader';\nimport createLocale from '../locale';\nimport webApiRequest from '../store/request';\nimport * as reducers from './reducers';\nimport { setResetKey } from './actions';\nimport App from './containers/PasswordResetApp';\n\nimport './app.css';\n\nconst config = document.querySelector('#u-wave-config').textContent;\nconst key = document.querySelector('#reset-data').textContent;\n\nconst store = createStore(\n  combineReducers(reducers),\n  { config },\n  applyMiddleware(\n    thunk,\n    webApiRequest(),\n  ),\n);\n\nconst qs = parseQS(window.location.search.slice(1));\nstore.dispatch(setResetKey(key || qs.key));\n\ncreateLocale('en').then((locale) => {\n  ReactDOM.render(\n    (\n      <HotContainer>\n        <Provider store={store}>\n          <App locale={locale} />\n        </Provider>\n      </HotContainer>\n    ), document.querySelector('#app'),\n  );\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n"],"sourceRoot":""}