(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{604:function(n,e,a){"use strict";a.r(e);var t=a(3),o=a.n(t),r=a(19),i=a.n(r),s=a(238),d=a.n(s),u=a(631),c=a.n(u),p=a(6),l=a(13),v=a(0),m=a.n(v),f=a(1),b=a.n(f),g=a(632),h=a(2),y=a.n(h),O=a(5),w=a.n(O),M=a(4),A=a.n(M),C=a(121),j=a(648),S=m()(j.a,{}),U=function(n){var e=n.className,a=n.children,t=n.selected,o=w()(n,["className","children","selected"]);return b.a.createElement(C.a,y()({button:!0},o,{className:A()(e,t&&"is-selected")}),a,t&&S)};U.propTypes={};var T=U,E=a(146),k=a.n(E),x=a(386),N=a.n(x),L=a(109),P=a.n(L),R=a(30),_=a.n(R),B=a(89),D=a.n(B),z=a(442),I=a(614),F=a(613),H=a(443),J=a(106),V=a(36),q=a(647),W=a(221),Y=a(213),G=a.n(Y),K=a(236),Q=i()(P()("newMotd","setMotd",function(n){return n.motd}),P()("expanded","setExpanded",!1),_()(function(n){return{parsedMotd:Object(K.a)(G()(n.newMotd),n.compileOptions),onExpand:function(){return n.setExpanded(!n.expanded)}}}),D()({onChange:function(n){return function(e){n.setMotd(e.target.value)}},onSubmit:function(n){return function(){n.onSetMotd(n.newMotd),n.setExpanded(!1)}}}));function X(n){n&&n.focus()}var Z=m()(W.a,{}),$=function(n){var e=n.canChangeMotd,a=n.newMotd,t=n.parsedMotd,o=n.expanded,r=n.onChange,i=n.onSubmit,s=n.onExpand;return m()(H.a,{className:"AdminMotd"},void 0,m()(z.a,{title:"Message of the Day",action:e&&m()(V.a,{onClick:s},void 0,Z)}),m()(I.a,{},void 0,t),m()(q.a,{in:o,unmountOnExit:!0},void 0,m()(I.a,{style:{paddingTop:0}},void 0,b.a.createElement("textarea",{className:"AdminMotd-field",rows:4,onChange:r,value:a,ref:X})),m()(F.a,{},void 0,m()(J.a,{variant:"raised",color:"primary",onClick:i},void 0,"Save"))))};$.propTypes={},$.defaultProps={canChangeMotd:!1};var nn=Q($),en=a(22),an=a(67),tn=a(12).i,on=Object(p.b)({motd:an.k,compileOptions:an.e,canChangeMotd:tn}),rn={onSetMotd:en.i},sn=Object(l.b)(on,rn)(nn),dn=m()("div",{},void 0,m()("p",{},void 0,"Note that the admin interface is not yet done and most things do not work. You can, however, configure the message of the day! :P"),m()(sn,{})),un=function(){return dn};un.propTypes={};var cn=un,pn=a(10),ln=a(646),vn=a(644),mn=a(642),fn=a(643),bn=a(641),gn=a(9),hn=a.n(gn),yn=a(7),On=a.n(yn),wn=a(11),Mn=a.n(wn),An=a(165),Cn=a.n(An),jn=a(617),Sn=a(173),Un=a(645),Tn=a(51),En=a(88),kn=a(64),xn=i()(Object(En.a)(),_()(function(n){return{onUsernameClick:function(e){e.preventDefault(),n.openUserCard(n.user)}}})),Nn=function(n){var e=n.user,a=n.onUsernameClick;return m()("button",{onClick:a},void 0,m()(kn.a,{user:e}))};Nn.propTypes={};var Ln=xn(Nn),Pn=a(385),Rn={width:48,paddingRight:0},_n={width:48,paddingLeft:0,paddingRight:0},Bn=_()({className:"AdminUserRow-cell"})(ln.a),Dn=m()(Bn,{},void 0,"Email"),zn=m()(Un.a,{}),In=m()(Sn.a,{},void 0,"Ban"),Fn=function(n){function e(){var a,t,o;hn()(this,e);for(var r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];return a=t=On()(this,n.call.apply(n,[this].concat(i))),t.state={open:!1,anchorEl:null},t.menu=Cn()("menu"),t.handleOpenMenu=function(n){t.setState({open:!0,anchorEl:n.currentTarget})},t.handleCloseMenu=function(){t.setState({open:!1,anchorEl:null})},o=a,On()(t,o)}return Mn()(e,n),e.prototype.render=function(){var n=this.props.user,e=this.state,a=e.open,t=e.anchorEl;return m()(vn.a,{className:"AdminUserRow"},void 0,m()(Bn,{style:Rn},void 0,m()(Tn.a,{user:n})),m()(Bn,{},void 0,m()(Ln,{user:n})),m()(Bn,{},void 0,Object(Pn.a)(n.createdAt)),Dn,m()(Bn,{},void 0,n.roles.join(", ")),m()(Bn,{style:_n},void 0,m()(V.a,{onClick:this.handleOpenMenu,"aria-haspopup":"true","aria-owns":a?this.menu:null},void 0,zn),m()(jn.a,{id:this.menu,open:a,anchorEl:t,onClose:this.handleCloseMenu},void 0,In)))},e}(b.a.Component),Hn=Fn;Fn.propTypes={};var Jn=_()({style:{background:"#9d2053",padding:"12px 24px",lineHeight:"35px"}})("div"),Vn=_()({style:{background:"#631032",color:"#ffffff",border:0,marginLeft:12,paddingLeft:12,height:35},type:"text"})("input"),qn=Object(pn.c)(),Wn=m()("span",{},void 0,"Managing Users:"),Yn=m()(Vn,{}),Gn=m()(ln.a,{}),Kn=m()(ln.a,{}),Qn=function(n){var e=n.t,a=n.users;return m()(b.a.Fragment,{},void 0,m()(Jn,{},void 0,Wn,m()("span",{style:{float:"right"}},void 0,"Filter User:",Yn)),m()(fn.a,{},void 0,m()(mn.a,{},void 0,m()(vn.a,{},void 0,Gn,m()(ln.a,{},void 0,e("admin.users.user")),m()(ln.a,{},void 0,e("admin.users.joinedAt")),m()(ln.a,{},void 0,e("admin.users.email")),m()(ln.a,{},void 0,e("admin.users.roles")),Kn)),m()(bn.a,{},void 0,a.map(function(n){return m()(Hn,{user:n})}))))};Qn.propTypes={};var Xn=qn(Qn),Zn=a(14),$n="uwave/admin/view/TRANSITION",ne="uwave/admin/users/LOAD_USERS_START",ee="uwave/admin/users/LOAD_USERS_COMPLETE",ae="uwave/admin/bans/LOAD_BANS_START",te="uwave/admin/bans/LOAD_BANS_COMPLETE";function oe(){return{type:ne}}function re(n){return{type:ee,payload:{users:n.data,page:Math.floor(n.meta.offset/n.meta.pageSize)},meta:n.meta}}var ie=function(n){return n.admin},se=Object(p.a)(ie,function(n){return n.users.currentPage}),de=Object(p.a)(ie,function(n){return n.users.users}),ue=Object(p.b)({currentPage:se,users:de}),ce={onLoadUsers:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(Zn.get)("/users",{qs:n?{page:n}:null,onStart:oe,onComplete:re})}},pe=i()(Object(l.b)(ue,ce),c()({componentDidMount:function(){this.props.onLoadUsers()}}))(Xn),le=a(113);function ve(){return{type:ae}}function me(n){var e=n.meta;return{type:te,payload:{bans:Object(le.a)(n)},meta:{page:Math.floor(e.offset/e.pageSize),size:e.pageSize}}}function fe(){return Object(Zn.get)("/bans",{onStart:ve,onComplete:me})}var be=a(108),ge=a.n(be),he=Object(pn.c)(),ye={width:48,paddingRight:0},Oe=function(n){var e=n.t,a=n.ban,t=n.onUnbanUser;return m()(vn.a,{},void 0,m()(ln.a,{style:ye},void 0,m()(Tn.a,{user:a.user})),m()(ln.a,{},void 0,m()(Ln,{user:a.user})),m()(ln.a,{},void 0,ge()(a.duration,{long:!0})),m()(ln.a,{},void 0,a.reason||m()("em",{},void 0,e("admin.bans.noReason"))),m()(ln.a,{},void 0,m()(Ln,{user:a.moderator})),m()(ln.a,{},void 0,m()(J.a,{variant:"raised",onClick:t},void 0,e("admin.bans.unban"))))};Oe.propTypes={};var we=he(Oe),Me=Object(pn.c)(),Ae=_()({style:{background:"#9d2053",padding:"12px 24px",lineHeight:"35px"}})("div"),Ce=_()({style:{background:"#631032",color:"#ffffff",border:0,marginLeft:12,paddingLeft:12,height:35},type:"text"})("input"),je=m()("span",{},void 0,"Managing Bans:"),Se=m()(Ce,{}),Ue=m()(ln.a,{}),Te=function(n){var e=n.t,a=n.bans,t=n.onUnbanUser;return m()(b.a.Fragment,{},void 0,m()(Ae,{},void 0,je,m()("span",{style:{float:"right"}},void 0,"Filter User:",Se)),m()(fn.a,{},void 0,m()(mn.a,{},void 0,m()(vn.a,{},void 0,Ue,m()(ln.a,{},void 0,e("admin.bans.user")),m()(ln.a,{},void 0,e("admin.bans.duration")),m()(ln.a,{},void 0,e("admin.bans.reason")),m()(ln.a,{},void 0,e("admin.bans.bannedBy")),m()(ln.a,{},void 0,e("admin.bans.actions")))),m()(bn.a,{},void 0,a.map(function(n){return m()(we,{ban:n,onUnbanUser:function(){return t(n.user)}},n.user._id)}))))};Te.propTypes={};var Ee=Me(Te),ke={onLoadBans:fe,onUnbanUser:function(n){return function(e){return e(function(n){return Object(Zn.del)("/bans/"+n._id,{})}(n)).then(function(){return e(fe())})}}},xe={main:cn,users:pe,bans:i()(Object(l.b)(function(n){return{bans:n.admin.bans.bans}},ke),c()({componentDidMount:function(){this.props.onLoadBans()}}))(Ee)},Ne=k()(function(n){return{component:xe[n.page]}})(N()("component")),Le=(a(634),m()(g.a,{primary:"Main"})),Pe=m()(g.a,{primary:"Users"}),Re=m()(g.a,{primary:"Bans"}),_e=function(n){var e=n.currentView,a=n.onTransition;return m()("div",{className:"AdminApp"},void 0,m()("div",{className:"AdminApp-menu"},void 0,m()(g.b,{},void 0,m()(T,{selected:"main"===e,className:"AdminApp-menuItem",onClick:function(){return a("main")}},void 0,Le),m()(T,{selected:"users"===e,className:"AdminApp-menuItem",onClick:function(){return a("users")}},void 0,Pe),m()(T,{selected:"bans"===e,className:"AdminApp-menuItem",onClick:function(){return a("bans")}},void 0,Re))),m()("div",{className:"AdminApp-page"},void 0,m()(Ne,{page:e})))};_e.propTypes={};var Be=_e,De=a(17),ze={currentPage:0,totalPages:0,totalUsers:0,users:[]};var Ie={currentPage:{offset:0,limit:50},bans:[]};var Fe=Object(De.c)({users:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,e=arguments[1];switch(e.type){case ne:return n;case ee:return y()({},n,{currentPage:e.payload.page,totalUsers:e.meta.total,totalPages:Math.ceil(e.meta.total/e.meta.pageSize),users:e.payload.users});default:return n}},bans:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e.type){case ae:return n;case te:return y()({},n,{bans:e.payload.bans});default:return n}},view:function(){var n=arguments[1];return n.type===$n?n.payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main"}});var He=Object(p.a)(ie,function(n){return n.view}),Je=Object(p.b)({currentView:He}),Ve={onTransition:function(n){return{type:$n,payload:n}}};function qe(n){(function(n){var e=n.getState();return e&&!!e.admin})(n)||function(n){n.mount("admin",Fe)}(n)}var We=i()(d()({store:o.a.object}),c()({componentWillMount:function(){this.props.store&&qe(this.props.store)}}),Object(l.b)(Je,Ve));e.default=We(Be)},634:function(n,e,a){}}]);
//# sourceMappingURL=admin_c74192b.js.map