(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{698:function(n,e,a){},827:function(n,e,a){"use strict";a.r(e);var t=a(5),r=a.n(t),o=a(17),i=a.n(o),s=a(170),u=a.n(s),d=a(668),c=a.n(d),p=a(7),l=a(15),v=a(0),m=a.n(v),f=a(1),b=a.n(f),g=a(130),h=a(141),y=a.n(h),O=a(317),w=a.n(O),A=a(112),U=a.n(A),C=a(36),M=a.n(C),S=a(79),j=a.n(S),T=a(314),E=a(800),N=a(801),P=a(802),k=a(797),x=a(790),F=a(819),L=a(658),R=a(147),_=a(175),D=i()(U()("newMotd","setMotd",function(n){return n.motd}),U()("expanded","setExpanded",!1),M()(function(n){var e=n.newMotd,a=n.compileOptions,t=n.expanded,r=n.setExpanded;return{parsedMotd:Object(_.a)(Object(R.a)(e),a),onExpand:function(){return r(!t)}}}),j()({onChange:function(n){var e=n.setMotd;return function(n){e(n.target.value)}},onSubmit:function(n){return function(e){var a=n.onSetMotd,t=n.newMotd,r=n.setExpanded;e.preventDefault(),a(t),r(!1)}}}));function z(n){n&&n.focus()}var B=m()(L.a,{}),I=m()(P.a,{},void 0,m()(k.a,{type:"submit",variant:"raised",color:"primary"},void 0,"Save")),H=function(n){var e=n.canChangeMotd,a=n.newMotd,t=n.parsedMotd,r=n.expanded,o=n.onChange,i=n.onSubmit,s=n.onExpand;return m()(T.a,{className:"AdminMotd"},void 0,m()(E.a,{title:"Message of the Day",action:e&&m()(x.a,{onClick:s},void 0,B)}),m()(N.a,{},void 0,t),m()(F.a,{in:r,unmountOnExit:!0},void 0,m()("form",{onSubmit:i},void 0,m()(N.a,{style:{paddingTop:0}},void 0,b.a.createElement("textarea",{className:"AdminMotd-field",rows:4,onChange:o,value:a,ref:z})),I)))};H.propTypes={},H.defaultProps={canChangeMotd:!1};var J=D(H),V=a(19),q=a(50),W=a(9).i,Y=Object(p.b)({motd:q.k,compileOptions:q.e,canChangeMotd:W}),G={onSetMotd:V.h},K=Object(l.b)(Y,G)(J),Q=m()("div",{},void 0,m()("p",{},void 0,"Note that the admin interface is not yet done and most things do not work. You can, however, configure the message of the day! :P"),m()(K,{})),X=function(){return Q};X.propTypes={};var Z=X,$=a(10),nn=a(822),en=a(823),an=a(824),tn=a(825),rn=a(842),on=a(821),sn=a(820),un=a(13),dn=a.n(un),cn=a(6),pn=a.n(cn),ln=a(127),vn=a.n(ln),mn=a(687),fn=a(812),bn=a(697),gn=a(45),hn=a(65),yn=a(48),On=i()(Object(hn.a)(),M()(function(n){return{onUsernameClick:function(e){var a=n.openUserCard,t=n.user;e.preventDefault(),a(t)}}})),wn=function(n){var e=n.user,a=n.onUsernameClick;return m()("button",{type:"button",onClick:a},void 0,m()(yn.a,{user:e}))};wn.propTypes={};var An=On(wn),Un=a(316),Cn=a(318),Mn={width:48,paddingLeft:0,paddingRight:0},Sn=M()(function(n){var e=n.className;return{className:pn()("AdminUserRow-cell",e)}})(sn.a),jn=m()(Sn,{},void 0,"Email"),Tn=m()(bn.a,{}),En=m()(fn.a,{},void 0,"Ban"),Nn=function(n){function e(){for(var e,a=arguments.length,t=Array(a),r=0;r<a;r++)t[r]=arguments[r];return(e=n.call.apply(n,[this].concat(t))||this).menu=vn()("menu"),e.state={open:!1,anchorEl:null},e.handleOpenMenu=function(n){e.setState({open:!0,anchorEl:n.currentTarget})},e.handleCloseMenu=function(){e.setState({open:!1,anchorEl:null})},e}return dn()(e,n),e.prototype.render=function(){var n=this.props.user,e=this.state,a=e.open,t=e.anchorEl;return m()(on.a,{className:"AdminUserRow"},void 0,m()(Sn,{className:"AdminUserRow-avatar"},void 0,m()(gn.a,{user:n})),m()(Sn,{},void 0,m()(An,{user:n})),m()(Sn,{},void 0,Object(Cn.a)(n.createdAt,"date")),jn,m()(Sn,{},void 0,n.roles.length>0&&m()(Un.a,{roleName:n.roles[0]})),m()(Sn,{style:Mn},void 0,m()(x.a,{onClick:this.handleOpenMenu,"aria-haspopup":"true","aria-owns":a?this.menu:null},void 0,Tn),m()(mn.a,{id:this.menu,open:a,anchorEl:t,onClose:this.handleCloseMenu},void 0,En)))},e}(b.a.Component);Nn.propTypes={};var Pn=a(664),kn=a.n(Pn),xn=i()(M()(function(n){var e=n.onFilter;return{onFilterDebounced:kn()(e,200)}}),j()({onChange:function(n){var e=n.onFilterDebounced;return function(n){return e(n.target.value)}}})),Fn=function(n){var e=n.onChange;return m()("input",{type:"text",className:"AdminUserHeader-filter",onChange:e})};Fn.propTypes={};var Ln=xn(Fn),Rn=m()("span",{},void 0,"Managing Users:"),_n=function(n){var e=n.onFilter;return m()("div",{className:"AdminUserHeader"},void 0,Rn,m()("span",{},void 0,"Filter User:",m()(Ln,{onFilter:e})))};_n.propTypes={};var Dn=_n,zn=Object($.c)(),Bn=m()(sn.a,{className:"AdminUserRow-avatar"}),In=m()(sn.a,{}),Hn=function(n){var e=n.t,a=n.pageSize,t=n.currentPage,r=n.totalUsers,o=n.users,i=n.onChangePage,s=n.onFilter;return m()(b.a.Fragment,{},void 0,m()(Dn,{onFilter:s}),m()(nn.a,{},void 0,m()(en.a,{},void 0,m()(on.a,{className:"AdminUserRow"},void 0,Bn,m()(sn.a,{},void 0,e("admin.users.user")),m()(sn.a,{},void 0,e("admin.users.joinedAt")),m()(sn.a,{},void 0,e("admin.users.email")),m()(sn.a,{},void 0,e("admin.users.roles")),In)),m()(an.a,{},void 0,o.map(function(n){return m()(Nn,{user:n})})),m()(tn.a,{},void 0,m()(on.a,{},void 0,m()(rn.a,{count:r,rowsPerPage:a,rowsPerPageOptions:[a],page:t,onChangePage:i})))))};Hn.propTypes={};var Jn=zn(Hn),Vn=a(16),qn="uwave/admin/view/TRANSITION",Wn="uwave/admin/users/SET_USERS_FILTER",Yn="uwave/admin/users/LOAD_USERS_START",Gn="uwave/admin/users/LOAD_USERS_COMPLETE",Kn="uwave/admin/bans/LOAD_BANS_START",Qn="uwave/admin/bans/LOAD_BANS_COMPLETE",Xn=function(n){return n.admin},Zn=Object(p.a)(Xn,function(n){return n.users.currentPage}),$n=Object(p.a)(Xn,function(n){return n.users.totalUsers}),ne=Object(p.a)(Xn,function(n){return n.users.filter}),ee=Object(p.a)(Xn,function(n){return n.users.users});function ae(){return{type:Yn}}function te(n){return{type:Gn,payload:{users:n.data,page:Math.floor(n.meta.offset/n.meta.pageSize)},meta:n.meta}}var re=Object(p.b)({currentPage:Zn,pageSize:function(){return 25},totalUsers:$n,users:ee}),oe={onLoadUsers:function(n){return void 0===n&&(n=null),function(e,a){var t=ne(a()),r={};return n&&(r.page=n),t&&(r.filter=t),e(Object(Vn.get)("/users",{qs:r,onStart:ae,onComplete:te}))}},onFilter:function(n){return void 0===n&&(n=null),{type:Wn,payload:{filter:n}}}},ie=i()(Object(l.b)(re,oe),M()(function(n){return{onChangePage:function(e,a){var t=n.pageSize;(0,n.onLoadUsers)({offset:a*t,limit:t})},onFilter:function(e){var a=n.pageSize,t=n.onLoadUsers,r=n.onFilter;r(e),t({offset:0,limit:a})}}}),c()({componentDidMount:function(){(0,this.props.onChangePage)(null,0)}}))(Jn),se=a(83);function ue(){return{type:Kn}}function de(n){var e=n.meta;return{type:Qn,payload:{bans:Object(se.a)(n)},meta:{page:Math.floor(e.offset/e.pageSize),size:e.pageSize}}}function ce(){return Object(Vn.get)("/bans",{onStart:ue,onComplete:de})}var pe=a(110),le=a.n(pe),ve=Object($.c)(),me={width:48,paddingRight:0},fe=function(n){var e=n.t,a=n.ban,t=n.onUnbanUser;return m()(on.a,{},void 0,m()(sn.a,{style:me},void 0,m()(gn.a,{user:a.user})),m()(sn.a,{},void 0,m()(An,{user:a.user})),m()(sn.a,{},void 0,le()(a.duration,{long:!0})),m()(sn.a,{},void 0,a.reason||m()("em",{},void 0,e("admin.bans.noReason"))),m()(sn.a,{},void 0,m()(An,{user:a.moderator})),m()(sn.a,{},void 0,m()(k.a,{variant:"raised",onClick:t},void 0,e("admin.bans.unban"))))};fe.propTypes={};var be=ve(fe),ge=Object($.c)(),he=M()({style:{background:"#9d2053",padding:"12px 24px",lineHeight:"35px"}})("div"),ye=M()({style:{background:"#631032",color:"#ffffff",border:0,marginLeft:12,paddingLeft:12,height:35},type:"text"})("input"),Oe=m()("span",{},void 0,"Managing Bans:"),we=m()(ye,{}),Ae=m()(sn.a,{}),Ue=function(n){var e=n.t,a=n.bans,t=n.onUnbanUser;return m()(b.a.Fragment,{},void 0,m()(he,{},void 0,Oe,m()("span",{style:{float:"right"}},void 0,"Filter User:",we)),m()(nn.a,{},void 0,m()(en.a,{},void 0,m()(on.a,{},void 0,Ae,m()(sn.a,{},void 0,e("admin.bans.user")),m()(sn.a,{},void 0,e("admin.bans.duration")),m()(sn.a,{},void 0,e("admin.bans.reason")),m()(sn.a,{},void 0,e("admin.bans.bannedBy")),m()(sn.a,{},void 0,e("admin.bans.actions")))),m()(an.a,{},void 0,a.map(function(n){return m()(be,{ban:n,onUnbanUser:function(){return t(n.user)}},n.user._id)}))))};Ue.propTypes={};var Ce=ge(Ue),Me={onLoadBans:ce,onUnbanUser:function(n){return function(e){return e(function(n){return Object(Vn.del)("/bans/"+n._id,{})}(n)).then(function(){return e(ce())})}}},Se={main:Z,users:ie,bans:i()(Object(l.b)(function(n){return{bans:n.admin.bans.bans}},Me),c()({componentDidMount:function(){this.props.onLoadBans()}}))(Ce)},je=y()(function(n){return{component:Se[n.page]}})(w()("component")),Te=(a(698),m()(g.b,{primary:"Main"})),Ee=m()(g.b,{primary:"Users"}),Ne=m()(g.b,{primary:"Bans"}),Pe=function(n){var e=n.currentView,a=n.onTransition;return m()("div",{className:"AdminApp"},void 0,m()("div",{className:"AdminApp-menu"},void 0,m()(g.c,{},void 0,m()(g.a,{selected:"main"===e,className:"AdminApp-menuItem",onClick:function(){return a("main")}},void 0,Te),m()(g.a,{selected:"users"===e,className:"AdminApp-menuItem",onClick:function(){return a("users")}},void 0,Ee),m()(g.a,{selected:"bans"===e,className:"AdminApp-menuItem",onClick:function(){return a("bans")}},void 0,Ne))),m()("div",{className:"AdminApp-page"},void 0,m()(je,{page:e})))};Pe.propTypes={};var ke=Pe,xe=a(18),Fe=a(2),Le=a.n(Fe),Re={filter:null,currentPage:0,totalPages:0,totalUsers:0,users:[]};var _e={currentPage:{offset:0,limit:50},bans:[]};var De=Object(xe.c)({users:function(n,e){switch(void 0===n&&(n=Re),e.type){case Wn:return Le()({},n,{filter:e.payload.filter});case Yn:return n;case Gn:return Le()({},n,{currentPage:e.payload.page,totalUsers:e.meta.results,totalPages:Math.ceil(e.meta.results/e.meta.pageSize),users:e.payload.users});default:return n}},bans:function(n,e){switch(void 0===n&&(n=_e),void 0===e&&(e={}),e.type){case Kn:return n;case Qn:return Le()({},n,{bans:e.payload.bans});default:return n}},view:function(n,e){return void 0===n&&(n="main"),e.type===qn?e.payload:n}});var ze=Object(p.a)(Xn,function(n){return n.view}),Be=Object(p.b)({currentView:ze}),Ie={onTransition:function(n){return{type:qn,payload:n}}};function He(n){(function(n){var e=n.getState();return e&&!!e.admin})(n)||function(n){n.mount("admin",De)}(n)}var Je=i()(u()({store:r.a.object}),c()({componentWillMount:function(){this.props.store&&He(this.props.store)}}),Object(l.b)(Be,Ie));e.default=Je(ke)}}]);
//# sourceMappingURL=admin_804588e.js.map