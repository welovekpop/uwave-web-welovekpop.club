{"version":3,"sources":["actions/WaitlistActionCreators.js"],"names":["setWaitList","setLocked","clearWaitlist","updatedWaitlist","joinWaitlist","joinedWaitlist","leaveWaitlist","leftWaitlist","movedInWaitlist","modLockWaitlist","modUnlockWaitlist","modClearWaitlist","data","type","payload","waitlist","locked","lock","otherUser","dispatch","getState","user","userID","_id","onStart","onComplete","_ref","onError","error","_ref2","_ref3","_ref4","_ref5","moderatorID","position","meta","putLock","status","clear","_ref6"],"mappings":";;;;;QAIgBA,W,GAAAA,W;QAUAC,S,GAAAA,S;QASAC,a,GAAAA,a;QAIAC,e,GAAAA,e;QASAC,Y,GAAAA,Y;QA0BAC,c,GAAAA,c;QAUAC,a,GAAAA,a;QA0BAC,Y,GAAAA,Y;QAUAC,e,GAAAA,e;QAyCAC,e,GAAAA,e;QAGAC,iB,GAAAA,iB;QAIAC,gB,GAAAA,gB;;AA5JhB;;AACA;;AACA;;AAEO,SAASX,WAAT,CAAqBY,IAArB,EAA2B;AAChC,SAAO;AACLC,iCADK;AAELC,aAAS;AACPC,gBAAUH,KAAKG,QADR;AAEPC,cAAQJ,KAAKI;AAFN;AAFJ,GAAP;AAOD;;AAEM,SAASf,SAAT,CAAmBgB,IAAnB,EAAyB;AAC9B,SAAO;AACLJ,iCADK;AAELC,aAAS;AACPE,cAAQC;AADD;AAFJ,GAAP;AAMD;;AAEM,SAASf,aAAT,GAAyB;AAC9B,SAAO,EAAEW,8BAAF,EAAP;AACD;;AAEM,SAASV,eAAT,CAAyBY,QAAzB,EAAmC;AACxC,SAAO;AACLF,mCADK;AAELC,aAAS,EAAEC,UAAUA,QAAZ;AAFJ,GAAP;AAID;;AAED;AACA;AACO,SAASX,YAAT,CAAsBc,SAAtB,EAAiC;AACtC,SAAO,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AACnC,QAAIC,OAAOH,aAAa,wCAAoBE,UAApB,CAAxB;;AAEA,WAAOD,SAAS,iCAAK,WAAL,EAAkB,EAAEG,QAAQD,KAAKE,GAAf,EAAlB,EAAwC;AACtDC,eAAS,SAASA,OAAT,GAAmB;AAC1B,eAAO,EAAEX,6BAAF,EAAP;AACD,OAHqD;AAItDY,kBAAY,SAASA,UAAT,CAAoBC,IAApB,EAA0B;AACpC,YAAId,OAAOc,KAAKd,IAAhB;AACA,eAAO;AACLC,0CADK;AAELC,mBAAS,EAAEC,UAAUH,IAAZ;AAFJ,SAAP;AAID,OAVqD;AAWtDe,eAAS,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;AAC/B,eAAO;AACLf,0CADK;AAELe,iBAAO,IAFF;AAGLd,mBAASc;AAHJ,SAAP;AAKD;AAjBqD,KAAxC,CAAT,CAAP;AAmBD,GAtBD;AAuBD;;AAEM,SAASvB,cAAT,CAAwBwB,KAAxB,EAA+B;AACpC,MAAIP,SAASO,MAAMP,MAAnB;AAAA,MACIP,WAAWc,MAAMd,QADrB;;AAGA,SAAO;AACLF,iCADK;AAELC,aAAS,EAAEQ,QAAQA,MAAV,EAAkBP,UAAUA,QAA5B;AAFJ,GAAP;AAID;;AAEM,SAAST,aAAT,CAAuBY,SAAvB,EAAkC;AACvC,SAAO,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AACnC,QAAIC,OAAOH,aAAa,wCAAoBE,UAApB,CAAxB;;AAEA,WAAOD,SAAS,gCAAI,eAAeE,KAAKE,GAAxB,EAA6B,EAA7B,EAAiC;AAC/CC,eAAS,SAASA,OAAT,GAAmB;AAC1B,eAAO,EAAEX,8BAAF,EAAP;AACD,OAH8C;AAI/CY,kBAAY,SAASA,UAAT,CAAoBK,KAApB,EAA2B;AACrC,YAAIlB,OAAOkB,MAAMlB,IAAjB;AACA,eAAO;AACLC,2CADK;AAELC,mBAAS,EAAEC,UAAUH,IAAZ;AAFJ,SAAP;AAID,OAV8C;AAW/Ce,eAAS,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;AAC/B,eAAO;AACLf,2CADK;AAELe,iBAAO,IAFF;AAGLd,mBAASc;AAHJ,SAAP;AAKD;AAjB8C,KAAjC,CAAT,CAAP;AAmBD,GAtBD;AAuBD;;AAEM,SAASrB,YAAT,CAAsBwB,KAAtB,EAA6B;AAClC,MAAIT,SAASS,MAAMT,MAAnB;AAAA,MACIP,WAAWgB,MAAMhB,QADrB;;AAGA,SAAO;AACLF,kCADK;AAELC,aAAS,EAAEQ,QAAQA,MAAV,EAAkBP,UAAUA,QAA5B;AAFJ,GAAP;AAID;;AAEM,SAASP,eAAT,CAAyBwB,KAAzB,EAAgC;AACrC,MAAIV,SAASU,MAAMV,MAAnB;AAAA,MACIW,cAAcD,MAAMC,WADxB;AAAA,MAEIC,WAAWF,MAAME,QAFrB;AAAA,MAGInB,WAAWiB,MAAMjB,QAHrB;;AAKA,SAAO,UAAUI,QAAV,EAAoB;AACzBA,aAAS;AACPN,mCADO;AAEPC,eAAS,EAAEQ,QAAQA,MAAV,EAAkBY,UAAUA,QAA5B,EAFF;AAGPC,YAAM,EAAEF,aAAaA,WAAf;AAHC,KAAT;AAKAd,aAAShB,gBAAgBY,QAAhB,CAAT;AACD,GAPD;AAQD;;AAED,SAASqB,OAAT,CAAiBC,MAAjB,EAAyB;AACvB,SAAO,gCAAI,gBAAJ,EAAsB,EAAEpB,MAAMoB,MAAR,EAAgBC,OAAO,KAAvB,EAAtB,EAAsD;AAC3Dd,aAAS,SAASA,OAAT,GAAmB;AAC1B,aAAO;AACLX,qCADK;AAELC,iBAAS,EAAEE,QAAQqB,MAAV;AAFJ,OAAP;AAID,KAN0D;AAO3DZ,gBAAY,SAASA,UAAT,CAAoBc,KAApB,EAA2B;AACrC,UAAI3B,OAAO2B,MAAM3B,IAAjB;AACA,aAAO;AACLC,wCADK;AAELC,iBAAS,EAAEE,QAAQJ,KAAKI,MAAf;AAFJ,OAAP;AAID,KAb0D;AAc3DW,aAAS,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;AAC/B,aAAO;AACLf,wCADK;AAELe,eAAO,IAFF;AAGLd,iBAASc;AAHJ,OAAP;AAKD;AApB0D,GAAtD,CAAP;AAsBD;;AAEM,SAASnB,eAAT,GAA2B;AAChC,SAAO2B,QAAQ,IAAR,CAAP;AACD;AACM,SAAS1B,iBAAT,GAA6B;AAClC,SAAO0B,QAAQ,KAAR,CAAP;AACD;;AAEM,SAASzB,gBAAT,GAA4B;AACjC,SAAO,gCAAI,WAAJ,EAAiB,EAAjB,EAAqB;AAC1Ba,aAAS,SAASA,OAAT,GAAmB;AAC1B,aAAO,EAAEX,8BAAF,EAAP;AACD,KAHyB;AAI1BY,gBAAY,SAASA,UAAT,GAAsB;AAChC,aAAO,EAAEZ,iCAAF,EAAP;AACD,KANyB;AAO1Bc,aAAS,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;AAC/B,aAAO;AACLf,yCADK;AAELe,eAAO,IAFF;AAGLd,iBAASc;AAHJ,OAAP;AAKD;AAbyB,GAArB,CAAP;AAeD;AACD","file":"WaitlistActionCreators.js","sourcesContent":["import {\n  WAITLIST_LOAD,\n  WAITLIST_LOCK,\n  WAITLIST_CLEAR,\n  WAITLIST_UPDATE,\n  WAITLIST_JOIN,\n  WAITLIST_LEAVE,\n  WAITLIST_MOVE,\n  DO_JOIN_START, DO_JOIN_COMPLETE,\n  DO_LEAVE_START, DO_LEAVE_COMPLETE,\n  DO_LOCK_START, DO_LOCK_COMPLETE,\n  DO_CLEAR_START, DO_CLEAR_COMPLETE,\n} from '../constants/actionTypes/waitlist';\nimport { del, post, put } from './RequestActionCreators';\nimport { currentUserSelector } from '../selectors/userSelectors';\n\nexport function setWaitList(data) {\n  return {\n    type: WAITLIST_LOAD,\n    payload: {\n      waitlist: data.waitlist,\n      locked: data.locked,\n    },\n  };\n}\n\nexport function setLocked(lock) {\n  return {\n    type: WAITLIST_LOCK,\n    payload: {\n      locked: lock,\n    },\n  };\n}\n\nexport function clearWaitlist() {\n  return { type: WAITLIST_CLEAR };\n}\n\nexport function updatedWaitlist(waitlist) {\n  return {\n    type: WAITLIST_UPDATE,\n    payload: { waitlist },\n  };\n}\n\n// TODO split joining the waitlist and adding another user to the waitlist\n// into two different actions.\nexport function joinWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(post('/waitlist', { userID: user._id }, {\n      onStart: () => ({ type: DO_JOIN_START }),\n      onComplete: ({ data }) => ({\n        type: DO_JOIN_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_JOIN_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function joinedWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_JOIN,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function leaveWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(del(`/waitlist/${user._id}`, {}, {\n      onStart: () => ({ type: DO_LEAVE_START }),\n      onComplete: ({ data }) => ({\n        type: DO_LEAVE_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_LEAVE_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function leftWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_LEAVE,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function movedInWaitlist({\n  userID, moderatorID, position, waitlist,\n}) {\n  return (dispatch) => {\n    dispatch({\n      type: WAITLIST_MOVE,\n      payload: { userID, position },\n      meta: { moderatorID },\n    });\n    dispatch(updatedWaitlist(waitlist));\n  };\n}\n\nfunction putLock(status) {\n  return put('/waitlist/lock', { lock: status, clear: false }, {\n    onStart: () => ({\n      type: DO_LOCK_START,\n      payload: { locked: status },\n    }),\n    onComplete: ({ data }) => ({\n      type: DO_LOCK_COMPLETE,\n      payload: { locked: data.locked },\n    }),\n    onError: error => ({\n      type: DO_LOCK_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function modLockWaitlist() {\n  return putLock(true);\n}\nexport function modUnlockWaitlist() {\n  return putLock(false);\n}\n\nexport function modClearWaitlist() {\n  return del('/waitlist', {}, {\n    onStart: () => ({ type: DO_CLEAR_START }),\n    onComplete: () => ({ type: DO_CLEAR_COMPLETE }),\n    onError: error => ({\n      type: DO_CLEAR_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n"]}