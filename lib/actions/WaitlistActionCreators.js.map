{"version":3,"sources":["actions/WaitlistActionCreators.js"],"names":["setWaitList","data","type","WAITLIST_LOAD","payload","waitlist","locked","setLocked","lock","WAITLIST_LOCK","clearWaitlist","WAITLIST_CLEAR","updatedWaitlist","WAITLIST_UPDATE","joinWaitlist","otherUser","dispatch","getState","user","userID","_id","onStart","DO_JOIN_START","onComplete","_ref","DO_JOIN_COMPLETE","onError","error","joinedWaitlist","_ref2","WAITLIST_JOIN","leaveWaitlist","DO_LEAVE_START","_ref3","DO_LEAVE_COMPLETE","leftWaitlist","_ref4","WAITLIST_LEAVE","movedInWaitlist","_ref5","moderatorID","position","WAITLIST_MOVE","meta","putLock","status","clear","DO_LOCK_START","_ref6","DO_LOCK_COMPLETE","modLockWaitlist","modUnlockWaitlist","modClearWaitlist","DO_CLEAR_START","DO_CLEAR_COMPLETE"],"mappings":"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","file":"WaitlistActionCreators.js","sourcesContent":["import {\n  WAITLIST_LOAD,\n  WAITLIST_LOCK,\n  WAITLIST_CLEAR,\n  WAITLIST_UPDATE,\n  WAITLIST_JOIN,\n  WAITLIST_LEAVE,\n  WAITLIST_MOVE,\n  DO_JOIN_START, DO_JOIN_COMPLETE,\n  DO_LEAVE_START, DO_LEAVE_COMPLETE,\n  DO_LOCK_START, DO_LOCK_COMPLETE,\n  DO_CLEAR_START, DO_CLEAR_COMPLETE,\n} from '../constants/actionTypes/waitlist';\nimport { del, post, put } from './RequestActionCreators';\nimport { currentUserSelector } from '../selectors/userSelectors';\n\nexport function setWaitList(data) {\n  return {\n    type: WAITLIST_LOAD,\n    payload: {\n      waitlist: data.waitlist,\n      locked: data.locked,\n    },\n  };\n}\n\nexport function setLocked(lock) {\n  return {\n    type: WAITLIST_LOCK,\n    payload: {\n      locked: lock,\n    },\n  };\n}\n\nexport function clearWaitlist() {\n  return { type: WAITLIST_CLEAR };\n}\n\nexport function updatedWaitlist(waitlist) {\n  return {\n    type: WAITLIST_UPDATE,\n    payload: { waitlist },\n  };\n}\n\n// TODO split joining the waitlist and adding another user to the waitlist\n// into two different actions.\nexport function joinWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(post('/waitlist', { userID: user._id }, {\n      onStart: () => ({ type: DO_JOIN_START }),\n      onComplete: ({ data }) => ({\n        type: DO_JOIN_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_JOIN_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function joinedWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_JOIN,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function leaveWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(del(`/waitlist/${user._id}`, {}, {\n      onStart: () => ({ type: DO_LEAVE_START }),\n      onComplete: ({ data }) => ({\n        type: DO_LEAVE_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_LEAVE_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function leftWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_LEAVE,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function movedInWaitlist({\n  userID, moderatorID, position, waitlist,\n}) {\n  return (dispatch) => {\n    dispatch({\n      type: WAITLIST_MOVE,\n      payload: { userID, position },\n      meta: { moderatorID },\n    });\n    dispatch(updatedWaitlist(waitlist));\n  };\n}\n\nfunction putLock(status) {\n  return put('/waitlist/lock', { lock: status, clear: false }, {\n    onStart: () => ({\n      type: DO_LOCK_START,\n      payload: { locked: status },\n    }),\n    onComplete: ({ data }) => ({\n      type: DO_LOCK_COMPLETE,\n      payload: { locked: data.locked },\n    }),\n    onError: error => ({\n      type: DO_LOCK_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function modLockWaitlist() {\n  return putLock(true);\n}\nexport function modUnlockWaitlist() {\n  return putLock(false);\n}\n\nexport function modClearWaitlist() {\n  return del('/waitlist', {}, {\n    onStart: () => ({ type: DO_CLEAR_START }),\n    onComplete: () => ({ type: DO_CLEAR_COMPLETE }),\n    onError: error => ({\n      type: DO_CLEAR_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n"]}