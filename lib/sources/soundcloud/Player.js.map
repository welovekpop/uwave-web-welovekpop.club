{"version":3,"sources":["sources/soundcloud/Player.js"],"names":["debug","CLIENT_ID","_ref","src","soundcloudLogo","alt","SoundCloudPlayer","_React$Component","apply","arguments","_proto","prototype","componentDidMount","audio","Audio","autoplay","play","componentDidUpdate","prevProps","volume","props","media","sourceID","enabled","active","stop","componentWillUnmount","_this","doSeek","currentTime","seek","start","removeEventListener","streamUrl","sourceData","addEventListener","pause","render","className","thumbnail","SongInfo","artist","username","title","fullTitle","artistUrl","trackUrl","permalinkUrl","href","target","rel","React","Component","propTypes","process","env","NODE_ENV","PropTypes","string","bool","isRequired","object","number"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA,IAAIA,QAAQ,oBAAY,kCAAZ,CAAZ;AACA,IAAIC,YAAY,kCAAhB;;AAEA,IAAIC;AACJ;AACA,mBAAK,KAAL,EAAY;AACVC,OAAKC,yBADK;AAEVC,OAAK;AAFK,CAAZ,CAFA;;AAOA,IAAIC;AACJ;AACA,UAAUC,gBAAV,EAA4B;AAC1B,+BAAeD,gBAAf,EAAiCC,gBAAjC;;AAEA,WAASD,gBAAT,GAA4B;AAC1B,WAAOC,iBAAiBC,KAAjB,CAAuB,IAAvB,EAA6BC,SAA7B,KAA2C,IAAlD;AACD;;AAED,MAAIC,SAASJ,iBAAiBK,SAA9B;;AAEAD,SAAOE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,SAAKC,KAAL,GAAa,IAAIC,KAAJ,EAAb;AACA,SAAKD,KAAL,CAAWE,QAAX,GAAsB,IAAtB;AACA,SAAKC,IAAL;AACD,GAJD;;AAMAN,SAAOO,kBAAP,GAA4B,SAASA,kBAAT,CAA4BC,SAA5B,EAAuC;AACjE,QAAIA,UAAUC,MAAV,KAAqB,KAAKC,KAAL,CAAWD,MAApC,EAA4C;AAC1C,WAAKN,KAAL,CAAWM,MAAX,GAAoB,KAAKC,KAAL,CAAWD,MAAX,GAAoB,GAAxC;AACD;;AAED,QAAID,UAAUG,KAAV,CAAgBC,QAAhB,KAA6B,KAAKF,KAAL,CAAWC,KAAX,CAAiBC,QAA9C,IAA0DJ,UAAUK,OAAV,KAAsB,KAAKH,KAAL,CAAWG,OAA3F,IAAsGL,UAAUM,MAAV,KAAqB,KAAKJ,KAAL,CAAWI,MAA1I,EAAkJ;AAChJ,UAAI,KAAKJ,KAAL,CAAWG,OAAX,IAAsB,KAAKH,KAAL,CAAWI,MAArC,EAA6C;AAC3C,aAAKR,IAAL;AACD,OAFD,MAEO;AACL,aAAKS,IAAL;AACD;AACF;AACF,GAZD;;AAcAf,SAAOgB,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,SAAKD,IAAL;AACD,GAFD;;AAIAf,SAAOM,IAAP,GAAc,SAASA,IAAT,GAAgB;AAC5B,QAAIW,QAAQ,IAAZ;;AAEA,QAAI,KAAKP,KAAL,CAAWG,OAAX,IAAsB,KAAKH,KAAL,CAAWI,MAArC,EAA6C;AAC3C;AACA;AACA;AACA,UAAII,SAAS,SAASA,MAAT,GAAkB;AAC7BD,cAAMd,KAAN,CAAYgB,WAAZ,GAA0BF,MAAMP,KAAN,CAAYU,IAAZ,IAAoBH,MAAMP,KAAN,CAAYC,KAAZ,CAAkBU,KAAlB,IAA2B,CAA/C,CAA1B;AACAJ,cAAMd,KAAN,CAAYM,MAAZ,GAAqBQ,MAAMP,KAAN,CAAYD,MAAZ,GAAqB,GAA1C;;AAEAQ,cAAMd,KAAN,CAAYmB,mBAAZ,CAAgC,gBAAhC,EAAkDJ,MAAlD,EAA0D,KAA1D;AACD,OALD;;AAOA,UAAIK,YAAY,KAAKb,KAAL,CAAWC,KAAX,CAAiBa,UAAjB,CAA4BD,SAA5C;AACA,WAAKpB,KAAL,CAAWV,GAAX,GAAiB8B,YAAY,aAAZ,GAA4BhC,SAA7C;AACA,WAAKY,KAAL,CAAWG,IAAX;AACAhB,YAAM,aAAN,EAAqB,KAAKoB,KAAL,CAAWU,IAAhC;AACA,WAAKjB,KAAL,CAAWsB,gBAAX,CAA4B,gBAA5B,EAA8CP,MAA9C,EAAsD,KAAtD;AACD,KAhBD,MAgBO;AACL,WAAKH,IAAL;AACD;AACF,GAtBD;;AAwBAf,SAAOe,IAAP,GAAc,SAASA,IAAT,GAAgB;AAC5B,SAAKZ,KAAL,CAAWuB,KAAX;AACD,GAFD;;AAIA1B,SAAO2B,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAI,CAAC,KAAKjB,KAAL,CAAWI,MAAhB,EAAwB;AACtB,aAAO,IAAP;AACD;;AAED,QAAIH,QAAQ,KAAKD,KAAL,CAAWC,KAAvB;AACA,QAAIa,aAAab,MAAMa,UAAvB;;AAEA,QAAI,CAACA,UAAL,EAAiB;AACf,aAAO,mBAAK,KAAL,EAAY;AACjBI,mBAAW,yBAAG,uBAAH,EAA4B,KAAKlB,KAAL,CAAWkB,SAAvC;AADM,OAAZ,CAAP;AAGD;;AAED,WAAO,mBAAK,KAAL,EAAY;AACjBA,iBAAW,yBAAG,uBAAH,EAA4B,KAAKlB,KAAL,CAAWkB,SAAvC;AADM,KAAZ,EAEJ,KAAK,CAFD,EAEI,mBAAK,KAAL,EAAY;AACrBA,iBAAW;AADU,KAAZ,EAER,KAAK,CAFG,EAEA,mBAAK,KAAL,EAAY;AACrBA,iBAAW;AADU,KAAZ,EAER,KAAK,CAFG,EAEA,mBAAK,KAAL,EAAY;AACrBA,iBAAW,2BADU;AAErBnC,WAAKkB,MAAMkB,SAFU;AAGrBlC,WAAK;AAHgB,KAAZ,CAFA,EAMP,mBAAK,KAAL,EAAY;AACdiC,iBAAW;AADG,KAAZ,EAED,KAAK,CAFJ,EAEO,mBAAKE,iBAAL,EAAe;AACxBC,cAAQP,WAAWQ,QADK;AAExBC,aAAOT,WAAWU,SAFM;AAGxBC,iBAAWX,WAAWW,SAHE;AAIxBC,gBAAUZ,WAAWa;AAJG,KAAf,CAFP,CANO,CAFA,EAeL,mBAAK,GAAL,EAAU;AACdC,YAAMd,WAAWa,YADH;AAEdE,cAAQ,QAFM;AAGdC,WAAK,qBAHS;AAIdZ,iBAAW;AAJG,KAAV,EAKH,KAAK,CALF,EAKK,SALL,EAKgB,GALhB,EAKqBpC,IALrB,CAfK,CAFJ,CAAP;AAuBD,GArCD;;AAuCA,SAAOI,gBAAP;AACD,CArGD,CAqGE6C,eAAMC,SArGR,CAFA;;;AA0GA9C,iBAAiB+C,SAAjB,GAA6BC,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC;AACnElB,aAAWmB,mBAAUC,MAD8C;AAEnElC,UAAQiC,mBAAUE,IAAV,CAAeC,UAF4C;AAGnErC,WAASkC,mBAAUE,IAHgD;AAInEtC,SAAOoC,mBAAUI,MAJkD;AAKnE/B,QAAM2B,mBAAUK,MALmD;AAMnE3C,UAAQsC,mBAAUK;AANiD,CAAxC,GAOzB,EAPJ,C,CAQA","file":"Player.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport createDebug from 'debug';\nimport SongInfo from './SongInfo';\nimport soundcloudLogo from '../../../assets/img/soundcloud-inline.png';\n\nconst debug = createDebug('uwave:component:video:soundcloud');\n\nconst CLIENT_ID = '9d883cdd4c3c54c6dddda2a5b3a11200';\n\nexport default class SoundCloudPlayer extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    active: PropTypes.bool.isRequired,\n    enabled: PropTypes.bool,\n    media: PropTypes.object,\n    seek: PropTypes.number,\n    volume: PropTypes.number,\n  };\n\n  componentDidMount() {\n    this.audio = new Audio();\n    this.audio.autoplay = true;\n    this.play();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.volume !== this.props.volume) {\n      this.audio.volume = this.props.volume / 100;\n    }\n    if (prevProps.media.sourceID !== this.props.media.sourceID ||\n        prevProps.enabled !== this.props.enabled ||\n        prevProps.active !== this.props.active) {\n      if (this.props.enabled && this.props.active) {\n        this.play();\n      } else {\n        this.stop();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.stop();\n  }\n\n  play() {\n    if (this.props.enabled && this.props.active) {\n      // In Firefox we have to wait for the \"canplaythrough\" event before\n      // seeking.\n      // http://stackoverflow.com/a/34970444\n      const doSeek = () => {\n        this.audio.currentTime = this.props.seek + (this.props.media.start || 0);\n        this.audio.volume = this.props.volume / 100;\n        this.audio.removeEventListener('canplaythrough', doSeek, false);\n      };\n\n      const { streamUrl } = this.props.media.sourceData;\n      this.audio.src = `${streamUrl}?client_id=${CLIENT_ID}`;\n      this.audio.play();\n      debug('currentTime', this.props.seek);\n      this.audio.addEventListener('canplaythrough', doSeek, false);\n    } else {\n      this.stop();\n    }\n  }\n\n  stop() {\n    this.audio.pause();\n  }\n\n  render() {\n    if (!this.props.active) {\n      return null;\n    }\n\n    const { media } = this.props;\n    const { sourceData } = media;\n    if (!sourceData) {\n      return <div className={cx('src-soundcloud-Player', this.props.className)} />;\n    }\n\n    return (\n      <div className={cx('src-soundcloud-Player', this.props.className)}>\n        <div className=\"src-soundcloud-Player-meta\">\n          <div className=\"src-soundcloud-Player-info\">\n            <img\n              className=\"src-soundcloud-Player-art\"\n              src={media.thumbnail}\n              alt=\"\"\n            />\n            <div className=\"src-soundcloud-Player-links\">\n              <SongInfo\n                artist={sourceData.username}\n                title={sourceData.fullTitle}\n                artistUrl={sourceData.artistUrl}\n                trackUrl={sourceData.permalinkUrl}\n              />\n            </div>\n          </div>\n          <a\n            href={sourceData.permalinkUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"src-soundcloud-Player-permalink\"\n          >\n            View on{' '}\n            <img\n              src={soundcloudLogo}\n              alt=\"SoundCloud\"\n            />\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n"]}