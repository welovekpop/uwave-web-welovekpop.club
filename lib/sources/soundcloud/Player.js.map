{"version":3,"sources":["sources/soundcloud/Player.js"],"names":["debug","CLIENT_ID","_ref","src","alt","SoundCloudPlayer","_React$Component","apply","arguments","prototype","componentDidMount","audio","Audio","autoplay","play","componentDidUpdate","prevProps","volume","props","media","sourceID","enabled","active","stop","componentWillUnmount","_this2","doSeek","currentTime","seek","start","removeEventListener","streamUrl","sourceData","addEventListener","pause","render","className","thumbnail","artist","username","title","fullTitle","artistUrl","trackUrl","permalinkUrl","href","target","rel","Component","propTypes","process","env","NODE_ENV","string","bool","isRequired","object","number"],"mappings":"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","file":"Player.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport createDebug from 'debug';\nimport SongInfo from './SongInfo';\nimport soundcloudLogo from '../../../assets/img/soundcloud-inline.png';\n\nconst debug = createDebug('uwave:component:video:soundcloud');\n\nconst CLIENT_ID = '9d883cdd4c3c54c6dddda2a5b3a11200';\n\nexport default class SoundCloudPlayer extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    active: PropTypes.bool.isRequired,\n    enabled: PropTypes.bool,\n    media: PropTypes.object,\n    seek: PropTypes.number,\n    volume: PropTypes.number,\n  };\n\n  componentDidMount() {\n    this.audio = new Audio();\n    this.audio.autoplay = true;\n    this.play();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.volume !== this.props.volume) {\n      this.audio.volume = this.props.volume / 100;\n    }\n    if (prevProps.media.sourceID !== this.props.media.sourceID ||\n        prevProps.enabled !== this.props.enabled ||\n        prevProps.active !== this.props.active) {\n      if (this.props.enabled && this.props.active) {\n        this.play();\n      } else {\n        this.stop();\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.stop();\n  }\n\n  play() {\n    if (this.props.enabled && this.props.active) {\n      // In Firefox we have to wait for the \"canplaythrough\" event before\n      // seeking.\n      // http://stackoverflow.com/a/34970444\n      const doSeek = () => {\n        this.audio.currentTime = this.props.seek + (this.props.media.start || 0);\n        this.audio.volume = this.props.volume / 100;\n        this.audio.removeEventListener('canplaythrough', doSeek, false);\n      };\n\n      const { streamUrl } = this.props.media.sourceData;\n      this.audio.src = `${streamUrl}?client_id=${CLIENT_ID}`;\n      this.audio.play();\n      debug('currentTime', this.props.seek);\n      this.audio.addEventListener('canplaythrough', doSeek, false);\n    } else {\n      this.stop();\n    }\n  }\n\n  stop() {\n    this.audio.pause();\n  }\n\n  render() {\n    if (!this.props.active) {\n      return null;\n    }\n\n    const { media } = this.props;\n    const { sourceData } = media;\n    if (!sourceData) {\n      return <div className={cx('src-soundcloud-Player', this.props.className)} />;\n    }\n\n    return (\n      <div className={cx('src-soundcloud-Player', this.props.className)}>\n        <div className=\"src-soundcloud-Player-meta\">\n          <div className=\"src-soundcloud-Player-info\">\n            <img\n              className=\"src-soundcloud-Player-art\"\n              src={media.thumbnail}\n              alt=\"\"\n            />\n            <div className=\"src-soundcloud-Player-links\">\n              <SongInfo\n                artist={sourceData.username}\n                title={sourceData.fullTitle}\n                artistUrl={sourceData.artistUrl}\n                trackUrl={sourceData.permalinkUrl}\n              />\n            </div>\n          </div>\n          <a\n            href={sourceData.permalinkUrl}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"src-soundcloud-Player-permalink\"\n          >\n            View on{' '}\n            <img\n              src={soundcloudLogo}\n              alt=\"SoundCloud\"\n            />\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n"]}