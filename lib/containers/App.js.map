{"version":3,"sources":["containers/App.js"],"names":["SimpleProviders","BusProvider","ClockProvider","mapStateToProps","activeOverlay","state","isConnected","isConnectedSelector","settings","settingsSelector","language","languageSelector","theme","themeSelector","mapDispatchToProps","onCloseOverlay","closeAll","enhance","AppContainer","_React$Component","_temp","_this","_len","arguments","length","args","Array","_key","call","apply","concat","error","renderApp","React","Fragment","Mobile","createElement","MobileApp","props","Desktop","DesktopApp","_proto","prototype","getChildContext","mediaSources","uwave","componentWillReceiveProps","nextProps","locale","changeLanguage","componentDidCatch","info","setState","bugsnag","notify","metaData","componentStack","render","MuiThemeProvider","FatalError","I18nextProvider","i18n","Component","childContextTypes","PropTypes","object","propTypes","process","env","NODE_ENV","isRequired","string"],"mappings":"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","file":"App.js","sourcesContent":["/* global bugsnag */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport nest from 'recompose/nest';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { MuiThemeProvider } from 'material-ui/styles';\nimport { I18nextProvider } from 'react-i18next';\nimport { Provider as BusProvider } from 'react-bus';\nimport { Mobile, Desktop } from '../components/Responsive';\nimport ClockProvider from '../components/ClockProvider';\nimport { closeAll } from '../actions/OverlayActionCreators';\nimport {\n  settingsSelector,\n  languageSelector,\n  themeSelector,\n} from '../selectors/settingSelectors';\nimport { isConnectedSelector } from '../selectors/serverSelectors';\nimport DesktopApp from '../components/App';\nimport MobileApp from '../mobile/components/App';\nimport FatalError from '../components/FatalError';\n\nconst SimpleProviders = nest(BusProvider, ClockProvider);\n\nconst mapStateToProps = createStructuredSelector({\n  activeOverlay: state => state.activeOverlay,\n  isConnected: isConnectedSelector,\n  settings: settingsSelector,\n  language: languageSelector,\n  theme: themeSelector,\n});\n\nconst mapDispatchToProps = {\n  onCloseOverlay: closeAll,\n};\n\nconst enhance = connect(mapStateToProps, mapDispatchToProps);\n\nclass AppContainer extends React.Component {\n  static propTypes = {\n    mediaSources: PropTypes.object.isRequired,\n    uwave: PropTypes.object,\n    language: PropTypes.string,\n    theme: PropTypes.object,\n    locale: PropTypes.object.isRequired,\n  };\n\n  static childContextTypes = {\n    mediaSources: PropTypes.object,\n    uwave: PropTypes.object,\n  };\n\n  state = {\n    error: null,\n  };\n\n  getChildContext() {\n    return {\n      mediaSources: this.props.mediaSources,\n      uwave: this.props.uwave,\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.language !== nextProps.language) {\n      this.props.locale.changeLanguage(nextProps.language);\n    }\n  }\n\n  componentDidCatch(error, info) {\n    this.setState({ error });\n\n    bugsnag.notify(error, {\n      metaData: {\n        componentStack: info.componentStack,\n      },\n    });\n  }\n\n  renderApp = () => (\n    <React.Fragment>\n      <Mobile>\n        <MobileApp {...this.props} />\n      </Mobile>\n      <Desktop>\n        <DesktopApp {...this.props} />\n      </Desktop>\n    </React.Fragment>\n  );\n\n  render() {\n    if (this.state.error) {\n      // Let's hope the ThemeProvider works at least...\n      return (\n        <MuiThemeProvider theme={this.props.theme}>\n          <FatalError error={this.state.error} />\n        </MuiThemeProvider>\n      );\n    }\n\n    return (\n      <MuiThemeProvider theme={this.props.theme}>\n        <I18nextProvider i18n={this.props.locale}>\n          <SimpleProviders>\n            {this.renderApp()}\n          </SimpleProviders>\n        </I18nextProvider>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default enhance(AppContainer);\n"]}