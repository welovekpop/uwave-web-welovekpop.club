{"version":3,"sources":["admin/components/Motd/index.js"],"names":["enhance","props","motd","parsedMotd","newMotd","compileOptions","onExpand","setExpanded","expanded","onChange","event","setMotd","target","value","onSubmit","onSetMotd","autoFocus","el","focus","_ref2","EditIcon","Motd","_ref","canChangeMotd","Card","className","CardHeader","title","action","IconButton","onClick","CardContent","Collapse","unmountOnExit","style","paddingTop","React","createElement","rows","ref","CardActions","Button","variant","color","propTypes","process","env","NODE_ENV","PropTypes","bool","string","isRequired","array","func","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withState from 'recompose/withState';\nimport withProps from 'recompose/withProps';\nimport withHandlers from 'recompose/withHandlers';\nimport Card, { CardHeader, CardContent, CardActions } from 'material-ui/Card';\nimport Button from 'material-ui/Button';\nimport IconButton from 'material-ui/IconButton';\nimport Collapse from 'material-ui/transitions/Collapse';\nimport EditIcon from '@material-ui/icons/ModeEdit';\nimport parse from 'u-wave-parse-chat-markup';\nimport compile from '../../../components/Chat/Markup/compile';\n\nconst enhance = compose(\n  withState('newMotd', 'setMotd', props => props.motd),\n  withState('expanded', 'setExpanded', false),\n  withProps(props => ({\n    parsedMotd: compile(parse(props.newMotd), props.compileOptions),\n    onExpand: () => props.setExpanded(!props.expanded),\n  })),\n  withHandlers({\n    onChange: props => (event) => {\n      props.setMotd(event.target.value);\n    },\n    onSubmit: props => () => {\n      props.onSetMotd(props.newMotd);\n      props.setExpanded(false);\n    },\n  }),\n);\n\nfunction autoFocus(el) {\n  if (el) el.focus();\n}\n\nconst Motd = ({\n  canChangeMotd,\n  newMotd,\n  parsedMotd,\n  expanded,\n  onChange,\n  onSubmit,\n  onExpand,\n}) => (\n  <Card className=\"AdminMotd\">\n    <CardHeader\n      title=\"Message of the Day\"\n      action={canChangeMotd && (\n        <IconButton onClick={onExpand}>\n          <EditIcon />\n        </IconButton>\n      )}\n    />\n    <CardContent>{parsedMotd}</CardContent>\n    <Collapse in={expanded} unmountOnExit>\n      <CardContent style={{ paddingTop: 0 }}>\n        <textarea\n          className=\"AdminMotd-field\"\n          rows={4}\n          onChange={onChange}\n          value={newMotd}\n          ref={autoFocus}\n        />\n      </CardContent>\n      <CardActions>\n        <Button\n          variant=\"raised\"\n          color=\"primary\"\n          onClick={onSubmit}\n        >\n          Save\n        </Button>\n      </CardActions>\n    </Collapse>\n  </Card>\n);\n\nMotd.propTypes = {\n  canChangeMotd: PropTypes.bool,\n  newMotd: PropTypes.string.isRequired,\n  parsedMotd: PropTypes.array.isRequired,\n  expanded: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n};\n\nMotd.defaultProps = {\n  canChangeMotd: false,\n};\n\nexport default enhance(Motd);\n"]}