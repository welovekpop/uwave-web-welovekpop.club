{"version":3,"sources":["admin/components/Motd/index.js"],"names":["enhance","props","motd","parsedMotd","newMotd","compileOptions","onExpand","setExpanded","expanded","onChange","event","setMotd","target","value","onSubmit","preventDefault","onSetMotd","autoFocus","el","focus","_ref2","EditIcon","_ref3","CardActions","Button","type","variant","color","Motd","_ref","canChangeMotd","Card","className","CardHeader","title","action","IconButton","onClick","CardContent","Collapse","unmountOnExit","style","paddingTop","React","createElement","rows","ref","propTypes","process","env","NODE_ENV","PropTypes","bool","string","isRequired","array","func","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withState from 'recompose/withState';\nimport withProps from 'recompose/withProps';\nimport withHandlers from 'recompose/withHandlers';\nimport Card, { CardHeader, CardContent, CardActions } from 'material-ui/Card';\nimport Button from 'material-ui/Button';\nimport IconButton from 'material-ui/IconButton';\nimport Collapse from 'material-ui/transitions/Collapse';\nimport EditIcon from '@material-ui/icons/ModeEdit';\nimport parse from 'u-wave-parse-chat-markup';\nimport compile from '../../../components/Chat/Markup/compile';\n\nconst enhance = compose(\n  withState('newMotd', 'setMotd', props => props.motd),\n  withState('expanded', 'setExpanded', false),\n  withProps(props => ({\n    parsedMotd: compile(parse(props.newMotd), props.compileOptions),\n    onExpand: () => props.setExpanded(!props.expanded),\n  })),\n  withHandlers({\n    onChange: props => (event) => {\n      props.setMotd(event.target.value);\n    },\n    onSubmit: props => (event) => {\n      event.preventDefault();\n      props.onSetMotd(props.newMotd);\n      props.setExpanded(false);\n    },\n  }),\n);\n\nfunction autoFocus(el) {\n  if (el) el.focus();\n}\n\nconst Motd = ({\n  canChangeMotd,\n  newMotd,\n  parsedMotd,\n  expanded,\n  onChange,\n  onSubmit,\n  onExpand,\n}) => (\n  <Card className=\"AdminMotd\">\n    <CardHeader\n      title=\"Message of the Day\"\n      action={canChangeMotd && (\n        <IconButton onClick={onExpand}>\n          <EditIcon />\n        </IconButton>\n      )}\n    />\n    <CardContent>{parsedMotd}</CardContent>\n    <Collapse in={expanded} unmountOnExit>\n      <form onSubmit={onSubmit}>\n        <CardContent style={{ paddingTop: 0 }}>\n          <textarea\n            className=\"AdminMotd-field\"\n            rows={4}\n            onChange={onChange}\n            value={newMotd}\n            ref={autoFocus}\n          />\n        </CardContent>\n        <CardActions>\n          <Button\n            type=\"submit\"\n            variant=\"raised\"\n            color=\"primary\"\n          >\n            Save\n          </Button>\n        </CardActions>\n      </form>\n    </Collapse>\n  </Card>\n);\n\nMotd.propTypes = {\n  canChangeMotd: PropTypes.bool,\n  newMotd: PropTypes.string.isRequired,\n  parsedMotd: PropTypes.array.isRequired,\n  expanded: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n};\n\nMotd.defaultProps = {\n  canChangeMotd: false,\n};\n\nexport default enhance(Motd);\n"]}