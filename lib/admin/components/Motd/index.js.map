{"version":3,"sources":["admin/components/Motd/index.js"],"names":["enhance","props","motd","parsedMotd","newMotd","compileOptions","onExpand","setExpanded","expanded","onChange","event","setMotd","target","value","onSubmit","onSetMotd","autoFocus","el","focus","_ref2","Motd","_ref","canChangeMotd","className","title","action","onClick","unmountOnExit","style","paddingTop","createElement","rows","ref","variant","color","propTypes","process","env","NODE_ENV","bool","string","isRequired","array","func","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withState from 'recompose/withState';\nimport withProps from 'recompose/withProps';\nimport withHandlers from 'recompose/withHandlers';\nimport Card, { CardHeader, CardContent, CardActions } from 'material-ui/Card';\nimport Button from 'material-ui/Button';\nimport IconButton from 'material-ui/IconButton';\nimport Collapse from 'material-ui/transitions/Collapse';\nimport EditIcon from 'material-ui-icons/ModeEdit';\nimport parse from 'u-wave-parse-chat-markup';\nimport compile from '../../../components/Chat/Markup/compile';\n\nconst enhance = compose(\n  withState('newMotd', 'setMotd', props => props.motd),\n  withState('expanded', 'setExpanded', false),\n  withProps(props => ({\n    parsedMotd: compile(parse(props.newMotd), props.compileOptions),\n    onExpand: () => props.setExpanded(!props.expanded),\n  })),\n  withHandlers({\n    onChange: props => (event) => {\n      props.setMotd(event.target.value);\n    },\n    onSubmit: props => () => {\n      props.onSetMotd(props.newMotd);\n      props.setExpanded(false);\n    },\n  }),\n);\n\nfunction autoFocus(el) {\n  if (el) el.focus();\n}\n\nconst Motd = ({\n  canChangeMotd,\n  newMotd,\n  parsedMotd,\n  expanded,\n  onChange,\n  onSubmit,\n  onExpand,\n}) => (\n  <Card className=\"AdminMotd\">\n    <CardHeader\n      title=\"Message of the Day\"\n      action={canChangeMotd && (\n        <IconButton onClick={onExpand}>\n          <EditIcon />\n        </IconButton>\n      )}\n    />\n    <CardContent>{parsedMotd}</CardContent>\n    <Collapse in={expanded} unmountOnExit>\n      <CardContent style={{ paddingTop: 0 }}>\n        <textarea\n          className=\"AdminMotd-field\"\n          rows={4}\n          onChange={onChange}\n          value={newMotd}\n          ref={autoFocus}\n        />\n      </CardContent>\n      <CardActions>\n        <Button\n          variant=\"raised\"\n          color=\"primary\"\n          onClick={onSubmit}\n        >\n          Save\n        </Button>\n      </CardActions>\n    </Collapse>\n  </Card>\n);\n\nMotd.propTypes = {\n  canChangeMotd: PropTypes.bool,\n  newMotd: PropTypes.string.isRequired,\n  parsedMotd: PropTypes.array.isRequired,\n  expanded: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n};\n\nMotd.defaultProps = {\n  canChangeMotd: false,\n};\n\nexport default enhance(Motd);\n"]}