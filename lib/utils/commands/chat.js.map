{"version":3,"sources":["utils/commands/chat.js"],"names":["guard","action","_len","arguments","length","args","Array","_key","motd","join","_len2","_key2","dispatch","getState","username","trim","user","_id"],"mappings":";;AAAA;;AAEA;;AACA;;AACA;;AAEA,4BAAS,MAAT,EAAiB,oEAAjB,EAAuF;AACrFA,yCADqF;AAErFC,UAAQ,SAASA,MAAT,GAAkB;AACxB,SAAK,IAAIC,OAAOC,UAAUC,MAArB,EAA6BC,OAAOC,MAAMJ,IAAN,CAApC,EAAiDK,OAAO,CAA7D,EAAgEA,OAAOL,IAAvE,EAA6EK,MAA7E,EAAqF;AACnFF,WAAKE,IAAL,IAAaJ,UAAUI,IAAV,CAAb;AACD;;AAED,QAAIC,OAAOH,KAAKI,IAAL,CAAU,GAAV,CAAX;AACA,WAAO,iCAAQD,IAAR,CAAP;AACD;AAToF,CAAvF;;AAYA,4BAAS,WAAT,EAAsB,+BAA+B,iFAArD,EAAwI;AACtIR,2CADsI;AAEtIC,UAAQ,SAASA,MAAT,GAAkB;AACxB,SAAK,IAAIS,QAAQP,UAAUC,MAAtB,EAA8BC,OAAOC,MAAMI,KAAN,CAArC,EAAmDC,QAAQ,CAAhE,EAAmEA,QAAQD,KAA3E,EAAkFC,OAAlF,EAA2F;AACzFN,WAAKM,KAAL,IAAcR,UAAUQ,KAAV,CAAd;AACD;;AAED,WAAO,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AACnC,UAAIC,WAAWT,KAAKI,IAAL,CAAU,GAAV,EAAeM,IAAf,EAAf;AACA,UAAID,QAAJ,EAAc;AACZ,YAAIE,OAAO,4BAAS,qCAAiBH,UAAjB,CAAT,EAAuCC,QAAvC,CAAX;AACA,YAAIE,IAAJ,EAAU;AACR,iBAAOJ,SAAS,wDAAyBI,KAAKC,GAA9B,CAAT,CAAP;AACD;AACD,eAAOL,SAAS,6BAAI,UAAUE,QAAV,GAAqB,2BAAzB,CAAT,CAAP;AACD;AACD,aAAOF,SAAS,sDAAT,CAAP;AACD,KAVD;AAWD;AAlBqI,CAAxI;AAoBA","file":"chat.js","sourcesContent":["import { register, findUser } from '../ChatCommands';\n\nimport {\n  userListSelector,\n  isModeratorSelector,\n  isManagerSelector,\n} from '../../selectors/userSelectors';\nimport {\n  deleteChatMessagesByUser,\n  deleteAllChatMessages,\n} from '../../actions/ModerationActionCreators';\nimport {\n  log,\n  setMotd,\n} from '../../actions/ChatActionCreators';\n\nregister(\n  'motd',\n  'Set the Message of the Day, displayed at the very top of the chat.',\n  {\n    guard: isManagerSelector,\n    action: (...args) => {\n      const motd = args.join(' ');\n      return setMotd(motd);\n    },\n  },\n);\n\nregister(\n  'clearchat',\n  'Delete all chat messages. ' +\n  'Pass a username (\"/clearchat kool_panda\") to only delete messages by that user.',\n  {\n    guard: isModeratorSelector,\n    action: (...args) => (dispatch, getState) => {\n      const username = args.join(' ').trim();\n      if (username) {\n        const user = findUser(userListSelector(getState()), username);\n        if (user) {\n          return dispatch(deleteChatMessagesByUser(user._id));\n        }\n        return dispatch(log(`User ${username} is not online right now.`));\n      }\n      return dispatch(deleteAllChatMessages());\n    },\n  },\n);\n"]}