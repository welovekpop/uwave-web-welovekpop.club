{"version":3,"sources":["utils/commands/chat.js"],"names":["guard","isManagerSelector","action","_len","arguments","length","args","Array","_key","motd","join","isModeratorSelector","_len2","_key2","dispatch","getState","username","trim","user","_id"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA,4BAAS,MAAT,EAAiB,oEAAjB,EAAuF;AACrFA,SAAOC,gCAD8E;AAErFC,UAAQ,SAASA,MAAT,GAAkB;AACxB,SAAK,IAAIC,OAAOC,UAAUC,MAArB,EAA6BC,OAAO,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,OAAO,CAAjE,EAAoEA,OAAOL,IAA3E,EAAiFK,MAAjF,EAAyF;AACvFF,WAAKE,IAAL,IAAaJ,UAAUI,IAAV,CAAb;AACD;;AAED,QAAIC,OAAOH,KAAKI,IAAL,CAAU,GAAV,CAAX;AACA,WAAO,iCAAQD,IAAR,CAAP;AACD;AAToF,CAAvF;AAWA,4BAAS,WAAT,EAAsB,+BAA+B,iFAArD,EAAwI;AACtIT,SAAOW,kCAD+H;AAEtIT,UAAQ,SAASA,MAAT,GAAkB;AACxB,SAAK,IAAIU,QAAQR,UAAUC,MAAtB,EAA8BC,OAAO,IAAIC,KAAJ,CAAUK,KAAV,CAArC,EAAuDC,QAAQ,CAApE,EAAuEA,QAAQD,KAA/E,EAAsFC,OAAtF,EAA+F;AAC7FP,WAAKO,KAAL,IAAcT,UAAUS,KAAV,CAAd;AACD;;AAED,WAAO,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AACnC,UAAIC,WAAWV,KAAKI,IAAL,CAAU,GAAV,EAAeO,IAAf,EAAf;;AAEA,UAAID,QAAJ,EAAc;AACZ,YAAIE,OAAO,4BAAS,qCAAiBH,UAAjB,CAAT,EAAuCC,QAAvC,CAAX;;AAEA,YAAIE,IAAJ,EAAU;AACR,iBAAOJ,SAAS,wDAAyBI,KAAKC,GAA9B,CAAT,CAAP;AACD;;AAED,eAAOL,SAAS,6BAAI,UAAUE,QAAV,GAAqB,2BAAzB,CAAT,CAAP;AACD;;AAED,aAAOF,SAAS,sDAAT,CAAP;AACD,KAdD;AAeD;AAtBqI,CAAxI,E,CAwBA","file":"chat.js","sourcesContent":["import { register, findUser } from '../ChatCommands';\n\nimport {\n  userListSelector,\n  isModeratorSelector,\n  isManagerSelector,\n} from '../../selectors/userSelectors';\nimport {\n  deleteChatMessagesByUser,\n  deleteAllChatMessages,\n} from '../../actions/ModerationActionCreators';\nimport {\n  log,\n  setMotd,\n} from '../../actions/ChatActionCreators';\n\nregister(\n  'motd',\n  'Set the Message of the Day, displayed at the very top of the chat.',\n  {\n    guard: isManagerSelector,\n    action: (...args) => {\n      const motd = args.join(' ');\n      return setMotd(motd);\n    },\n  },\n);\n\nregister(\n  'clearchat',\n  'Delete all chat messages. ' +\n  'Pass a username (\"/clearchat kool_panda\") to only delete messages by that user.',\n  {\n    guard: isModeratorSelector,\n    action: (...args) => (dispatch, getState) => {\n      const username = args.join(' ').trim();\n      if (username) {\n        const user = findUser(userListSelector(getState()), username);\n        if (user) {\n          return dispatch(deleteChatMessagesByUser(user._id));\n        }\n        return dispatch(log(`User ${username} is not online right now.`));\n      }\n      return dispatch(deleteAllChatMessages());\n    },\n  },\n);\n"]}