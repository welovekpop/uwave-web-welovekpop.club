{"version":3,"sources":["utils/commands/mutes.js"],"names":["guard","isModeratorSelector","action","username","duration","dispatch","getState","user"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA,4BAAS,MAAT,EAAiB,uFAAjB,EAA0G;AACxGA,SAAOC,kCADiG;AAExGC,UAAQ,SAASA,MAAT,CAAgBC,QAAhB,EAA0BC,QAA1B,EAAoC;AAC1C,QAAIA,aAAa,KAAK,CAAtB,EAAyB;AACvBA,iBAAW,KAAX;AACD;;AAED,WAAO,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AACnC,UAAI,CAACH,QAAL,EAAe;AACb,eAAOE,SAAS,6BAAI,yBAAJ,CAAT,CAAP;AACD;;AAED,UAAIE,OAAO,4BAAS,qCAAiBD,UAAjB,CAAT,EAAuCH,QAAvC,CAAX;;AAEA,UAAI,CAACI,IAAL,EAAW;AACT,eAAOF,SAAS,6BAAI,YAAYF,QAAZ,GAAuB,mBAA3B,CAAT,CAAP;AACD;;AAED,aAAOE,SAAS,wCAASE,IAAT,EAAe,iBAAG,KAAKH,QAAR,CAAf,CAAT,CAAP;AACD,KAZD;AAaD;AApBuG,CAA1G;AAsBA,4BAAS,QAAT,EAAmB,mDAAnB,EAAwE;AACtEJ,SAAOC,kCAD+D;AAEtEC,UAAQ,SAASA,MAAT,CAAgBC,QAAhB,EAA0B;AAChC,WAAO,UAAUE,QAAV,EAAoBC,QAApB,EAA8B;AACnC,UAAI,CAACH,QAAL,EAAe;AACb,eAAOE,SAAS,6BAAI,2BAAJ,CAAT,CAAP;AACD;;AAED,UAAIE,OAAO,4BAAS,uCAAmBD,UAAnB,CAAT,EAAyCH,QAAzC,CAAX;;AAEA,UAAI,CAACI,IAAL,EAAW;AACT,eAAOF,SAAS,6BAAI,YAAYF,QAAZ,GAAuB,kBAA3B,CAAT,CAAP;AACD;;AAED,aAAOE,SAAS,0CAAWE,IAAX,CAAT,CAAP;AACD,KAZD;AAaD;AAhBqE,CAAxE","file":"mutes.js","sourcesContent":["import ms from 'ms';\nimport { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport { mutedUsersSelector } from '../../selectors/chatSelectors';\nimport {\n  userListSelector,\n  isModeratorSelector,\n} from '../../selectors/userSelectors';\nimport { muteUser, unmuteUser } from '../../actions/ModerationActionCreators';\n\nregister(\n  'mute',\n  'Mute a user in chat, preventing them from chatting. Syntax: \"/mute username duration\"',\n  {\n    guard: isModeratorSelector,\n    action: (username, duration = '30m') => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to mute.'));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username,\n      );\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not online.`));\n      }\n      return dispatch(muteUser(user, ms(`${duration}`)));\n    },\n  },\n);\n\nregister(\n  'unmute',\n  'Unmute a user in chat. Syntax: \"/unmute username\"',\n  {\n    guard: isModeratorSelector,\n    action: username => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to unmute.'));\n      }\n      const user = findUser(mutedUsersSelector(getState()), username);\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not muted.`));\n      }\n      return dispatch(unmuteUser(user));\n    },\n  },\n);\n"]}