{"version":3,"sources":["utils/commands/bans.js"],"names":["guard","isModeratorSelector","action","username","duration","dispatch","getState","user","permanent"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;;;AACA,4BAAS,KAAT,EAAgB,uEAAhB,EAAyF;AACvFA,SAAOC,kCADgF;AAEvFC,UAAQ,SAASA,MAAT,CAAgBC,QAAhB,EAA0BC,QAA1B,EAAoC;AAC1C,QAAIA,aAAa,KAAK,CAAtB,EAAyB;AACvBA,iBAAW,KAAX;AACD;;AAED,WAAO,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AACnC,UAAI,CAACH,QAAL,EAAe;AACb,eAAOE,SAAS,6BAAI,wBAAJ,CAAT,CAAP;AACD;;AAED,UAAIE,OAAO,4BAAS,qCAAiBD,UAAjB,CAAT,EAAuCH,QAAvC,CAAX;;AAEA,UAAI,CAACI,IAAL,EAAW;AACT,eAAOF,SAAS,6BAAI,YAAYF,QAAZ,GAAuB,mBAA3B,CAAT,CAAP;AACD;;AAED,UAAIK,YAAYJ,aAAa,OAA7B;AACA,aAAOC,SAAS,uCAAQE,IAAR,EAAc;AAC5BH,kBAAU,iBAAG,KAAKA,QAAR,CADkB;AAE5BI,mBAAWA;AAFiB,OAAd,CAAT,CAAP;AAID,KAhBD;AAiBD;AAxBsF,CAAzF","file":"bans.js","sourcesContent":["import ms from 'ms';\nimport { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport {\n  userListSelector,\n  isModeratorSelector,\n} from '../../selectors/userSelectors';\nimport { banUser } from '../../actions/ModerationActionCreators';\n\nregister(\n  'ban',\n  'Ban a user. Syntax: \"/ban username duration\" or \"/ban username perma\"',\n  {\n    guard: isModeratorSelector,\n    action: (username, duration = '24h') => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to ban.'));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username,\n      );\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not online.`));\n      }\n      const permanent = duration === 'perma';\n      return dispatch(banUser(user, {\n        duration: ms(`${duration}`),\n        permanent,\n      }));\n    },\n  },\n);\n"]}