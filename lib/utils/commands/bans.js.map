{"version":3,"sources":["utils/commands/bans.js"],"names":["guard","action","username","duration","arguments","length","undefined","dispatch","getState","user","permanent"],"mappings":";;AAAA;;;;AACA;;AACA;;AAEA;;AACA;;;;AAEA,4BAAS,KAAT,EAAgB,uEAAhB,EAAyF;AACvFA,2CADuF;AAEvFC,UAAQ,SAASA,MAAT,CAAgBC,QAAhB,EAA0B;AAChC,QAAIC,WAAWC,UAAUC,MAAV,GAAmB,CAAnB,IAAwBD,UAAU,CAAV,MAAiBE,SAAzC,GAAqDF,UAAU,CAAV,CAArD,GAAoE,KAAnF;AACA,WAAO,UAAUG,QAAV,EAAoBC,QAApB,EAA8B;AACnC,UAAI,CAACN,QAAL,EAAe;AACb,eAAOK,SAAS,6BAAI,wBAAJ,CAAT,CAAP;AACD;AACD,UAAIE,OAAO,4BAAS,qCAAiBD,UAAjB,CAAT,EAAuCN,QAAvC,CAAX;AACA,UAAI,CAACO,IAAL,EAAW;AACT,eAAOF,SAAS,6BAAI,WAAWL,QAAX,GAAsB,kBAA1B,CAAT,CAAP;AACD;AACD,UAAIQ,YAAYP,aAAa,OAA7B;AACA,aAAOI,SAAS,uCAAQE,IAAR,EAAc;AAC5BN,kBAAU,kBAAG,KAAKA,QAAR,CADkB;AAE5BO,mBAAWA;AAFiB,OAAd,CAAT,CAAP;AAID,KAbD;AAcD;AAlBsF,CAAzF;AAoBA","file":"bans.js","sourcesContent":["import ms from 'ms';\nimport { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport {\n  userListSelector,\n  isModeratorSelector\n} from '../../selectors/userSelectors';\nimport { banUser } from '../../actions/ModerationActionCreators';\n\nregister(\n  'ban',\n  'Ban a user. Syntax: \"/ban username duration\" or \"/ban username perma\"',\n  {\n    guard: isModeratorSelector,\n    action: (username, duration = '24h') => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to ban.'));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username\n      );\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not online.`));\n      }\n      const permanent = duration === 'perma';\n      return dispatch(banUser(user, {\n        duration: ms(`${duration}`),\n        permanent\n      }));\n    }\n  }\n);\n"]}