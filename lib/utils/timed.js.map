{"version":3,"sources":["utils/timed.js"],"names":["Component","Timed","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","currentTime","getCurrentTime","tick","setState","prototype","componentDidMount","context","timerCallbacks","push","componentWillUnmount","index","indexOf","splice","store","getState","render","createElement","props","displayName","contextTypes","object","isRequired","arrayOf","func"],"mappings":";;;;;;kBASe,YAAY;AACzB,SAAO,UAAUA,SAAV,EAAqB;AAC1B,QAAIC,QAAQ,UAAUC,gBAAV,EAA4B;AACtC,8BAAUD,KAAV,EAAiBC,gBAAjB;;AAEA,eAASD,KAAT,GAAiB;AACf,YAAIE,KAAJ,EAAWC,KAAX,EAAkBC,IAAlB;;AAEA,sCAAgB,IAAhB,EAAsBJ,KAAtB;;AAEA,aAAK,IAAIK,OAAOC,UAAUC,MAArB,EAA6BC,OAAOC,MAAMJ,IAAN,CAApC,EAAiDK,OAAO,CAA7D,EAAgEA,OAAOL,IAAvE,EAA6EK,MAA7E,EAAqF;AACnFF,eAAKE,IAAL,IAAaJ,UAAUI,IAAV,CAAb;AACD;;AAED,eAAON,QAAQF,SAASC,QAAQ,yCAA2B,IAA3B,EAAiCF,iBAAiBU,IAAjB,CAAsBC,KAAtB,CAA4BX,gBAA5B,EAA8C,CAAC,IAAD,EAAOY,MAAP,CAAcL,IAAd,CAA9C,CAAjC,CAAR,EAA8GL,KAAvH,GAA+HA,MAAMW,KAAN,GAAc;AAC1JC,uBAAaZ,MAAMa,cAAN;AAD6I,SAA7I,EAEZb,MAAMc,IAAN,GAAa,YAAY;AAC1Bd,gBAAMe,QAAN,CAAe;AACbH,yBAAaZ,MAAMa,cAAN;AADA,WAAf;AAGD,SANc,EAMZd,KANI,GAMI,yCAA2BC,KAA3B,EAAkCC,IAAlC,CANX;AAOD;;AAEDJ,YAAMmB,SAAN,CAAgBC,iBAAhB,GAAoC,SAASA,iBAAT,GAA6B;AAC/D,aAAKC,OAAL,CAAaC,cAAb,CAA4BC,IAA5B,CAAiC,KAAKN,IAAtC;AACD,OAFD;;AAIAjB,YAAMmB,SAAN,CAAgBK,oBAAhB,GAAuC,SAASA,oBAAT,GAAgC;AACrE,YAAIF,iBAAiB,KAAKD,OAAL,CAAaC,cAAlC;;AAEA,YAAIG,QAAQH,eAAeI,OAAf,CAAuB,KAAKT,IAA5B,CAAZ;AACA,YAAIQ,UAAU,CAAC,CAAf,EAAkB;AAChBH,yBAAeK,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACD;AACF,OAPD;;AASAzB,YAAMmB,SAAN,CAAgBH,cAAhB,GAAiC,SAASA,cAAT,GAA0B;AACzD,eAAO,wCAAoB,KAAKK,OAAL,CAAaO,KAAb,CAAmBC,QAAnB,EAApB,CAAP;AACD,OAFD;;AAIA7B,YAAMmB,SAAN,CAAgBW,MAAhB,GAAyB,SAASA,MAAT,GAAkB;AACzC,eAAO,gBAAMC,aAAN,CAAoBhC,SAApB,EAA+B,uBAAS,EAAT,EAAa,KAAKiC,KAAlB,EAAyB;AAC7DjB,uBAAa,KAAKD,KAAL,CAAWC;AADqC,SAAzB,CAA/B,CAAP;AAGD,OAJD;;AAMA,aAAOf,KAAP;AACD,KA7CW,CA6CV,gBAAMD,SA7CI,CAAZ;;AA+CAC,UAAMiC,WAAN,GAAoB,+BAAgBlC,SAAhB,EAA2B,OAA3B,CAApB;AACAC,UAAMkC,YAAN,GAAqB;AACnBN,aAAO,oBAAUO,MAAV,CAAiBC,UADL;AAEnBd,sBAAgB,oBAAUe,OAAV,CAAkB,oBAAUC,IAA5B,EAAkCF;AAF/B,KAArB;;AAKA,WAAOpC,KAAP;AACD,GAvDD;AAwDD,C;;AAlED;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA","file":"timed.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport wrapDisplayName from 'recompose/wrapDisplayName';\nimport { currentTimeSelector } from '../selectors/timeSelectors';\n\nexport default function () {\n  return (Component) => {\n    class Timed extends React.Component {\n      static displayName = wrapDisplayName(Component, 'Timed');\n\n      static contextTypes = {\n        store: PropTypes.object.isRequired,\n        timerCallbacks: PropTypes.arrayOf(PropTypes.func).isRequired,\n      };\n\n      state = {\n        currentTime: this.getCurrentTime(),\n      };\n\n      componentDidMount() {\n        this.context.timerCallbacks.push(this.tick);\n      }\n\n      componentWillUnmount() {\n        const { timerCallbacks } = this.context;\n        const index = timerCallbacks.indexOf(this.tick);\n        if (index !== -1) {\n          timerCallbacks.splice(index, 1);\n        }\n      }\n\n      getCurrentTime() {\n        return currentTimeSelector(this.context.store.getState());\n      }\n\n      tick = () => {\n        this.setState({\n          currentTime: this.getCurrentTime(),\n        });\n      };\n\n      render() {\n        return (\n          <Component\n            {...this.props}\n            currentTime={this.state.currentTime}\n          />\n        );\n      }\n    }\n    return Timed;\n  };\n}\n"]}