{"version":3,"sources":["utils/timed.js"],"names":["Component","Timed","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","currentTime","getCurrentTime","tick","setState","prototype","componentDidMount","context","timerCallbacks","add","componentWillUnmount","remove","store","getState","render","createElement","props","displayName","contextTypes","object","isRequired","shape","func"],"mappings":";;;;;;kBASe,YAAY;AACzB,SAAO,UAAUA,SAAV,EAAqB;AAC1B,QAAIC,QAAQ,UAAUC,gBAAV,EAA4B;AACtC,8BAAUD,KAAV,EAAiBC,gBAAjB;;AAEA,eAASD,KAAT,GAAiB;AACf,YAAIE,KAAJ,EAAWC,KAAX,EAAkBC,IAAlB;;AAEA,sCAAgB,IAAhB,EAAsBJ,KAAtB;;AAEA,aAAK,IAAIK,OAAOC,UAAUC,MAArB,EAA6BC,OAAOC,MAAMJ,IAAN,CAApC,EAAiDK,OAAO,CAA7D,EAAgEA,OAAOL,IAAvE,EAA6EK,MAA7E,EAAqF;AACnFF,eAAKE,IAAL,IAAaJ,UAAUI,IAAV,CAAb;AACD;;AAED,eAAON,QAAQF,SAASC,QAAQ,yCAA2B,IAA3B,EAAiCF,iBAAiBU,IAAjB,CAAsBC,KAAtB,CAA4BX,gBAA5B,EAA8C,CAAC,IAAD,EAAOY,MAAP,CAAcL,IAAd,CAA9C,CAAjC,CAAR,EAA8GL,KAAvH,GAA+HA,MAAMW,KAAN,GAAc;AAC1JC,uBAAaZ,MAAMa,cAAN;AAD6I,SAA7I,EAEZb,MAAMc,IAAN,GAAa,YAAY;AAC1Bd,gBAAMe,QAAN,CAAe;AACbH,yBAAaZ,MAAMa,cAAN;AADA,WAAf;AAGD,SANc,EAMZd,KANI,GAMI,yCAA2BC,KAA3B,EAAkCC,IAAlC,CANX;AAOD;;AAEDJ,YAAMmB,SAAN,CAAgBC,iBAAhB,GAAoC,SAASA,iBAAT,GAA6B;AAC/D,aAAKC,OAAL,CAAaC,cAAb,CAA4BC,GAA5B,CAAgC,KAAKN,IAArC;AACD,OAFD;;AAIAjB,YAAMmB,SAAN,CAAgBK,oBAAhB,GAAuC,SAASA,oBAAT,GAAgC;AACrE,aAAKH,OAAL,CAAaC,cAAb,CAA4BG,MAA5B,CAAmC,KAAKR,IAAxC;AACD,OAFD;;AAIAjB,YAAMmB,SAAN,CAAgBH,cAAhB,GAAiC,SAASA,cAAT,GAA0B;AACzD,eAAO,wCAAoB,KAAKK,OAAL,CAAaK,KAAb,CAAmBC,QAAnB,EAApB,CAAP;AACD,OAFD;;AAIA3B,YAAMmB,SAAN,CAAgBS,MAAhB,GAAyB,SAASA,MAAT,GAAkB;AACzC,eAAO,gBAAMC,aAAN,CAAoB9B,SAApB,EAA+B,uBAAS,EAAT,EAAa,KAAK+B,KAAlB,EAAyB;AAC7Df,uBAAa,KAAKD,KAAL,CAAWC;AADqC,SAAzB,CAA/B,CAAP;AAGD,OAJD;;AAMA,aAAOf,KAAP;AACD,KAxCW,CAwCV,gBAAMD,SAxCI,CAAZ;;AA0CAC,UAAM+B,WAAN,GAAoB,+BAAgBhC,SAAhB,EAA2B,OAA3B,CAApB;AACAC,UAAMgC,YAAN,GAAqB;AACnBN,aAAO,oBAAUO,MAAV,CAAiBC,UADL;AAEnBZ,sBAAgB,oBAAUa,KAAV,CAAgB;AAC9BZ,aAAK,oBAAUa,IADe;AAE9BX,gBAAQ,oBAAUW;AAFY,OAAhB,EAGbF;AALgB,KAArB;;AAQA,WAAOlC,KAAP;AACD,GArDD;AAsDD,C;;AAhED;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA","file":"timed.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport wrapDisplayName from 'recompose/wrapDisplayName';\nimport { currentTimeSelector } from '../selectors/timeSelectors';\n\nexport default function () {\n  return (Component) => {\n    class Timed extends React.Component {\n      static displayName = wrapDisplayName(Component, 'Timed');\n\n      static contextTypes = {\n        store: PropTypes.object.isRequired,\n        timerCallbacks: PropTypes.shape({\n          add: PropTypes.func,\n          remove: PropTypes.func,\n        }).isRequired,\n      };\n\n      state = {\n        currentTime: this.getCurrentTime(),\n      };\n\n      componentDidMount() {\n        this.context.timerCallbacks.add(this.tick);\n      }\n\n      componentWillUnmount() {\n        this.context.timerCallbacks.remove(this.tick);\n      }\n\n      getCurrentTime() {\n        return currentTimeSelector(this.context.store.getState());\n      }\n\n      tick = () => {\n        this.setState({\n          currentTime: this.getCurrentTime(),\n        });\n      };\n\n      render() {\n        return (\n          <Component\n            {...this.props}\n            currentTime={this.state.currentTime}\n          />\n        );\n      }\n    }\n    return Timed;\n  };\n}\n"]}