{"version":3,"sources":["utils/timed.js"],"names":["Component","Timed","_React$Component","_temp","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","currentTime","getCurrentTime","tick","setState","_proto","prototype","componentDidMount","context","timerCallbacks","add","componentWillUnmount","remove","store","getState","render","React","createElement","props","displayName","contextTypes","PropTypes","object","isRequired","shape","func"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACe,oBAAY;AACzB,SAAO,UAAUA,SAAV,EAAqB;AAC1B,QAAIC;AACJ;AACA,cAAUC,gBAAV,EAA4B;AAC1B,mCAAeD,KAAf,EAAsBC,gBAAtB;;AAEA,eAASD,KAAT,GAAiB;AACf,YAAIE,KAAJ,EAAWC,KAAX;;AAEA,aAAK,IAAIC,OAAOC,UAAUC,MAArB,EAA6BC,OAAO,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,OAAO,CAAjE,EAAoEA,OAAOL,IAA3E,EAAiFK,MAAjF,EAAyF;AACvFF,eAAKE,IAAL,IAAaJ,UAAUI,IAAV,CAAb;AACD;;AAED,eAAO,CAACP,QAAQC,QAAQF,iBAAiBS,IAAjB,CAAsBC,KAAtB,CAA4BV,gBAA5B,EAA8C,CAAC,IAAD,EAAOW,MAAP,CAAcL,IAAd,CAA9C,KAAsE,IAAtF,EAA4FJ,MAAMU,KAAN,GAAc;AAChHC,uBAAaX,MAAMY,cAAN;AADmG,SAA1G,EAELZ,MAAMa,IAAN,GAAa,YAAY;AAC1Bb,gBAAMc,QAAN,CAAe;AACbH,yBAAaX,MAAMY,cAAN;AADA,WAAf;AAGD,SANO,EAMLb,KANI,KAMM,qCAAuBC,KAAvB,CANb;AAOD;;AAED,UAAIe,SAASlB,MAAMmB,SAAnB;;AAEAD,aAAOE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,aAAKC,OAAL,CAAaC,cAAb,CAA4BC,GAA5B,CAAgC,KAAKP,IAArC;AACD,OAFD;;AAIAE,aAAOM,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,aAAKH,OAAL,CAAaC,cAAb,CAA4BG,MAA5B,CAAmC,KAAKT,IAAxC;AACD,OAFD;;AAIAE,aAAOH,cAAP,GAAwB,SAASA,cAAT,GAA0B;AAChD,eAAO,wCAAoB,KAAKM,OAAL,CAAaK,KAAb,CAAmBC,QAAnB,EAApB,CAAP;AACD,OAFD;;AAIAT,aAAOU,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,eAAOC,eAAMC,aAAN,CAAoB/B,SAApB,EAA+B,uBAAS,EAAT,EAAa,KAAKgC,KAAlB,EAAyB;AAC7DjB,uBAAa,KAAKD,KAAL,CAAWC;AADqC,SAAzB,CAA/B,CAAP;AAGD,OAJD;;AAMA,aAAOd,KAAP;AACD,KAxCD,CAwCE6B,eAAM9B,SAxCR,CAFA;;AA4CAC,UAAMgC,WAAN,GAAoB,8BAAgBjC,SAAhB,EAA2B,OAA3B,CAApB;AACAC,UAAMiC,YAAN,GAAqB;AACnBP,aAAOQ,mBAAUC,MAAV,CAAiBC,UADL;AAEnBd,sBAAgBY,mBAAUG,KAAV,CAAgB;AAC9Bd,aAAKW,mBAAUI,IADe;AAE9Bb,gBAAQS,mBAAUI;AAFY,OAAhB,EAGbF;AALgB,KAArB;AAOA,WAAOpC,KAAP;AACD,GAtDD;AAuDD","file":"timed.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport wrapDisplayName from 'recompose/wrapDisplayName';\nimport { currentTimeSelector } from '../selectors/timeSelectors';\n\nexport default function () {\n  return (Component) => {\n    class Timed extends React.Component {\n      static displayName = wrapDisplayName(Component, 'Timed');\n\n      static contextTypes = {\n        store: PropTypes.object.isRequired,\n        timerCallbacks: PropTypes.shape({\n          add: PropTypes.func,\n          remove: PropTypes.func,\n        }).isRequired,\n      };\n\n      state = {\n        currentTime: this.getCurrentTime(),\n      };\n\n      componentDidMount() {\n        this.context.timerCallbacks.add(this.tick);\n      }\n\n      componentWillUnmount() {\n        this.context.timerCallbacks.remove(this.tick);\n      }\n\n      getCurrentTime() {\n        return currentTimeSelector(this.context.store.getState());\n      }\n\n      tick = () => {\n        this.setState({\n          currentTime: this.getCurrentTime(),\n        });\n      };\n\n      render() {\n        return (\n          <Component\n            {...this.props}\n            currentTime={this.state.currentTime}\n          />\n        );\n      }\n    }\n    return Timed;\n  };\n}\n"]}