{"version":3,"sources":["components/Chat/Message.js"],"names":["enhance","pure","onDeleteClick","props","onDelete","_id","onUsernameClick","event","preventDefault","openUserCard","user","_ref2","className","CircularProgress","size","Message","_ref","text","parsedText","inFlight","isMention","timestamp","compileOptions","deletable","avatar","Avatar","children","date","Date","DeleteButton","MessageTimestamp","onClick","Username","propTypes","process","env","NODE_ENV","PropTypes","object","isRequired","string","array","bool","number","func","shape","availableEmoji","emojiImages"],"mappings":"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","file":"Message.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport withHandlers from 'recompose/withHandlers';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport userCardable from '../../utils/userCardable';\nimport Avatar from '../Avatar';\nimport Username from '../Username';\nimport compile from './Markup/compile';\nimport DeleteButton from './DeleteButton';\nimport MessageTimestamp from './MessageTimestamp';\n\nconst enhance = compose(\n  pure,\n  userCardable(),\n  withHandlers({\n    onDeleteClick: props => () =>\n      props.onDelete(props._id),\n    onUsernameClick: props => (event) => {\n      event.preventDefault();\n      props.openUserCard(props.user);\n    },\n  }),\n);\n\nconst Message = ({\n  user,\n  text,\n  parsedText,\n  inFlight,\n  isMention,\n  timestamp,\n  compileOptions,\n  deletable,\n  onDeleteClick,\n  onUsernameClick,\n}) => {\n  let avatar;\n  if (inFlight) {\n    avatar = (\n      <div className=\"ChatMessage-avatar\">\n        <CircularProgress size=\"100%\" />\n      </div>\n    );\n  } else {\n    avatar = (\n      <Avatar\n        className=\"ChatMessage-avatar\"\n        user={user}\n      />\n    );\n  }\n\n  const children = parsedText ? compile(parsedText, compileOptions) : text;\n\n  const date = new Date(timestamp);\n\n  const className = cx(\n    'ChatMessage',\n    inFlight && 'ChatMessage--loading',\n    isMention && 'ChatMessage--mention',\n  );\n  return (\n    <div className={className}>\n      {avatar}\n      <div className=\"ChatMessage-content\">\n        <div className=\"ChatMessage-hover\">\n          {deletable && <DeleteButton onDelete={onDeleteClick} />}\n          <MessageTimestamp date={date} />\n        </div>\n        <button\n          className=\"ChatMessage-username ChatMessage-cardable\"\n          onClick={onUsernameClick}\n        >\n          <Username user={user} />\n        </button>\n        <span className=\"ChatMessage-text\">{children}</span>\n      </div>\n    </div>\n  );\n};\n\nMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  text: PropTypes.string.isRequired,\n  parsedText: PropTypes.array.isRequired,\n  inFlight: PropTypes.bool,\n  timestamp: PropTypes.number.isRequired,\n  isMention: PropTypes.bool.isRequired,\n  deletable: PropTypes.bool.isRequired,\n  onDeleteClick: PropTypes.func,\n  compileOptions: PropTypes.shape({\n    availableEmoji: PropTypes.array,\n    emojiImages: PropTypes.object,\n  }),\n  onUsernameClick: PropTypes.func.isRequired,\n};\n\nexport default enhance(Message);\n"]}