{"version":3,"sources":["components/Chat/Message.js"],"names":["enhance","onDeleteClick","props","onDelete","_id","onUsernameClick","event","preventDefault","openUserCard","user","_ref2","className","size","Message","_ref","text","parsedText","inFlight","isMention","timestamp","compileOptions","deletable","avatar","children","date","Date","onClick","propTypes","process","env","NODE_ENV","object","isRequired","string","array","bool","number","func","shape","availableEmoji","emojiImages"],"mappings":"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","file":"Message.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport pure from 'recompose/pure';\nimport withHandlers from 'recompose/withHandlers';\n\nimport userCardable from '../../utils/userCardable';\nimport Avatar from '../Avatar';\nimport Username from '../Username';\nimport Loader from '../Loader';\n\nimport compile from './Markup/compile';\nimport DeleteButton from './DeleteButton';\nimport MessageTimestamp from './MessageTimestamp';\n\nconst enhance = compose(\n  pure,\n  userCardable(),\n  withHandlers({\n    onDeleteClick: props => () =>\n      props.onDelete(props._id),\n    onUsernameClick: props => (event) => {\n      event.preventDefault();\n      props.openUserCard(props.user);\n    },\n  }),\n);\n\nconst Message = ({\n  user,\n  text,\n  parsedText,\n  inFlight,\n  isMention,\n  timestamp,\n  compileOptions,\n  deletable,\n  onDeleteClick,\n  onUsernameClick,\n}) => {\n  let avatar;\n  if (inFlight) {\n    avatar = (\n      <div className=\"ChatMessage-avatar\">\n        <Loader size=\"tiny\" />\n      </div>\n    );\n  } else {\n    avatar = (\n      <Avatar\n        className=\"ChatMessage-avatar\"\n        user={user}\n      />\n    );\n  }\n\n  const children = parsedText ? compile(parsedText, compileOptions) : text;\n\n  const date = new Date(timestamp);\n\n  const className = cx(\n    'ChatMessage',\n    inFlight && 'ChatMessage--loading',\n    isMention && 'ChatMessage--mention',\n  );\n  return (\n    <div className={className}>\n      {avatar}\n      <div className=\"ChatMessage-content\">\n        <div className=\"ChatMessage-hover\">\n          {deletable && <DeleteButton onDelete={onDeleteClick} />}\n          <MessageTimestamp date={date} />\n        </div>\n        <button\n          className=\"ChatMessage-username ChatMessage-cardable\"\n          onClick={onUsernameClick}\n        >\n          <Username user={user} />\n        </button>\n        <span className=\"ChatMessage-text\">{children}</span>\n      </div>\n    </div>\n  );\n};\n\nMessage.propTypes = {\n  user: PropTypes.object.isRequired,\n  text: PropTypes.string.isRequired,\n  parsedText: PropTypes.array.isRequired,\n  inFlight: PropTypes.bool,\n  timestamp: PropTypes.number.isRequired,\n  isMention: PropTypes.bool.isRequired,\n  deletable: PropTypes.bool.isRequired,\n  onDeleteClick: PropTypes.func,\n  compileOptions: PropTypes.shape({\n    availableEmoji: PropTypes.array,\n    emojiImages: PropTypes.object,\n  }),\n  onUsernameClick: PropTypes.func.isRequired,\n};\n\nexport default enhance(Message);\n"]}