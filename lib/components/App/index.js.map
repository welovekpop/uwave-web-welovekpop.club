{"version":3,"sources":["components/App/index.js"],"names":["MovedNotification","localStorage","_session","length","wlkSawMoveMessage","err","_ref","seen","setSeen","props","open","onClose","_ref3","className","title","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","message","App","_ref2","activeOverlay","isConnected","settings","hasAboutPage","onCloseOverlay","enabled","videoEnabled","size","videoSize","isMuted","muted","volume","transitionName","active","propTypes","process","env","NODE_ENV","string","bool","isRequired","object","func"],"mappings":"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","file":"index.js","sourcesContent":["/* global localStorage */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragDropContext } from 'react-dnd';\nimport compose from 'recompose/compose';\nimport toClass from 'recompose/toClass';\nimport withState from 'recompose/withState';\nimport mapProps from 'recompose/mapProps';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport Snackbar from 'material-ui/Snackbar';\n\nimport FooterBar from '../../containers/FooterBar';\nimport HeaderBar from '../../containers/HeaderBar';\nimport Video from '../../containers/Video';\nimport ErrorArea from '../../containers/ErrorArea';\nimport Overlays from './Overlays';\nimport PlaylistManager from '../../containers/PlaylistManager';\nimport RoomHistory from '../../containers/RoomHistory';\nimport SettingsManager from '../../containers/SettingsManager';\nimport AdminProxy from '../AdminProxy';\nimport About from '../../containers/About';\nimport ConnectionIndicator from '../ConnectionIndicator';\n\nimport SidePanels from '../../containers/SidePanels';\nimport Dialogs from '../Dialogs';\nimport AddToPlaylistMenu from '../../containers/AddToPlaylistMenu';\nimport DragLayer from '../../containers/DragLayer';\n\nconst MovedNotification = compose(\n  withState('seen', 'setSeen', () => {\n    try {\n      // eslint-disable-next-line no-underscore-dangle\n      return !localStorage._session || localStorage._session.length <= 30 ||\n        !!localStorage.wlkSawMoveMessage;\n    } catch (err) {\n      return false;\n    }\n  }),\n  mapProps(({ seen, setSeen, ...props }) => ({\n    ...props,\n    open: !seen,\n    onClose: () => {\n      try {\n        localStorage.wlkSawMoveMessage = '1';\n      } catch (err) {\n        // Nothing\n      }\n      setSeen(true);\n    },\n  })),\n)(Snackbar);\n\nconst App = ({\n  activeOverlay,\n  isConnected,\n  settings,\n  hasAboutPage,\n  onCloseOverlay,\n}) => (\n  <div className=\"App\">\n    <div className=\"AppColumn AppColumn--left\">\n      <div className=\"AppRow AppRow--top\">\n        <HeaderBar\n          className=\"App-header\"\n          title=\"Ã¼Wave\"\n        />\n      </div>\n      <div className=\"AppRow AppRow--middle\">\n        <Video\n          enabled={settings.videoEnabled}\n          size={settings.videoSize}\n          isMuted={settings.muted}\n          volume={settings.volume}\n        />\n        <ErrorArea />\n        <ConnectionIndicator isConnected={isConnected} />\n      </div>\n      <Overlays transitionName=\"Overlay\" active={activeOverlay}>\n        {hasAboutPage && <About\n          key=\"about\"\n          onCloseOverlay={onCloseOverlay}\n        />}\n        <AdminProxy\n          key=\"admin\"\n          onCloseOverlay={onCloseOverlay}\n        />\n        <PlaylistManager\n          key=\"playlistManager\"\n          onCloseOverlay={onCloseOverlay}\n        />\n        <RoomHistory\n          key=\"roomHistory\"\n          onCloseOverlay={onCloseOverlay}\n        />\n        <SettingsManager\n          key=\"settings\"\n          onCloseOverlay={onCloseOverlay}\n        />\n      </Overlays>\n      <FooterBar className=\"AppRow AppRow--bottom\" />\n    </div>\n\n    <div className=\"AppColumn AppColumn--right\">\n      <SidePanels />\n    </div>\n\n    <Dialogs />\n\n    <AddToPlaylistMenu />\n    <DragLayer />\n    <MovedNotification\n      message=\"WLK was recently updated! You will need to log in again, because of some security improvements that have been made.\"\n    />\n  </div>\n);\n\nApp.propTypes = {\n  activeOverlay: PropTypes.string,\n  isConnected: PropTypes.bool.isRequired,\n  settings: PropTypes.object.isRequired,\n  hasAboutPage: PropTypes.bool,\n\n  onCloseOverlay: PropTypes.func.isRequired,\n};\n\nexport default compose(\n  DragDropContext(HTML5Backend),\n  // DragDropContext needs to be able to set a ref on the component, so we can't\n  // use a stateless function directly.\n  toClass,\n)(App);\n"]}