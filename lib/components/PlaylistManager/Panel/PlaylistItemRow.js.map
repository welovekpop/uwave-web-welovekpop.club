{"version":3,"sources":["components/PlaylistManager/Panel/PlaylistItemRow.js"],"names":["mediaTarget","drop","props","monitor","component","item","getItem","media","thisID","_id","some","playlistItem","insertBefore","onMoveMedia","before","after","hover","setState","insertingAbove","collect","connect","connectDropTarget","dropTarget","isOver","_ref","className","PlaylistItemRow","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","prototype","render","_props","dropIndicator","createElement","Component","propTypes","process","env","NODE_ENV","func","isRequired","bool"],"mappings":"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","file":"PlaylistItemRow.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { DropTarget } from 'react-dnd';\nimport { MEDIA } from '../../../constants/DDItemTypes';\nimport isDraggingNearTopOfRow from '../../../utils/isDraggingNearTopOfRow';\nimport MediaRow from '../../MediaList/Row';\n\nconst mediaTarget = {\n  drop(props, monitor, component) {\n    const item = monitor.getItem();\n    const { media } = item;\n    if (media) {\n      const thisID = props.media._id;\n      // Do not attempt to move when the selection is dropped on top of an item\n      // that is in the selection.\n      if (media.some(playlistItem => playlistItem._id === thisID)) {\n        return;\n      }\n      const insertBefore = isDraggingNearTopOfRow(monitor, component);\n      props.onMoveMedia(\n        media,\n        insertBefore ? { before: thisID } : { after: thisID },\n      );\n    }\n  },\n  hover(props, monitor, component) {\n    component.setState({\n      insertingAbove: isDraggingNearTopOfRow(monitor, component),\n    });\n  },\n};\n\nconst collect = (connect, monitor) => ({\n  connectDropTarget: connect.dropTarget(),\n  isOver: monitor.isOver(),\n});\n\nclass PlaylistItemRow extends React.Component {\n  static propTypes = {\n    connectDropTarget: PropTypes.func.isRequired,\n    // Used in the drop handler above ðŸ‘†\n    // eslint-disable-next-line react/no-unused-prop-types\n    onMoveMedia: PropTypes.func.isRequired,\n    isOver: PropTypes.bool.isRequired,\n  };\n\n  state = {\n    insertingAbove: false,\n  };\n\n  render() {\n    const {\n      connectDropTarget,\n      isOver,\n      ...props\n    } = this.props;\n    const { insertingAbove } = this.state;\n\n    const dropIndicator = <div className=\"PlaylistItemRow-drop-indicator\" />;\n\n    return connectDropTarget((\n      <div className=\"PlaylistItemRow\">\n        {isOver && insertingAbove && dropIndicator}\n        <MediaRow {...props} />\n        {isOver && !insertingAbove && dropIndicator}\n      </div>\n    ));\n  }\n}\n\nexport default DropTarget(MEDIA, mediaTarget, collect)(PlaylistItemRow);\n"]}