{"version":3,"sources":["components/ClockProvider/index.js"],"names":["mapDispatchToProps","createTimer","stopTimer","enhance","ClockProvider","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","callbacks","timerCallbacks","add","cb","setState","s","remove","filter","cb1","prototype","getChildContext","componentDidMount","_this2","props","forEach","componentWillUnmount","render","children","Component","childContextTypes","shape","func","propTypes","process","env","NODE_ENV","isRequired","node"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createTimer, stopTimer } from '../../actions/TickerActionCreators';\n\nconst mapDispatchToProps = {\n  createTimer,\n  stopTimer,\n};\n\nconst enhance = connect(null, mapDispatchToProps);\n\nclass ClockProvider extends React.Component {\n  static propTypes = {\n    createTimer: PropTypes.func.isRequired,\n    stopTimer: PropTypes.func.isRequired,\n    children: PropTypes.node.isRequired,\n  };\n\n  static childContextTypes = {\n    timerCallbacks: PropTypes.shape({\n      add: PropTypes.func,\n      remove: PropTypes.func,\n    }),\n  };\n\n  state = { callbacks: [] };\n\n  getChildContext() {\n    return {\n      timerCallbacks: this.timerCallbacks,\n    };\n  }\n\n  componentDidMount() {\n    // Start the clock! Ã¼Wave stores the current time in the application state\n    // primarily to make sure that different timers in the UI update simultaneously.\n    this.props.createTimer(() => {\n      this.state.callbacks.forEach(cb => cb());\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.stopTimer();\n  }\n\n  timerCallbacks = {\n    add: cb => this.setState(s => ({\n      callbacks: s.callbacks.concat(cb),\n    })),\n    remove: cb => this.setState(s => ({\n      callbacks: s.callbacks.filter(cb1 => cb1 !== cb),\n    })),\n  };\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default enhance(ClockProvider);\n"]}