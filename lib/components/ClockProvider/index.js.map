{"version":3,"sources":["components/ClockProvider/index.js"],"names":["mapDispatchToProps","createTimer","stopTimer","enhance","ClockProvider","_React$Component","_temp","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","callbacks","timerCallbacks","add","cb","setState","s","remove","filter","cb1","_proto","prototype","getChildContext","componentDidMount","_this2","props","forEach","componentWillUnmount","render","children","React","Component","childContextTypes","PropTypes","shape","func","propTypes","process","env","NODE_ENV","isRequired","node"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createTimer, stopTimer } from '../../actions/TickerActionCreators';\n\nconst mapDispatchToProps = {\n  createTimer,\n  stopTimer,\n};\n\nconst enhance = connect(null, mapDispatchToProps);\n\nclass ClockProvider extends React.Component {\n  static propTypes = {\n    createTimer: PropTypes.func.isRequired,\n    stopTimer: PropTypes.func.isRequired,\n    children: PropTypes.node.isRequired,\n  };\n\n  static childContextTypes = {\n    timerCallbacks: PropTypes.shape({\n      add: PropTypes.func,\n      remove: PropTypes.func,\n    }),\n  };\n\n  state = { callbacks: [] };\n\n  getChildContext() {\n    return {\n      timerCallbacks: this.timerCallbacks,\n    };\n  }\n\n  componentDidMount() {\n    // Start the clock! Ã¼Wave stores the current time in the application state\n    // primarily to make sure that different timers in the UI update simultaneously.\n    this.props.createTimer(() => {\n      this.state.callbacks.forEach(cb => cb());\n    });\n  }\n\n  componentWillUnmount() {\n    this.props.stopTimer();\n  }\n\n  timerCallbacks = {\n    add: cb => this.setState(s => ({\n      callbacks: s.callbacks.concat(cb),\n    })),\n    remove: cb => this.setState(s => ({\n      callbacks: s.callbacks.filter(cb1 => cb1 !== cb),\n    })),\n  };\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default enhance(ClockProvider);\n"]}