{"version":3,"sources":["components/MediaList/Row.js"],"names":["inSelection","selection","media","some","item","_id","mediaSource","beginDrag","_ref","collect","connect","connectDragSource","dragSource","connectDragPreview","dragPreview","enhance","MEDIA","_ref2","MediaLoadingIndicator","className","Row","_React$Component","_temp","_this","_len","arguments","length","args","Array","_key","call","apply","concat","handleKeyPress","event","code","props","onClick","handleDoubleClick","onOpenPreviewMediaDialog","_proto","prototype","componentDidMount","render","_this$props","selected","makeActions","selectedClass","loadingClass","loading","duration","end","start","onDoubleClick","onKeyPress","MediaThumbnail","url","thumbnail","title","artist","Actions","React","Component","defaultProps","propTypes","process","env","NODE_ENV","PropTypes","string","func","isRequired","object","bool","array"],"mappings":"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","file":"Row.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragSource } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport formatDuration from 'format-duration';\nimport { MEDIA } from '../../constants/DDItemTypes';\nimport MediaLoadingIndicator from './MediaLoadingIndicator';\nimport MediaThumbnail from './MediaThumbnail';\nimport Actions from './Actions';\n\nconst inSelection = (selection, media) =>\n  selection.some(item => item._id === media._id);\n\nconst mediaSource = {\n  beginDrag({ selection, media }) {\n    return {\n      media: inSelection(selection, media) ? selection : [media],\n    };\n  },\n};\n\nconst collect = connect => ({\n  connectDragSource: connect.dragSource(),\n  connectDragPreview: connect.dragPreview(),\n});\n\nconst enhance = DragSource(MEDIA, mediaSource, collect);\n\nclass Row extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    connectDragSource: PropTypes.func.isRequired,\n    connectDragPreview: PropTypes.func.isRequired,\n    media: PropTypes.object,\n    selected: PropTypes.bool,\n    selection: PropTypes.array,\n\n    onOpenPreviewMediaDialog: PropTypes.func,\n    onClick: PropTypes.func,\n    makeActions: PropTypes.func,\n  };\n\n  static defaultProps = {\n    selected: false,\n  };\n\n  componentDidMount() {\n    this.props.connectDragPreview(getEmptyImage());\n  }\n\n  handleKeyPress = (event) => {\n    if (event.code === 'Space') {\n      this.props.onClick();\n    }\n  };\n\n  handleDoubleClick = () => {\n    this.props.onOpenPreviewMediaDialog(this.props.media);\n  };\n\n  render() {\n    const {\n      className,\n      media,\n      selection,\n      selected,\n      connectDragSource,\n      // actions\n      makeActions,\n      // etc\n      onClick,\n    } = this.props;\n    const selectedClass = selected ? 'is-selected' : '';\n    const loadingClass = media.loading ? 'is-loading' : '';\n    const duration = 'start' in media\n      // playlist item\n      ? media.end - media.start\n      // search result\n      : media.duration;\n\n    return connectDragSource((\n      // Bit uneasy about this, but turning the entire row into a button seems\n      // wrong as well! Since we nest media action <button>s inside it, too.\n      //\n      // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      <div\n        className={cx('MediaListRow', className, selectedClass, loadingClass)}\n        onDoubleClick={this.handleDoubleClick}\n        onKeyPress={this.handleKeyPress}\n        onClick={onClick}\n      >\n        {media.loading ? (\n          <MediaLoadingIndicator className=\"MediaListRow-loader\" />\n        ) : (\n          <MediaThumbnail url={media.thumbnail} />\n        )}\n        <div className=\"MediaListRow-artist\" title={media.artist}>\n          {media.artist}\n        </div>\n        <div className=\"MediaListRow-title\" title={media.title}>\n          {media.title}\n        </div>\n        <div className=\"MediaListRow-duration\">\n          {formatDuration(duration * 1000)}\n        </div>\n        <Actions\n          className={cx('MediaListRow-actions', selectedClass)}\n          selection={selection}\n          media={media}\n          makeActions={makeActions}\n        />\n      </div>\n    ));\n  }\n}\n\nexport default enhance(Row);\n"]}