{"version":3,"sources":["components/MediaList/Row.js"],"names":["_dec","_class","_class2","_temp2","inSelection","selection","media","some","item","_id","mediaSource","beginDrag","_ref","collect","connect","connectDragSource","dragSource","connectDragPreview","dragPreview","_ref2","className","Row","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","handleDoubleClick","props","onOpenPreviewMediaDialog","prototype","componentDidMount","render","_props","selected","makeActions","onClick","selectedClass","loadingClass","loading","duration","end","start","onMouseEnter","handleMouseEnter","onMouseLeave","handleMouseLeave","onDoubleClick","url","thumbnail","title","artist","Component","defaultProps","default","propTypes","process","env","NODE_ENV","string","func","isRequired","object","bool","array"],"mappings":"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","file":"Row.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragSource } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport formatDuration from 'format-duration';\nimport { MEDIA } from '../../constants/DDItemTypes';\nimport MediaLoadingIndicator from './MediaLoadingIndicator';\nimport MediaThumbnail from './MediaThumbnail';\nimport Actions from './Actions';\n\nconst inSelection = (selection, media) =>\n  selection.some(item => item._id === media._id);\n\nconst mediaSource = {\n  beginDrag({ selection, media }) {\n    return {\n      media: inSelection(selection, media) ? selection : [ media ]\n    };\n  }\n};\n\nconst collect = connect => ({\n  connectDragSource: connect.dragSource(),\n  connectDragPreview: connect.dragPreview()\n});\n\n@DragSource(MEDIA, mediaSource, collect)\nexport default class Row extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    connectDragSource: PropTypes.func.isRequired,\n    connectDragPreview: PropTypes.func.isRequired,\n    media: PropTypes.object,\n    selected: PropTypes.bool,\n    selection: PropTypes.array,\n\n    onOpenPreviewMediaDialog: PropTypes.func,\n    onClick: PropTypes.func,\n    makeActions: PropTypes.func\n  };\n\n  static defaultProps = {\n    selected: false\n  };\n\n  componentDidMount() {\n    this.props.connectDragPreview(getEmptyImage());\n  }\n\n  handleDoubleClick = () => {\n    this.props.onOpenPreviewMediaDialog(this.props.media);\n  };\n\n  render() {\n    const {\n      className,\n      media,\n      selection,\n      selected,\n      connectDragSource,\n      // actions\n      makeActions,\n      // etc\n      onClick\n    } = this.props;\n    const selectedClass = selected ? 'is-selected' : '';\n    const loadingClass = media.loading ? 'is-loading' : '';\n    const duration = 'start' in media\n      // playlist item\n      ? media.end - media.start\n      // search result\n      : media.duration;\n\n    return connectDragSource(\n      // Bit uneasy about this, but turning the entire row into a button seems\n      // wrong as well! Since we nest media action <button>s inside it, too.\n      //\n      // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      <div\n        className={cx('MediaListRow', className, selectedClass, loadingClass)}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n        onDoubleClick={this.handleDoubleClick}\n        onClick={onClick}\n      >\n        {media.loading ? (\n          <MediaLoadingIndicator className=\"MediaListRow-loader\" />\n        ) : (\n          <MediaThumbnail url={media.thumbnail} />\n        )}\n        <div className=\"MediaListRow-artist\" title={media.artist}>\n          {media.artist}\n        </div>\n        <div className=\"MediaListRow-title\" title={media.title}>\n          {media.title}\n        </div>\n        <div className=\"MediaListRow-duration\">\n          {formatDuration(duration * 1000)}\n        </div>\n        <Actions\n          className={cx('MediaListRow-actions', selectedClass)}\n          selection={selection}\n          media={media}\n          makeActions={makeActions}\n        />\n      </div>\n    );\n  }\n}\n"]}