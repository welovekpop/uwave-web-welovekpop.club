{"version":3,"sources":["components/ReCaptcha/index.js"],"names":["GRECAPTCHA_API","onloadCallbackName","onloadCallbacks","loadReCaptcha","cb","push","onload","forEach","fn","window","grecaptcha","_ref","CircularProgress","className","ReCaptcha","_React$Component","_temp","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","_proto","prototype","componentDidMount","_this2","setState","render","React","createElement","InternalCaptcha","props","Component"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA,IAAIA,iBAAiB,yCAArB;AACA,IAAIC,qBAAqB,qBAAzB;AACA,IAAIC,kBAAkB,EAAtB;;AAEA,SAASC,aAAT,CAAuBC,EAAvB,EAA2B;AACzB,2BAAWJ,iBAAiB,UAAjB,GAA8BC,kBAA9B,GAAmD,kBAA9D;AACAC,kBAAgBG,IAAhB,CAAqBD,EAArB;AACD;;AAED,SAASE,MAAT,GAAkB;AAChBJ,kBAAgBK,OAAhB,CAAwB,UAAUC,EAAV,EAAc;AACpC,WAAOA,GAAGC,OAAOC,UAAV,CAAP;AACD,GAFD;AAGD;;AAED,IAAIC;AACJ;AACA,mBAAKC,0BAAL,EAAuB;AACrBC,aAAW;AADU,CAAvB,CAFA;;AAMA,IAAIC;AACJ;AACA,UAAUC,gBAAV,EAA4B;AAC1B,+BAAeD,SAAf,EAA0BC,gBAA1B;;AAEA,WAASD,SAAT,GAAqB;AACnB,QAAIE,KAAJ,EAAWC,KAAX;;AAEA,SAAK,IAAIC,OAAOC,UAAUC,MAArB,EAA6BC,OAAO,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,OAAO,CAAjE,EAAoEA,OAAOL,IAA3E,EAAiFK,MAAjF,EAAyF;AACvFF,WAAKE,IAAL,IAAaJ,UAAUI,IAAV,CAAb;AACD;;AAED,WAAO,CAACP,QAAQC,QAAQF,iBAAiBS,IAAjB,CAAsBC,KAAtB,CAA4BV,gBAA5B,EAA8C,CAAC,IAAD,EAAOW,MAAP,CAAcL,IAAd,CAA9C,KAAsE,IAAtF,EAA4FJ,MAAMU,KAAN,GAAc;AAChHjB,kBAAYD,OAAOC;AAD6F,KAA1G,EAELM,KAFI,KAEM,qCAAuBC,KAAvB,CAFb;AAGD;;AAED,MAAIW,SAASd,UAAUe,SAAvB;;AAEAD,SAAOE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,QAAIC,SAAS,IAAb;;AAEA,QAAI,CAAC,KAAKJ,KAAL,CAAWjB,UAAhB,EAA4B;AAC1B,UAAI,OAAOD,OAAOR,kBAAP,CAAP,KAAsC,UAA1C,EAAsD;AACpDQ,eAAOR,kBAAP,IAA6BK,MAA7B;AACD;;AAEDH,oBAAc,UAAUO,UAAV,EAAsB;AAClCqB,eAAOC,QAAP,CAAgB;AACdtB,sBAAYA;AADE,SAAhB;AAGD,OAJD;AAKD;AACF,GAdD;;AAgBAkB,SAAOK,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAI,CAAC,KAAKN,KAAL,CAAWjB,UAAhB,EAA4B;AAC1B,aAAOC,IAAP;AACD;;AAED,WAAOuB,eAAMC,aAAN,CAAoBC,kBAApB,EAAqC,uBAAS,EAAT,EAAa,KAAKC,KAAlB,EAAyB;AACnE3B,kBAAY,KAAKiB,KAAL,CAAWjB;AAD4C,KAAzB,CAArC,CAAP;AAGD,GARD;;AAUA,SAAOI,SAAP;AACD,CA5CD,CA4CEoB,eAAMI,SA5CR,CAFA,C,CAiDA","file":"index.js","sourcesContent":["import React from 'react';\nimport loadScript from 'load-script2';\nimport { CircularProgress } from 'material-ui/Progress';\nimport InternalCaptcha from './ReCaptcha';\n\nconst GRECAPTCHA_API = 'https://www.google.com/recaptcha/api.js';\nconst onloadCallbackName = 'grecaptchaOnload__$';\nconst onloadCallbacks = [];\n\nfunction loadReCaptcha(cb) {\n  loadScript(`${GRECAPTCHA_API}?onload=${onloadCallbackName}&render=explicit`);\n  onloadCallbacks.push(cb);\n}\n\nfunction onload() {\n  onloadCallbacks.forEach(fn => fn(window.grecaptcha));\n}\n\nexport default class ReCaptcha extends React.Component {\n  state = {\n    grecaptcha: window.grecaptcha,\n  };\n\n  componentDidMount() {\n    if (!this.state.grecaptcha) {\n      if (typeof window[onloadCallbackName] !== 'function') {\n        window[onloadCallbackName] = onload;\n      }\n\n      loadReCaptcha((grecaptcha) => {\n        this.setState({ grecaptcha });\n      });\n    }\n  }\n\n  render() {\n    if (!this.state.grecaptcha) {\n      return <CircularProgress className=\"ReCaptcha-spinner\" />;\n    }\n    return (\n      <InternalCaptcha\n        {...this.props}\n        grecaptcha={this.state.grecaptcha}\n      />\n    );\n  }\n}\n"]}