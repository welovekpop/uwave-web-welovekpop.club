{"version":3,"sources":["components/Dialogs/LoginDialog/RegisterForm.js"],"names":["enhance","_ref","_ref2","_ref3","color","_ref4","_ref5","_ref6","className","size","RegisterForm","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","busy","agreed","captchaResponse","handleSubmit","event","preventDefault","setState","props","onRegister","username","value","email","password","grecaptcha","handleCaptchaResponse","response","handleTosCheckbox","checked","refUsername","refEmail","refPassword","prototype","componentWillReceiveProps","renderCaptcha","useReCaptcha","sitekey","reCaptchaSiteKey","onResponse","theme","render","_props","t","error","_state","onSubmit","message","createElement","ref","placeholder","icon","autoFocus","type","style","float","width","onCheck","i18nKey","privacyPolicy","target","rel","href","disabled","Component","propTypes","process","env","NODE_ENV","func","isRequired","bool","string","object"],"mappings":"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","file":"RegisterForm.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate, Interpolate } from 'react-i18next';\nimport Checkbox from 'material-ui/Checkbox';\nimport EmailIcon from 'material-ui/svg-icons/communication/email';\nimport PasswordIcon from 'material-ui/svg-icons/action/lock';\nimport UserIcon from 'material-ui/svg-icons/social/person';\nimport Loader from '../../Loader';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport TextField from '../../Form/TextField';\nimport Button from '../../Form/Button';\nimport ReCaptcha from '../../ReCaptcha';\nimport SocialLogin from './SocialLogin';\nimport Separator from './Separator';\n\nconst enhance = translate();\n\nclass RegisterForm extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    useReCaptcha: PropTypes.bool,\n    reCaptchaSiteKey: PropTypes.string,\n    error: PropTypes.object,\n\n    onRegister: PropTypes.func,\n  };\n\n  state = {\n    busy: false,\n    agreed: false,\n    captchaResponse: null,\n  };\n\n  componentWillReceiveProps() {\n    this.setState({ busy: false });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ busy: true });\n    this.props.onRegister({\n      username: this.username.value,\n      email: this.email.value,\n      password: this.password.value,\n      grecaptcha: this.state.captchaResponse,\n    });\n  };\n\n  handleCaptchaResponse = (response) => {\n    this.setState({\n      captchaResponse: response,\n    });\n  };\n\n  handleTosCheckbox = (event, checked) => {\n    this.setState({\n      agreed: checked,\n    });\n  };\n\n  refUsername = (username) => {\n    this.username = username;\n  };\n\n  refEmail = (email) => {\n    this.email = email;\n  };\n\n  refPassword = (password) => {\n    this.password = password;\n  };\n\n  renderCaptcha() {\n    if (!this.props.useReCaptcha) {\n      return null;\n    }\n    return (\n      <FormGroup>\n        <ReCaptcha\n          sitekey={this.props.reCaptchaSiteKey}\n          onResponse={this.handleCaptchaResponse}\n          theme=\"dark\"\n        />\n      </FormGroup>\n    );\n  }\n\n  render() {\n    const { t, error } = this.props;\n    const { agreed, busy } = this.state;\n\n    return (\n      <Form className=\"RegisterForm\" onSubmit={this.handleSubmit}>\n        {error && <FormGroup>{error.message}</FormGroup>}\n        <SocialLogin />\n        <Separator />\n        <FormGroup>\n          <TextField\n            ref={this.refUsername}\n            className=\"RegisterForm-field\"\n            placeholder={t('login.username')}\n            icon={<UserIcon color=\"#9f9d9e\" />}\n            autoFocus\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refEmail}\n            className=\"RegisterForm-field\"\n            type=\"email\"\n            placeholder={t('login.email')}\n            icon={<EmailIcon color=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refPassword}\n            className=\"RegisterForm-field\"\n            type=\"password\"\n            placeholder={t('login.password')}\n            icon={<PasswordIcon color=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n\n        {this.renderCaptcha()}\n\n        <FormGroup>\n          <Checkbox\n            style={{ float: 'left', width: 'auto' }}\n            checked={agreed}\n            onCheck={this.handleTosCheckbox}\n          />\n          <Interpolate\n            i18nKey=\"login.agree\"\n            privacyPolicy={\n              <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"/privacy.html\">\n                {t('login.privacyPolicy')}\n              </a>\n            }\n          />\n        </FormGroup>\n\n        <FormGroup>\n          <Button\n            className=\"RegisterForm-submit\"\n            disabled={busy || !agreed}\n          >\n            {busy\n              ? <div className=\"Button-loading\"><Loader size=\"tiny\" /></div>\n              : t('login.register')\n            }\n          </Button>\n        </FormGroup>\n      </Form>\n    );\n  }\n}\n\nexport default enhance(RegisterForm);\n"]}