{"version":3,"sources":["components/FooterBar/index.js"],"names":["enhance","_ref","_ref2","className","FooterBar","_React$Component","props","_this","call","handleSkipTurn","bind","handleJoinWaitlist","handleLeaveWaitlist","prototype","reason","showSkip","userIsDJ","onModSkip","onSkipTurn","remove","user","joinWaitlist","leaveWaitlist","render","_props","t","openLoginDialog","openRegisterDialog","togglePlaylistManager","toggleSettings","onFavorite","onUpvote","onDownvote","_props2","userInWaitlist","shouldRandomizePlaylists","playlist","nextMedia","baseEta","mediaEndTime","voteStats","isGuest","canVote","currentDJ","onClick","createElement","disabled","onSkip","isLocked","waitlistIsLocked","toUpperCase","Component","contextTypes","muiTheme","object","propTypes","process","env","NODE_ENV","func","isRequired","string","number","bool"],"mappings":"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","file":"index.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\n\nimport NextMedia from './NextMedia';\nimport UserInfo from './UserInfo';\nimport SkipButton from './SkipButton';\nimport WaitlistButton from './WaitlistButton';\nimport ResponseBar from './Responses/Bar';\n\nimport RandomizePlaylistsNotice from '../../_wlk/RandomizePlaylistsNotice';\n\nconst enhance = translate();\n\nclass FooterBar extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    baseEta: PropTypes.number,\n    mediaEndTime: PropTypes.number,\n    nextMedia: PropTypes.object,\n    playlist: PropTypes.object,\n    user: PropTypes.object,\n    userInWaitlist: PropTypes.bool.isRequired,\n    userIsDJ: PropTypes.bool.isRequired,\n    currentDJ: PropTypes.object,\n    showSkip: PropTypes.bool,\n    waitlistIsLocked: PropTypes.bool.isRequired,\n    voteStats: PropTypes.object,\n    shouldRandomizePlaylists: PropTypes.bool,\n\n    openLoginDialog: PropTypes.func,\n    openRegisterDialog: PropTypes.func,\n    togglePlaylistManager: PropTypes.func,\n    toggleSettings: PropTypes.func,\n    joinWaitlist: PropTypes.func,\n    leaveWaitlist: PropTypes.func,\n    onSkipTurn: PropTypes.func.isRequired,\n    onModSkip: PropTypes.func.isRequired,\n    onFavorite: PropTypes.func,\n    onUpvote: PropTypes.func,\n    onDownvote: PropTypes.func,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.handleSkipTurn = this.handleSkipTurn.bind(this);\n    this.handleJoinWaitlist = this.handleJoinWaitlist.bind(this);\n    this.handleLeaveWaitlist = this.handleLeaveWaitlist.bind(this);\n  }\n\n  handleSkipTurn(reason) {\n    if (!this.props.showSkip) {\n      return null;\n    }\n    if (!this.props.userIsDJ) {\n      return this.props.onModSkip(reason);\n    }\n    return this.props.onSkipTurn({ remove: false });\n  }\n\n  handleJoinWaitlist() {\n    if (this.props.user) {\n      return this.props.joinWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  handleLeaveWaitlist() {\n    if (this.props.userIsDJ) {\n      return this.props.onSkipTurn({ remove: true });\n    } else if (this.props.user) {\n      return this.props.leaveWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  render() {\n    const {\n      t,\n      openLoginDialog, openRegisterDialog,\n      togglePlaylistManager, toggleSettings,\n      onFavorite, onUpvote, onDownvote,\n    } = this.props;\n    const {\n      user, userIsDJ, userInWaitlist,\n      shouldRandomizePlaylists,\n      playlist, nextMedia, showSkip,\n      baseEta, mediaEndTime,\n      voteStats,\n    } = this.props;\n    const className = cx('FooterBar', this.props.className);\n\n    if (user && !user.isGuest) {\n      const canVote = !userIsDJ && !!this.props.currentDJ;\n      return (\n        <div className={className}>\n          <div className=\"FooterBar-user\">\n            <UserInfo\n              user={user}\n              onClick={toggleSettings}\n            />\n          </div>\n          <button\n            className=\"FooterBar-next\"\n            onClick={togglePlaylistManager}\n          >\n            {shouldRandomizePlaylists ? (\n              <RandomizePlaylistsNotice />\n            ) : (\n              <NextMedia\n                playlist={playlist}\n                nextMedia={nextMedia}\n                userInWaitlist={userInWaitlist}\n                userIsDJ={userIsDJ}\n                baseEta={baseEta}\n                mediaEndTime={mediaEndTime}\n              />\n            )}\n          </button>\n          <div\n            className={cx(\n              'FooterBar-responses',\n              !showSkip && 'FooterBar-responses--spaced',\n            )}\n          >\n            <ResponseBar\n              disabled={!canVote}\n              onFavorite={onFavorite}\n              onUpvote={onUpvote}\n              onDownvote={onDownvote}\n              {...voteStats}\n            />\n          </div>\n          {this.props.showSkip && (\n            <div className=\"FooterBar-skip\">\n              <SkipButton\n                userIsDJ={userIsDJ}\n                currentDJ={this.props.currentDJ}\n                onSkip={this.handleSkipTurn}\n              />\n            </div>\n          )}\n          <WaitlistButton\n            isLocked={this.props.waitlistIsLocked}\n            userInWaitlist={userInWaitlist}\n            onClick={userInWaitlist ? this.handleLeaveWaitlist : this.handleJoinWaitlist}\n          />\n        </div>\n      );\n    }\n    return (\n      <div className={className}>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--login\"\n          onClick={openLoginDialog}\n        >\n          {t('login.login').toUpperCase()}\n        </button>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--register\"\n          onClick={openRegisterDialog}\n        >\n          {t('login.register').toUpperCase()}\n        </button>\n        <div className=\"FooterBar-guest\">\n          You have to log in if you want to play!\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(FooterBar);\n"]}