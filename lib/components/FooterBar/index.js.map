{"version":3,"sources":["components/FooterBar/index.js"],"names":["enhance","_ref","RandomizePlaylistsNotice","_ref2","className","FooterBar","_React$Component","_temp","_this","_len","arguments","length","args","Array","_key","call","apply","concat","handleSkipTurn","reason","props","showSkip","userIsDJ","onModSkip","onSkipTurn","remove","handleJoinWaitlist","user","joinWaitlist","handleLeaveWaitlist","leaveWaitlist","_proto","prototype","render","_this$props","t","openLoginDialog","openRegisterDialog","togglePlaylistManager","toggleSettings","onFavorite","onUpvote","onDownvote","_this$props2","userInWaitlist","shouldRandomizePlaylists","playlist","nextMedia","baseEta","mediaEndTime","voteStats","isGuest","canVote","currentDJ","UserInfo","onClick","NextMedia","React","createElement","ResponseBar","disabled","SkipButton","onSkip","WaitlistButton","isLocked","waitlistIsLocked","toUpperCase","Component","contextTypes","muiTheme","PropTypes","object","propTypes","process","env","NODE_ENV","func","isRequired","string","number","bool"],"mappings":"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","file":"index.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\n\nimport NextMedia from './NextMedia';\nimport UserInfo from './UserInfo';\nimport SkipButton from './SkipButton';\nimport WaitlistButton from './WaitlistButton';\nimport ResponseBar from './Responses/Bar';\n\nimport RandomizePlaylistsNotice from '../../_wlk/RandomizePlaylistsNotice';\n\nconst enhance = translate();\n\nclass FooterBar extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    baseEta: PropTypes.number,\n    mediaEndTime: PropTypes.number,\n    nextMedia: PropTypes.object,\n    playlist: PropTypes.object,\n    user: PropTypes.object,\n    userInWaitlist: PropTypes.bool.isRequired,\n    userIsDJ: PropTypes.bool.isRequired,\n    currentDJ: PropTypes.object,\n    showSkip: PropTypes.bool,\n    waitlistIsLocked: PropTypes.bool.isRequired,\n    voteStats: PropTypes.object,\n    shouldRandomizePlaylists: PropTypes.bool,\n\n    openLoginDialog: PropTypes.func,\n    openRegisterDialog: PropTypes.func,\n    togglePlaylistManager: PropTypes.func,\n    toggleSettings: PropTypes.func,\n    joinWaitlist: PropTypes.func,\n    leaveWaitlist: PropTypes.func,\n    onSkipTurn: PropTypes.func.isRequired,\n    onModSkip: PropTypes.func.isRequired,\n    onFavorite: PropTypes.func,\n    onUpvote: PropTypes.func,\n    onDownvote: PropTypes.func,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object,\n  };\n\n  handleSkipTurn = (reason) => {\n    if (!this.props.showSkip) {\n      return null;\n    }\n    if (!this.props.userIsDJ) {\n      return this.props.onModSkip(reason);\n    }\n    return this.props.onSkipTurn({ remove: false });\n  }\n\n  handleJoinWaitlist = () => {\n    if (this.props.user) {\n      return this.props.joinWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  handleLeaveWaitlist = () => {\n    if (this.props.userIsDJ) {\n      return this.props.onSkipTurn({ remove: true });\n    } else if (this.props.user) {\n      return this.props.leaveWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  render() {\n    const {\n      t,\n      openLoginDialog, openRegisterDialog,\n      togglePlaylistManager, toggleSettings,\n      onFavorite, onUpvote, onDownvote,\n    } = this.props;\n    const {\n      user, userIsDJ, userInWaitlist,\n      shouldRandomizePlaylists,\n      playlist, nextMedia, showSkip,\n      baseEta, mediaEndTime,\n      voteStats,\n    } = this.props;\n    const className = cx('FooterBar', this.props.className);\n\n    if (user && !user.isGuest) {\n      const canVote = !userIsDJ && !!this.props.currentDJ;\n      return (\n        <div className={className}>\n          <div className=\"FooterBar-user\">\n            <UserInfo\n              user={user}\n              onClick={toggleSettings}\n            />\n          </div>\n          <button\n            className=\"FooterBar-next\"\n            onClick={togglePlaylistManager}\n          >\n            {shouldRandomizePlaylists ? (\n              <RandomizePlaylistsNotice />\n            ) : (\n              <NextMedia\n                playlist={playlist}\n                nextMedia={nextMedia}\n                userInWaitlist={userInWaitlist}\n                userIsDJ={userIsDJ}\n                baseEta={baseEta}\n                mediaEndTime={mediaEndTime}\n              />\n            )}\n          </button>\n          <div\n            className={cx(\n              'FooterBar-responses',\n              !showSkip && 'FooterBar-responses--spaced',\n            )}\n          >\n            <ResponseBar\n              disabled={!canVote}\n              onFavorite={onFavorite}\n              onUpvote={onUpvote}\n              onDownvote={onDownvote}\n              {...voteStats}\n            />\n          </div>\n          {this.props.showSkip && (\n            <div className=\"FooterBar-skip\">\n              <SkipButton\n                userIsDJ={userIsDJ}\n                currentDJ={this.props.currentDJ}\n                onSkip={this.handleSkipTurn}\n              />\n            </div>\n          )}\n          <WaitlistButton\n            isLocked={this.props.waitlistIsLocked}\n            userInWaitlist={userInWaitlist}\n            onClick={userInWaitlist ? this.handleLeaveWaitlist : this.handleJoinWaitlist}\n          />\n        </div>\n      );\n    }\n    return (\n      <div className={className}>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--login\"\n          onClick={openLoginDialog}\n        >\n          {t('login.login').toUpperCase()}\n        </button>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--register\"\n          onClick={openRegisterDialog}\n        >\n          {t('login.register').toUpperCase()}\n        </button>\n        <div className=\"FooterBar-guest\">\n          You have to log in if you want to play!\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(FooterBar);\n"]}