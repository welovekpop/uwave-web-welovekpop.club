{"version":3,"sources":["components/FooterBar/index.js"],"names":["enhance","_ref","RandomizePlaylistsNotice","_ref2","className","FooterBar","_React$Component","props","_this","call","handleSkipTurn","bind","handleJoinWaitlist","handleLeaveWaitlist","_proto","prototype","reason","showSkip","userIsDJ","onModSkip","onSkipTurn","remove","user","joinWaitlist","leaveWaitlist","render","_this$props","t","openLoginDialog","openRegisterDialog","togglePlaylistManager","toggleSettings","onFavorite","onUpvote","onDownvote","_this$props2","userInWaitlist","shouldRandomizePlaylists","playlist","nextMedia","baseEta","mediaEndTime","voteStats","isGuest","canVote","currentDJ","UserInfo","onClick","NextMedia","React","createElement","ResponseBar","disabled","SkipButton","onSkip","WaitlistButton","isLocked","waitlistIsLocked","toUpperCase","Component","contextTypes","muiTheme","PropTypes","object","propTypes","process","env","NODE_ENV","func","isRequired","string","number","bool"],"mappings":"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","file":"index.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\n\nimport NextMedia from './NextMedia';\nimport UserInfo from './UserInfo';\nimport SkipButton from './SkipButton';\nimport WaitlistButton from './WaitlistButton';\nimport ResponseBar from './Responses/Bar';\n\nimport RandomizePlaylistsNotice from '../../_wlk/RandomizePlaylistsNotice';\n\nconst enhance = translate();\n\nclass FooterBar extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    baseEta: PropTypes.number,\n    mediaEndTime: PropTypes.number,\n    nextMedia: PropTypes.object,\n    playlist: PropTypes.object,\n    user: PropTypes.object,\n    userInWaitlist: PropTypes.bool.isRequired,\n    userIsDJ: PropTypes.bool.isRequired,\n    currentDJ: PropTypes.object,\n    showSkip: PropTypes.bool,\n    waitlistIsLocked: PropTypes.bool.isRequired,\n    voteStats: PropTypes.object,\n    shouldRandomizePlaylists: PropTypes.bool,\n\n    openLoginDialog: PropTypes.func,\n    openRegisterDialog: PropTypes.func,\n    togglePlaylistManager: PropTypes.func,\n    toggleSettings: PropTypes.func,\n    joinWaitlist: PropTypes.func,\n    leaveWaitlist: PropTypes.func,\n    onSkipTurn: PropTypes.func.isRequired,\n    onModSkip: PropTypes.func.isRequired,\n    onFavorite: PropTypes.func,\n    onUpvote: PropTypes.func,\n    onDownvote: PropTypes.func,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.handleSkipTurn = this.handleSkipTurn.bind(this);\n    this.handleJoinWaitlist = this.handleJoinWaitlist.bind(this);\n    this.handleLeaveWaitlist = this.handleLeaveWaitlist.bind(this);\n  }\n\n  handleSkipTurn(reason) {\n    if (!this.props.showSkip) {\n      return null;\n    }\n    if (!this.props.userIsDJ) {\n      return this.props.onModSkip(reason);\n    }\n    return this.props.onSkipTurn({ remove: false });\n  }\n\n  handleJoinWaitlist() {\n    if (this.props.user) {\n      return this.props.joinWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  handleLeaveWaitlist() {\n    if (this.props.userIsDJ) {\n      return this.props.onSkipTurn({ remove: true });\n    } else if (this.props.user) {\n      return this.props.leaveWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  render() {\n    const {\n      t,\n      openLoginDialog, openRegisterDialog,\n      togglePlaylistManager, toggleSettings,\n      onFavorite, onUpvote, onDownvote,\n    } = this.props;\n    const {\n      user, userIsDJ, userInWaitlist,\n      shouldRandomizePlaylists,\n      playlist, nextMedia, showSkip,\n      baseEta, mediaEndTime,\n      voteStats,\n    } = this.props;\n    const className = cx('FooterBar', this.props.className);\n\n    if (user && !user.isGuest) {\n      const canVote = !userIsDJ && !!this.props.currentDJ;\n      return (\n        <div className={className}>\n          <div className=\"FooterBar-user\">\n            <UserInfo\n              user={user}\n              onClick={toggleSettings}\n            />\n          </div>\n          <button\n            className=\"FooterBar-next\"\n            onClick={togglePlaylistManager}\n          >\n            {shouldRandomizePlaylists ? (\n              <RandomizePlaylistsNotice />\n            ) : (\n              <NextMedia\n                playlist={playlist}\n                nextMedia={nextMedia}\n                userInWaitlist={userInWaitlist}\n                userIsDJ={userIsDJ}\n                baseEta={baseEta}\n                mediaEndTime={mediaEndTime}\n              />\n            )}\n          </button>\n          <div\n            className={cx(\n              'FooterBar-responses',\n              !showSkip && 'FooterBar-responses--spaced',\n            )}\n          >\n            <ResponseBar\n              disabled={!canVote}\n              onFavorite={onFavorite}\n              onUpvote={onUpvote}\n              onDownvote={onDownvote}\n              {...voteStats}\n            />\n          </div>\n          {this.props.showSkip && (\n            <div className=\"FooterBar-skip\">\n              <SkipButton\n                userIsDJ={userIsDJ}\n                currentDJ={this.props.currentDJ}\n                onSkip={this.handleSkipTurn}\n              />\n            </div>\n          )}\n          <WaitlistButton\n            isLocked={this.props.waitlistIsLocked}\n            userInWaitlist={userInWaitlist}\n            onClick={userInWaitlist ? this.handleLeaveWaitlist : this.handleJoinWaitlist}\n          />\n        </div>\n      );\n    }\n    return (\n      <div className={className}>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--login\"\n          onClick={openLoginDialog}\n        >\n          {t('login.login').toUpperCase()}\n        </button>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--register\"\n          onClick={openRegisterDialog}\n        >\n          {t('login.register').toUpperCase()}\n        </button>\n        <div className=\"FooterBar-guest\">\n          You have to log in if you want to play!\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(FooterBar);\n"]}