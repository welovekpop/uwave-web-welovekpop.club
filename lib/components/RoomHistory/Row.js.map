{"version":3,"sources":["components/RoomHistory/Row.js"],"names":["_dec","_class","_class2","_temp2","inSelection","selection","media","some","item","_id","mediaSource","beginDrag","_ref","collect","connect","connectDragSource","dragSource","connectDragPreview","dragPreview","HistoryRow","_React$Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","call","apply","concat","state","showActions","handleMouseEnter","setState","handleMouseLeave","handleDoubleClick","props","onOpenPreviewMediaDialog","prototype","componentDidMount","render","_props","historyEntry","className","selected","makeActions","onClick","timestamp","user","stats","selectedClass","thumbnail","src","alt","onMouseEnter","onMouseLeave","onDoubleClick","size","artist","title","createElement","username","dateTime","Component","defaultProps","default","propTypes","process","env","NODE_ENV","string","func","isRequired","object","bool","array"],"mappings":"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","file":"Row.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragSource } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { MEDIA } from '../../constants/DDItemTypes';\n\nimport Actions from '../MediaList/Actions';\nimport SongTitle from '../SongTitle';\nimport TimeAgo from '../TimeAgo';\n\nimport HistoryVotes from './Votes';\n\nconst inSelection = (selection, media) =>\n  selection.some(item => item._id === media._id);\n\nconst mediaSource = {\n  beginDrag({ selection, media }) {\n    return {\n      media: inSelection(selection, media.media) ? selection : [ media.media ]\n    };\n  }\n};\n\nconst collect = connect => ({\n  connectDragSource: connect.dragSource(),\n  connectDragPreview: connect.dragPreview()\n});\n\n@DragSource(MEDIA, mediaSource, collect)\nexport default class HistoryRow extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    connectDragSource: PropTypes.func.isRequired,\n    connectDragPreview: PropTypes.func.isRequired,\n    media: PropTypes.object,\n    selected: PropTypes.bool,\n    selection: PropTypes.array,\n\n    onOpenPreviewMediaDialog: PropTypes.func,\n    onClick: PropTypes.func,\n    makeActions: PropTypes.func\n  };\n\n  static defaultProps = {\n    selected: false\n  };\n\n  state = { showActions: false };\n\n  componentDidMount() {\n    this.props.connectDragPreview(getEmptyImage());\n  }\n\n  handleMouseEnter = () => {\n    this.setState({ showActions: true });\n  };\n\n  handleMouseLeave = () => {\n    this.setState({ showActions: false });\n  };\n\n  handleDoubleClick = () => {\n    this.props.onOpenPreviewMediaDialog(\n      this.props.media.media\n    );\n  };\n\n  render() {\n    const {\n      media: historyEntry,\n      className,\n      selection,\n      selected,\n      connectDragSource,\n      // actions\n      makeActions,\n      // etc\n      onClick\n    } = this.props;\n    const { media, timestamp, user, stats } = historyEntry;\n    const { showActions } = this.state;\n    const selectedClass = selected ? 'is-selected' : '';\n    const thumbnail = (\n      <div className=\"MediaListRow-thumb\">\n        <img\n          className=\"MediaListRow-image\"\n          src={media.thumbnail}\n          alt=\"\"\n        />\n      </div>\n    );\n    return connectDragSource(\n      // See PlaylistManager/Panel/Row.js\n      // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n      <div\n        className={cx('MediaListRow', 'HistoryRow', className, selectedClass)}\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.handleMouseLeave}\n        onDoubleClick={this.handleDoubleClick}\n        onClick={onClick}\n      >\n        {thumbnail}\n        <SongTitle\n          className=\"HistoryRow-song\"\n          size=\"mediaRow\"\n          artist={media.artist}\n          title={media.title}\n        />\n        <div className=\"HistoryRow-votes\">\n          <HistoryVotes {...stats} />\n        </div>\n        <div className=\"HistoryRow-user\">\n          {user.username}\n        </div>\n        <div className=\"HistoryRow-time\" dateTime={timestamp}>\n          <TimeAgo timestamp={timestamp} />\n        </div>\n        {showActions && (\n          <Actions\n            className={cx('MediaListRow-actions', selectedClass)}\n            selection={selection}\n            media={media}\n            makeActions={makeActions}\n          />\n        )}\n      </div>\n    );\n  }\n}\n"]}