{"version":3,"sources":["mobile/containers/PlaylistPanel.js"],"names":["mapStateToProps","playlist","selectedPlaylistSelector","media","filteredSelectedPlaylistItemsSelector","loading","isSelectedPlaylistLoadingSelector","isFiltered","isFilteredSelector","selectionOrOne","selection","isSelected","get","onOpenAddMediaMenu","position","onRemoveFromPlaylist","onMoveMedia","opts","onMoveToFirst","at","onEditMedia","onLoadPlaylistPage","_ref","page","_id","mapDispatchToProps","dispatch","mergeProps","state","_ref2","props","onShufflePlaylist","shufflePlaylist","bind","onActivatePlaylist","activatePlaylist","onRenamePlaylist","renamePlaylist","onDeletePlaylist","deletePlaylist","onNotDeletable","cannotDeleteActivePlaylist","onOpenPreviewMediaDialog","openPreviewMediaDialog","onFilterPlaylistItems","filterPlaylistItems","PlaylistPanel"],"mappings":"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","file":"PlaylistPanel.js","sourcesContent":["import { bindActionCreators } from 'redux';\nimport { createStructuredSelector } from 'reselect';\nimport { connect } from 'react-redux';\n\nimport {\n  selectedPlaylistSelector,\n  filteredSelectedPlaylistItemsSelector,\n  isSelectedPlaylistLoadingSelector,\n  isFilteredSelector,\n} from '../../selectors/playlistSelectors';\n\nimport { openPreviewMediaDialog } from '../../actions/DialogActionCreators';\nimport {\n  addMediaMenu,\n  editMedia,\n  moveMedia,\n  removeMedia,\n  filterPlaylistItems,\n  renamePlaylist,\n  deletePlaylist,\n  cannotDeleteActivePlaylist,\n  shufflePlaylist,\n  activatePlaylist,\n  loadPlaylist,\n  loadFilteredPlaylistItems,\n} from '../../actions/PlaylistActionCreators';\n\nimport PlaylistPanel from '../components/PlaylistManager/PlaylistPanel';\n\nconst mapStateToProps = createStructuredSelector({\n  playlist: selectedPlaylistSelector,\n  media: filteredSelectedPlaylistItemsSelector,\n  loading: isSelectedPlaylistLoadingSelector,\n  isFiltered: isFilteredSelector,\n});\n\nconst selectionOrOne = (media, selection) => {\n  if (selection.isSelected(media)) {\n    return selection.get();\n  }\n  return [media];\n};\n\nconst onOpenAddMediaMenu = (position, media, selection) =>\n  addMediaMenu(selectionOrOne(media, selection), position);\nconst onRemoveFromPlaylist = playlist => (media, selection) =>\n  removeMedia(playlist, selectionOrOne(media, selection));\nconst onMoveMedia = playlist => (media, opts) =>\n  moveMedia(playlist, media, opts);\nconst onMoveToFirst = playlist => (media, selection) =>\n  moveMedia(playlist, selectionOrOne(media, selection), { at: 'start' });\nconst onEditMedia = playlist => media =>\n  editMedia(playlist, media);\nconst onLoadPlaylistPage = ({ isFiltered, playlist }) => page => (\n  isFiltered ? loadFilteredPlaylistItems(playlist._id, page) :\n    loadPlaylist(playlist._id, page)\n);\n\n// Most of the playlist-related action creators need to know which playlist to\n// use, i.e. need to have a reference to the selected playlist. The selected\n// playlist is picked out in `mapStateToProps`, but we can't access its result\n// in `mapDispatchToProps` yet. Instead, `mapDispatchToProps` passes the\n// `dispatch` function to the `mergeProps` function below, and then that\n// configures the action creators.\n// TODO Maybe it's better to have versions of these action creators that work on\n// the selected playlist by default? using redux-thunk.\nconst mapDispatchToProps = dispatch => ({ dispatch });\n\nconst mergeProps = (state, { dispatch }, props) => ({\n  ...props,\n  ...state,\n  ...bindActionCreators({\n    onShufflePlaylist: shufflePlaylist.bind(null, state.playlist._id),\n    onActivatePlaylist: activatePlaylist.bind(null, state.playlist._id),\n    onRenamePlaylist: renamePlaylist.bind(null, state.playlist._id),\n    onDeletePlaylist: deletePlaylist.bind(null, state.playlist._id),\n    onNotDeletable: cannotDeleteActivePlaylist,\n\n    onOpenAddMediaMenu,\n    onOpenPreviewMediaDialog: openPreviewMediaDialog,\n    onMoveToFirst: onMoveToFirst(state.playlist._id),\n    onMoveMedia: onMoveMedia(state.playlist._id),\n    onEditMedia: onEditMedia(state.playlist._id),\n    onRemoveFromPlaylist: onRemoveFromPlaylist(state.playlist._id),\n    onLoadPlaylistPage: onLoadPlaylistPage(state),\n    onFilterPlaylistItems: filterPlaylistItems.bind(null, state.playlist._id),\n  }, dispatch),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps, mergeProps)(PlaylistPanel);\n"]}