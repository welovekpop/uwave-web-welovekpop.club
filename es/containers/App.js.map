{"version":3,"sources":["containers/App.js"],"names":["React","PropTypes","bindActionCreators","connect","createStructuredSelector","MuiThemeProvider","I18nextProvider","Provider","BusProvider","closeAll","createTimer","stopTimer","settingsSelector","languageSelector","muiThemeSelector","isConnectedSelector","App","mapStateToProps","activeOverlay","state","isConnected","settings","language","muiTheme","hasAboutPage","props","uwave","getAboutPageComponent","mapDispatchToProps","onCloseOverlay","dispatch","enhance","AppContainer","getChildContext","timerCallbacks","mediaSources","componentWillMount","componentWillReceiveProps","nextProps","locale","changeLanguage","componentWillUnmount","render","Component","childContextTypes","arrayOf","func","object","propTypes","isRequired","string"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,OAAOC,gBAAP,MAA6B,qCAA7B;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,SAASC,YAAYC,WAArB,QAAwC,WAAxC;AACA,SAASC,QAAT,QAAyB,kCAAzB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,iCAAvC;;AAEA,SACEC,gBADF,EAEEC,gBAFF,EAGEC,gBAHF,QAIO,+BAJP;AAKA,SAASC,mBAAT,QAAoC,8BAApC;AACA,OAAOC,GAAP,MAAgB,mBAAhB;;AAEA,IAAMC,kBAAkBb,yBAAyB;AAC/Cc,iBAAe;AAAA,WAASC,MAAMD,aAAf;AAAA,GADgC;AAE/CE,eAAaL,mBAFkC;AAG/CM,YAAUT,gBAHqC;AAI/CU,YAAUT,gBAJqC;AAK/CU,YAAUT,gBALqC;AAM/CU,gBAAc,sBAACL,KAAD,EAAQM,KAAR;AAAA,WACZA,MAAMC,KAAN,CAAYC,qBAAZ,OAAwC,IAD5B;AAAA;AANiC,CAAzB,CAAxB;;AAWA,IAAMC,qBAAqB,SAArBA,kBAAqB;AAAA,SAAY1B,mBAAmB;AACxDQ,4BADwD;AAExDC,wBAFwD;AAGxDkB,oBAAgBpB;AAHwC,GAAnB,EAIpCqB,QAJoC,CAAZ;AAAA,CAA3B;;AAMA,IAAMC,UAAU5B,QAAQc,eAAR,EAAyBW,kBAAzB,CAAhB;;IAEMI,Y;;;;;;;;;yBAiBJC,e,8BAAkB;AAChB,WAAO;AACLC,sBAAgB,KAAKA,cADhB;AAELC,oBAAc,KAAKV,KAAL,CAAWU,YAFpB;AAGLT,aAAO,KAAKD,KAAL,CAAWC;AAHb,KAAP;AAKD,G;;AAED;;;yBACAU,kB,iCAAqB;AACnB;AACA;AACA,SAAKF,cAAL,GAAsB,KAAKT,KAAL,CAAWf,WAAX,EAAtB;AACD,G;;yBAED2B,yB,sCAA0BC,S,EAAW;AACnC,QAAI,KAAKb,KAAL,CAAWH,QAAX,KAAwBgB,UAAUhB,QAAtC,EAAgD;AAC9C,WAAKG,KAAL,CAAWc,MAAX,CAAkBC,cAAlB,CAAiCF,UAAUhB,QAA3C;AACD;AACF,G;;yBAEDmB,oB,mCAAuB;AACrB,SAAKP,cAAL,GAAsB,EAAtB;AACA,SAAKT,KAAL,CAAWd,SAAX;AACD,G;;yBAED+B,M,qBAAS;AACP,gBACG,gBADH;AAAA,gBAC8B,KAAKjB,KAAL,CAAWF;AADzC,oBAEK,eAFL;AAAA,YAE2B,KAAKE,KAAL,CAAWc;AAFtC,oBAGO,WAHP,cAIQ,oBAAC,GAAD,EAAS,KAAKd,KAAd,CAJR;AASD,G;;;EArDwBzB,MAAM2C,S;;AAA3BX,Y,CAWGY,iB,GAAoB;AACzBV,kBAAgBjC,UAAU4C,OAAV,CAAkB5C,UAAU6C,IAA5B,CADS;AAEzBX,gBAAclC,UAAU8C,MAFC;AAGzBrB,SAAOzB,UAAU8C;AAHQ,C;AAXvBf,Y,CACGgB,S,2CAAY;AACjBb,gBAAclC,UAAU8C,MAAV,CAAiBE,UADd;AAEjBvB,SAAOzB,UAAU8C,MAFA;AAGjBzB,YAAUrB,UAAUiD,MAHH;AAIjBX,UAAQtC,UAAU8C,MAAV,CAAiBE,UAJR;AAKjB1B,YAAUtB,UAAU8C,MALH;AAMjBrC,eAAaT,UAAU6C,IAAV,CAAeG,UANX;AAOjBtC,aAAWV,UAAU6C,IAAV,CAAeG;AAPT,C;;;AAuDrB,eAAelB,QAAQC,YAAR,CAAf","file":"App.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport { I18nextProvider } from 'react-i18next';\nimport { Provider as BusProvider } from 'react-bus';\nimport { closeAll } from '../actions/OverlayActionCreators';\nimport { createTimer, stopTimer } from '../actions/TickerActionCreators';\n\nimport {\n  settingsSelector,\n  languageSelector,\n  muiThemeSelector,\n} from '../selectors/settingSelectors';\nimport { isConnectedSelector } from '../selectors/serverSelectors';\nimport App from '../components/App';\n\nconst mapStateToProps = createStructuredSelector({\n  activeOverlay: state => state.activeOverlay,\n  isConnected: isConnectedSelector,\n  settings: settingsSelector,\n  language: languageSelector,\n  muiTheme: muiThemeSelector,\n  hasAboutPage: (state, props) => (\n    props.uwave.getAboutPageComponent() !== null\n  ),\n});\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n  createTimer,\n  stopTimer,\n  onCloseOverlay: closeAll,\n}, dispatch);\n\nconst enhance = connect(mapStateToProps, mapDispatchToProps);\n\nclass AppContainer extends React.Component {\n  static propTypes = {\n    mediaSources: PropTypes.object.isRequired,\n    uwave: PropTypes.object,\n    language: PropTypes.string,\n    locale: PropTypes.object.isRequired,\n    muiTheme: PropTypes.object,\n    createTimer: PropTypes.func.isRequired,\n    stopTimer: PropTypes.func.isRequired,\n  };\n\n  static childContextTypes = {\n    timerCallbacks: PropTypes.arrayOf(PropTypes.func),\n    mediaSources: PropTypes.object,\n    uwave: PropTypes.object,\n  };\n\n  getChildContext() {\n    return {\n      timerCallbacks: this.timerCallbacks,\n      mediaSources: this.props.mediaSources,\n      uwave: this.props.uwave,\n    };\n  }\n\n  // TODO move this to constructor?\n  componentWillMount() {\n    // Start the clock! Ã¼Wave stores the current time in the application state\n    // primarily to make sure that different timers in the UI update simultaneously.\n    this.timerCallbacks = this.props.createTimer();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.language !== nextProps.language) {\n      this.props.locale.changeLanguage(nextProps.language);\n    }\n  }\n\n  componentWillUnmount() {\n    this.timerCallbacks = [];\n    this.props.stopTimer();\n  }\n\n  render() {\n    return (\n      <MuiThemeProvider muiTheme={this.props.muiTheme}>\n        <I18nextProvider i18n={this.props.locale}>\n          <BusProvider>\n            <App {...this.props} />\n          </BusProvider>\n        </I18nextProvider>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default enhance(AppContainer);\n"]}