{"version":3,"sources":["actions/WaitlistActionCreators.js"],"names":["del","post","put","WAITLIST_LOAD","WAITLIST_LOCK","WAITLIST_CLEAR","WAITLIST_UPDATE","WAITLIST_JOIN","WAITLIST_LEAVE","WAITLIST_MOVE","DO_JOIN_START","DO_JOIN_COMPLETE","DO_LEAVE_START","DO_LEAVE_COMPLETE","DO_LOCK_START","DO_LOCK_COMPLETE","DO_CLEAR_START","DO_CLEAR_COMPLETE","currentUserSelector","setWaitList","data","type","payload","waitlist","locked","setLocked","lock","clearWaitlist","updatedWaitlist","joinWaitlist","otherUser","dispatch","getState","user","userID","_id","onStart","onComplete","onError","error","joinedWaitlist","leaveWaitlist","leftWaitlist","movedInWaitlist","moderatorID","position","meta","putLock","status","clear","modLockWaitlist","modUnlockWaitlist","modClearWaitlist"],"mappings":"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","sourcesContent":["import { del, post, put } from './RequestActionCreators';\nimport {\n  WAITLIST_LOAD,\n  WAITLIST_LOCK,\n  WAITLIST_CLEAR,\n  WAITLIST_UPDATE,\n  WAITLIST_JOIN,\n  WAITLIST_LEAVE,\n  WAITLIST_MOVE,\n  DO_JOIN_START, DO_JOIN_COMPLETE,\n  DO_LEAVE_START, DO_LEAVE_COMPLETE,\n  DO_LOCK_START, DO_LOCK_COMPLETE,\n  DO_CLEAR_START, DO_CLEAR_COMPLETE,\n} from '../constants/ActionTypes';\nimport { currentUserSelector } from '../selectors/userSelectors';\n\nexport function setWaitList(data) {\n  return {\n    type: WAITLIST_LOAD,\n    payload: {\n      waitlist: data.waitlist,\n      locked: data.locked,\n    },\n  };\n}\n\nexport function setLocked(lock) {\n  return {\n    type: WAITLIST_LOCK,\n    payload: {\n      locked: lock,\n    },\n  };\n}\n\nexport function clearWaitlist() {\n  return { type: WAITLIST_CLEAR };\n}\n\nexport function updatedWaitlist(waitlist) {\n  return {\n    type: WAITLIST_UPDATE,\n    payload: { waitlist },\n  };\n}\n\n// TODO split joining the waitlist and adding another user to the waitlist\n// into two different actions.\nexport function joinWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(post('/waitlist', { userID: user._id }, {\n      onStart: () => ({ type: DO_JOIN_START }),\n      onComplete: ({ data }) => ({\n        type: DO_JOIN_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_JOIN_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function joinedWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_JOIN,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function leaveWaitlist(otherUser) {\n  return (dispatch, getState) => {\n    const user = otherUser || currentUserSelector(getState());\n\n    return dispatch(del(`/waitlist/${user._id}`, {}, {\n      onStart: () => ({ type: DO_LEAVE_START }),\n      onComplete: ({ data }) => ({\n        type: DO_LEAVE_COMPLETE,\n        payload: { waitlist: data },\n      }),\n      onError: error => ({\n        type: DO_LEAVE_COMPLETE,\n        error: true,\n        payload: error,\n      }),\n    }));\n  };\n}\n\nexport function leftWaitlist({ userID, waitlist }) {\n  return {\n    type: WAITLIST_LEAVE,\n    payload: { userID, waitlist },\n  };\n}\n\nexport function movedInWaitlist({\n  userID, moderatorID, position, waitlist,\n}) {\n  return (dispatch) => {\n    dispatch({\n      type: WAITLIST_MOVE,\n      payload: { userID, position },\n      meta: { moderatorID },\n    });\n    dispatch(updatedWaitlist(waitlist));\n  };\n}\n\nfunction putLock(status) {\n  return put('/waitlist/lock', { lock: status, clear: false }, {\n    onStart: () => ({\n      type: DO_LOCK_START,\n      payload: { locked: status },\n    }),\n    onComplete: ({ data }) => ({\n      type: DO_LOCK_COMPLETE,\n      payload: { locked: data.locked },\n    }),\n    onError: error => ({\n      type: DO_LOCK_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n\nexport function modLockWaitlist() {\n  return putLock(true);\n}\nexport function modUnlockWaitlist() {\n  return putLock(false);\n}\n\nexport function modClearWaitlist() {\n  return del('/waitlist', {}, {\n    onStart: () => ({ type: DO_CLEAR_START }),\n    onComplete: () => ({ type: DO_CLEAR_COMPLETE }),\n    onError: error => ({\n      type: DO_CLEAR_COMPLETE,\n      error: true,\n      payload: error,\n    }),\n  });\n}\n"],"file":"WaitlistActionCreators.js"}