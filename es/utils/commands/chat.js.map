{"version":3,"sources":["utils/commands/chat.js"],"names":["register","findUser","userListSelector","isModeratorSelector","isManagerSelector","deleteChatMessagesByUser","deleteAllChatMessages","log","setMotd","guard","action","args","motd","join","dispatch","getState","username","trim","user","_id"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,QAAnB,QAAmC,iBAAnC;;AAEA,SACEC,gBADF,EAEEC,mBAFF,EAGEC,iBAHF,QAIO,+BAJP;AAKA,SACEC,wBADF,EAEEC,qBAFF,QAGO,wCAHP;AAIA,SACEC,GADF,EAEEC,OAFF,QAGO,kCAHP;;AAKAR,SACE,MADF,EAEE,oEAFF,EAGE;AACES,SAAOL,iBADT;AAEEM,UAAQ,kBAAa;AAAA,sCAATC,IAAS;AAATA,UAAS;AAAA;;AACnB,QAAMC,OAAOD,KAAKE,IAAL,CAAU,GAAV,CAAb;AACA,WAAOL,QAAQI,IAAR,CAAP;AACD;AALH,CAHF;;AAYAZ,SACE,WADF,EAEE,+BACA,iFAHF,EAIE;AACES,SAAON,mBADT;AAEEO,UAAQ;AAAA,uCAAIC,IAAJ;AAAIA,UAAJ;AAAA;;AAAA,WAAa,UAACG,QAAD,EAAWC,QAAX,EAAwB;AAC3C,UAAMC,WAAWL,KAAKE,IAAL,CAAU,GAAV,EAAeI,IAAf,EAAjB;AACA,UAAID,QAAJ,EAAc;AACZ,YAAME,OAAOjB,SAASC,iBAAiBa,UAAjB,CAAT,EAAuCC,QAAvC,CAAb;AACA,YAAIE,IAAJ,EAAU;AACR,iBAAOJ,SAAST,yBAAyBa,KAAKC,GAA9B,CAAT,CAAP;AACD;AACD,eAAOL,SAASP,cAAYS,QAAZ,+BAAT,CAAP;AACD;AACD,aAAOF,SAASR,uBAAT,CAAP;AACD,KAVO;AAAA;AAFV,CAJF","file":"chat.js","sourcesContent":["import { register, findUser } from '../ChatCommands';\n\nimport {\n  userListSelector,\n  isModeratorSelector,\n  isManagerSelector,\n} from '../../selectors/userSelectors';\nimport {\n  deleteChatMessagesByUser,\n  deleteAllChatMessages,\n} from '../../actions/ModerationActionCreators';\nimport {\n  log,\n  setMotd,\n} from '../../actions/ChatActionCreators';\n\nregister(\n  'motd',\n  'Set the Message of the Day, displayed at the very top of the chat.',\n  {\n    guard: isManagerSelector,\n    action: (...args) => {\n      const motd = args.join(' ');\n      return setMotd(motd);\n    },\n  },\n);\n\nregister(\n  'clearchat',\n  'Delete all chat messages. ' +\n  'Pass a username (\"/clearchat kool_panda\") to only delete messages by that user.',\n  {\n    guard: isModeratorSelector,\n    action: (...args) => (dispatch, getState) => {\n      const username = args.join(' ').trim();\n      if (username) {\n        const user = findUser(userListSelector(getState()), username);\n        if (user) {\n          return dispatch(deleteChatMessagesByUser(user._id));\n        }\n        return dispatch(log(`User ${username} is not online right now.`));\n      }\n      return dispatch(deleteAllChatMessages());\n    },\n  },\n);\n"]}