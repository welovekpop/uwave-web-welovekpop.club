{"version":3,"sources":["utils/commands/bans.js"],"names":["ms","register","findUser","log","userListSelector","isModeratorSelector","banUser","guard","action","username","duration","dispatch","getState","user","permanent"],"mappings":"AAAA,OAAOA,EAAP,MAAe,IAAf;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,iBAAnC;AACA,SAASC,GAAT,QAAoB,kCAApB;;AAEA,SACEC,gBADF,EAEEC,mBAFF,QAGO,+BAHP;AAIA,SAASC,OAAT,QAAwB,wCAAxB;;AAEAL,SACE,KADF,EAEE,uEAFF,EAGE;AACEM,SAAOF,mBADT;AAEEG,UAAQ,gBAACC,QAAD;AAAA,QAAWC,QAAX,uEAAsB,KAAtB;AAAA,WAAgC,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAC9D,UAAI,CAACH,QAAL,EAAe;AACb,eAAOE,SAASR,IAAI,wBAAJ,CAAT,CAAP;AACD;AACD,UAAMU,OAAOX,SACXE,iBAAiBQ,UAAjB,CADW,EAEXH,QAFW,CAAb;AAIA,UAAI,CAACI,IAAL,EAAW;AACT,eAAOF,SAASR,eAAaM,QAAb,sBAAT,CAAP;AACD;AACD,UAAMK,YAAYJ,aAAa,OAA/B;AACA,aAAOC,SAASL,QAAQO,IAAR,EAAc;AAC5BH,kBAAUV,QAAMU,QAAN,CADkB;AAE5BI;AAF4B,OAAd,CAAT,CAAP;AAID,KAhBO;AAAA;AAFV,CAHF","file":"bans.js","sourcesContent":["import ms from 'ms';\nimport { register, findUser } from '../ChatCommands';\nimport { log } from '../../actions/ChatActionCreators';\n\nimport {\n  userListSelector,\n  isModeratorSelector\n} from '../../selectors/userSelectors';\nimport { banUser } from '../../actions/ModerationActionCreators';\n\nregister(\n  'ban',\n  'Ban a user. Syntax: \"/ban username duration\" or \"/ban username perma\"',\n  {\n    guard: isModeratorSelector,\n    action: (username, duration = '24h') => (dispatch, getState) => {\n      if (!username) {\n        return dispatch(log('Provide a user to ban.'));\n      }\n      const user = findUser(\n        userListSelector(getState()),\n        username\n      );\n      if (!user) {\n        return dispatch(log(`User \"${username}\" is not online.`));\n      }\n      const permanent = duration === 'perma';\n      return dispatch(banUser(user, {\n        duration: ms(`${duration}`),\n        permanent\n      }));\n    }\n  }\n);\n"]}