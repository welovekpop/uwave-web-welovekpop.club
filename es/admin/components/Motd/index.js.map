{"version":3,"sources":["admin/components/Motd/index.js"],"names":["React","PropTypes","compose","withState","withProps","withHandlers","Card","CardHeader","CardText","CardActions","FlatButton","muiThemeable","EditIcon","parse","compile","enhance","props","motd","parsedMotd","newMotd","compileOptions","onChange","event","setMotd","target","value","onSubmit","onSetMotd","autoFocus","el","focus","Motd","muiTheme","canChangeMotd","paddingTop","palette","primary1Color","primary2Color","primary3Color","propTypes","object","isRequired","bool","string","array","func","defaultProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,QAA3B,EAAqCC,WAArC,QAAwD,kBAAxD;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,OAAOC,QAAP,MAAqB,wCAArB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,OAAP,MAAoB,yCAApB;;AAEA,OAAO,aAAP;;AAEA,IAAMC,UAAUb,QACdC,UAAU,SAAV,EAAqB,SAArB,EAAgC;AAAA,SAASa,MAAMC,IAAf;AAAA,CAAhC,CADc,EAEdb,UAAU;AAAA,SAAU;AAClBc,gBAAYJ,QAAQD,MAAMG,MAAMG,OAAZ,CAAR,EAA8BH,MAAMI,cAApC;AADM,GAAV;AAAA,CAAV,CAFc,EAKdf,aAAa;AACXgB,YAAU;AAAA,WAAS,UAACC,KAAD,EAAW;AAC5BN,YAAMO,OAAN,CAAcD,MAAME,MAAN,CAAaC,KAA3B;AACD,KAFS;AAAA,GADC;AAIXC,YAAU;AAAA,WAAS,YAAM;AACvBV,YAAMW,SAAN,CAAgBX,MAAMG,OAAtB;AACD,KAFS;AAAA;AAJC,CAAb,CALc,EAadR,cAbc,CAAhB;;AAgBA,SAASiB,SAAT,CAAmBC,EAAnB,EAAuB;AACrB,MAAIA,EAAJ,EAAQA,GAAGC,KAAH;AACT;;iBAciB,Q;SAAe;;;AAZjC,IAAMC,OAAO,SAAPA,IAAO;AAAA,MACXC,QADW,QACXA,QADW;AAAA,MAEXC,aAFW,QAEXA,aAFW;AAAA,MAGXd,OAHW,QAGXA,OAHW;AAAA,MAIXD,UAJW,QAIXA,UAJW;AAAA,MAKXG,QALW,QAKXA,QALW;AAAA,MAMXK,QANW,QAMXA,QANW;AAAA,cAQV,IARU;AAAA,eAQK;AARL,kBASR,UATQ;AAAA,WAUD,oBAVC;AAAA,0BAWeO,aAXf;AAAA;AAAA,WAcR,QAdQ,cAcEf,UAdF,QAeR,QAfQ;AAAA;AAAA,WAemB,EAAEgB,YAAY,CAAd;AAfnB,aAgBP;AACE,eAAU,iBADZ;AAEE,UAAM,CAFR;AAGE,cAAUb,QAHZ;AAIE,WAAOF,OAJT;AAKE,SAAKS;AALP,IAhBO,QAwBR,WAxBQ;AAAA;AAAA,kBAyBN,UAzBM;AAAA,aA0BIF,QA1BJ;AAAA,WA2BC,MA3BD;AAAA,qBA4BYM,SAASG,OAAT,CAAiBC,aA5B7B;AAAA,gBA6BOJ,SAASG,OAAT,CAAiBE,aA7BxB;AAAA,iBA8BQL,SAASG,OAAT,CAAiBG;AA9BzB;AAAA,CAAb;;AAoCAP,KAAKQ,SAAL,2CAAiB;AACfP,YAAU/B,UAAUuC,MAAV,CAAiBC,UADZ;AAEfR,iBAAehC,UAAUyC,IAFV;AAGfvB,WAASlB,UAAU0C,MAAV,CAAiBF,UAHX;AAIfvB,cAAYjB,UAAU2C,KAAV,CAAgBH,UAJb;AAKfpB,YAAUpB,UAAU4C,IAAV,CAAeJ,UALV;AAMff,YAAUzB,UAAU4C,IAAV,CAAeJ;AANV,CAAjB;;AASAV,KAAKe,YAAL,GAAoB;AAClBb,iBAAe;AADG,CAApB;;AAIA,eAAelB,QAAQgB,IAAR,CAAf","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withState from 'recompose/withState';\nimport withProps from 'recompose/withProps';\nimport withHandlers from 'recompose/withHandlers';\nimport { Card, CardHeader, CardText, CardActions } from 'material-ui/Card';\nimport FlatButton from 'material-ui/FlatButton';\nimport muiThemeable from 'material-ui/styles/muiThemeable';\nimport EditIcon from 'material-ui/svg-icons/editor/mode-edit';\nimport parse from 'u-wave-parse-chat-markup';\nimport compile from '../../../components/Chat/Markup/compile';\n\nimport './index.css';\n\nconst enhance = compose(\n  withState('newMotd', 'setMotd', props => props.motd),\n  withProps(props => ({\n    parsedMotd: compile(parse(props.newMotd), props.compileOptions),\n  })),\n  withHandlers({\n    onChange: props => (event) => {\n      props.setMotd(event.target.value);\n    },\n    onSubmit: props => () => {\n      props.onSetMotd(props.newMotd);\n    },\n  }),\n  muiThemeable(),\n);\n\nfunction autoFocus(el) {\n  if (el) el.focus();\n}\n\nconst Motd = ({\n  muiTheme,\n  canChangeMotd,\n  newMotd,\n  parsedMotd,\n  onChange,\n  onSubmit,\n}) => (\n  <Card className=\"AdminMotd\">\n    <CardHeader\n      title=\"Message of the Day\"\n      showExpandableButton={canChangeMotd}\n      closeIcon={<EditIcon color=\"#fff\" />}\n    />\n    <CardText>{parsedMotd}</CardText>\n    <CardText expandable style={{ paddingTop: 0 }}>\n      <textarea\n        className=\"AdminMotd-field\"\n        rows={4}\n        onChange={onChange}\n        value={newMotd}\n        ref={autoFocus}\n      />\n    </CardText>\n    <CardActions expandable>\n      <FlatButton\n        onClick={onSubmit}\n        label=\"Save\"\n        backgroundColor={muiTheme.palette.primary1Color}\n        hoverColor={muiTheme.palette.primary2Color}\n        rippleColor={muiTheme.palette.primary3Color}\n      />\n    </CardActions>\n  </Card>\n);\n\nMotd.propTypes = {\n  muiTheme: PropTypes.object.isRequired,\n  canChangeMotd: PropTypes.bool,\n  newMotd: PropTypes.string.isRequired,\n  parsedMotd: PropTypes.array.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n};\n\nMotd.defaultProps = {\n  canChangeMotd: false,\n};\n\nexport default enhance(Motd);\n"]}