{"version":3,"sources":["admin/components/Motd/index.js"],"names":["React","PropTypes","compose","withState","withProps","withHandlers","Card","CardHeader","CardContent","CardActions","Button","IconButton","Collapse","EditIcon","parse","compile","enhance","props","motd","parsedMotd","newMotd","compileOptions","onExpand","setExpanded","expanded","onChange","event","setMotd","target","value","onSubmit","onSetMotd","autoFocus","el","focus","Motd","canChangeMotd","paddingTop","propTypes","bool","string","isRequired","array","func","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport compose from 'recompose/compose';\nimport withState from 'recompose/withState';\nimport withProps from 'recompose/withProps';\nimport withHandlers from 'recompose/withHandlers';\nimport Card, { CardHeader, CardContent, CardActions } from 'material-ui/Card';\nimport Button from 'material-ui/Button';\nimport IconButton from 'material-ui/IconButton';\nimport Collapse from 'material-ui/transitions/Collapse';\nimport EditIcon from 'material-ui-icons/ModeEdit';\nimport parse from 'u-wave-parse-chat-markup';\nimport compile from '../../../components/Chat/Markup/compile';\n\nconst enhance = compose(\n  withState('newMotd', 'setMotd', props => props.motd),\n  withState('expanded', 'setExpanded', false),\n  withProps(props => ({\n    parsedMotd: compile(parse(props.newMotd), props.compileOptions),\n    onExpand: () => props.setExpanded(!props.expanded),\n  })),\n  withHandlers({\n    onChange: props => (event) => {\n      props.setMotd(event.target.value);\n    },\n    onSubmit: props => () => {\n      props.onSetMotd(props.newMotd);\n      props.setExpanded(false);\n    },\n  }),\n);\n\nfunction autoFocus(el) {\n  if (el) el.focus();\n}\n\nconst Motd = ({\n  canChangeMotd,\n  newMotd,\n  parsedMotd,\n  expanded,\n  onChange,\n  onSubmit,\n  onExpand,\n}) => (\n  <Card className=\"AdminMotd\">\n    <CardHeader\n      title=\"Message of the Day\"\n      action={canChangeMotd && (\n        <IconButton onClick={onExpand}>\n          <EditIcon />\n        </IconButton>\n      )}\n    />\n    <CardContent>{parsedMotd}</CardContent>\n    <Collapse in={expanded} unmountOnExit>\n      <CardContent style={{ paddingTop: 0 }}>\n        <textarea\n          className=\"AdminMotd-field\"\n          rows={4}\n          onChange={onChange}\n          value={newMotd}\n          ref={autoFocus}\n        />\n      </CardContent>\n      <CardActions>\n        <Button\n          variant=\"raised\"\n          color=\"primary\"\n          onClick={onSubmit}\n        >\n          Save\n        </Button>\n      </CardActions>\n    </Collapse>\n  </Card>\n);\n\nMotd.propTypes = {\n  canChangeMotd: PropTypes.bool,\n  newMotd: PropTypes.string.isRequired,\n  parsedMotd: PropTypes.array.isRequired,\n  expanded: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onExpand: PropTypes.func.isRequired,\n};\n\nMotd.defaultProps = {\n  canChangeMotd: false,\n};\n\nexport default enhance(Motd);\n"]}