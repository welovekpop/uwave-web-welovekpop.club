{"version":3,"sources":["components/Dialogs/LoginDialog/RegisterForm.js"],"names":["React","PropTypes","translate","Interpolate","Checkbox","EmailIcon","PasswordIcon","UserIcon","Loader","Form","FormGroup","TextField","Button","ReCaptcha","SocialLogin","Separator","enhance","RegisterForm","state","busy","agreed","captchaResponse","handleSubmit","event","preventDefault","setState","props","onRegister","username","value","email","password","grecaptcha","handleCaptchaResponse","response","handleTosCheckbox","checked","refUsername","refEmail","refPassword","componentWillReceiveProps","renderCaptcha","useReCaptcha","reCaptchaSiteKey","render","t","error","message","float","width","Component","propTypes","func","isRequired","bool","string","object"],"mappings":"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","file":"RegisterForm.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate, Interpolate } from 'react-i18next';\nimport Checkbox from 'material-ui/Checkbox';\nimport EmailIcon from 'material-ui/svg-icons/communication/email';\nimport PasswordIcon from 'material-ui/svg-icons/action/lock';\nimport UserIcon from 'material-ui/svg-icons/social/person';\nimport Loader from '../../Loader';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport TextField from '../../Form/TextField';\nimport Button from '../../Form/Button';\nimport ReCaptcha from '../../ReCaptcha';\nimport SocialLogin from './SocialLogin';\nimport Separator from './Separator';\n\nconst enhance = translate();\n\nclass RegisterForm extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    useReCaptcha: PropTypes.bool,\n    reCaptchaSiteKey: PropTypes.string,\n    error: PropTypes.object,\n\n    onRegister: PropTypes.func,\n  };\n\n  state = {\n    busy: false,\n    agreed: false,\n    captchaResponse: null,\n  };\n\n  componentWillReceiveProps() {\n    this.setState({ busy: false });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ busy: true });\n    this.props.onRegister({\n      username: this.username.value,\n      email: this.email.value,\n      password: this.password.value,\n      grecaptcha: this.state.captchaResponse,\n    });\n  };\n\n  handleCaptchaResponse = (response) => {\n    this.setState({\n      captchaResponse: response,\n    });\n  };\n\n  handleTosCheckbox = (event, checked) => {\n    this.setState({\n      agreed: checked,\n    });\n  };\n\n  refUsername = (username) => {\n    this.username = username;\n  };\n\n  refEmail = (email) => {\n    this.email = email;\n  };\n\n  refPassword = (password) => {\n    this.password = password;\n  };\n\n  renderCaptcha() {\n    if (!this.props.useReCaptcha) {\n      return null;\n    }\n    return (\n      <FormGroup>\n        <ReCaptcha\n          sitekey={this.props.reCaptchaSiteKey}\n          onResponse={this.handleCaptchaResponse}\n          theme=\"dark\"\n        />\n      </FormGroup>\n    );\n  }\n\n  render() {\n    const { t, error } = this.props;\n    const { agreed, busy } = this.state;\n\n    return (\n      <Form className=\"RegisterForm\" onSubmit={this.handleSubmit}>\n        {error && <FormGroup>{error.message}</FormGroup>}\n        <SocialLogin />\n        <Separator />\n        <FormGroup>\n          <TextField\n            ref={this.refUsername}\n            className=\"RegisterForm-field\"\n            placeholder={t('login.username')}\n            icon={<UserIcon color=\"#9f9d9e\" />}\n            autoFocus\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refEmail}\n            className=\"RegisterForm-field\"\n            type=\"email\"\n            placeholder={t('login.email')}\n            icon={<EmailIcon color=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refPassword}\n            className=\"RegisterForm-field\"\n            type=\"password\"\n            placeholder={t('login.password')}\n            icon={<PasswordIcon color=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n\n        {this.renderCaptcha()}\n\n        <FormGroup>\n          <Checkbox\n            style={{ float: 'left', width: 'auto' }}\n            checked={agreed}\n            onCheck={this.handleTosCheckbox}\n          />\n          <Interpolate\n            i18nKey=\"login.agree\"\n            privacyPolicy={\n              <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"/privacy.html\">\n                {t('login.privacyPolicy')}\n              </a>\n            }\n          />\n        </FormGroup>\n\n        <FormGroup>\n          <Button\n            className=\"RegisterForm-submit\"\n            disabled={busy || !agreed}\n          >\n            {busy\n              ? <div className=\"Button-loading\"><Loader size=\"tiny\" /></div>\n              : t('login.register')\n            }\n          </Button>\n        </FormGroup>\n      </Form>\n    );\n  }\n}\n\nexport default enhance(RegisterForm);\n"]}