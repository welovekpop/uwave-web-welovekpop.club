{"version":3,"sources":["components/Dialogs/LoginDialog/RegisterForm.js"],"names":["React","PropTypes","translate","Interpolate","FormControlLabel","Checkbox","CircularProgress","EmailIcon","PasswordIcon","UserIcon","Form","FormGroup","TextField","Button","ReCaptcha","SocialLogin","Separator","enhance","RegisterForm","state","busy","agreed","captchaResponse","handleSubmit","event","preventDefault","setState","props","onRegister","username","value","email","password","grecaptcha","handleCaptchaResponse","response","handleTosCheckbox","checked","refUsername","refEmail","refPassword","componentWillReceiveProps","renderCaptcha","useReCaptcha","reCaptchaSiteKey","render","t","error","supportsSocialAuth","message","Component","propTypes","func","isRequired","bool","string","object"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate, Interpolate } from 'react-i18next';\nimport { FormControlLabel } from 'material-ui/Form';\nimport Checkbox from 'material-ui/Checkbox';\nimport { CircularProgress } from 'material-ui/Progress';\nimport EmailIcon from '@material-ui/icons/Email';\nimport PasswordIcon from '@material-ui/icons/Lock';\nimport UserIcon from '@material-ui/icons/Person';\nimport Form from '../../Form';\nimport FormGroup from '../../Form/Group';\nimport TextField from '../../Form/TextField';\nimport Button from '../../Form/Button';\nimport ReCaptcha from '../../ReCaptcha';\nimport SocialLogin from './SocialLogin';\nimport Separator from './Separator';\n\nconst enhance = translate();\n\nclass RegisterForm extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    useReCaptcha: PropTypes.bool,\n    reCaptchaSiteKey: PropTypes.string,\n    supportsSocialAuth: PropTypes.bool,\n    error: PropTypes.object,\n\n    onRegister: PropTypes.func,\n  };\n\n  state = {\n    busy: false,\n    agreed: false,\n    captchaResponse: null,\n  };\n\n  componentWillReceiveProps() {\n    this.setState({ busy: false });\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.setState({ busy: true });\n    this.props.onRegister({\n      username: this.username.value,\n      email: this.email.value,\n      password: this.password.value,\n      grecaptcha: this.state.captchaResponse,\n    });\n  };\n\n  handleCaptchaResponse = (response) => {\n    this.setState({\n      captchaResponse: response,\n    });\n  };\n\n  handleTosCheckbox = (event, checked) => {\n    this.setState({\n      agreed: checked,\n    });\n  };\n\n  refUsername = (username) => {\n    this.username = username;\n  };\n\n  refEmail = (email) => {\n    this.email = email;\n  };\n\n  refPassword = (password) => {\n    this.password = password;\n  };\n\n  renderCaptcha() {\n    if (!this.props.useReCaptcha) {\n      return null;\n    }\n    return (\n      <FormGroup>\n        <ReCaptcha\n          sitekey={this.props.reCaptchaSiteKey}\n          onResponse={this.handleCaptchaResponse}\n          theme=\"dark\"\n        />\n      </FormGroup>\n    );\n  }\n\n  render() {\n    const { t, error, supportsSocialAuth } = this.props;\n    const { agreed, busy } = this.state;\n\n    return (\n      <Form className=\"RegisterForm\" onSubmit={this.handleSubmit}>\n        {error && <FormGroup>{error.message}</FormGroup>}\n        {supportsSocialAuth && (\n          <React.Fragment>\n            <SocialLogin />\n            <Separator />\n          </React.Fragment>\n        )}\n        <FormGroup>\n          <TextField\n            ref={this.refUsername}\n            className=\"RegisterForm-field\"\n            placeholder={t('login.username')}\n            icon={<UserIcon nativeColor=\"#9f9d9e\" />}\n            autoFocus\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refEmail}\n            className=\"RegisterForm-field\"\n            type=\"email\"\n            placeholder={t('login.email')}\n            icon={<EmailIcon nativeColor=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n        <FormGroup>\n          <TextField\n            ref={this.refPassword}\n            className=\"RegisterForm-field\"\n            type=\"password\"\n            placeholder={t('login.password')}\n            icon={<PasswordIcon nativeColor=\"#9f9d9e\" />}\n          />\n        </FormGroup>\n\n        {this.renderCaptcha()}\n\n        <FormGroup>\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={agreed}\n                onChange={this.handleTosCheckbox}\n              />\n            }\n            label={\n              <Interpolate\n                i18nKey=\"login.agree\"\n                privacyPolicy={\n                  <a target=\"_blank\" rel=\"noreferrer noopener\" href=\"/privacy.html\">\n                    {t('login.privacyPolicy')}\n                  </a>\n                }\n              />\n            }\n          />\n        </FormGroup>\n\n        <FormGroup>\n          <Button\n            className=\"RegisterForm-submit\"\n            disabled={busy || !agreed}\n          >\n            {busy\n              ? <div className=\"Button-loading\"><CircularProgress size=\"100%\" /></div>\n              : t('login.register')\n            }\n          </Button>\n        </FormGroup>\n      </Form>\n    );\n  }\n}\n\nexport default enhance(RegisterForm);\n"],"file":"RegisterForm.js"}