{"version":3,"sources":["components/UserCard/index.js"],"names":["React","PropTypes","RenderToLayer","UserCard","UserCardWrapper","state","positionDiffX","positionDiffY","refContainer","container","shouldFit","fitInsideWindow","componentDidMount","componentDidUpdate","card","firstChild","rect","getBoundingClientRect","offsetBottom","window","innerHeight","bottom","setState","render","props","onClose","position","left","x","top","y","Component","propTypes","func","isRequired","shape","number"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,aAAP,MAA0B,oCAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;;IAEMC,e;;;;;;;;;;;;wJASJC,K,GAAQ;AACNC,qBAAe,CADT;AAENC,qBAAe;AAFT,K,QA4BRC,Y,GAAe,UAACC,SAAD,EAAe;AAC5B,YAAKA,SAAL,GAAiBA,SAAjB;AACA,UAAI,MAAKC,SAAL,IAAkBD,SAAtB,EAAiC;AAC/B,cAAKE,eAAL;AACD;AACF,K;;;4BA5BDC,iB,gCAAoB;AAClB,SAAKF,SAAL,GAAiB,IAAjB;AACD,G;;4BAEDG,kB,iCAAqB;AACnB,SAAKH,SAAL,GAAiB,IAAjB;AACD,G;;4BAEDC,e,8BAAkB;AAChB,QAAI,CAAC,KAAKF,SAAV,EAAqB;AACnB;AACD;;AAED,QAAMK,OAAO,KAAKL,SAAL,CAAeM,UAA5B;AACA,QAAMC,OAAOF,KAAKG,qBAAL,EAAb;AACA,QAAMC,eAAeC,OAAOC,WAAP,GAAqBJ,KAAKK,MAA/C;AACA,QAAIH,eAAe,CAAnB,EAAsB;AACpB,WAAKI,QAAL,CAAc;AACZf,uBAAeW,eAAe;AADlB,OAAd;AAGD;AACF,G;;4BASDK,M,qBAAS;AAAA;;AAAA,iBAKH,KAAKC,KALF;AAAA,QAELC,OAFK,UAELA,OAFK;AAAA,QAGLC,QAHK,UAGLA,QAHK;AAAA,QAIFF,KAJE;;AAAA,iBAMkC,KAAKnB,KANvC;AAAA,QAMCC,aAND,UAMCA,aAND;AAAA,QAMgBC,aANhB,UAMgBA,aANhB;;;AAQP,gBACG,aADH;AAAA;AAAA,0BAGwBkB,OAHxB;AAAA,cAIY;AAAA,eACN;AAAA;AAAA;AACE,mBAAO;AACLC,wBAAU,UADL;AAELC,oBAAMD,SAASE,CAAT,GAAatB,aAFd;AAGLuB,mBAAKH,SAASI,CAAT,GAAavB;AAHb,aADT;AAME,iBAAK,OAAKC;AANZ;AAQE,8BAAC,QAAD,EAAcgB,KAAd;AARF,SADM;AAAA;AAJZ;AAkBD,G;;;EAtE2BxB,MAAM+B,S;;AAA9B3B,e,CACG4B,S,2CAAY;AACjBP,WAASxB,UAAUgC,IAAV,CAAeC,UADP;AAEjBR,YAAUzB,UAAUkC,KAAV,CAAgB;AACxBP,OAAG3B,UAAUmC,MAAV,CAAiBF,UADI;AAExBJ,OAAG7B,UAAUmC,MAAV,CAAiBF;AAFI,GAAhB,EAGPA;AALc,C;;;AAwErB,eAAe9B,eAAf","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport RenderToLayer from 'material-ui/internal/RenderToLayer';\nimport UserCard from './UserCard';\n\nclass UserCardWrapper extends React.Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    position: PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired\n    }).isRequired\n  };\n\n  state = {\n    positionDiffX: 0,\n    positionDiffY: 0\n  };\n\n  componentDidMount() {\n    this.shouldFit = true;\n  }\n\n  componentDidUpdate() {\n    this.shouldFit = true;\n  }\n\n  fitInsideWindow() {\n    if (!this.container) {\n      return;\n    }\n\n    const card = this.container.firstChild;\n    const rect = card.getBoundingClientRect();\n    const offsetBottom = window.innerHeight - rect.bottom;\n    if (offsetBottom < 0) {\n      this.setState({\n        positionDiffY: offsetBottom - 1\n      });\n    }\n  }\n\n  refContainer = (container) => {\n    this.container = container;\n    if (this.shouldFit && container) {\n      this.fitInsideWindow();\n    }\n  };\n\n  render() {\n    const {\n      onClose,\n      position,\n      ...props\n    } = this.props;\n    const { positionDiffX, positionDiffY } = this.state;\n\n    return (\n      <RenderToLayer\n        open\n        componentClickAway={onClose}\n        render={() => (\n          <div\n            style={{\n              position: 'absolute',\n              left: position.x + positionDiffX,\n              top: position.y + positionDiffY\n            }}\n            ref={this.refContainer}\n          >\n            <UserCard {...props} />\n          </div>\n        )}\n      />\n    );\n  }\n}\n\nexport default UserCardWrapper;\n"]}