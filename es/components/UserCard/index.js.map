{"version":3,"sources":["components/UserCard/index.js"],"names":["React","PropTypes","RenderToLayer","UserCard","UserCardWrapper","state","positionDiffX","positionDiffY","refContainer","container","componentDidMount","fitInsideWindow","componentDidUpdate","card","firstChild","rect","getBoundingClientRect","offsetBottom","window","innerHeight","bottom","setState","render","props","onClose","position","left","x","top","y","Component","propTypes","func","isRequired","shape","number"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,aAAP,MAA0B,oCAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;;IAEMC,e;;;;;;;;;;;;wJASJC,K,GAAQ;AACNC,qBAAe,CADT;AAENC,qBAAe;AAFT,K,QAwBRC,Y,GAAe,UAACC,SAAD,EAAe;AAC5B,YAAKA,SAAL,GAAiBA,SAAjB;AACD,K;;;4BArBDC,iB,gCAAoB;AAClB,SAAKC,eAAL;AACD,G;;4BAEDC,kB,iCAAqB;AACnB,SAAKD,eAAL;AACD,G;;4BAEDA,e,8BAAkB;AAChB,QAAME,OAAO,KAAKJ,SAAL,CAAeK,UAA5B;AACA,QAAMC,OAAOF,KAAKG,qBAAL,EAAb;AACA,QAAMC,eAAeC,OAAOC,WAAP,GAAqBJ,KAAKK,MAA/C;AACA,QAAIH,eAAe,CAAnB,EAAsB;AACpB,WAAKI,QAAL,CAAc;AACZd,uBAAeU;AADH,OAAd;AAGD;AACF,G;;4BAMDK,M,qBAAS;AAAA;;AAAA,iBAKH,KAAKC,KALF;AAAA,QAELC,OAFK,UAELA,OAFK;AAAA,QAGLC,QAHK,UAGLA,QAHK;AAAA,QAIFF,KAJE;;AAAA,iBAMkC,KAAKlB,KANvC;AAAA,QAMCC,aAND,UAMCA,aAND;AAAA,QAMgBC,aANhB,UAMgBA,aANhB;;;AAQP,gBACG,aADH;AAAA;AAAA,0BAGwBiB,OAHxB;AAAA,cAIY;AAAA,eACN;AAAA;AAAA;AACE,mBAAO;AACLC,wBAAU,UADL;AAELC,oBAAMD,SAASE,CAAT,GAAarB,aAFd;AAGLsB,mBAAKH,SAASI,CAAT,GAAatB;AAHb,aADT;AAME,iBAAK,OAAKC;AANZ;AAQE,8BAAC,QAAD,EAAce,KAAd;AARF,SADM;AAAA;AAJZ;AAkBD,G;;;EA/D2BvB,MAAM8B,S;;AAA9B1B,e,CACG2B,S,2CAAY;AACjBP,WAASvB,UAAU+B,IAAV,CAAeC,UADP;AAEjBR,YAAUxB,UAAUiC,KAAV,CAAgB;AACxBP,OAAG1B,UAAUkC,MAAV,CAAiBF,UADI;AAExBJ,OAAG5B,UAAUkC,MAAV,CAAiBF;AAFI,GAAhB,EAGPA;AALc,C;;;AAiErB,eAAe7B,eAAf","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport RenderToLayer from 'material-ui/internal/RenderToLayer';\nimport UserCard from './UserCard';\n\nclass UserCardWrapper extends React.Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    position: PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired\n    }).isRequired\n  };\n\n  state = {\n    positionDiffX: 0,\n    positionDiffY: 0\n  };\n\n  componentDidMount() {\n    this.fitInsideWindow();\n  }\n\n  componentDidUpdate() {\n    this.fitInsideWindow();\n  }\n\n  fitInsideWindow() {\n    const card = this.container.firstChild;\n    const rect = card.getBoundingClientRect();\n    const offsetBottom = window.innerHeight - rect.bottom;\n    if (offsetBottom < 0) {\n      this.setState({\n        positionDiffY: offsetBottom\n      });\n    }\n  }\n\n  refContainer = (container) => {\n    this.container = container;\n  };\n\n  render() {\n    const {\n      onClose,\n      position,\n      ...props\n    } = this.props;\n    const { positionDiffX, positionDiffY } = this.state;\n\n    return (\n      <RenderToLayer\n        open\n        componentClickAway={onClose}\n        render={() => (\n          <div\n            style={{\n              position: 'absolute',\n              left: position.x + positionDiffX,\n              top: position.y + positionDiffY\n            }}\n            ref={this.refContainer}\n          >\n            <UserCard {...props} />\n          </div>\n        )}\n      />\n    );\n  }\n}\n\nexport default UserCardWrapper;\n"]}