{"version":3,"sources":["components/FooterBar/index.js"],"names":["cx","React","PropTypes","translate","NextMedia","UserInfo","SkipButton","WaitlistButton","ResponseBar","RandomizePlaylistsNotice","enhance","FooterBar","handleSkipTurn","reason","props","showSkip","userIsDJ","onModSkip","onSkipTurn","remove","handleJoinWaitlist","user","joinWaitlist","handleLeaveWaitlist","leaveWaitlist","render","t","openLoginDialog","openRegisterDialog","togglePlaylistManager","toggleSettings","onFavorite","onUpvote","onDownvote","userInWaitlist","shouldRandomizePlaylists","playlist","nextMedia","baseEta","mediaEndTime","voteStats","className","isGuest","canVote","currentDJ","waitlistIsLocked","toUpperCase","Component","contextTypes","muiTheme","object","propTypes","func","isRequired","string","number","bool"],"mappings":"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","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\n\nimport NextMedia from './NextMedia';\nimport UserInfo from './UserInfo';\nimport SkipButton from './SkipButton';\nimport WaitlistButton from './WaitlistButton';\nimport ResponseBar from './Responses/Bar';\n\nimport RandomizePlaylistsNotice from '../../_wlk/RandomizePlaylistsNotice';\n\nconst enhance = translate();\n\nclass FooterBar extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    baseEta: PropTypes.number,\n    mediaEndTime: PropTypes.number,\n    nextMedia: PropTypes.object,\n    playlist: PropTypes.object,\n    user: PropTypes.object,\n    userInWaitlist: PropTypes.bool.isRequired,\n    userIsDJ: PropTypes.bool.isRequired,\n    currentDJ: PropTypes.object,\n    showSkip: PropTypes.bool,\n    waitlistIsLocked: PropTypes.bool.isRequired,\n    voteStats: PropTypes.object,\n    shouldRandomizePlaylists: PropTypes.bool,\n\n    openLoginDialog: PropTypes.func,\n    openRegisterDialog: PropTypes.func,\n    togglePlaylistManager: PropTypes.func,\n    toggleSettings: PropTypes.func,\n    joinWaitlist: PropTypes.func,\n    leaveWaitlist: PropTypes.func,\n    onSkipTurn: PropTypes.func.isRequired,\n    onModSkip: PropTypes.func.isRequired,\n    onFavorite: PropTypes.func,\n    onUpvote: PropTypes.func,\n    onDownvote: PropTypes.func,\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object,\n  };\n\n  handleSkipTurn = (reason) => {\n    if (!this.props.showSkip) {\n      return null;\n    }\n    if (!this.props.userIsDJ) {\n      return this.props.onModSkip(reason);\n    }\n    return this.props.onSkipTurn({ remove: false });\n  }\n\n  handleJoinWaitlist = () => {\n    if (this.props.user) {\n      return this.props.joinWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  handleLeaveWaitlist = () => {\n    if (this.props.userIsDJ) {\n      return this.props.onSkipTurn({ remove: true });\n    } else if (this.props.user) {\n      return this.props.leaveWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  render() {\n    const {\n      t,\n      openLoginDialog, openRegisterDialog,\n      togglePlaylistManager, toggleSettings,\n      onFavorite, onUpvote, onDownvote,\n    } = this.props;\n    const {\n      user, userIsDJ, userInWaitlist,\n      shouldRandomizePlaylists,\n      playlist, nextMedia, showSkip,\n      baseEta, mediaEndTime,\n      voteStats,\n    } = this.props;\n    const className = cx('FooterBar', this.props.className);\n\n    if (user && !user.isGuest) {\n      const canVote = !userIsDJ && !!this.props.currentDJ;\n      return (\n        <div className={className}>\n          <div className=\"FooterBar-user\">\n            <UserInfo\n              user={user}\n              onClick={toggleSettings}\n            />\n          </div>\n          <button\n            className=\"FooterBar-next\"\n            onClick={togglePlaylistManager}\n          >\n            {shouldRandomizePlaylists ? (\n              <RandomizePlaylistsNotice />\n            ) : (\n              <NextMedia\n                playlist={playlist}\n                nextMedia={nextMedia}\n                userInWaitlist={userInWaitlist}\n                userIsDJ={userIsDJ}\n                baseEta={baseEta}\n                mediaEndTime={mediaEndTime}\n              />\n            )}\n          </button>\n          <div\n            className={cx(\n              'FooterBar-responses',\n              !showSkip && 'FooterBar-responses--spaced',\n            )}\n          >\n            <ResponseBar\n              disabled={!canVote}\n              onFavorite={onFavorite}\n              onUpvote={onUpvote}\n              onDownvote={onDownvote}\n              {...voteStats}\n            />\n          </div>\n          {this.props.showSkip && (\n            <div className=\"FooterBar-skip\">\n              <SkipButton\n                userIsDJ={userIsDJ}\n                currentDJ={this.props.currentDJ}\n                onSkip={this.handleSkipTurn}\n              />\n            </div>\n          )}\n          <WaitlistButton\n            isLocked={this.props.waitlistIsLocked}\n            userInWaitlist={userInWaitlist}\n            onClick={userInWaitlist ? this.handleLeaveWaitlist : this.handleJoinWaitlist}\n          />\n        </div>\n      );\n    }\n    return (\n      <div className={className}>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--login\"\n          onClick={openLoginDialog}\n        >\n          {t('login.login').toUpperCase()}\n        </button>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--register\"\n          onClick={openRegisterDialog}\n        >\n          {t('login.register').toUpperCase()}\n        </button>\n        <div className=\"FooterBar-guest\">\n          You have to log in if you want to play!\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default enhance(FooterBar);\n"],"file":"index.js"}