{"version":3,"sources":["components/FooterBar/index.js"],"names":["cx","React","PropTypes","translate","NextMedia","UserInfo","SkipButton","WaitlistButton","ResponseBar","RandomizePlaylistsNotice","FooterBar","props","handleSkipTurn","bind","handleJoinWaitlist","handleLeaveWaitlist","reason","showSkip","userIsDJ","onModSkip","onSkipTurn","remove","user","joinWaitlist","leaveWaitlist","render","t","openLoginDialog","openRegisterDialog","togglePlaylistManager","toggleSettings","onFavorite","onUpvote","onDownvote","userInWaitlist","shouldRandomizePlaylists","playlist","nextMedia","baseEta","mediaEndTime","voteStats","className","isGuest","canVote","currentDJ","waitlistIsLocked","toUpperCase","Component","contextTypes","muiTheme","object","propTypes","func","isRequired","string","number","bool"],"mappings":"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","file":"index.js","sourcesContent":["import cx from 'classnames';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { translate } from 'react-i18next';\n\nimport NextMedia from './NextMedia';\nimport UserInfo from './UserInfo';\nimport SkipButton from './SkipButton';\nimport WaitlistButton from './WaitlistButton';\nimport ResponseBar from './Responses/Bar';\n\nimport RandomizePlaylistsNotice from '../../_wlk/RandomizePlaylistsNotice';\n\n@translate()\nexport default class FooterBar extends React.Component {\n  static propTypes = {\n    t: PropTypes.func.isRequired,\n    className: PropTypes.string,\n    baseEta: PropTypes.number,\n    mediaEndTime: PropTypes.number,\n    nextMedia: PropTypes.object,\n    playlist: PropTypes.object,\n    user: PropTypes.object,\n    userInWaitlist: PropTypes.bool.isRequired,\n    userIsDJ: PropTypes.bool.isRequired,\n    currentDJ: PropTypes.object,\n    showSkip: PropTypes.bool,\n    waitlistIsLocked: PropTypes.bool.isRequired,\n    voteStats: PropTypes.object,\n    shouldRandomizePlaylists: PropTypes.bool,\n\n    openLoginDialog: PropTypes.func,\n    openRegisterDialog: PropTypes.func,\n    togglePlaylistManager: PropTypes.func,\n    toggleSettings: PropTypes.func,\n    joinWaitlist: PropTypes.func,\n    leaveWaitlist: PropTypes.func,\n    onSkipTurn: PropTypes.func.isRequired,\n    onModSkip: PropTypes.func.isRequired,\n    onFavorite: PropTypes.func,\n    onUpvote: PropTypes.func,\n    onDownvote: PropTypes.func\n  };\n\n  static contextTypes = {\n    muiTheme: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.handleSkipTurn = this.handleSkipTurn.bind(this);\n    this.handleJoinWaitlist = this.handleJoinWaitlist.bind(this);\n    this.handleLeaveWaitlist = this.handleLeaveWaitlist.bind(this);\n  }\n\n  handleSkipTurn(reason) {\n    if (!this.props.showSkip) {\n      return null;\n    }\n    if (!this.props.userIsDJ) {\n      return this.props.onModSkip(reason);\n    }\n    return this.props.onSkipTurn({ remove: false });\n  }\n\n  handleJoinWaitlist() {\n    if (this.props.user) {\n      return this.props.joinWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  handleLeaveWaitlist() {\n    if (this.props.userIsDJ) {\n      return this.props.onSkipTurn({ remove: true });\n    } else if (this.props.user) {\n      return this.props.leaveWaitlist(this.props.user);\n    }\n    return null;\n  }\n\n  render() {\n    const {\n      t,\n      openLoginDialog, openRegisterDialog,\n      togglePlaylistManager, toggleSettings,\n      onFavorite, onUpvote, onDownvote\n    } = this.props;\n    const {\n      user, userIsDJ, userInWaitlist,\n      shouldRandomizePlaylists,\n      playlist, nextMedia, showSkip,\n      baseEta, mediaEndTime,\n      voteStats\n    } = this.props;\n    const className = cx('FooterBar', this.props.className);\n\n    if (user && !user.isGuest) {\n      const canVote = !userIsDJ && !!this.props.currentDJ;\n      return (\n        <div className={className}>\n          <div className=\"FooterBar-user\">\n            <UserInfo\n              user={user}\n              onClick={toggleSettings}\n            />\n          </div>\n          <button\n            className=\"FooterBar-next\"\n            onClick={togglePlaylistManager}\n          >\n            {shouldRandomizePlaylists ? (\n              <RandomizePlaylistsNotice />\n            ) : (\n              <NextMedia\n                playlist={playlist}\n                nextMedia={nextMedia}\n                userInWaitlist={userInWaitlist}\n                userIsDJ={userIsDJ}\n                baseEta={baseEta}\n                mediaEndTime={mediaEndTime}\n              />\n            )}\n          </button>\n          <div\n            className={cx(\n              'FooterBar-responses',\n              !showSkip && 'FooterBar-responses--spaced'\n            )}\n          >\n            <ResponseBar\n              disabled={!canVote}\n              onFavorite={onFavorite}\n              onUpvote={onUpvote}\n              onDownvote={onDownvote}\n              {...voteStats}\n            />\n          </div>\n          {this.props.showSkip && (\n            <div className=\"FooterBar-skip\">\n              <SkipButton\n                userIsDJ={userIsDJ}\n                currentDJ={this.props.currentDJ}\n                onSkip={this.handleSkipTurn}\n              />\n            </div>\n          )}\n          <WaitlistButton\n            isLocked={this.props.waitlistIsLocked}\n            userInWaitlist={userInWaitlist}\n            onClick={userInWaitlist ? this.handleLeaveWaitlist : this.handleJoinWaitlist}\n          />\n        </div>\n      );\n    }\n    return (\n      <div className={className}>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--login\"\n          onClick={openLoginDialog}\n        >\n          {t('login.login').toUpperCase()}\n        </button>\n        <button\n          className=\"FooterAuthButton FooterAuthButton--register\"\n          onClick={openRegisterDialog}\n        >\n          {t('login.register').toUpperCase()}\n        </button>\n        <div className=\"FooterBar-guest\">\n          You have to log in if you want to play!\n        </div>\n      </div>\n    );\n  }\n}\n"]}