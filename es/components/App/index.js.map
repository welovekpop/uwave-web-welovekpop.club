{"version":3,"sources":["components/App/index.js"],"names":["React","PropTypes","DragDropContext","compose","toClass","withState","mapProps","HTML5Backend","Snackbar","FooterBar","HeaderBar","Video","ErrorArea","Overlays","PlaylistManager","RoomHistory","SettingsManager","AdminProxy","About","ConnectionIndicator","SidePanels","Dialogs","AddToPlaylistMenu","DragLayer","MovedNotification","localStorage","_session","length","wlkSawMoveMessage","err","seen","setSeen","props","open","onClose","App","activeOverlay","isConnected","settings","hasAboutPage","onCloseOverlay","videoEnabled","videoSize","muted","volume","propTypes","string","bool","isRequired","object","func"],"mappings":"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","file":"index.js","sourcesContent":["/* global localStorage */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { DragDropContext } from 'react-dnd';\nimport compose from 'recompose/compose';\nimport toClass from 'recompose/toClass';\nimport withState from 'recompose/withState';\nimport mapProps from 'recompose/mapProps';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport Snackbar from 'material-ui/Snackbar';\n\nimport FooterBar from '../../containers/FooterBar';\nimport HeaderBar from '../../containers/HeaderBar';\nimport Video from '../../containers/Video';\nimport ErrorArea from '../../containers/ErrorArea';\nimport Overlays from './Overlays';\nimport PlaylistManager from '../../containers/PlaylistManager';\nimport RoomHistory from '../../containers/RoomHistory';\nimport SettingsManager from '../../containers/SettingsManager';\nimport AdminProxy from '../AdminProxy';\nimport About from '../../containers/About';\nimport ConnectionIndicator from '../ConnectionIndicator';\n\nimport SidePanels from '../../containers/SidePanels';\nimport Dialogs from '../Dialogs';\nimport AddToPlaylistMenu from '../../containers/AddToPlaylistMenu';\nimport DragLayer from '../../containers/DragLayer';\n\nconst MovedNotification = compose(\n  withState('seen', 'setSeen', () => {\n    try {\n      // eslint-disable-next-line no-underscore-dangle\n      return !localStorage._session || localStorage._session.length <= 30 ||\n        !!localStorage.wlkSawMoveMessage;\n    } catch (err) {\n      return false;\n    }\n  }),\n  mapProps(({ seen, setSeen, ...props }) => ({\n    ...props,\n    open: !seen,\n    onClose: () => {\n      try {\n        localStorage.wlkSawMoveMessage = '1';\n      } catch (err) {\n        // Nothing\n      }\n      setSeen(true);\n    },\n  })),\n)(Snackbar);\n\nconst App = ({\n  activeOverlay,\n  isConnected,\n  settings,\n  hasAboutPage,\n  onCloseOverlay,\n}) => (\n  <div className=\"App\">\n    <div className=\"AppColumn AppColumn--left\">\n      <div className=\"AppRow AppRow--top\">\n        <HeaderBar\n          className=\"App-header\"\n          title=\"Ã¼Wave\"\n        />\n      </div>\n      <div className=\"AppRow AppRow--middle\">\n        <Video\n          enabled={settings.videoEnabled}\n          size={settings.videoSize}\n          isMuted={settings.muted}\n          volume={settings.volume}\n        />\n        <ErrorArea />\n        <ConnectionIndicator isConnected={isConnected} />\n      </div>\n      <Overlays transitionName=\"Overlay\" active={activeOverlay}>\n        {hasAboutPage && <About\n          key=\"about\"\n          onCloseOverlay={onCloseOverlay}\n        />}\n        <AdminProxy\n          key=\"admin\"\n          onCloseOverlay={onCloseOverlay}\n        />\n        <PlaylistManager\n          key=\"playlistManager\"\n          onCloseOverlay={onCloseOverlay}\n        />\n        <RoomHistory\n          key=\"roomHistory\"\n          onCloseOverlay={onCloseOverlay}\n        />\n        <SettingsManager\n          key=\"settings\"\n          onCloseOverlay={onCloseOverlay}\n        />\n      </Overlays>\n      <FooterBar className=\"AppRow AppRow--bottom\" />\n    </div>\n\n    <div className=\"AppColumn AppColumn--right\">\n      <SidePanels />\n    </div>\n\n    <Dialogs />\n\n    <AddToPlaylistMenu />\n    <DragLayer />\n    <MovedNotification\n      message=\"WLK was recently updated! You will need to log in again, because of some security improvements that have been made.\"\n    />\n  </div>\n);\n\nApp.propTypes = {\n  activeOverlay: PropTypes.string,\n  isConnected: PropTypes.bool.isRequired,\n  settings: PropTypes.object.isRequired,\n  hasAboutPage: PropTypes.bool,\n\n  onCloseOverlay: PropTypes.func.isRequired,\n};\n\nexport default compose(\n  DragDropContext(HTML5Backend),\n  // DragDropContext needs to be able to set a ref on the component, so we can't\n  // use a stateless function directly.\n  toClass,\n)(App);\n"]}